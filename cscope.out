cscope 15 $HOME/antiword-0.37               0000587029
	@antiword.h

9 #i‡!
deföed
(
__™tiw‹d_h
)

10 
	#__™tiw‹d_h
 1

	)

12 #i‡
deföed
(
DEBUG
Ë=deföed(
NDEBUG
)

13 #îr‹ 
Exa˘ly
 
⁄e
 
of
 
the
 
DEBUG
 
™d
 
NDEBUG
 
Êags
 
MUST
 
be
 
£t


16 
	~<°dio.h
>

17 
	~<limôs.h
>

18 
	~<sys/ty≥s.h
>

19 
	~"w‹dc⁄°.h
"

20 
	~"w‹dty≥s.h
"

21 
	~"Áû.h
"

22 
	~"debug.h
"

25 #i‡!
deföed
(
PATH_MAX
)

26 #i‡
deföed
(
MAXPATHLEN
)

27 
	#PATH_MAX
 
MAXPATHLEN


	)

29 
	#PATH_MAX
 1024

	)

33 #i‡!
deföed
(
CHAR_BIT
)

34 
	#CHAR_BIT
 8

	)

37 #i‡!
deföed
(
TIME_T_MIN
)

38 
	#TIME_T_MIN
 ((
time_t
)0 < (time_t)-1 ?\

39 (
time_t
)0 :\

40 (
time_t
)1 << (—ime_tË* 
CHAR_BIT
 - 1))

	)

43 #i‡!
deföed
(
TIME_T_MAX
)

44 #i‡
deföed
(
__TURBOC__
)

45 
	#TIME_T_MAX
 (
LONG_MAX
)

	)

47 
	#TIME_T_MAX
 (~(
time_t
)0 - 
TIME_T_MIN
)

	)

51 #i‡!
deföed
(
SIZE_T_MAX
)

52 
	#SIZE_T_MAX
 (~(
size_t
)0)

	)

55 
	#FILE_SEPARATOR
 "/"

	)

58 
	#PNG_CN_IDAT
 0x49444154

	)

59 
	#PNG_CN_IEND
 0x49454e44

	)

60 
	#PNG_CN_IHDR
 0x49484452

	)

61 
	#PNG_CN_PLTE
 0x504c5445

	)

64 
	#MIN_SCREEN_WIDTH
 45

	)

65 
	#DEFAULT_SCREEN_WIDTH
 76

	)

66 
	#MAX_SCREEN_WIDTH
 145

	)

68 #i‡
deföed
(
__riscos
)

70 
	#MIN_SCALE_FACTOR
 25

	)

71 
	#DEFAULT_SCALE_FACTOR
 100

	)

72 
	#MAX_SCALE_FACTOR
 400

	)

75 
	#FILETYPE_MSWORD
 0x´6

	)

76 
	#FILETYPE_DRAW
 0xaff

	)

77 
	#FILETYPE_JPEG
 0xc85

	)

78 
	#FILETYPE_POSCRIPT
 0xff5

	)

79 
	#FILETYPE_SPRITE
 0xff9

	)

80 
	#FILETYPE_TEXT
 0xfff

	)

83 
	#CHOICES_DEFAULT_BUTTON
 3

	)

84 
	#CHOICES_SAVE_BUTTON
 2

	)

85 
	#CHOICES_CANCEL_BUTTON
 1

	)

86 
	#CHOICES_APPLY_BUTTON
 0

	)

87 
	#CHOICES_BREAK_BUTTON
 6

	)

88 
	#CHOICES_BREAK_WRITEABLE
 7

	)

89 
	#CHOICES_BREAK_UP_BUTTON
 8

	)

90 
	#CHOICES_BREAK_DOWN_BUTTON
 9

	)

91 
	#CHOICES_NO_BREAK_BUTTON
 11

	)

92 
	#CHOICES_AUTOFILETYPE_BUTTON
 14

	)

93 
	#CHOICES_HIDDEN_TEXT_BUTTON
 22

	)

94 
	#CHOICES_WITH_IMAGES_BUTTON
 17

	)

95 
	#CHOICES_NO_IMAGES_BUTTON
 18

	)

96 
	#CHOICES_TEXTONLY_BUTTON
 19

	)

97 
	#CHOICES_SCALE_WRITEABLE
 25

	)

98 
	#CHOICES_SCALE_UP_BUTTON
 26

	)

99 
	#CHOICES_SCALE_DOWN_BUTTON
 27

	)

102 
	#SCALE_CANCEL_BUTTON
 1

	)

103 
	#SCALE_SCALE_BUTTON
 0

	)

104 
	#SCALE_SCALE_WRITEABLE
 3

	)

105 
	#SCALE_50_PCT
 5

	)

106 
	#SCALE_75_PCT
 6

	)

107 
	#SCALE_100_PCT
 7

	)

108 
	#SCALE_150_PCT
 8

	)

111 
	#SAVEMENU_SCALEVIEW
 0

	)

112 
	#SAVEMENU_SAVEDRAW
 1

	)

113 
	#SAVEMENU_SAVETEXT
 2

	)

116 
	#PS_LEFT_MARGIN
 (72 * 640L)

	)

117 
	#PS_RIGHT_MARGIN
 (48 * 640L)

	)

118 
	#PS_TOP_MARGIN
 (72 * 640L)

	)

119 
	#PS_BOTTOM_MARGIN
 (72 * 640L)

	)

123 
	#STREQ
(
x
,
y
Ë(*(xË=*(yË&& 
	`°rcmp
(x,yË=0)

	)

124 
	#STRNEQ
(
x
,
y
,
n
Ë(*(xË=*(yË&& 
	`°∫cmp
(x,y,nË=0)

	)

125 
	#STRCEQ
(
x
,
y
Ë(
	`°rˇ£cmp
(x,yË=0)

	)

126 
	#ñemítsof
(
a
Ë(◊Ë/ ◊[0]))

	)

127 
	#odd
(
x
Ë(((x)&0x01)!=0)

	)

128 
	#ROUND4
(
x
Ë(((x)+3)&~0x03)

	)

129 
	#ROUND128
(
x
Ë(((x)+127)&~0x7f)

	)

130 
	#BIT
(
x
Ë(1UL << (x))

	)

131 #i‡!
deföed
(
max
)

132 
	#max
(
x
,
y
Ë((x)>(y)?(x):(y))

	)

134 #i‡!
deföed
(
mö
)

135 
	#mö
(
x
,
y
Ë((x)<(y)?(x):(y))

	)

139 
	#TABLE_FONT
 "Courõr"

	)

141 
	#FONT_MONOSPACED_PLAIN
 "Courõr"

	)

142 
	#FONT_MONOSPACED_BOLD
 "Courõr-Bﬁd"

	)

143 
	#FONT_MONOSPACED_ITALIC
 "Courõr-Oblique"

	)

144 
	#FONT_MONOSPACED_BOLDITALIC
 "Courõr-BﬁdOblique"

	)

145 
	#FONT_SERIF_PLAIN
 "Times-Rom™"

	)

146 
	#FONT_SERIF_BOLD
 "Times-Bﬁd"

	)

147 
	#FONT_SERIF_ITALIC
 "Times-Ièlic"

	)

148 
	#FONT_SERIF_BOLDITALIC
 "Times-BﬁdIèlic"

	)

149 
	#FONT_SANS_SERIF_PLAIN
 "Hñvëiˇ"

	)

150 
	#FONT_SANS_SERIF_BOLD
 "Hñvëiˇ-Bﬁd"

	)

151 
	#FONT_SANS_SERIF_ITALIC
 "Hñvëiˇ-Oblique"

	)

152 
	#FONT_SANS_SERIF_BOLDITALIC
 "Hñvëiˇ-BﬁdOblique"

	)

154 
	#GLOBAL_ANTIWORD_DIR
 "/u§/sh¨e/™tiw‹d"

	)

155 
	#ANTIWORD_DIR
 ".™tiw‹d"

	)

156 
	#FONTNAMES_FILE
 "f⁄äames"

	)

159 
	#MAPPING_FILE_CP437
 "˝437.txt"

	)

161 
	#MAPPING_FILE_8859_1
 "8859-1.txt"

	)

163 
	#MAPPING_FILE_8859_2
 "8859-2.txt"

	)

164 
	#MAPPING_FILE_CP852
 "˝852.txt"

	)

165 
	#MAPPING_FILE_CP1250
 "˝1250.txt"

	)

167 
	#MAPPING_FILE_8859_5
 "8859-5.txt"

	)

168 
	#MAPPING_FILE_KOI8_R
 "koi8-r.txt"

	)

169 
	#MAPPING_FILE_KOI8_U
 "koi8-u.txt"

	)

170 
	#MAPPING_FILE_CP866
 "˝866.txt"

	)

171 
	#MAPPING_FILE_CP1251
 "˝1251.txt"

	)

173 
	#MAPPING_FILE_8859_15
 "8859-15.txt"

	)

175 
	#MAPPING_FILE_UTF_8
 "UTF-8.txt"

	)

181 
vASCII85EncodeByã
(
FILE
 *, );

182 
vASCII85EncodeAºay
(
FILE
 *, FILE *, 
size_t
);

183 
vASCII85EncodeFûe
(
FILE
 *, FILE *, 
size_t
);

185 
vDe°royTextBlockLi°
();

186 
BOOL
 
bAdd2TextBlockLi°
(c⁄° 
ãxt_block_ty≥
 *);

187 
vS∂ôBlockLi°
(
FILE
 *, 
ULONG
, ULONG, ULONG, ULONG, ULONG,

188 
ULONG
, ULONG, ULONG, 
BOOL
);

189 
BOOL
 
bExi°sHdrFå
();

190 
BOOL
 
bExi°sTextBox
();

191 
BOOL
 
bExi°sHdrTextBox
();

192 
USHORT
 
usNextCh¨
(
FILE
 *, 
li°_id_íum
, 
ULONG
 *, ULONG *, USHORT *);

193 
USHORT
 
usToHdrFåPosôi⁄
(
FILE
 *, 
ULONG
);

194 
USHORT
 
usToFoŸnŸePosôi⁄
(
FILE
 *, 
ULONG
);

195 
ULONG
 
ulCh¨Pos2FûeOff£tX
(ULONG, 
li°_id_íum
 *);

196 
ULONG
 
ulCh¨Pos2FûeOff£t
(ULONG);

197 
ULONG
 
ulHdrFåOff£t2Ch¨Pos
(ULONG);

198 
ULONG
 
ulGëSeqNumbî
(ULONG);

200 
UCHAR
 
ucGëBuŒëCh¨a˘î
(
c⁄vîsi⁄_ty≥
, 
ícodög_ty≥
);

201 
UCHAR
 
ucGëNb•Ch¨a˘î
();

202 
BOOL
 
bRódCh¨a˘îM≠pögTabÀ
(
FILE
 *);

203 
ULONG
 
ulTøn¶©eCh¨a˘îs
(
USHORT
, ULONG, , 
c⁄vîsi⁄_ty≥
,

204 
ícodög_ty≥
, 
BOOL
);

205 
ULONG
 
ulToUµî
(ULONG);

207 
vDe°royD©aBlockLi°
();

208 
BOOL
 
bAdd2D©aBlockLi°
(c⁄° 
d©a_block_ty≥
 *);

209 
ULONG
 
ulGëD©aOff£t
(
FILE
 *);

210 
BOOL
 
bSëD©aOff£t
(
FILE
 *, 
ULONG
);

211 
iNextByã
(
FILE
 *);

212 
USHORT
 
usNextW‹d
(
FILE
 *);

213 
ULONG
 
ulNextL⁄g
(
FILE
 *);

214 
USHORT
 
usNextW‹dBE
(
FILE
 *);

215 
ULONG
 
ulNextL⁄gBE
(
FILE
 *);

216 
size_t
 
tSkùByãs
(
FILE
 *, size_t);

217 
ULONG
 
ulD©aPos2FûeOff£t
(ULONG);

219 
vDe°roySmÆlBlockLi°
();

220 
BOOL
 
bCª©eSmÆlBlockLi°
(
ULONG
, c⁄° ULONG *, 
size_t
);

221 
ULONG
 
ulDïŸOff£t
(ULONG, 
size_t
);

223 
vDe°royDocumítInfoLi°
();

224 
vCª©eDocumítInfoLi°
(c⁄° 
documít_block_ty≥
 *);

225 
UCHAR
 
ucGëD›HdrFåS≥cifiˇti⁄
();

227 
BOOL
 
bAddDummyImage
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

228 
dügøm_ty≥
 *
pCª©eDügøm
(const *, const *);

229 
vPrﬁogue2
(
dügøm_ty≥
 *, );

230 
vSub°rög2Dügøm
(
dügøm_ty≥
 *,

231 *, 
size_t
, , 
UCHAR
, 
USHORT
,

232 
døwfûe_f⁄åef
, 
USHORT
, USHORT);

233 
vEndOfP¨agøph
(
dügøm_ty≥
 *, 
døwfûe_f⁄åef
, 
USHORT
, );

234 
vEndOfPage
(
dügøm_ty≥
 *, , 
BOOL
);

235 
BOOL
 
bAddTabÀRow
(
dügøm_ty≥
 *, **, ,

236 c⁄° *, 
UCHAR
);

237 
vImagePrﬁogue
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

238 
vImageEpûogue
(
dügøm_ty≥
 *);

239 
vDe°royDügøm
(
dügøm_ty≥
 *);

241 
BOOL
 
bAddD©aBlocks
(
ULONG
 , ULONG, ULONG, c⁄° ULONG *, 
size_t
);

242 
BOOL
 
bGë6DocumítD©a
(
FILE
 *, 
ULONG
,

243 c⁄° 
ULONG
 *, 
size_t
, c⁄° 
UCHAR
 *);

245 
BOOL
 
bAddTextBlocks
(
ULONG
 , ULONG, BOOL,

246 
USHORT
, 
ULONG
, c⁄° ULONG *, 
size_t
);

247 
BOOL
 
bGë6DocumítText
(
FILE
 *, BOOL, 
ULONG
,

248 c⁄° 
ULONG
 *, 
size_t
, c⁄° 
UCHAR
 *);

249 
BOOL
 
bGë8DocumítText
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

250 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

251 c⁄° 
UCHAR
 *);

253 
vPrﬁogueFMT
(
dügøm_ty≥
 *, c⁄° 
›ti⁄s_ty≥
 *);

254 
vSub°rögFMT
(
dügøm_ty≥
 *, c⁄° *, 
size_t
, ,

255 
USHORT
);

257 
vDe°royF⁄tInfoLi°
();

258 
vC‹ª˘F⁄tVÆues
(
f⁄t_block_ty≥
 *);

259 
vAdd2F⁄tInfoLi°
(c⁄° 
f⁄t_block_ty≥
 *);

260 c⁄° 
f⁄t_block_ty≥
 *
pGëNextF⁄tInfoLi°Iãm
(

261 c⁄° 
f⁄t_block_ty≥
 *);

263 
iGëF⁄tByNumbî
(
UCHAR
, 
USHORT
);

264 c⁄° *
szGëOurF⁄äame
();

265 
iF⁄äame2F⁄äumbî
(c⁄° *, 
USHORT
);

266 
vCª©e0F⁄tTabÀ
();

267 
vCª©e2F⁄tTabÀ
(
FILE
 *, , c⁄° 
UCHAR
 *);

268 
vCª©e6F⁄tTabÀ
(
FILE
 *, 
ULONG
,

269 c⁄° 
ULONG
 *, 
size_t
, c⁄° 
UCHAR
 *);

270 
vCª©e8F⁄tTabÀ
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

271 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

272 c⁄° 
UCHAR
 *);

273 
vDe°royF⁄tTabÀ
();

274 c⁄° 
f⁄t_èbÀ_ty≥
 *
pGëNextF⁄tTabÀRec‹d
(

275 c⁄° 
f⁄t_èbÀ_ty≥
 *);

276 
size_t
 
tGëF⁄tTabÀLígth
();

277 
vC‹ª˘F⁄tTabÀ
(
c⁄vîsi⁄_ty≥
, 
ícodög_ty≥
);

278 
lCompuãS∑˚Width
(
døwfûe_f⁄åef
, 
USHORT
);

280 
FILE
 *
pO≥nF⁄tTabÀFûe
();

281 
vClo£F⁄t
();

282 
døwfûe_f⁄åef
 
tO≥nF⁄t
(
UCHAR
, 
USHORT
, USHORT);

283 
døwfûe_f⁄åef
 
tO≥nTabÀF⁄t
(
USHORT
);

284 
lCompuãSåögWidth
(c⁄° *, 
size_t
, 
døwfûe_f⁄åef
, 
USHORT
);

285 
size_t
 
tCou¡Cﬁumns
(const *, size_t);

286 
size_t
 
tGëCh¨a˘îLígth
(const *);

288 
vDe°royHdrFåInfoLi°
();

289 
vCª©8HdrFåInfoLi°
(c⁄° 
ULONG
 *, 
size_t
);

290 
vCª©6HdrFåInfoLi°
(c⁄° 
ULONG
 *, 
size_t
);

291 
vCª©2HdrFåInfoLi°
(c⁄° 
ULONG
 *, 
size_t
);

292 c⁄° 
hdr·r_block_ty≥
 *
pGëHdrFåInfo
(, 
BOOL
, BOOL, BOOL);

293 
vPª∑ªHdrFåText
(
FILE
 *);

295 
vDe°royLi°InfoLi°
();

296 
vBuûdLfoLi°
(c⁄° 
UCHAR
 *, 
size_t
);

297 
vAdd2Li°InfoLi°
(
ULONG
, 
USHORT
, 
UCHAR
,

298 c⁄° 
li°_block_ty≥
 *);

299 c⁄° 
li°_block_ty≥
 *
pGëLi°Info
(
USHORT
, 
UCHAR
);

300 
USHORT
 
usGëLi°VÆue
(, , c⁄° 
°yÀ_block_ty≥
 *);

302 c⁄° *
szGëHomeDúe˘‹y
();

303 c⁄° *
szGëA¡iw‹dDúe˘‹y
();

304 
lGëFûesize
(const *);

305 #i‡
deföed
(
DEBUG
)

306 
vPrötBlock
(c⁄° *, , c⁄° 
UCHAR
 *, 
size_t
);

307 
vPrötUnicode
(c⁄° *, , c⁄° 
UCHAR
 *, 
size_t
);

308 
BOOL
 
bCheckDoubÀLökedLi°
(
ouçut_ty≥
 *);

310 
BOOL
 
bRódByãs
(
UCHAR
 *, 
size_t
, 
ULONG
, 
FILE
 *);

311 
BOOL
 
bRódBuf„r
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
, size_t,

312 
UCHAR
 *, 
ULONG
, 
size_t
);

313 
ULONG
 
ulCﬁ‹2Cﬁ‹
(
UCHAR
);

314 
ouçut_ty≥
 *
pS∂ôLi°
(output_type *);

315 
size_t
 
tNumbî2Rom™
(
UINT
, 
BOOL
, *);

316 
size_t
 
tNumbî2AÕha
(
UINT
, 
BOOL
, *);

317 *
unö˝y
(*, c⁄° 
UCHAR
 *, 
size_t
);

318 
size_t
 
unûí
(c⁄° 
UCHAR
 *);

319 c⁄° *
szBa£«me
(const *);

320 
lCompuãLódög
(
USHORT
);

321 
size_t
 
tUcs2Utf8
(
ULONG
, *, size_t);

322 
vGëBuŒëVÆue
(
c⁄vîsi⁄_ty≥
, 
ícodög_ty≥
, *, 
size_t
);

323 
BOOL
 
bAŒZîo
(c⁄° 
UCHAR
 *, 
size_t
);

324 
BOOL
 
bGëN‹mÆizedCode£t
(*, 
size_t
, BOOL *);

325 c⁄° *
szGëDeÁu…M≠pögFûe
();

326 
time_t
 
tC⁄vîtDTTM
(
ULONG
);

328 
vDe°royNŸesInfoLi°s
();

329 
vGëNŸesInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

330 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

331 c⁄° 
UCHAR
 *, );

332 
vPª∑ªFoŸnŸeText
(
FILE
 *);

333 c⁄° *
szGëFoŸnoŸText
(
UINT
);

334 
nŸëy≥_íum
 
eGëNŸëy≥
(
ULONG
);

336 
iRódO±i⁄s
(, **);

337 
vGëO±i⁄s
(
›ti⁄s_ty≥
 *);

339 
vSëLe·Indíèti⁄
(
dügøm_ty≥
 *, );

340 
vAlign2Wödow
(
dügøm_ty≥
 *, 
ouçut_ty≥
 *,

341 , 
UCHAR
);

342 
vJu°ify2Wödow
(
dügøm_ty≥
 *, 
ouçut_ty≥
 *,

343 , , 
UCHAR
);

344 
vRe£tStyÀs
();

345 
size_t
 
tStyÀ2Wödow
(*, size_t, c⁄° 
°yÀ_block_ty≥
 *,

346 c⁄° 
£˘i⁄_block_ty≥
 *);

347 
vTabÀRow2Wödow
(
dügøm_ty≥
 *, 
ouçut_ty≥
 *,

348 c⁄° 
row_block_ty≥
 *, 
c⁄vîsi⁄_ty≥
, );

350 
vCª©eInfoDi˘i⁄¨y
(
dügøm_ty≥
 *, );

351 
vPrﬁoguePDF
(
dügøm_ty≥
 *,

352 c⁄° *, c⁄° 
›ti⁄s_ty≥
 *);

353 
vEpûoguePDF
(
dügøm_ty≥
 *);

354 
vImagePrﬁoguePDF
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

355 
vImageEpûoguePDF
(
dügøm_ty≥
 *);

356 
BOOL
 
bAddDummyImagePDF
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

357 
vAddF⁄tsPDF
(
dügøm_ty≥
 *);

358 
vSub°rögPDF
(
dügøm_ty≥
 *,

359 *, 
size_t
, , 
UCHAR
, 
USHORT
,

360 
døwfûe_f⁄åef
, 
USHORT
, USHORT);

361 
vSèπOfP¨agøphPDF
(
dügøm_ty≥
 *, );

362 
vEndOfP¨agøphPDF
(
dügøm_ty≥
 *, 
USHORT
, );

363 
vEndOfPagePDF
(
dügøm_ty≥
 *, 
BOOL
);

365 
vDe°royPi˘InfoLi°
();

366 
vAdd2Pi˘InfoLi°
(c⁄° 
pi˘uª_block_ty≥
 *);

367 
ULONG
 
ulGëPi˘InfoLi°Iãm
(ULONG);

369 
BOOL
 
bTøn¶©ePNG
(
dügøm_ty≥
 *,

370 
FILE
 *, 
ULONG
, 
size_t
, c⁄° 
imaged©a_ty≥
 *);

372 
vPrﬁoguePS
(
dügøm_ty≥
 *,

373 c⁄° *, c⁄° *, c⁄° 
›ti⁄s_ty≥
 *);

374 
vEpûoguePS
(
dügøm_ty≥
 *);

375 
vImagePrﬁoguePS
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

376 
vImageEpûoguePS
(
dügøm_ty≥
 *);

377 
BOOL
 
bAddDummyImagePS
(
dügøm_ty≥
 *, c⁄° 
imaged©a_ty≥
 *);

378 
vAddF⁄tsPS
(
dügøm_ty≥
 *);

379 
vSub°rögPS
(
dügøm_ty≥
 *,

380 *, 
size_t
, , 
UCHAR
, 
USHORT
,

381 
døwfûe_f⁄åef
, 
USHORT
, USHORT);

382 
vSèπOfP¨agøphPS
(
dügøm_ty≥
 *, );

383 
vEndOfP¨agøphPS
(
dügøm_ty≥
 *, 
USHORT
, );

384 
vEndOfPagePS
(
dügøm_ty≥
 *, 
BOOL
);

386 
vGë0D›Info
(
FILE
 *, c⁄° 
UCHAR
 *);

387 
vGë0SïInfo
(
FILE
 *, c⁄° 
UCHAR
 *);

388 
vGë0P≠Info
(
FILE
 *, c⁄° 
UCHAR
 *);

389 
vGë0ChrInfo
(
FILE
 *, c⁄° 
UCHAR
 *);

391 
vGë2D›Info
(
FILE
 *, c⁄° 
UCHAR
 *);

392 
vGë2SïInfo
(
FILE
 *, c⁄° 
UCHAR
 *);

393 
vGë2HdrFåInfo
(
FILE
 *, c⁄° 
UCHAR
 *);

394 
row_öfo_íum
 
eGë2RowInfo
(,

395 c⁄° 
UCHAR
 *, , 
row_block_ty≥
 *);

396 
vGë2StyÀInfo
(,

397 c⁄° 
UCHAR
 *, , 
°yÀ_block_ty≥
 *);

398 
vGë2P≠Info
(
FILE
 *, c⁄° 
UCHAR
 *);

399 
vGë1F⁄tInfo
(,

400 c⁄° 
UCHAR
 *, 
size_t
, 
f⁄t_block_ty≥
 *);

401 
vGë2F⁄tInfo
(,

402 c⁄° 
UCHAR
 *, 
size_t
, 
f⁄t_block_ty≥
 *);

403 
vGë2ChrInfo
(
FILE
 *, , c⁄° 
UCHAR
 *);

405 
vGë6D›Info
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

406 c⁄° 
UCHAR
 *);

407 
vGë6SïInfo
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

408 c⁄° 
UCHAR
 *);

409 
vGë6HdrFåInfo
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

410 c⁄° 
UCHAR
 *);

411 
row_öfo_íum
 
eGë6RowInfo
(,

412 c⁄° 
UCHAR
 *, , 
row_block_ty≥
 *);

413 
vGë6StyÀInfo
(,

414 c⁄° 
UCHAR
 *, , 
°yÀ_block_ty≥
 *);

415 
vGë6P≠Info
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

416 c⁄° 
UCHAR
 *);

417 
vGë6F⁄tInfo
(, 
USHORT
,

418 c⁄° 
UCHAR
 *, , 
f⁄t_block_ty≥
 *);

419 
vGë6ChrInfo
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

420 c⁄° 
UCHAR
 *);

422 
vGë8D›Info
(
FILE
 *, c⁄° 
µs_ty≥
 *,

423 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

424 c⁄° 
UCHAR
 *);

425 
vGë8SïInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

426 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

427 c⁄° 
UCHAR
 *);

428 
vGë8HdrFåInfo
(
FILE
 *, c⁄° 
µs_ty≥
 *,

429 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

430 c⁄° 
UCHAR
 *);

431 
row_öfo_íum
 
eGë8RowInfo
(,

432 c⁄° 
UCHAR
 *, , 
row_block_ty≥
 *);

433 
vGë8StyÀInfo
(,

434 c⁄° 
UCHAR
 *, , 
°yÀ_block_ty≥
 *);

435 
vGë8L°Info
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

436 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

437 c⁄° 
UCHAR
 *);

438 
vGë8P≠Info
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

439 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

440 c⁄° 
UCHAR
 *);

441 
vGë8F⁄tInfo
(, 
USHORT
,

442 c⁄° 
UCHAR
 *, , 
f⁄t_block_ty≥
 *);

443 
vGë8ChrInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

444 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

445 c⁄° 
UCHAR
 *);

447 
vGëPr›îtyInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

448 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

449 c⁄° 
UCHAR
 *, );

450 
row_öfo_íum
 
ePr›Mod2RowInfo
(
USHORT
, );

452 
vDe°royPr›ModLi°
();

453 
vAdd2Pr›ModLi°
(c⁄° 
UCHAR
 *);

454 c⁄° 
UCHAR
 *
aucRódPr›ModLi°Iãm
(
USHORT
);

456 
vDe°royRowInfoLi°
();

457 
vAdd2RowInfoLi°
(c⁄° 
row_block_ty≥
 *);

458 c⁄° 
row_block_ty≥
 *
pGëNextRowInfoLi°Iãm
();

460 
vDe°roySe˘i⁄InfoLi°
();

461 
vAdd2Se˘i⁄InfoLi°
(c⁄° 
£˘i⁄_block_ty≥
 *, 
ULONG
);

462 
vGëDeÁu…Se˘i⁄
(
£˘i⁄_block_ty≥
 *);

463 
vDeÁu…2Se˘i⁄InfoLi°
(
ULONG
);

464 c⁄° 
£˘i⁄_block_ty≥
 *

465 
pGëSe˘i⁄Info
(c⁄° 
£˘i⁄_block_ty≥
 *, 
ULONG
);

466 
size_t
 
tGëNumbîOfSe˘i⁄s
();

467 
UCHAR
 
ucGëSïHdrFåS≥cifiˇti⁄
(
size_t
);

469 
vDe°royStyÀInfoLi°
();

470 
Àvñ_ty≥_íum
 
eGëNumTy≥
(
UCHAR
);

471 
vC‹ª˘StyÀVÆues
(
°yÀ_block_ty≥
 *);

472 
vAdd2StyÀInfoLi°
(c⁄° 
°yÀ_block_ty≥
 *);

473 c⁄° 
°yÀ_block_ty≥
 *
pGëNextStyÀInfoLi°Iãm
(

474 c⁄° 
°yÀ_block_ty≥
 *);

475 c⁄° 
°yÀ_block_ty≥
 *
pGëNextTextStyÀ
(const style_block_type *);

476 
USHORT
 
usGëI°d
(
ULONG
);

477 
BOOL
 
bStyÀIm∂õsLi°
(c⁄° 
°yÀ_block_ty≥
 *, );

479 
vDe°royStyÀshìtLi°
();

480 
USHORT
 
usStc2i°d
(
UCHAR
);

481 
vGë2StyÀshìt
(
FILE
 *, , c⁄° 
UCHAR
 *);

482 
vGë6StyÀshìt
(
FILE
 *, 
ULONG
, c⁄° ULONG *, 
size_t
,

483 c⁄° 
UCHAR
 *);

484 
vGë8StyÀshìt
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

485 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

486 c⁄° 
UCHAR
 *);

487 
vFûlStyÀFromStyÀshìt
(
USHORT
, 
°yÀ_block_ty≥
 *);

488 
vFûlF⁄tFromStyÀshìt
(
USHORT
, 
f⁄t_block_ty≥
 *);

490 
vDe°roySumm¨yInfo
();

491 
vSë0Summ¨yInfo
(
FILE
 *, c⁄° 
UCHAR
 *);

492 
vSë2Summ¨yInfo
(
FILE
 *, , c⁄° 
UCHAR
 *);

493 
vSë6Summ¨yInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

494 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

495 c⁄° 
UCHAR
 *);

496 
vSë8Summ¨yInfo
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

497 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

498 c⁄° 
UCHAR
 *);

499 c⁄° *
szGëTôÀ
();

500 c⁄° *
szGëSubje˘
();

501 c⁄° *
szGëAuth‹
();

502 c⁄° *
szGëLa°SaveDtm
();

503 c⁄° *
szGëModD©e
();

504 c⁄° *
szGëCª©i⁄D©e
();

505 c⁄° *
szGëCom∑ny
();

506 c⁄° *
szGëL™guage
();

508 
vSëDeÁu…TabWidth
(
FILE
 *, c⁄° 
µs_öfo_ty≥
 *,

509 c⁄° 
ULONG
 *, 
size_t
, const ULONG *, size_t,

510 c⁄° 
UCHAR
 *, );

511 
lGëDeÁu…TabWidth
();

513 
vPrﬁogueTXT
(
dügøm_ty≥
 *, c⁄° 
›ti⁄s_ty≥
 *);

514 
vEpûogueTXT
(
FILE
 *);

515 
vMove2NextLöeTXT
(
dügøm_ty≥
 *);

516 
vSub°rögTXT
(
dügøm_ty≥
 *, c⁄° *, 
size_t
, );

517 
vSèπOfP¨agøphTXT
(
dügøm_ty≥
 *, );

518 
vEndOfP¨agøphTXT
(
dügøm_ty≥
 *, );

519 
vEndOfPageTXT
(
dügøm_ty≥
 *, );

521 
wîr
(, const *, ...);

523 
utf8_°rwidth
(c⁄° *, 
size_t
);

524 
utf8_chæígth
(const *);

525 
BOOL
 
is_loˇÀ_utf8
();

527 
BOOL
 
bOuçutC⁄èösText
(c⁄° 
ouçut_ty≥
 *);

528 
BOOL
 
bW‹dDe¸y±‹
(
FILE
 *, , 
dügøm_ty≥
 *);

529 
ouçut_ty≥
 *
pHdrFåDe¸y±‹
(
FILE
 *, 
ULONG
, ULONG);

530 *
szFoŸnŸeDe¸y±‹
(
FILE
 *, 
ULONG
, ULONG);

532 
iInôDocumítDOS
(
FILE
 *, );

534 
BOOL
 
bIsW‹dF‹DosFûe
(
FILE
 *, );

535 
BOOL
 
bIsRtfFûe
(
FILE
 *);

536 
BOOL
 
bIsW‹dPî„˘Fûe
(
FILE
 *);

537 
BOOL
 
bIsWöW‹d12Fûe
(
FILE
 *, );

538 
BOOL
 
bIsMacW‹d45Fûe
(
FILE
 *);

539 
iGuessVîsi⁄Numbî
(
FILE
 *, );

540 
iGëVîsi⁄Numbî
(c⁄° 
UCHAR
 *);

541 
BOOL
 
bIsOldMacFûe
();

542 
iInôDocumít
(
FILE
 *, );

543 
vFªeDocumít
();

545 
iInôDocumítMAC
(
FILE
 *, );

547 
iInôDocumítOLE
(
FILE
 *, );

549 
iInôDocumítWIN
(
FILE
 *, );

551 *
xmÆloc
(
size_t
);

552 *
xˇŒoc
(
size_t
, size_t);

553 *
xªÆloc
(*, 
size_t
);

554 *
x°rdup
(const *);

555 *
x‰ì
(*);

557 
vCª©eBookI¡ro
(
dügøm_ty≥
 *, );

	@asc85enc.c

16 
	~<°dio.h
>

17 
	~"™tiw‹d.h
"

19 c⁄° 
ULONG
 
	gaulPowî85
[5] = {

22 
	giOutByãs
 = 0;

23 
	gcCh¨Pªv
 = '\0';

39 
	$vOuçutByã
(
ULONG
 
ulCh¨
, 
FILE
 *
pOutFûe
)

41 i‡(
iOutByãs
 =1 && 
cCh¨Pªv
 ='%' && 
ulCh¨
 =(
ULONG
)'%') {

42 i‡(
	`putc
('\n', 
pOutFûe
Ë!
EOF
) {

43 
iOutByãs
 = 0;

46 i‡(
	`putc
(()
ulCh¨
, 
pOutFûe
Ë=
EOF
) {

49 
iOutByãs
++;

50 i‡(
iOutByãs
 > 63) {

51 i‡(
	`putc
('\n', 
pOutFûe
Ë!
EOF
) {

52 
iOutByãs
 = 0;

55 
cCh¨Pªv
 = ()
ulCh¨
;

56 
	}
}

62 
	$vASCII85EncodeByã
(
FILE
 *
pOutFûe
, 
iByã
)

64 
ULONG
 
ulBuf„r
[4] = { 0, 0, 0, 0 };

65 
iInBuf„r
 = 0;

66 
ULONG
 
ulVÆue
, 
ulTmp
;

67 
iIndex
;

69 
	`Áû
(
pOutFûe
 =
NULL
);

70 
	`Áû
(
iInBuf„r
 < 0);

71 
	`Áû
(
iInBuf„r
 > 3);

73 i‡(
iByã
 =
EOF
) {

75 i‡(
iInBuf„r
 > 0 && iInBuffer < 4) {

77 
ulVÆue
 = 0;

78 
iIndex
 = 
iInBuf„r
 - 1; iIndex >= 0; iIndex--) {

79 
ulVÆue
 |=

80 
ulBuf„r
[
iIndex
] << (8 * (3 - iIndex));

82 
iIndex
 = 4; iIndex >4 - 
iInBuf„r
; iIndex--) {

83 
ulTmp
 = 
ulVÆue
 / 
aulPowî85
[
iIndex
];

84 
	`vOuçutByã
(
ulTmp
 + '!', 
pOutFûe
);

85 
ulVÆue
 -
ulTmp
 * 
aulPowî85
[
iIndex
];

89 ()
	`putc
('~', 
pOutFûe
);

90 ()
	`putc
('>', 
pOutFûe
);

91 ()
	`putc
('\n', 
pOutFûe
);

93 
iInBuf„r
 = 0;

94 
iOutByãs
 = 0;

95 
cCh¨Pªv
 = '\0';

99 
ulBuf„r
[
iInBuf„r
] = (
ULONG
)
iByã
 & 0xff;

100 
iInBuf„r
++;

102 i‡(
iInBuf„r
 >= 4) {

103 
ulVÆue
 = (
ulBuf„r
[0] << 24) | (ulBuffer[1] << 16) |

104 (
ulBuf„r
[2] << 8) | ulBuffer[3];

105 i‡(
ulVÆue
 == 0) {

106 
	`vOuçutByã
((
ULONG
)'z', 
pOutFûe
);

108 
iIndex
 = 4; iIndex >= 0; iIndex--) {

109 
ulTmp
 = 
ulVÆue
 / 
aulPowî85
[
iIndex
];

110 
	`vOuçutByã
(
ulTmp
 + '!', 
pOutFûe
);

111 
ulVÆue
 -
ulTmp
 * 
aulPowî85
[
iIndex
];

115 
iInBuf„r
 = 0;

117 
	}
}

123 
	$vASCII85EncodeAºay
(
FILE
 *
pInFûe
, FILE *
pOutFûe
, 
size_t
 
tLígth
)

125 
size_t
 
tCou¡
;

126 
iByã
;

128 
	`Áû
(
pInFûe
 =
NULL
);

129 
	`Áû
(
pOutFûe
 =
NULL
);

131 
	`DBG_DEC
(
tLígth
);

133 
tCou¡
 = 0;ÅCou¡ < 
tLígth
;ÅCount++) {

134 
iByã
 = 
	`iNextByã
(
pInFûe
);

135 i‡(
iByã
 =
EOF
) {

138 
	`vASCII85EncodeByã
(
pOutFûe
, 
iByã
);

140 
	}
}

146 
	$vASCII85EncodeFûe
(
FILE
 *
pInFûe
, FILE *
pOutFûe
, 
size_t
 
tLígth
)

148 
	`Áû
(
pInFûe
 =
NULL
);

149 
	`Áû
(
pOutFûe
 =
NULL
);

150 
	`Áû
(
tLígth
 == 0);

152 
	`vASCII85EncodeAºay
(
pInFûe
, 
pOutFûe
, 
tLígth
);

153 
	`vASCII85EncodeByã
(
pOutFûe
, 
EOF
);

154 
	}
}

	@blocklist.c

9 
	~<°dlib.h
>

10 
	~"™tiw‹d.h
"

17 
	sli°_mem_èg
 {

18 
ãxt_block_ty≥
 
	mtInfo
;

19 
li°_mem_èg
 *
	mpNext
;

20 } 
	tli°_mem_ty≥
;

22 
	sªadöfo_èg
 {

23 
li°_mem_ty≥
 *
	mpBlockCuºít
;

24 
ULONG
 
	mulBlockOff£t
;

25 
size_t
 
	mtByãNext
;

26 
UCHAR
 
	maucBlock
[
BIG_BLOCK_SIZE
];

27 } 
	tªadöfo_ty≥
;

30 
li°_mem_ty≥
 *
	gpTextAnch‹
 = 
NULL
;

31 
li°_mem_ty≥
 *
	gpFoŸnŸeAnch‹
 = 
NULL
;

32 
li°_mem_ty≥
 *
	gpHdrFåAnch‹
 = 
NULL
;

33 
li°_mem_ty≥
 *
	gpMa¸oAnch‹
 = 
NULL
;

34 
li°_mem_ty≥
 *
	gpA¬Ÿ©i⁄Anch‹
 = 
NULL
;

35 
li°_mem_ty≥
 *
	gpEndnŸeAnch‹
 = 
NULL
;

36 
li°_mem_ty≥
 *
	gpTextBoxAnch‹
 = 
NULL
;

37 
li°_mem_ty≥
 *
	gpHdrTextBoxAnch‹
 = 
NULL
;

39 
li°_mem_ty≥
 *
	gpBlockLa°
 = 
NULL
;

41 
ªadöfo_ty≥
 
	gtOthîs
 = { 
NULL
, 0, 0, };

42 
ªadöfo_ty≥
 
	gtHdrFå
 = { 
NULL
, 0, 0, };

43 
ªadöfo_ty≥
 
	gtFoŸnŸe
 = { 
NULL
, 0, 0, };

51 
li°_mem_ty≥
 *

52 
	$pFªeO√Li°
(
li°_mem_ty≥
 *
pAnch‹
)

54 
li°_mem_ty≥
 *
pCuº
, *
pNext
;

56 
pCuº
 = 
pAnch‹
;

57 
pCuº
 !
NULL
) {

58 
pNext
 = 
pCuº
->pNext;

59 
pCuº
 = 
	`x‰ì
(pCurr);

60 
pCuº
 = 
pNext
;

62  
NULL
;

63 
	}
}

69 
	$vDe°royTextBlockLi°
()

71 
	`DBG_MSG
("vDestroyTextBlockList");

74 
pTextAnch‹
 = 
	`pFªeO√Li°
(pTextAnchor);

75 
pFoŸnŸeAnch‹
 = 
	`pFªeO√Li°
(pFootnoteAnchor);

76 
pHdrFåAnch‹
 = 
	`pFªeO√Li°
(pHdrFtrAnchor);

77 
pMa¸oAnch‹
 = 
	`pFªeO√Li°
(pMacroAnchor);

78 
pA¬Ÿ©i⁄Anch‹
 = 
	`pFªeO√Li°
(pAnnotationAnchor);

79 
pEndnŸeAnch‹
 = 
	`pFªeO√Li°
(pEndnoteAnchor);

80 
pTextBoxAnch‹
 = 
	`pFªeO√Li°
(pTextBoxAnchor);

81 
pHdrTextBoxAnch‹
 = 
	`pFªeO√Li°
(pHdrTextBoxAnchor);

83 
pBlockLa°
 = 
NULL
;

84 
tOthîs
.
pBlockCuºít
 = 
NULL
;

85 
tHdrFå
.
pBlockCuºít
 = 
NULL
;

86 
tFoŸnŸe
.
pBlockCuºít
 = 
NULL
;

87 
	}
}

94 
BOOL


95 
	$bAdd2TextBlockLi°
(c⁄° 
ãxt_block_ty≥
 *
pTextBlock
)

97 
li°_mem_ty≥
 *
pLi°Membî
;

99 
	`Áû
(
pTextBlock
 =
NULL
);

100 
	`Áû
(
pTextBlock
->
ulFûeOff£t
 =
FC_INVALID
);

101 
	`Áû
(
pTextBlock
->
ulCh¨Pos
 =
CP_INVALID
);

102 
	`Áû
(
pTextBlock
->
ulLígth
 == 0);

103 
	`Áû
(
pTextBlock
->
bU£sUnicode
 && 
	`odd
’TextBlock->
ulLígth
));

105 
	`NO_DBG_MSG
("bAdd2TextBlockList");

106 
	`NO_DBG_HEX
(
pTextBlock
->
ulFûeOff£t
);

107 
	`NO_DBG_HEX
(
pTextBlock
->
ulCh¨Pos
);

108 
	`NO_DBG_HEX
(
pTextBlock
->
ulLígth
);

109 
	`NO_DBG_DEC
(
pTextBlock
->
bU£sUnicode
);

110 
	`NO_DBG_DEC
(
pTextBlock
->
usPr›Mod
);

112 i‡(
pTextBlock
->
ulFûeOff£t
 =
FC_INVALID
 ||

113 
pTextBlock
->
ulCh¨Pos
 =
CP_INVALID
 ||

114 
pTextBlock
->
ulLígth
 == 0 ||

115 (
pTextBlock
->
bU£sUnicode
 && 
	`odd
’TextBlock->
ulLígth
))) {

116 
	`wîr
(0, "Software (textblock)Érror");

117  
FALSE
;

123 i‡(
pBlockLa°
 !
NULL
 &&

124 
pBlockLa°
->
tInfo
.
ulFûeOff£t
 +

125 
pBlockLa°
->
tInfo
.
ulLígth
 =
pTextBlock
->
ulFûeOff£t
 &&

126 
pBlockLa°
->
tInfo
.
ulCh¨Pos
 +

127 
pBlockLa°
->
tInfo
.
ulLígth
 =
pTextBlock
->
ulCh¨Pos
 &&

128 
pBlockLa°
->
tInfo
.
bU£sUnicode
 =
pTextBlock
->bUsesUnicode &&

129 
pBlockLa°
->
tInfo
.
usPr›Mod
 =
pTextBlock
->usPropMod) {

131 
pBlockLa°
->
tInfo
.
ulLígth
 +
pTextBlock
->ulLength;

132  
TRUE
;

135 
pLi°Membî
 = 
	`xmÆloc
((
li°_mem_ty≥
));

137 
pLi°Membî
->
tInfo
 = *
pTextBlock
;

138 
pLi°Membî
->
pNext
 = 
NULL
;

139 i‡(
pTextAnch‹
 =
NULL
) {

140 
pTextAnch‹
 = 
pLi°Membî
;

142 
	`Áû
(
pBlockLa°
 =
NULL
);

143 
pBlockLa°
->
pNext
 = 
pLi°Membî
;

145 
pBlockLa°
 = 
pLi°Membî
;

146  
TRUE
;

147 
	}
}

153 
	$vSpôLi°
(
li°_mem_ty≥
 **
µAnch‹Cuº
,Üi°_mem_ty≥ **
µAnch‹Next
,

154 
ULONG
 
ulLi°Lí
)

156 
li°_mem_ty≥
 *
pCuº
;

157 
lCh¨sToGo
, 
lByãsTooF¨
;

159 
	`Áû
(
µAnch‹Cuº
 =
NULL
);

160 
	`Áû
(
µAnch‹Next
 =
NULL
);

161 
	`Áû
(
ulLi°Lí
 > (
ULONG
)
LONG_MAX
);

163 
pCuº
 = 
NULL
;

164 
lCh¨sToGo
 = ()
ulLi°Lí
;

165 
lByãsTooF¨
 = -1;

166 i‡(
ulLi°Lí
 != 0) {

167 
	`DBG_DEC
(
ulLi°Lí
);

168 
pCuº
 = *
µAnch‹Cuº
;

169 
pCuº
 !
NULL
;

170 
pCuº
 =ÖCuº->
pNext
) {

171 
	`NO_DBG_DEC
(
pCuº
->
tInfo
.
ulLígth
);

172 
	`Áû
(
pCuº
->
tInfo
.
ulLígth
 == 0);

173 
	`Áû
(
pCuº
->
tInfo
.
ulLígth
 > (
ULONG
)
LONG_MAX
);

174 i‡(
pCuº
->
tInfo
.
bU£sUnicode
) {

175 
	`Áû
(
	`odd
(
pCuº
->
tInfo
.
ulLígth
));

176 
lCh¨sToGo
 -()(
pCuº
->
tInfo
.
ulLígth
 / 2);

177 i‡(
lCh¨sToGo
 < 0) {

178 
lByãsTooF¨
 = -2 * 
lCh¨sToGo
;

181 
lCh¨sToGo
 -()
pCuº
->
tInfo
.
ulLígth
;

182 i‡(
lCh¨sToGo
 < 0) {

183 
lByãsTooF¨
 = -
lCh¨sToGo
;

186 i‡(
lCh¨sToGo
 <= 0) {

192 i‡(
ulLi°Lí
 == 0) {

194 *
µAnch‹Next
 = *
µAnch‹Cuº
;

195 *
µAnch‹Cuº
 = 
NULL
;

196 } i‡(
pCuº
 =
NULL
) {

198 *
µAnch‹Next
 = 
NULL
;

199 } i‡(
lCh¨sToGo
 == 0) {

201 *
µAnch‹Next
 = 
pCuº
->
pNext
;

202 
pCuº
->
pNext
 = 
NULL
;

205 
	`DBG_DEC
(
lByãsTooF¨
);

206 
	`Áû
(
lByãsTooF¨
 <= 0);

207 *
µAnch‹Next
 = 
	`xmÆloc
((
li°_mem_ty≥
));

208 
	`DBG_HEX
(
pCuº
->
tInfo
.
ulFûeOff£t
);

209 (*
µAnch‹Next
)->
tInfo
.
ulFûeOff£t
 =

210 
pCuº
->
tInfo
.
ulFûeOff£t
 +

211 
pCuº
->
tInfo
.
ulLígth
 -

212 
lByãsTooF¨
;

213 
	`DBG_HEX
((*
µAnch‹Next
)->
tInfo
.
ulFûeOff£t
);

214 
	`DBG_HEX
(
pCuº
->
tInfo
.
ulCh¨Pos
);

215 (*
µAnch‹Next
)->
tInfo
.
ulCh¨Pos
 =

216 
pCuº
->
tInfo
.
ulCh¨Pos
 +

217 
pCuº
->
tInfo
.
ulLígth
 -

218 
lByãsTooF¨
;

219 
	`DBG_HEX
((*
µAnch‹Next
)->
tInfo
.
ulCh¨Pos
);

220 (*
µAnch‹Next
)->
tInfo
.
ulLígth
 = (
ULONG
)
lByãsTooF¨
;

221 
pCuº
->
tInfo
.
ulLígth
 -(
ULONG
)
lByãsTooF¨
;

222 (*
µAnch‹Next
)->
tInfo
.
bU£sUnicode
 = 
pCuº
->tInfo.bUsesUnicode;

223 (*
µAnch‹Next
)->
tInfo
.
usPr›Mod
 = 
pCuº
->tInfo.usPropMod;

225 (*
µAnch‹Next
)->
pNext
 = 
pCuº
->pNext;

226 
pCuº
->
pNext
 = 
NULL
;

228 
	}
}

230 #i‡
deföed
(
DEBUG
Ë|| deföed(
__riscos
)

236 
ULONG


237 
	$ulCompuãLi°Lígth
(c⁄° 
li°_mem_ty≥
 *
pAnch‹
)

239 c⁄° 
li°_mem_ty≥
 *
pCuº
;

240 
ULONG
 
ulTŸÆ
;

242 
ulTŸÆ
 = 0;

243 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

244 
	`Áû
(
pCuº
->
tInfo
.
ulLígth
 == 0);

245 i‡(
pCuº
->
tInfo
.
bU£sUnicode
) {

246 
	`Áû
(
	`odd
(
pCuº
->
tInfo
.
ulLígth
));

247 
ulTŸÆ
 +
pCuº
->
tInfo
.
ulLígth
 / 2;

249 
ulTŸÆ
 +
pCuº
->
tInfo
.
ulLígth
;

252  
ulTŸÆ
;

253 
	}
}

256 #i‡
deföed
(
DEBUG
)

261 
	$vCheckLi°
(c⁄° 
li°_mem_ty≥
 *
pAnch‹
, 
ULONG
 
ulLi°Lí
, *
szMsg
)

263 
ULONG
 
ulTŸÆ
;

265 
ulTŸÆ
 = 
	`ulCompuãLi°Lígth
(
pAnch‹
);

266 
	`DBG_DEC
(
ulTŸÆ
);

267 i‡(
ulTŸÆ
 !
ulLi°Lí
) {

268 
	`DBG_DEC
(
ulLi°Lí
);

269 
	`wîr
(1, 
szMsg
);

271 
	}
}

277 
BOOL


278 
	$bIsEm±yBox
(
FILE
 *
pFûe
, c⁄° 
li°_mem_ty≥
 *
pAnch‹
)

280 c⁄° 
li°_mem_ty≥
 *
pCuº
;

281 
size_t
 
tIndex
, 
tSize
;

282 
UCHAR
 *
aucBuf„r
;

283 
cCh¨
;

285 
	`Áû
(
pFûe
 =
NULL
);

287 i‡(
pAnch‹
 =
NULL
) {

288  
TRUE
;

291 
aucBuf„r
 = 
NULL
;

292 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

293 
	`Áû
(
pCuº
->
tInfo
.
ulLígth
 == 0);

294 
tSize
 = (
size_t
)
pCuº
->
tInfo
.
ulLígth
;

295 #i‡
	`deföed
(
__dos
Ë&& !deföed(
__DJGPP__
)

296 i‡(
pCuº
->
tInfo
.
ulLígth
 > 0xffffUL) {

297 
tSize
 = 0xffff;

300 
	`Áû
(
aucBuf„r
 !
NULL
);

301 
aucBuf„r
 = 
	`xmÆloc
(
tSize
);

302 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tSize
,

303 
pCuº
->
tInfo
.
ulFûeOff£t
, 
pFûe
)) {

304 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

305  
FALSE
;

307 
tIndex
 = 0;ÅIndex < 
tSize
;ÅIndex++) {

308 
cCh¨
 = ()
aucBuf„r
[
tIndex
];

309 
cCh¨
) {

315 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

316  
FALSE
;

319 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

321 
	`Áû
(
aucBuf„r
 !
NULL
);

322  
TRUE
;

323 
	}
}

337 
	$vS∂ôBlockLi°
(
FILE
 *
pFûe
, 
ULONG
 
ulTextLí
, ULONG 
ulFoŸnŸeLí
,

338 
ULONG
 
ulHdrFåLí
, ULONG 
ulMa¸oLí
, ULONG 
ulA¬Ÿ©i⁄Lí
,

339 
ULONG
 
ulEndnŸeLí
, ULONG 
ulTextBoxLí
, ULONG 
ulHdrTextBoxLí
,

340 
BOOL
 
bMu°Exãnd
)

342 
li°_mem_ty≥
 *
≠Anch‹s
[8];

343 
li°_mem_ty≥
 *
pG¨bageAnch‹
, *
pCuº
;

344 
size_t
 
tIndex
;

346 
	`DBG_MSG
("vSplitBlockList");

348 
pG¨bageAnch‹
 = 
NULL
;

350 
	`DBG_MSG_C
(
ulTextLí
 != 0, "Text blockÜist");

351 
	`vSpôLi°
(&
pTextAnch‹
, &
pFoŸnŸeAnch‹
, 
ulTextLí
);

352 
	`DBG_MSG_C
(
ulFoŸnŸeLí
 != 0, "Footnote blockÜist");

353 
	`vSpôLi°
(&
pFoŸnŸeAnch‹
, &
pHdrFåAnch‹
, 
ulFoŸnŸeLí
);

354 
	`DBG_MSG_C
(
ulHdrFåLí
 != 0, "Header/Footer blockÜist");

355 
	`vSpôLi°
(&
pHdrFåAnch‹
, &
pMa¸oAnch‹
, 
ulHdrFåLí
);

356 
	`DBG_MSG_C
(
ulMa¸oLí
 != 0, "Macro blockÜist");

357 
	`vSpôLi°
(&
pMa¸oAnch‹
, &
pA¬Ÿ©i⁄Anch‹
, 
ulMa¸oLí
);

358 
	`DBG_MSG_C
(
ulA¬Ÿ©i⁄Lí
 != 0, "Annotation blockÜist");

359 
	`vSpôLi°
(&
pA¬Ÿ©i⁄Anch‹
, &
pEndnŸeAnch‹
, 
ulA¬Ÿ©i⁄Lí
);

360 
	`DBG_MSG_C
(
ulEndnŸeLí
 != 0, "Endnote blockÜist");

361 
	`vSpôLi°
(&
pEndnŸeAnch‹
, &
pTextBoxAnch‹
, 
ulEndnŸeLí
);

362 
	`DBG_MSG_C
(
ulTextBoxLí
 != 0, "Textbox blockÜist");

363 
	`vSpôLi°
(&
pTextBoxAnch‹
, &
pHdrTextBoxAnch‹
, 
ulTextBoxLí
);

364 
	`DBG_MSG_C
(
ulHdrTextBoxLí
 != 0, "HeaderTextbox blockÜist");

365 
	`vSpôLi°
(&
pHdrTextBoxAnch‹
, &
pG¨bageAnch‹
, 
ulHdrTextBoxLí
);

368 
	`DBG_DEC_C
(
pG¨bageAnch‹
 !
NULL
,ÖG¨bageAnch‹->
tInfo
.
ulLígth
);

369 
pG¨bageAnch‹
 = 
	`pFªeO√Li°
(pGarbageAnchor);

371 #i‡
	`deföed
(
DEBUG
)

372 
	`vCheckLi°
(
pTextAnch‹
, 
ulTextLí
, "SoftwareÉrror (Text)");

373 
	`vCheckLi°
(
pFoŸnŸeAnch‹
, 
ulFoŸnŸeLí
, "SoftwareÉrror (Footnote)");

374 
	`vCheckLi°
(
pHdrFåAnch‹
, 
ulHdrFåLí
, "SoftwareÉrror (Hdr/Ftr)");

375 
	`vCheckLi°
(
pMa¸oAnch‹
, 
ulMa¸oLí
, "SoftwareÉrror (Macro)");

376 
	`vCheckLi°
(
pA¬Ÿ©i⁄Anch‹
, 
ulA¬Ÿ©i⁄Lí
,

378 
	`vCheckLi°
(
pEndnŸeAnch‹
, 
ulEndnŸeLí
, "SoftwareÉrror (Endnote)");

379 
	`vCheckLi°
(
pTextBoxAnch‹
, 
ulTextBoxLí
, "SoftwareÉrror (TextBox)");

380 
	`vCheckLi°
(
pHdrTextBoxAnch‹
, 
ulHdrTextBoxLí
,

385 i‡(
	`bIsEm±yBox
(
pFûe
, 
pTextBoxAnch‹
)) {

386 
pTextBoxAnch‹
 = 
	`pFªeO√Li°
(pTextBoxAnchor);

388 i‡(
	`bIsEm±yBox
(
pFûe
, 
pHdrTextBoxAnch‹
)) {

389 
pHdrTextBoxAnch‹
 = 
	`pFªeO√Li°
(pHdrTextBoxAnchor);

392 i‡(!
bMu°Exãnd
) {

400 
≠Anch‹s
[0] = 
pTextAnch‹
;

401 
≠Anch‹s
[1] = 
pFoŸnŸeAnch‹
;

402 
≠Anch‹s
[2] = 
pHdrFåAnch‹
;

403 
≠Anch‹s
[3] = 
pMa¸oAnch‹
;

404 
≠Anch‹s
[4] = 
pA¬Ÿ©i⁄Anch‹
;

405 
≠Anch‹s
[5] = 
pEndnŸeAnch‹
;

406 
≠Anch‹s
[6] = 
pTextBoxAnch‹
;

407 
≠Anch‹s
[7] = 
pHdrTextBoxAnch‹
;

409 
tIndex
 = 0;ÅIndex < 
	`ñemítsof
(
≠Anch‹s
);ÅIndex++) {

410 
pCuº
 = 
≠Anch‹s
[
tIndex
];

411 
pCuº
 !
NULL
;

412 
pCuº
 =ÖCuº->
pNext
) {

413 i‡(
pCuº
->
pNext
 !
NULL
 &&

414 
pCuº
->
tInfo
.
ulLígth
 % 
BIG_BLOCK_SIZE
 != 0) {

415 
	`DBG_DEC
(
tIndex
);

416 
	`DBG_HEX
(
pCuº
->
tInfo
.
ulFûeOff£t
);

417 
	`DBG_HEX
(
pCuº
->
tInfo
.
ulCh¨Pos
);

418 
	`DBG_DEC
(
pCuº
->
tInfo
.
ulLígth
);

419 
pCuº
->
tInfo
.
ulLígth
 /
BIG_BLOCK_SIZE
;

420 
pCuº
->
tInfo
.
ulLígth
++;

421 
pCuº
->
tInfo
.
ulLígth
 *
BIG_BLOCK_SIZE
;

422 
	`DBG_DEC
(
pCuº
->
tInfo
.
ulLígth
);

426 
	}
}

432 
BOOL


433 
	$bExi°sHdrFå
()

435  
pHdrFåAnch‹
 !
NULL
 &&

436 
pHdrFåAnch‹
->
tInfo
.
ulLígth
 != 0;

437 
	}
}

443 
BOOL


444 
	$bExi°sTextBox
()

446  
pTextBoxAnch‹
 !
NULL
 &&

447 
pTextBoxAnch‹
->
tInfo
.
ulLígth
 != 0;

448 
	}
}

453 
BOOL


454 
	$bExi°sHdrTextBox
()

456  
pHdrTextBoxAnch‹
 !
NULL
 &&

457 
pHdrTextBoxAnch‹
->
tInfo
.
ulLígth
 != 0;

458 
	}
}

463 
USHORT


464 
	$usGëNextByã
(
FILE
 *
pFûe
, 
ªadöfo_ty≥
 *
pInfoCuºít
, 
li°_mem_ty≥
 *
pAnch‹
,

465 
ULONG
 *
pulFûeOff£t
, ULONG *
pulCh¨Pos
, 
USHORT
 *
pusPr›Mod
)

467 
ULONG
 
ulRódOff
;

468 
size_t
 
tRódLí
;

470 
	`Áû
(
pInfoCuºít
 =
NULL
);

472 i‡(
pInfoCuºít
->
pBlockCuºít
 =
NULL
 ||

473 
pInfoCuºít
->
tByãNext
 >’InfoCuºít->
aucBlock
) ||

474 
pInfoCuºít
->
ulBlockOff£t
 +ÖInfoCuºít->
tByãNext
 >=

475 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulLígth
) {

476 i‡(
pInfoCuºít
->
pBlockCuºít
 =
NULL
) {

478 
pInfoCuºít
->
pBlockCuºít
 = 
pAnch‹
;

479 
pInfoCuºít
->
ulBlockOff£t
 = 0;

480 } i‡(
pInfoCuºít
->
ulBlockOff£t
 +

481 (
pInfoCuºít
->
aucBlock
) <

482 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulLígth
) {

484 
pInfoCuºít
->
ulBlockOff£t
 +=

485 (
pInfoCuºít
->
aucBlock
);

488 
pInfoCuºít
->
pBlockCuºít
 =

489 
pInfoCuºít
->
pBlockCuºít
->
pNext
;

490 
pInfoCuºít
->
ulBlockOff£t
 = 0;

492 i‡(
pInfoCuºít
->
pBlockCuºít
 =
NULL
) {

494  (
USHORT
)
EOF
;

496 
tRódLí
 = (
size_t
)

497 (
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulLígth
 -

498 
pInfoCuºít
->
ulBlockOff£t
);

499 i‡(
tRódLí
 > (
pInfoCuºít
->
aucBlock
)) {

500 
tRódLí
 = (
pInfoCuºít
->
aucBlock
);

502 
ulRódOff
 = 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulFûeOff£t
 +

503 
pInfoCuºít
->
ulBlockOff£t
;

504 i‡(!
	`bRódByãs
(
pInfoCuºít
->
aucBlock
,

505 
tRódLí
, 
ulRódOff
, 
pFûe
)) {

507 
pInfoCuºít
->
pBlockCuºít
 = 
NULL
;

508  (
USHORT
)
EOF
;

510 
pInfoCuºít
->
tByãNext
 = 0;

512 i‡(
pulFûeOff£t
 !
NULL
) {

513 *
pulFûeOff£t
 =

514 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulFûeOff£t
 +

515 
pInfoCuºít
->
ulBlockOff£t
 +

516 
pInfoCuºít
->
tByãNext
;

518 i‡(
pulCh¨Pos
 !
NULL
) {

519 *
pulCh¨Pos
 =

520 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
ulCh¨Pos
 +

521 
pInfoCuºít
->
ulBlockOff£t
 +

522 
pInfoCuºít
->
tByãNext
;

524 i‡(
pusPr›Mod
 !
NULL
) {

525 *
pusPr›Mod
 = 
pInfoCuºít
->
pBlockCuºít
->
tInfo
.
usPr›Mod
;

527  (
USHORT
)
pInfoCuºít
->
aucBlock
[pInfoCuºít->
tByãNext
++];

528 
	}
}

534 
USHORT


535 
	$usGëNextCh¨
(
FILE
 *
pFûe
, 
li°_id_íum
 
eLi°ID
,

536 
ULONG
 *
pulFûeOff£t
, ULONG *
pulCh¨Pos
, 
USHORT
 *
pusPr›Mod
)

538 
ªadöfo_ty≥
 *
pRódöfo
;

539 
li°_mem_ty≥
 *
pAnch‹
;

540 
USHORT
 
usLSB
, 
usMSB
;

542 
eLi°ID
) {

543 
ãxt_li°
:

544 
pRódöfo
 = &
tOthîs
;

545 
pAnch‹
 = 
pTextAnch‹
;

547 
foŸnŸe_li°
:

548 
pRódöfo
 = &
tFoŸnŸe
;

549 
pAnch‹
 = 
pFoŸnŸeAnch‹
;

551 
hdr·r_li°
:

552 
pRódöfo
 = &
tHdrFå
;

553 
pAnch‹
 = 
pHdrFåAnch‹
;

555 
ídnŸe_li°
:

556 
pRódöfo
 = &
tOthîs
;

557 
pAnch‹
 = 
pEndnŸeAnch‹
;

559 
ãxtbox_li°
:

560 
pRódöfo
 = &
tOthîs
;

561 
pAnch‹
 = 
pTextBoxAnch‹
;

563 
hdπextbox_li°
:

564 
pRódöfo
 = &
tOthîs
;

565 
pAnch‹
 = 
pHdrTextBoxAnch‹
;

568 
	`DBG_DEC
(
eLi°ID
);

569  (
USHORT
)
EOF
;

572 
usLSB
 = 
	`usGëNextByã
(
pFûe
, 
pRódöfo
, 
pAnch‹
,

573 
pulFûeOff£t
, 
pulCh¨Pos
, 
pusPr›Mod
);

574 i‡(
usLSB
 =(
USHORT
)
EOF
) {

575  (
USHORT
)
EOF
;

577 
	`Áû
(
pRódöfo
->
pBlockCuºít
 =
NULL
);

579 i‡(
pRódöfo
->
pBlockCuºít
->
tInfo
.
bU£sUnicode
) {

580 
usMSB
 = 
	`usGëNextByã
(
pFûe
,

581 
pRódöfo
, 
pAnch‹
, 
NULL
, NULL, NULL);

583 
usMSB
 = 0x00;

585 i‡(
usMSB
 =(
USHORT
)
EOF
) {

586 
	`DBG_MSG
("usGetNextChar: Unexpected EOF");

587 
	`DBG_HEX_C
(
pulFûeOff£t
 !
NULL
, *pulFileOffset);

588 
	`DBG_HEX_C
(
pulCh¨Pos
 !
NULL
, *pulCharPos);

589  (
USHORT
)
EOF
;

591  (
usMSB
 << 8Ë| 
usLSB
;

592 
	}
}

597 
USHORT


598 
	$usNextCh¨
(
FILE
 *
pFûe
, 
li°_id_íum
 
eLi°ID
,

599 
ULONG
 *
pulFûeOff£t
, ULONG *
pulCh¨Pos
, 
USHORT
 *
pusPr›Mod
)

601 
USHORT
 
usRëVÆ
;

603 
	`Áû
(
pFûe
 =
NULL
);

605 
usRëVÆ
 = 
	`usGëNextCh¨
(
pFûe
, 
eLi°ID
,

606 
pulFûeOff£t
, 
pulCh¨Pos
, 
pusPr›Mod
);

607 i‡(
usRëVÆ
 =(
USHORT
)
EOF
) {

608 i‡(
pulFûeOff£t
 !
NULL
) {

609 *
pulFûeOff£t
 = 
FC_INVALID
;

611 i‡(
pulCh¨Pos
 !
NULL
) {

612 *
pulCh¨Pos
 = 
CP_INVALID
;

614 i‡(
pusPr›Mod
 !
NULL
) {

615 *
pusPr›Mod
 = 
IGNORE_PROPMOD
;

618  
usRëVÆ
;

619 
	}
}

626 
USHORT


627 
	$usToHdrFåPosôi⁄
(
FILE
 *
pFûe
, 
ULONG
 
ulCh¨Pos
)

629 
ULONG
 
ulCh¨PosCuº
;

630 
USHORT
 
usCh¨
;

632 
tHdrFå
.
pBlockCuºít
 = 
NULL
;

634 
usCh¨
 = 
	`usNextCh¨
(
pFûe
,

635 
hdr·r_li°
, 
NULL
, &
ulCh¨PosCuº
, NULL);

636 } 
usCh¨
 !(
USHORT
)
EOF
 && 
ulCh¨PosCuº
 !
ulCh¨Pos
);

637  
usCh¨
;

638 
	}
}

645 
USHORT


646 
	$usToFoŸnŸePosôi⁄
(
FILE
 *
pFûe
, 
ULONG
 
ulCh¨Pos
)

648 
ULONG
 
ulCh¨PosCuº
;

649 
USHORT
 
usCh¨
;

651 
tFoŸnŸe
.
pBlockCuºít
 = 
NULL
;

653 
usCh¨
 = 
	`usNextCh¨
(
pFûe
,

654 
foŸnŸe_li°
, 
NULL
, &
ulCh¨PosCuº
, NULL);

655 } 
usCh¨
 !(
USHORT
)
EOF
 && 
ulCh¨PosCuº
 !
ulCh¨Pos
);

656  
usCh¨
;

657 
	}
}

666 
ULONG


667 
	$ulCh¨Pos2FûeOff£tX
(
ULONG
 
ulCh¨Pos
, 
li°_id_íum
 *
≥Li°ID
)

669 
li°_id_íum
 
eLi°IDs
[8] = {

670 
ãxt_li°
, 
foŸnŸe_li°
, 
hdr·r_li°
,

671 
ma¸o_li°
, 
™nŸ©i⁄_li°
, 
ídnŸe_li°
,

672 
ãxtbox_li°
, 
hdπextbox_li°
,

674 
li°_mem_ty≥
 *
≠Anch‹s
[8];

675 
li°_mem_ty≥
 *
pCuº
;

676 
li°_id_íum
 
eLi°Guess
;

677 
ULONG
 
ulBe°Guess
;

678 
size_t
 
tIndex
;

680 
	`Áû
(
≥Li°ID
 =
NULL
);

682 i‡(
ulCh¨Pos
 =
CP_INVALID
) {

683 *
≥Li°ID
 = 
no_li°
;

684  
FC_INVALID
;

687 
≠Anch‹s
[0] = 
pTextAnch‹
;

688 
≠Anch‹s
[1] = 
pFoŸnŸeAnch‹
;

689 
≠Anch‹s
[2] = 
pHdrFåAnch‹
;

690 
≠Anch‹s
[3] = 
pMa¸oAnch‹
;

691 
≠Anch‹s
[4] = 
pA¬Ÿ©i⁄Anch‹
;

692 
≠Anch‹s
[5] = 
pEndnŸeAnch‹
;

693 
≠Anch‹s
[6] = 
pTextBoxAnch‹
;

694 
≠Anch‹s
[7] = 
pHdrTextBoxAnch‹
;

696 
eLi°Guess
 = 
no_li°
;

697 
ulBe°Guess
 = 
FC_INVALID
;

699 
tIndex
 = 0;ÅIndex < 
	`ñemítsof
(
≠Anch‹s
);ÅIndex++) {

700 
pCuº
 = 
≠Anch‹s
[
tIndex
];

701 
pCuº
 !
NULL
;

702 
pCuº
 =ÖCuº->
pNext
) {

703 i‡(
ulCh¨Pos
 =
pCuº
->
tInfo
.ulCharPos +

704 
pCuº
->
tInfo
.
ulLígth
 &&

705 
pCuº
->
pNext
 !
NULL
) {

711 
eLi°Guess

eLi°IDs
[
tIndex
];

712 
ulBe°Guess
 = 
pCuº
->
pNext
->
tInfo
.
ulFûeOff£t
;

715 i‡(
ulCh¨Pos
 < 
pCuº
->
tInfo
.ulCharPos ||

716 
ulCh¨Pos
 >
pCuº
->
tInfo
.ulCharPos +

717 
pCuº
->
tInfo
.
ulLígth
) {

723 *
≥Li°ID
 = 
eLi°IDs
[
tIndex
];

724  
pCuº
->
tInfo
.
ulFûeOff£t
 +

725 
ulCh¨Pos
 - 
pCuº
->
tInfo
.ulCharPos;

729 
	`NO_DBG_HEX
(
ulCh¨Pos
);

730 
	`NO_DBG_HEX
(
ulBe°Guess
);

731 *
≥Li°ID
 = 
eLi°Guess
;

732  
ulBe°Guess
;

733 
	}
}

742 
ULONG


743 
	$ulCh¨Pos2FûeOff£t
(
ULONG
 
ulCh¨Pos
)

745 
li°_id_íum
 
eLi°ID
;

747  
	`ulCh¨Pos2FûeOff£tX
(
ulCh¨Pos
, &
eLi°ID
);

748 
	}
}

756 
ULONG


757 
	$ulHdrFåOff£t2Ch¨Pos
(
ULONG
 
ulHdrFåOff£t
)

759 
li°_mem_ty≥
 *
pCuº
;

760 
ULONG
 
ulOff£t
;

762 
ulOff£t
 = 
ulHdrFåOff£t
;

763 
pCuº
 = 
pHdrFåAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

764 i‡(
ulOff£t
 >
pCuº
->
tInfo
.
ulLígth
) {

766 
ulOff£t
 -
pCuº
->
tInfo
.
ulLígth
;

769  
pCuº
->
tInfo
.
ulCh¨Pos
 + 
ulOff£t
;

771  
CP_INVALID
;

772 
	}
}

779 
ULONG


780 
	$ulGëSeqNumbî
(
ULONG
 
ulFûeOff£t
)

782 
li°_mem_ty≥
 *
pCuº
;

783 
ULONG
 
ulSeq
;

785 i‡(
ulFûeOff£t
 =
FC_INVALID
) {

786  
FC_INVALID
;

789 
ulSeq
 = 0;

790 
pCuº
 = 
pTextAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

791 i‡(
ulFûeOff£t
 >
pCuº
->
tInfo
.ulFileOffset &&

792 
ulFûeOff£t
 < 
pCuº
->
tInfo
.ulFileOffset +

793 
pCuº
->
tInfo
.
ulLígth
) {

795  
ulSeq
 + 
ulFûeOff£t
 - 
pCuº
->
tInfo
.ulFileOffset;

797 
ulSeq
 +
pCuº
->
tInfo
.
ulLígth
;

799  
FC_INVALID
;

800 
	}
}

	@chartrans.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<˘y≥.h
>

12 #i‡
deföed
(
__STDC_ISO_10646__
)

13 
	~<w˘y≥.h
>

15 
	~"™tiw‹d.h
"

17 c⁄° 
USHORT
 
	gusCp850
[] = {

36 c⁄° 
USHORT
 
	gusCp1250
[] = {

55 c⁄° 
USHORT
 
	gusCp1251
[] = {

74 c⁄° 
USHORT
 
	gusCp1252
[] = {

93 c⁄° 
USHORT
 
	gusMacRom™
[] = {

112 c⁄° 
USHORT
 
	gusPriv©eAªa
[] = {

143 
	sch¨_èbÀ_èg
 {

144 
UCHAR
 
	mucLoˇl
;

145 
USHORT
 
	musUnicode
;

146 } 
	tch¨_èbÀ_ty≥
;

148 
ch¨_èbÀ_ty≥
 
	g©Ch¨TabÀ
[256];

149 
size_t
 
	gtNextPosFªe
 = 0;

160 
	$iCom∑ª
(c⁄° *
pvRec‹d1
, c⁄° *
pvRec‹d2
)

162 
USHORT
 
usUnicode1
, 
usUnicode2
;

164 
usUnicode1
 = ((
ch¨_èbÀ_ty≥
 *)
pvRec‹d1
)->
usUnicode
;

165 
usUnicode2
 = ((
ch¨_èbÀ_ty≥
 *)
pvRec‹d2
)->
usUnicode
;

167 i‡(
usUnicode1
 < 
usUnicode2
) {

170 i‡(
usUnicode1
 > 
usUnicode2
) {

174 
	}
}

181 c⁄° 
ch¨_èbÀ_ty≥
 *

182 
	$pGëCh¨TabÀRec‹d
(
USHORT
 
usUnicode
)

184 
ch¨_èbÀ_ty≥
 
tKey
;

186 i‡(
tNextPosFªe
 == 0) {

187  
NULL
;

189 
tKey
.
usUnicode
 = usUnicode;

190 
tKey
.
ucLoˇl
 = 0;

191  (
ch¨_èbÀ_ty≥
 *)
	`b£¨ch
(&
tKey
,

192 
©Ch¨TabÀ
,

193 
tNextPosFªe
, (
©Ch¨TabÀ
[0]),

194 
iCom∑ª
);

195 
	}
}

200 
UCHAR


201 
	$ucGëBuŒëCh¨a˘î
(
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
, 
ícodög_ty≥
 
eEncodög
)

203 #i‡
	`deföed
(
__riscos
)

206 c⁄° 
ch¨_èbÀ_ty≥
 *
pRec
;

208 
	`Áû
(
eEncodög
 =
ícodög_utf_8
);

210 i‡(
eEncodög
 =
ícodög_œtö_1
 &&

211 (
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

212 
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
)) {

214  (
UCHAR
)143;

216 i‡(
eC⁄vîsi⁄Ty≥
 !
c⁄vîsi⁄_ãxt
 &&

217 
eC⁄vîsi⁄Ty≥
 !
c⁄vîsi⁄_fmt_ãxt
) {

218 
pRec
 = 
	`pGëCh¨TabÀRec‹d
(
UNICODE_BULLET
);

219 i‡(
pRec
 !
NULL
) {

220  
pRec
->
ucLoˇl
;

222 
pRec
 = 
	`pGëCh¨TabÀRec‹d
(
UNICODE_BULLET_OPERATOR
);

223 i‡(
pRec
 !
NULL
) {

224  
pRec
->
ucLoˇl
;

226 
pRec
 = 
	`pGëCh¨TabÀRec‹d
(
UNICODE_MIDDLE_DOT
);

227 i‡(
pRec
 !
NULL
) {

228  
pRec
->
ucLoˇl
;

231  (
UCHAR
)'.';

233 
	}
}

238 
UCHAR


239 
	$ucGëNb•Ch¨a˘î
()

241 c⁄° 
ch¨_èbÀ_ty≥
 *
pRec
;

243 
pRec
 = 
	`pGëCh¨TabÀRec‹d
(0x00a0);

244 i‡(
pRec
 =
NULL
) {

245 
	`DBG_MSG
("Non-breaking spaceÑecordÇot found");

247  (
UCHAR
)0xa0;

249  
pRec
->
ucLoˇl
;

250 
	}
}

259 
BOOL


260 
	$bRódCh¨a˘îM≠pögTabÀ
(
FILE
 *
pFûe
)

262 *
pcTmp
;

263 
ULONG
 
ulUnicode
;

264 
UINT
 
uiLoˇl
;

265 
iFõlds
;

266 
szLöe
[81];

268 i‡(
pFûe
 =
NULL
) {

269  
FALSE
;

273 ()
	`mem£t
(
©Ch¨TabÀ
, 0, (atCharTable));

276 
	`fgës
(
szLöe
, ()(szLöe), 
pFûe
)) {

277 i‡(
szLöe
[0] == '#' ||

278 
szLöe
[0] == '\r' ||

279 
szLöe
[0] == '\n') {

283 
iFõlds
 = 
	`ssˇnf
(
szLöe
, "%x %lx %*s", &
uiLoˇl
, &
ulUnicode
);

284 i‡(
iFõlds
 != 2) {

285 
pcTmp
 = 
	`°rchr
(
szLöe
, '\r');

286 i‡(
pcTmp
 !
NULL
) {

287 *
pcTmp
 = '\0';

289 
pcTmp
 = 
	`°rchr
(
szLöe
, '\n');

290 i‡(
pcTmp
 !
NULL
) {

291 *
pcTmp
 = '\0';

293 
	`wîr
(0, "Sy¡axÉº‹ in: '%s'", 
szLöe
);

296 i‡(
uiLoˇl
 > 0xf‡|| 
ulUnicode
 > 0xffff) {

297 
	`wîr
(0, "SyntaxÉrror in: '%02x %04lx'",

298 
uiLoˇl
, 
ulUnicode
);

302 i‡(
uiLoˇl
 !
ulUnicode
 || uiLocal >= 0x80) {

303 
©Ch¨TabÀ
[
tNextPosFªe
].
ucLoˇl
 = (
UCHAR
)
uiLoˇl
;

304 
©Ch¨TabÀ
[
tNextPosFªe
].
usUnicode
 = (
USHORT
)
ulUnicode
;

305 
tNextPosFªe
++;

307 i‡(
tNextPosFªe
 >
	`ñemítsof
(
©Ch¨TabÀ
)) {

308 
	`wîr
(0, "Too manyÉntries inÅhe character mapping "

314 i‡(
tNextPosFªe
 != 0) {

315 
	`DBG_HEX
(
©Ch¨TabÀ
[0].
usUnicode
);

316 
	`DBG_HEX
(
©Ch¨TabÀ
[
tNextPosFªe
 - 1].
usUnicode
);

318 
	`qs‹t
(
©Ch¨TabÀ
,

319 
tNextPosFªe
, (
©Ch¨TabÀ
[0]),

320 
iCom∑ª
);

322 
	`DBG_HEX
(
©Ch¨TabÀ
[0].
usUnicode
);

323 
	`DBG_HEX
(
©Ch¨TabÀ
[
tNextPosFªe
 - 1].
usUnicode
);

326  
TRUE
;

327 
	}
}

336 
ULONG


337 
	$ulTøn¶©eCh¨a˘îs
(
USHORT
 
usCh¨
, 
ULONG
 
ulFûeOff£t
, 
iW‹dVîsi⁄
,

338 
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
, 
ícodög_ty≥
 
eEncodög
,

339 
BOOL
 
bU£MacCh¨Së
)

341 c⁄° 
ch¨_èbÀ_ty≥
 *
pTmp
;

342 c⁄° 
USHORT
 *
usCh¨Së
;

344 
usCh¨Së
 = 
NULL
;

345 i‡(
bU£MacCh¨Së
) {

347 
usCh¨Së
 = 
usMacRom™
;

348 } i‡(
iW‹dVîsi⁄
 == 0) {

350 
usCh¨Së
 = 
usCp850
;

353 
eEncodög
) {

354 
ícodög_œtö_2
:

355 
usCh¨Së
 = 
usCp1250
;

357 
ícodög_cyrûlic
:

358 
usCh¨Së
 = 
usCp1251
;

360 
ícodög_œtö_1
:

362 
usCh¨Së
 = 
usCp1252
;

366 
	`Áû
(
usCh¨Së
 =
NULL
);

367 i‡(
usCh¨
 >= 0x80 && usChar <= 0x9f) {

369 
usCh¨
 = 
usCh¨Së
[usChar - 0x80];

370 } i‡(
iW‹dVîsi⁄
 < 8 && 
usCh¨
 >= 0xa0 && usChar <= 0xff) {

372 
usCh¨
 = 
usCh¨Së
[usChar - 0x80];

376 i‡(
usCh¨
 >= 0xf020 && usChar <= 0xf0ff) {

377 
	`DBG_HEX_C
(
usPriv©eAªa
[
usCh¨
 - 0xf020] == 0x003f, usChar);

378 
usCh¨
 = 
usPriv©eAªa
[usChar - 0xf020];

382 
usCh¨
) {

383 
IGNORE_CHARACTER
:

384 
FOOTNOTE_SEPARATOR
:

385 
FOOTNOTE_CONTINUATION
:

386 
ANNOTATION
:

387 
FRAME
:

388 
LINE_FEED
:

389 
WORD_SOFT_HYPHEN
:

390 
UNICODE_HYPHENATION_POINT
:

391  
IGNORE_CHARACTER
;

392 
PICTURE
:

393 
TABLE_SEPARATOR
:

394 
TAB
:

395 
HARD_RETURN
:

396 
PAGE_BREAK
:

397 
PAR_END
:

398 
COLUMN_FEED
:

399  (
ULONG
)
usCh¨
;

400 
FOOTNOTE_OR_ENDNOTE
:

401 
	`NO_DBG_HEX
(
ulFûeOff£t
);

402 
	`eGëNŸëy≥
(
ulFûeOff£t
)) {

403 
nŸëy≥_is_foŸnŸe
:

404  
FOOTNOTE_CHAR
;

405 
nŸëy≥_is_ídnŸe
:

406  
ENDNOTE_CHAR
;

408  
UNKNOWN_NOTE_CHAR
;

410 
WORD_UNBREAKABLE_JOIN
:

411  (
ULONG
)
OUR_UNBREAKABLE_JOIN
;

416 i‡(
eEncodög
 !
ícodög_utf_8
) {

418 i‡(
usCh¨
 >= 0xff01 && usChar <= 0xff5e) {

419 
usCh¨
 -= 0xfee0;

423 i‡(
eEncodög
 =
ícodög_œtö_1
 &&

424 (
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

425 
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
)) {

427 
usCh¨
) {

428 
UNICODE_ELLIPSIS
:

430 
UNICODE_TRADEMARK_SIGN
:

432 
UNICODE_PER_MILLE_SIGN
:

434 
UNICODE_BULLET
:

435 
UNICODE_BULLET_OPERATOR
:

436 
UNICODE_BLACK_CLUB_SUIT
:

438 
UNICODE_LEFT_SINGLE_QMARK
:

440 
UNICODE_RIGHT_SINGLE_QMARK
:

442 
UNICODE_SINGLE_LEFT_ANGLE_QMARK
:

444 
UNICODE_SINGLE_RIGHT_ANGLE_QMARK
:

446 
UNICODE_LEFT_DOUBLE_QMARK
:

448 
UNICODE_RIGHT_DOUBLE_QMARK
:

450 
UNICODE_DOUBLE_LOW_9_QMARK
:

452 
UNICODE_EN_DASH
:

454 
UNICODE_EM_DASH
:

456 
UNICODE_MINUS_SIGN
:

458 
UNICODE_CAPITAL_LIGATURE_OE
:

460 
UNICODE_SMALL_LIGATURE_OE
:

462 
UNICODE_DAGGER
:

464 
UNICODE_DOUBLE_DAGGER
:

466 
UNICODE_SMALL_LIGATURE_FI
:

468 
UNICODE_SMALL_LIGATURE_FL
:

475 i‡(
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

476 i‡(
eEncodög
 =
ícodög_œtö_1
) {

477 
usCh¨
) {

478 
UNICODE_EURO_SIGN
:

483 } i‡(
eEncodög
 =
ícodög_œtö_2
) {

484 
usCh¨
) {

485 
UNICODE_CAPITAL_D_WITH_STROKE
:

486 
UNICODE_SMALL_D_WITH_STROKE
:

494 i‡(
usCh¨
 < 0x80) {

496 i‡(
usCh¨
 < 0x20 || usChar == 0x7f) {

498 
	`DBG_HEX
(
usCh¨
);

499 
	`DBG_FIXME
();

500  
IGNORE_CHARACTER
;

502  (
ULONG
)
usCh¨
;

505 i‡(
eEncodög
 =
ícodög_utf_8
) {

507  (
ULONG
)
usCh¨
;

511 
pTmp
 = 
	`pGëCh¨TabÀRec‹d
(
usCh¨
);

512 i‡(
pTmp
 !
NULL
) {

513 
	`DBG_HEX_C
(
usCh¨
 >= 0x7f && usChar <= 0x9f, usChar);

514  (
ULONG
)
pTmp
->
ucLoˇl
;

518 
usCh¨
) {

519 
UNICODE_SMALL_F_HOOK
:

520  (
ULONG
)'f';

521 
UNICODE_GREEK_CAPITAL_CHI
:

522  (
ULONG
)'X';

523 
UNICODE_GREEK_SMALL_UPSILON
:

524  (
ULONG
)'v';

525 
UNICODE_MODIFIER_CIRCUMFLEX
:

526 
UNICODE_UPWARDS_ARROW
:

527  (
ULONG
)'^';

528 
UNICODE_SMALL_TILDE
:

529 
UNICODE_TILDE_OPERATOR
:

530  (
ULONG
)'~';

531 
UNICODE_EN_QUAD
:

532 
UNICODE_EM_QUAD
:

533 
UNICODE_EN_SPACE
:

534 
UNICODE_EM_SPACE
:

535 
UNICODE_THREE_PER_EM_SPACE
:

536 
UNICODE_FOUR_PER_EM_SPACE
:

537 
UNICODE_SIX_PER_EM_SPACE
:

538 
UNICODE_FIGURE_SPACE
:

539 
UNICODE_PUNCTUATION_SPACE
:

540 
UNICODE_THIN_SPACE
:

541 
UNICODE_NARROW_NO_BREAK_SPACE
:

542 
UNICODE_LIGHT_SHADE
:

543 
UNICODE_MEDIUM_SHADE
:

544 
UNICODE_DARK_SHADE
:

545  (
ULONG
)' ';

546 
UNICODE_LEFT_DOUBLE_QMARK
:

547 
UNICODE_RIGHT_DOUBLE_QMARK
:

548 
UNICODE_DOUBLE_LOW_9_QMARK
:

549 
UNICODE_DOUBLE_HIGH_REV_9_QMARK
:

550 
UNICODE_DOUBLE_PRIME
:

551  (
ULONG
)'"';

552 
UNICODE_LEFT_SINGLE_QMARK
:

553 
UNICODE_RIGHT_SINGLE_QMARK
:

554 
UNICODE_SINGLE_LOW_9_QMARK
:

555 
UNICODE_SINGLE_HIGH_REV_9_QMARK
:

556 
UNICODE_PRIME
:

557  (
ULONG
)'\'';

558 
UNICODE_HYPHEN
:

559 
UNICODE_NON_BREAKING_HYPHEN
:

560 
UNICODE_FIGURE_DASH
:

561 
UNICODE_EN_DASH
:

562 
UNICODE_EM_DASH
:

563 
UNICODE_HORIZONTAL_BAR
:

564 
UNICODE_MINUS_SIGN
:

565 
UNICODE_BD_LIGHT_HORIZONTAL
:

566 
UNICODE_BD_DOUBLE_HORIZONTAL
:

567  (
ULONG
)'-';

568 
UNICODE_DOUBLE_VERTICAL_LINE
:

569 
UNICODE_BD_LIGHT_VERTICAL
:

570 
UNICODE_BD_DOUBLE_VERTICAL
:

571  (
ULONG
)'|';

572 
UNICODE_DOUBLE_LOW_LINE
:

573  (
ULONG
)'_';

574 
UNICODE_DAGGER
:

575  (
ULONG
)'+';

576 
UNICODE_DOUBLE_DAGGER
:

577  (
ULONG
)'#';

578 
UNICODE_BULLET
:

579 
UNICODE_BULLET_OPERATOR
:

580 
UNICODE_BLACK_CLUB_SUIT
:

581  (
ULONG
)
	`ucGëBuŒëCh¨a˘î
(
eC⁄vîsi⁄Ty≥
, 
eEncodög
);

582 
UNICODE_ONE_DOT_LEADER
:

583 
UNICODE_TWO_DOT_LEADER
:

584  (
ULONG
)'.';

585 
UNICODE_ELLIPSIS
:

586 #i‡
	`deföed
(
__riscos
)

587  (
ULONG
)
OUR_ELLIPSIS
;

589 i‡(
ulFûeOff£t
 == 0) {

590  (
ULONG
)
OUR_ELLIPSIS
;

592  
UNICODE_ELLIPSIS
;

594 
UNICODE_DOUBLE_LEFT_ANGLE_QMARK
:

595 
UNICODE_TRIANGULAR_BULLET
:

596 
UNICODE_SINGLE_LEFT_ANGLE_QMARK
:

597 
UNICODE_LEFTWARDS_ARROW
:

598  (
ULONG
)'<';

599 
UNICODE_DOUBLE_RIGHT_ANGLE_QMARK
:

600 
UNICODE_SINGLE_RIGHT_ANGLE_QMARK
:

601 
UNICODE_RIGHTWARDS_ARROW
:

602  (
ULONG
)'>';

603 
UNICODE_UNDERTIE
:

604  (
ULONG
)'-';

605 
UNICODE_N_ARY_SUMMATION
:

606  (
ULONG
)'S';

607 
UNICODE_EURO_SIGN
:

608  (
ULONG
)'E';

609 
UNICODE_CIRCLE
:

610 
UNICODE_SQUARE
:

611  (
ULONG
)'O';

612 
UNICODE_DIAMOND
:

613  (
ULONG
)
OUR_DIAMOND
;

614 
UNICODE_NUMERO_SIGN
:

615  (
ULONG
)'N';

616 
UNICODE_KELVIN_SIGN
:

617  (
ULONG
)'K';

618 
UNICODE_DOWNWARDS_ARROW
:

619  (
ULONG
)'v';

620 
UNICODE_FRACTION_SLASH
:

621 
UNICODE_DIVISION_SLASH
:

622  (
ULONG
)'/';

623 
UNICODE_ASTERISK_OPERATOR
:

624  (
ULONG
)'*';

625 
UNICODE_RATIO
:

626  (
ULONG
)':';

627 
UNICODE_BD_LIGHT_DOWN_RIGHT
:

628 
UNICODE_BD_LIGHT_DOWN_AND_LEFT
:

629 
UNICODE_BD_LIGHT_UP_AND_RIGHT
:

630 
UNICODE_BD_LIGHT_UP_AND_LEFT
:

631 
UNICODE_BD_LIGHT_VERTICAL_AND_RIGHT
:

632 
UNICODE_BD_LIGHT_VERTICAL_AND_LEFT
:

633 
UNICODE_BD_LIGHT_DOWN_AND_HORIZONTAL
:

634 
UNICODE_BD_LIGHT_UP_AND_HORIZONTAL
:

635 
UNICODE_BD_LIGHT_VERTICAL_AND_HORIZONTAL
:

636 
UNICODE_BD_DOUBLE_DOWN_AND_RIGHT
:

637 
UNICODE_BD_DOUBLE_DOWN_AND_LEFT
:

638 
UNICODE_BD_DOUBLE_UP_AND_RIGHT
:

639 
UNICODE_BD_DOUBLE_UP_AND_LEFT
:

640 
UNICODE_BD_DOUBLE_VERTICAL_AND_RIGHT
:

641 
UNICODE_BD_DOUBLE_VERTICAL_AND_LEFT
:

642 
UNICODE_BD_DOUBLE_DOWN_AND_HORIZONTAL
:

643 
UNICODE_BD_DOUBLE_UP_AND_HORIZONTAL
:

644 
UNICODE_BD_DOUBLE_VERTICAL_AND_HORIZONTAL
:

645 
UNICODE_BLACK_SQUARE
:

646  (
ULONG
)'+';

647 
UNICODE_HAIR_SPACE
:

648 
UNICODE_ZERO_WIDTH_SPACE
:

649 
UNICODE_ZERO_WIDTH_NON_JOINER
:

650 
UNICODE_ZERO_WIDTH_JOINER
:

651 
UNICODE_LEFT_TO_RIGHT_MARK
:

652 
UNICODE_RIGHT_TO_LEFT_MARK
:

653 
UNICODE_LEFT_TO_RIGHT_EMBEDDING
:

654 
UNICODE_RIGHT_TO_LEFT_EMBEDDING
:

655 
UNICODE_POP_DIRECTIONAL_FORMATTING
:

656 
UNICODE_LEFT_TO_RIGHT_OVERRIDE
:

657 
UNICODE_RIGHT_TO_LEFT_OVERRIDE
:

658 
UNICODE_ZERO_WIDTH_NO_BREAK_SPACE
:

659  
IGNORE_CHARACTER
;

664 i‡(
usCh¨
 =
UNICODE_TRADEMARK_SIGN
) {

669  
IGNORE_CHARACTER
;

672 i‡(
usCh¨
 >= 0xa0 && usChar <= 0xff) {

674  (
ULONG
)
usCh¨
;

677 
	`DBG_HEX_C
(
usCh¨
 < 0x3000 || usCh¨ >0xd800, 
ulFûeOff£t
);

678 
	`DBG_HEX_C
(
usCh¨
 < 0x3000 || usChar >= 0xd800, usChar);

679 
	`DBG_MSG_C
(
usCh¨
 >= 0xe000 && usChar < 0xf900, "Private Use Area");

683 
	}
}

695 
ULONG


696 
	$ulToUµî
(
ULONG
 
ulCh¨
)

698 i‡(
ulCh¨
 < 0x80) {

700  (
ULONG
)
	`touµî
(()
ulCh¨
);

702 i‡(
ulCh¨
 >= 0xe0 && ulChar <= 0xfe && ulChar != 0xf7) {

708  
ulCh¨
 & ~0x20;

710 #i‡
	`deföed
(
__STDC_ISO_10646__
)

715 i‡(
ulCh¨
 > 0xff) {

716  (
ULONG
)
	`towuµî
((
wöt_t
)
ulCh¨
);

719  
ulCh¨
;

720 
	}
}

	@datalist.c

9 
	~<°dlib.h
>

10 
	~<î∫o.h
>

11 
	~"™tiw‹d.h
"

13 #i‡
deföed
(
__riscos
)

14 
	#EIO
 42

	)

22 
	sd©a_mem_èg
 {

23 
d©a_block_ty≥
 
	mtInfo
;

24 
d©a_mem_èg
 *
	mpNext
;

25 } 
	td©a_mem_ty≥
;

28 
d©a_mem_ty≥
 *
	gpAnch‹
 = 
NULL
;

30 
d©a_mem_ty≥
 *
	gpBlockLa°
 = 
NULL
;

32 
d©a_mem_ty≥
 *
	gpBlockCuºít
 = 
NULL
;

33 
ULONG
 
	gulBlockOff£t
 = 0;

34 
size_t
 
	gtByãNext
 = 0;

36 
UCHAR
 
	gaucBlock
[
BIG_BLOCK_SIZE
];

43 
	$vDe°royD©aBlockLi°
()

45 
d©a_mem_ty≥
 *
pCuº
, *
pNext
;

47 
	`DBG_MSG
("vDestroyDataBlockList");

49 
pCuº
 = 
pAnch‹
;

50 
pCuº
 !
NULL
) {

51 
pNext
 = 
pCuº
->pNext;

52 
pCuº
 = 
	`x‰ì
(pCurr);

53 
pCuº
 = 
pNext
;

55 
pAnch‹
 = 
NULL
;

57 
pBlockLa°
 = 
NULL
;

58 
pBlockCuºít
 = 
NULL
;

59 
ulBlockOff£t
 = 0;

60 
tByãNext
 = 0;

61 
	}
}

68 
BOOL


69 
	$bAdd2D©aBlockLi°
(c⁄° 
d©a_block_ty≥
 *
pD©aBlock
)

71 
d©a_mem_ty≥
 *
pLi°Membî
;

73 
	`Áû
(
pD©aBlock
 =
NULL
);

74 
	`Áû
(
pD©aBlock
->
ulFûeOff£t
 =
FC_INVALID
);

75 
	`Áû
(
pD©aBlock
->
ulD©aPos
 =
CP_INVALID
);

76 
	`Áû
(
pD©aBlock
->
ulLígth
 == 0);

78 
	`NO_DBG_MSG
("bAdd2DataBlockList");

79 
	`NO_DBG_HEX
(
pD©aBlock
->
ulFûeOff£t
);

80 
	`NO_DBG_HEX
(
pD©aBlock
->
ulD©aPos
);

81 
	`NO_DBG_HEX
(
pD©aBlock
->
ulLígth
);

83 i‡(
pD©aBlock
->
ulFûeOff£t
 =
FC_INVALID
 ||

84 
pD©aBlock
->
ulD©aPos
 =
CP_INVALID
 ||

85 
pD©aBlock
->
ulLígth
 == 0) {

86 
	`wîr
(0, "Software (datablock)Érror");

87  
FALSE
;

90 i‡(
pBlockLa°
 !
NULL
 &&

91 
pBlockLa°
->
tInfo
.
ulFûeOff£t
 +

92 
pBlockLa°
->
tInfo
.
ulLígth
 =
pD©aBlock
->
ulFûeOff£t
 &&

93 
pBlockLa°
->
tInfo
.
ulD©aPos
 +

94 
pBlockLa°
->
tInfo
.
ulLígth
 =
pD©aBlock
->
ulD©aPos
) {

96 
pBlockLa°
->
tInfo
.
ulLígth
 +
pD©aBlock
->ulLength;

97  
TRUE
;

100 
pLi°Membî
 = 
	`xmÆloc
((
d©a_mem_ty≥
));

102 
pLi°Membî
->
tInfo
 = *
pD©aBlock
;

103 
pLi°Membî
->
pNext
 = 
NULL
;

104 i‡(
pAnch‹
 =
NULL
) {

105 
pAnch‹
 = 
pLi°Membî
;

107 
	`Áû
(
pBlockLa°
 =
NULL
);

108 
pBlockLa°
->
pNext
 = 
pLi°Membî
;

110 
pBlockLa°
 = 
pLi°Membî
;

111  
TRUE
;

112 
	}
}

119 
ULONG


120 
	$ulGëD©aOff£t
(
FILE
 *
pFûe
)

122  
pBlockCuºít
->
tInfo
.
ulFûeOff£t
 + 
ulBlockOff£t
 + 
tByãNext
;

123 
	}
}

130 
BOOL


131 
	$bSëD©aOff£t
(
FILE
 *
pFûe
, 
ULONG
 
ulFûeOff£t
)

133 
d©a_mem_ty≥
 *
pCuº
;

134 
size_t
 
tRódLí
;

136 
	`DBG_HEX
(
ulFûeOff£t
);

138 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

139 i‡(
ulFûeOff£t
 < 
pCuº
->
tInfo
.ulFileOffset ||

140 
ulFûeOff£t
 >
pCuº
->
tInfo
.ulFileOffset +

141 
pCuº
->
tInfo
.
ulLígth
) {

146 
tRódLí
 = (
size_t
)(
pCuº
->
tInfo
.
ulFûeOff£t
 +

147 
pCuº
->
tInfo
.
ulLígth
 -

148 
ulFûeOff£t
);

150 i‡(
tRódLí
 > (
aucBlock
)) {

151 
tRódLí
 = (
aucBlock
);

154 i‡(!
	`bRódByãs
(
aucBlock
, 
tRódLí
, 
ulFûeOff£t
, 
pFûe
)) {

155  
FALSE
;

158 
pBlockCuºít
 = 
pCuº
;

159 
ulBlockOff£t
 = 
ulFûeOff£t
 - 
pCuº
->
tInfo
.ulFileOffset;

160 
tByãNext
 = 0;

161  
TRUE
;

163  
FALSE
;

164 
	}
}

170 
	$iNextByã
(
FILE
 *
pFûe
)

172 
ULONG
 
ulRódOff
;

173 
size_t
 
tRódLí
;

175 
	`Áû
(
pBlockCuºít
 =
NULL
);

177 i‡(
tByãNext
 >(
aucBlock
) ||

178 
ulBlockOff£t
 + 
tByãNext
 >
pBlockCuºít
->
tInfo
.
ulLígth
) {

179 i‡(
ulBlockOff£t
 + (
aucBlock
) <

180 
pBlockCuºít
->
tInfo
.
ulLígth
) {

182 
ulBlockOff£t
 +(
aucBlock
);

185 
pBlockCuºít
 =ÖBlockCuºít->
pNext
;

186 
ulBlockOff£t
 = 0;

188 i‡(
pBlockCuºít
 =
NULL
) {

190 
î∫o
 = 
EIO
;

191  
EOF
;

193 
tRódLí
 = (
size_t
)

194 (
pBlockCuºít
->
tInfo
.
ulLígth
 - 
ulBlockOff£t
);

195 i‡(
tRódLí
 > (
aucBlock
)) {

196 
tRódLí
 = (
aucBlock
);

198 
ulRódOff
 = 
pBlockCuºít
->
tInfo
.
ulFûeOff£t
 + 
ulBlockOff£t
;

199 i‡(!
	`bRódByãs
(
aucBlock
, 
tRódLí
, 
ulRódOff
, 
pFûe
)) {

200 
î∫o
 = 
EIO
;

201  
EOF
;

203 
tByãNext
 = 0;

205  ()
aucBlock
[
tByãNext
++];

206 
	}
}

215 
USHORT


216 
	$usNextW‹d
(
FILE
 *
pFûe
)

218 
USHORT
 
usLSB
, 
usMSB
;

220 
usLSB
 = (
USHORT
)
	`iNextByã
(
pFûe
);

221 i‡(
usLSB
 =(
USHORT
)
EOF
) {

222 
î∫o
 = 
EIO
;

223  (
USHORT
)
EOF
;

225 
usMSB
 = (
USHORT
)
	`iNextByã
(
pFûe
);

226 i‡(
usMSB
 =(
USHORT
)
EOF
) {

227 
	`DBG_MSG
("usNextWord: Unexpected EOF");

228 
î∫o
 = 
EIO
;

229  (
USHORT
)
EOF
;

231  (
usMSB
 << 8Ë| 
usLSB
;

232 
	}
}

241 
ULONG


242 
	$ulNextL⁄g
(
FILE
 *
pFûe
)

244 
ULONG
 
ulLSW
, 
ulMSW
;

246 
ulLSW
 = (
ULONG
)
	`usNextW‹d
(
pFûe
);

247 i‡(
ulLSW
 =(
ULONG
)
EOF
) {

248 
î∫o
 = 
EIO
;

249  (
ULONG
)
EOF
;

251 
ulMSW
 = (
ULONG
)
	`usNextW‹d
(
pFûe
);

252 i‡(
ulMSW
 =(
ULONG
)
EOF
) {

253 
	`DBG_MSG
("ulNextLong: Unexpected EOF");

254 
î∫o
 = 
EIO
;

255  (
ULONG
)
EOF
;

257  (
ulMSW
 << 16Ë| 
ulLSW
;

258 
	}
}

267 
USHORT


268 
	$usNextW‹dBE
(
FILE
 *
pFûe
)

270 
USHORT
 
usLSB
, 
usMSB
;

272 
usMSB
 = (
USHORT
)
	`iNextByã
(
pFûe
);

273 i‡(
usMSB
 =(
USHORT
)
EOF
) {

274 
î∫o
 = 
EIO
;

275  (
USHORT
)
EOF
;

277 
usLSB
 = (
USHORT
)
	`iNextByã
(
pFûe
);

278 i‡(
usLSB
 =(
USHORT
)
EOF
) {

279 
	`DBG_MSG
("usNextWordBE: Unexpected EOF");

280 
î∫o
 = 
EIO
;

281  (
USHORT
)
EOF
;

283  (
usMSB
 << 8Ë| 
usLSB
;

284 
	}
}

293 
ULONG


294 
	$ulNextL⁄gBE
(
FILE
 *
pFûe
)

296 
ULONG
 
ulLSW
, 
ulMSW
;

298 
ulMSW
 = (
ULONG
)
	`usNextW‹dBE
(
pFûe
);

299 i‡(
ulMSW
 =(
ULONG
)
EOF
) {

300 
î∫o
 = 
EIO
;

301  (
ULONG
)
EOF
;

303 
ulLSW
 = (
ULONG
)
	`usNextW‹dBE
(
pFûe
);

304 i‡(
ulLSW
 =(
ULONG
)
EOF
) {

305 
	`DBG_MSG
("ulNextLongBE: Unexpected EOF");

306 
î∫o
 = 
EIO
;

307  (
ULONG
)
EOF
;

309  (
ulMSW
 << 16Ë| 
ulLSW
;

310 
	}
}

317 
size_t


318 
	$tSkùByãs
(
FILE
 *
pFûe
, 
size_t
 
tToSkù
)

320 
size_t
 
tToGo
, 
tMaxMove
, 
tMove
;

322 
	`Áû
(
pFûe
 =
NULL
);

323 
	`Áû
(
pBlockCuºít
 =
NULL
);

325 
tToGo
 = 
tToSkù
;

326 
tToGo
 != 0) {

328 
tMaxMove
 = 
	`mö
((
aucBlock
Ë- 
tByãNext
,

329 (
size_t
)(
pBlockCuºít
->
tInfo
.
ulLígth
 -

330 
ulBlockOff£t
 - 
tByãNext
));

331 
tMove
 = 
	`mö
(
tMaxMove
, 
tToGo
);

332 
tByãNext
 +
tMove
;

333 
tToGo
 -
tMove
;

334 i‡(
tToGo
 != 0) {

336 i‡(
	`iNextByã
(
pFûe
Ë=
EOF
) {

337  
tToSkù
 - 
tToGo
;

339 
tToGo
--;

342  
tToSkù
;

343 
	}
}

352 
ULONG


353 
	$ulD©aPos2FûeOff£t
(
ULONG
 
ulD©aPos
)

355 
d©a_mem_ty≥
 *
pCuº
;

357 
	`Áû
(
ulD©aPos
 =
CP_INVALID
);

359 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

360 i‡(
ulD©aPos
 < 
pCuº
->
tInfo
.ulDataPos ||

361 
ulD©aPos
 >
pCuº
->
tInfo
.ulDataPos +

362 
pCuº
->
tInfo
.
ulLígth
) {

367  
pCuº
->
tInfo
.
ulFûeOff£t
 +

368 
ulD©aPos
 -

369 
pCuº
->
tInfo
.
ulD©aPos
;

372 
	`DBG_HEX_C
(
ulD©aPos
 != 0, ulDataPos);

373  
FC_INVALID
;

374 
	}
}

	@debug.h

9 #i‡!
deföed
(
__debug_h
)

10 
	#__debug_h
 1

	)

12 
	~<°dio.h
>

13 
	~<˘y≥.h
>

15 #i‡
deföed
(
DEBUG
)

17 
	#DBG_MSG
(
t
Ë()
	`Ârötf
(
°dîr
,\

19 
__FILE__
, 
__LINE__
, (
t
))

	)

21 
	#DBG_STRN
(
t
,
m
Ë()
	`Ârötf
(
°dîr
,\

23 
__FILE__
, 
__LINE__
,\

24 ()(
m
), ()(m), (c⁄° *)(
t
))

	)

26 
	#DBG_CHR
(
m
Ë()
	`Ârötf
(
°dîr
,\

28 
__FILE__
, 
__LINE__
,\

29 ()(
m
), ()()(m),\

30 
	`i•röt
(()()(
m
))?()(m):' ')

	)

32 
	#DBG_DEC
(
m
Ë()
	`Ârötf
(
°dîr
,\

34 
__FILE__
, 
__LINE__
, ()(
m
))

	)

36 
	#DBG_HEX
(
m
Ë()
	`Ârötf
(
°dîr
,\

38 
__FILE__
, 
__LINE__
, ()(
m
))

	)

40 
	#DBG_FLT
(
m
Ë()
	`Ârötf
(
°dîr
,\

42 
__FILE__
, 
__LINE__
, ()(
m
))

	)

44 
	#DBG_FIXME
(Ë()
	`Ârötf
(
°dîr
,\

46 
__FILE__
, 
__LINE__
)

	)

48 
	#DBG_PRINT_BLOCK
(
b
,
m
Ë
	`vPrötBlock
(
__FILE__
, 
__LINE__
,(b),(m))

	)

49 
	#DBG_UNICODE
(
t
Ë
	`vPrötUnicode
(
__FILE__
, 
__LINE__
,\

50 (c⁄° 
UCHAR
 *)(
t
),
	`unûí
—))

	)

51 
	#DBG_UNICODE_N
(
t
,
m
Ë
	`vPrötUnicode
(
__FILE__
, 
__LINE__
,\

52 (c⁄° 
UCHAR
 *)(
t
),(
m
))

	)

54 
	#DBG_MSG_C
(
c
,
t
Ëdÿ{ i‡(cË
	`DBG_MSG
—); } 0)

	)

55 
	#DBG_STRN_C
(
c
,
t
,
m
Ëdÿ{ i‡(cË
	`DBG_STRN
—,m); } 0)

	)

56 
	#DBG_CHR_C
(
c
,
m
Ëdÿ{ i‡(cË
	`DBG_CHR
(m); } 0)

	)

57 
	#DBG_DEC_C
(
c
,
m
Ëdÿ{ i‡(cË
	`DBG_DEC
(m); } 0)

	)

58 
	#DBG_HEX_C
(
c
,
m
Ëdÿ{ i‡(cË
	`DBG_HEX
(m); } 0)

	)

59 
	#DBG_FLT_C
(
c
,
m
Ëdÿ{ i‡(cË
	`DBG_FLT
(m); } 0)

	)

63 
	#DBG_MSG
(
t
Ë

	)

64 
	#DBG_STRN
(
t
,
m
Ë

	)

65 
	#DBG_CHR
(
m
Ë

	)

66 
	#DBG_DEC
(
m
Ë

	)

67 
	#DBG_HEX
(
m
Ë

	)

68 
	#DBG_FLT
(
m
Ë

	)

70 
	#DBG_FIXME
(Ë

	)

71 
	#DBG_PRINT_BLOCK
(
b
,
m
Ë

	)

72 
	#DBG_UNICODE
(
t
Ë

	)

73 
	#DBG_UNICODE_N
(
t
,
m
Ë

	)

75 
	#DBG_MSG_C
(
c
,
t
Ë

	)

76 
	#DBG_STRN_C
(
c
,
t
,
m
Ë

	)

77 
	#DBG_CHR_C
(
c
,
m
Ë

	)

78 
	#DBG_DEC_C
(
c
,
m
Ë

	)

79 
	#DBG_HEX_C
(
c
,
m
Ë

	)

80 
	#DBG_FLT_C
(
c
,
m
Ë

	)

84 
	#NO_DBG_MSG
(
t
Ë

	)

85 
	#NO_DBG_STRN
(
t
,
m
Ë

	)

86 
	#NO_DBG_CHR
(
m
Ë

	)

87 
	#NO_DBG_DEC
(
m
Ë

	)

88 
	#NO_DBG_HEX
(
m
Ë

	)

89 
	#NO_DBG_FLT
(
m
Ë

	)

91 
	#NO_DBG_PRINT_BLOCK
(
b
,
m
Ë

	)

92 
	#NO_DBG_UNICODE
(
t
Ë

	)

93 
	#NO_DBG_UNICODE_N
(
t
,
m
Ë

	)

95 
	#NO_DBG_MSG_C
(
c
,
t
Ë

	)

96 
	#NO_DBG_STRN_C
(
c
,
t
,
m
Ë

	)

97 
	#NO_DBG_CHR_C
(
c
,
m
Ë

	)

98 
	#NO_DBG_DEC_C
(
c
,
m
Ë

	)

99 
	#NO_DBG_HEX_C
(
c
,
m
Ë

	)

100 
	#NO_DBG_FLT_C
(
c
,
m
Ë

	)

102 #i‡
deföed
(
TRACE
)

104 
	#TRACE_MSG
(
t
) do {\

105 ()
	`Ârötf
(
°dîr
,\

107 
__FILE__
, 
__LINE__
, (
t
));\

108 ()
	`fÊush
(
°dîr
);\

109 } 0)

	)

113 
	#TRACE_MSG
(
t
Ë

	)

	@depot.c

9 
	~"™tiw‹d.h
"

11 
	#SIZE_RATIO
 (
BIG_BLOCK_SIZE
/
SMALL_BLOCK_SIZE
)

	)

13 
ULONG
 *
	gaulSmÆlBlockLi°
 = 
NULL
;

14 
size_t
 
	gtSmÆlBlockLi°Lí
 = 0;

21 
	$vDe°roySmÆlBlockLi°
()

23 
	`DBG_MSG
("vDestroySmallBlockList");

25 
aulSmÆlBlockLi°
 = 
	`x‰ì
(aulSmallBlockList);

26 
tSmÆlBlockLi°Lí
 = 0;

27 
	}
}

34 
BOOL


35 
	$bCª©eSmÆlBlockLi°
(
ULONG
 
ulSèπblock
, c⁄° ULONG *
aulBBD
, 
size_t
 
tBBDLí
)

37 
ULONG
 
ulTmp
;

38 
size_t
 
tSize
;

39 
iIndex
;

41 
	`Áû
(
aulSmÆlBlockLi°
 !
NULL
);

42 
	`Áû
(
tSmÆlBlockLi°Lí
 != 0);

43 
	`Áû
(
ulSèπblock
 > 
MAX_BLOCKNUMBER
 && ulSèπblock !
END_OF_CHAIN
);

44 
	`Áû
(
aulBBD
 =
NULL
);

45 
	`Áû
(
tBBDLí
 == 0);

48 
tSmÆlBlockLi°Lí
 = 0, 
ulTmp
 = 
ulSèπblock
;

49 
tSmÆlBlockLi°Lí
 < 
tBBDLí
 && 
ulTmp
 !
END_OF_CHAIN
;

50 
tSmÆlBlockLi°Lí
++, 
ulTmp
 = 
aulBBD
[ulTmp]) {

51 i‡(
ulTmp
 >(
ULONG
)
tBBDLí
) {

52 
	`DBG_DEC
(
ulTmp
);

53 
	`DBG_DEC
(
tBBDLí
);

54 
	`wîr
(1, "The Big Block Depot is damaged");

57 
	`DBG_DEC
(
tSmÆlBlockLi°Lí
);

59 i‡(
tSmÆlBlockLi°Lí
 == 0) {

61 
	`Áû
(
ulSèπblock
 !
END_OF_CHAIN
);

62 
aulSmÆlBlockLi°
 = 
NULL
;

63  
TRUE
;

67 
tSize
 = 
tSmÆlBlockLi°Lí
 * (
ULONG
);

68 
aulSmÆlBlockLi°
 = 
	`xmÆloc
(
tSize
);

69 
iIndex
 = 0, 
ulTmp
 = 
ulSèπblock
;

70 
iIndex
 < ()
tBBDLí
 && 
ulTmp
 !
END_OF_CHAIN
;

71 
iIndex
++, 
ulTmp
 = 
aulBBD
[ulTmp]) {

72 i‡(
ulTmp
 >(
ULONG
)
tBBDLí
) {

73 
	`DBG_DEC
(
ulTmp
);

74 
	`DBG_DEC
(
tBBDLí
);

75 
	`wîr
(1, "The Big Block Depot is damaged");

77 
aulSmÆlBlockLi°
[
iIndex
] = 
ulTmp
;

78 
	`NO_DBG_DEC
(
aulSmÆlBlockLi°
[
iIndex
]);

80  
TRUE
;

81 
	}
}

86 
ULONG


87 
	$ulDïŸOff£t
(
ULONG
 
ulIndex
, 
size_t
 
tBlockSize
)

89 
ULONG
 
ulTmp
;

90 
size_t
 
tTmp
;

92 
	`Áû
(
ulIndex
 >
ULONG_MAX
 / 
BIG_BLOCK_SIZE
);

94 
tBlockSize
) {

95 
BIG_BLOCK_SIZE
:

96  (
ulIndex
 + 1Ë* 
BIG_BLOCK_SIZE
;

97 
SMALL_BLOCK_SIZE
:

98 
tTmp
 = (
size_t
)(
ulIndex
 / 
SIZE_RATIO
);

99 
ulTmp
 = 
ulIndex
 % 
SIZE_RATIO
;

100 i‡(
aulSmÆlBlockLi°
 =
NULL
 ||

101 
tTmp
 >
tSmÆlBlockLi°Lí
) {

102 
	`DBG_HEX
(
aulSmÆlBlockLi°
);

103 
	`DBG_DEC
(
tSmÆlBlockLi°Lí
);

104 
	`DBG_DEC
(
tTmp
);

107  ((
aulSmÆlBlockLi°
[
tTmp
] + 1Ë* 
SIZE_RATIO
 +

108 
ulTmp
Ë* 
SMALL_BLOCK_SIZE
;

110 
	`DBG_DEC
(
tBlockSize
);

111 
	`DBG_FIXME
();

114 
	}
}

	@doclist.c

12 
	~"™tiw‹d.h
"

14 
	#HALF_INCH
 36000L

	)

17 
documít_block_ty≥
 *
	gpAnch‹
 = 
NULL
;

18 
documít_block_ty≥
 
	gtInfo
;

25 
	$vDe°royDocumítInfoLi°
()

27 
	`DBG_MSG
("vDestroyDocumentInfoList");

29 
pAnch‹
 = 
NULL
;

30 
	}
}

36 
	$vCª©eDocumítInfoLi°
(c⁄° 
documít_block_ty≥
 *
pDocumít
)

38 
	`Áû
(
pDocumít
 =
NULL
);

39 
	`Áû
(
pAnch‹
 !
NULL
);

41 
tInfo
 = *
pDocumít
;

42 
pAnch‹
 = &
tInfo
;

43 
	}
}

49 
	$lGëDeÁu…TabWidth
()

51 
lDeÁu…TabWidth
;

52 
USHORT
 
usTmp
;

54 i‡(
pAnch‹
 =
NULL
) {

55 
	`DBG_FIXME
();

56  
HALF_INCH
;

58 
usTmp
 = 
pAnch‹
->
usDeÁu…TabWidth
;

59 
lDeÁu…TabWidth
 = 
usTmp
 =0 ? 
HALF_INCH
 : 
	`lTwùs2MûliPoöts
(usTmp);

60 
	`NO_DBG_DEC
(
lDeÁu…TabWidth
);

61  
lDeÁu…TabWidth
;

62 
	}
}

67 
UCHAR


68 
	$ucGëD›HdrFåS≥cifiˇti⁄
()

70 i‡(
pAnch‹
 =
NULL
) {

71 
	`DBG_FIXME
();

74  
pAnch‹
->
ucHdrFåS≥cifiˇti⁄
;

75 
	}
}

	@fail.c

9 
	~<°dlib.h
>

10 
	~"™tiw‹d.h
"

12 #i‡!
deföed
(
NDEBUG
)

14 
	$__Áû
(*
szEx¥essi⁄
, *
szFûíame
, 
iLöeNumbî
)

16 i‡(
szEx¥essi⁄
 =
NULL
 || 
szFûíame
 == NULL) {

17 
	`wîr
(1, "InternalÉrror:ÇoÉxpression");

19 #i‡
	`deföed
(
DEBUG
)

20 
	`Ârötf
(
°dîr
, "%s[%3d]: InternalÉrror in '%s'\n",

21 
szFûíame
, 
iLöeNumbî
, 
szEx¥essi⁄
);

23 
	`wîr
(1, "InternalÉrror in '%s' in file %sátÜine %d",

24 
szEx¥essi⁄
, 
szFûíame
, 
iLöeNumbî
);

25 
	}
}

	@fail.h

9 #i‡!
deföed
(
__Áû_h
)

10 
	#__Áû_h
 1

	)

12 #unde‡
Áû


14 #i‡
deföed
(
NDEBUG
)

15 
	#Áû
(
e
Ë(()0)

	)

17 
	#Áû
(
e
Ë(”Ë? 
	`__Áû
(#e, 
__FILE__
, 
__LINE__
Ë: ()0)

	)

20 
__Áû
(*, *, );

	@finddata.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~"™tiw‹d.h
"

19 
BOOL


20 
	$bAddD©aBlocks
(
ULONG
 
ulD©aPosFú°
, ULONG 
ulTŸÆLígth
,

21 
ULONG
 
ulSèπBlock
, c⁄° ULONG *
aulBBD
, 
size_t
 
tBBDLí
)

23 
d©a_block_ty≥
 
tD©aBlock
;

24 
ULONG
 
ulD©aPos
, 
ulOff£t
, 
ulIndex
;

25 
lToGo
;

26 
BOOL
 
bSuc˚ss
;

28 
	`Áû
(
ulTŸÆLígth
 > (
ULONG
)
LONG_MAX
);

29 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

30 
	`Áû
(
aulBBD
 =
NULL
);

32 
	`NO_DBG_HEX
(
ulD©aPosFú°
);

33 
	`NO_DBG_DEC
(
ulTŸÆLígth
);

35 
lToGo
 = ()
ulTŸÆLígth
;

37 
ulD©aPos
 = 
ulD©aPosFú°
;

38 
ulOff£t
 = 
ulD©aPosFú°
;

39 
ulIndex
 = 
ulSèπBlock
;

40 
ulIndex
 !
END_OF_CHAIN
 && 
lToGo
 > 0;

41 
ulIndex
 = 
aulBBD
[ulIndex]) {

42 i‡(
ulIndex
 =
UNUSED_BLOCK
 || ulIndex >(
ULONG
)
tBBDLí
) {

43 
	`DBG_DEC
(
ulIndex
);

44 
	`DBG_DEC
(
tBBDLí
);

45  
FALSE
;

47 i‡(
ulOff£t
 >
BIG_BLOCK_SIZE
) {

48 
ulOff£t
 -
BIG_BLOCK_SIZE
;

51 
tD©aBlock
.
ulFûeOff£t
 =

52 (
ulIndex
 + 1Ë* 
BIG_BLOCK_SIZE
 + 
ulOff£t
;

53 
tD©aBlock
.
ulD©aPos
 = ulDataPos;

54 
tD©aBlock
.
ulLígth
 = 
	`mö
(
BIG_BLOCK_SIZE
 - 
ulOff£t
,

55 (
ULONG
)
lToGo
);

56 
	`Áû
(
tD©aBlock
.
ulLígth
 > 
BIG_BLOCK_SIZE
);

57 
ulOff£t
 = 0;

58 i‡(!
	`bAdd2D©aBlockLi°
(&
tD©aBlock
)) {

59 
	`DBG_HEX
(
tD©aBlock
.
ulFûeOff£t
);

60 
	`DBG_HEX
(
tD©aBlock
.
ulD©aPos
);

61 
	`DBG_DEC
(
tD©aBlock
.
ulLígth
);

62  
FALSE
;

64 
ulD©aPos
 +
tD©aBlock
.
ulLígth
;

65 
lToGo
 -()
tD©aBlock
.
ulLígth
;

67 
bSuc˚ss
 = 
lToGo
 == 0 ||

68 (
ulTŸÆLígth
 =(
ULONG
)
LONG_MAX
 && 
ulIndex
 =
END_OF_CHAIN
);

69 
	`DBG_DEC_C
(!
bSuc˚ss
, 
lToGo
);

70 
	`DBG_DEC_C
(!
bSuc˚ss
, 
ulTŸÆLígth
);

71 
	`DBG_DEC_C
(!
bSuc˚ss
, 
ulIndex
);

72  
bSuc˚ss
;

73 
	}
}

82 
BOOL


83 
	$bGë6DocumítD©a
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

84 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
, c⁄° 
UCHAR
 *
aucHódî
)

86 
UCHAR
 *
aucBuf„r
;

87 
ULONG
 
ulBegöTextInfo
, 
ulOff£t
, 
ulTŸLígth
;

88 
size_t
 
tTextInfoLí
;

89 
iIndex
, 
iOff
, 
iTy≥
, 
iLí
, 
iPõ˚s
;

91 
	`DBG_MSG
("bGet6DocumentData");

93 
	`Áû
(
pFûe
 =
NULL
);

94 
	`Áû
(
aulBBD
 =
NULL
);

95 
	`Áû
(
aucHódî
 =
NULL
);

97 
ulBegöTextInfo
 = 
	`ulGëL⁄g
(0x160, 
aucHódî
);

98 
	`DBG_HEX
(
ulBegöTextInfo
);

99 
tTextInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x164, 
aucHódî
);

100 
	`DBG_DEC
(
tTextInfoLí
);

102 
aucBuf„r
 = 
	`xmÆloc
(
tTextInfoLí
);

103 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

104 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

105 
aucBuf„r
, 
ulBegöTextInfo
, 
tTextInfoLí
)) {

106 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

107  
FALSE
;

109 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tTextInfoLí
);

111 
iOff
 = 0;

112 
iOff
 < ()
tTextInfoLí
) {

113 
iTy≥
 = ()
	`ucGëByã
(
iOff
, 
aucBuf„r
);

114 
iOff
++;

115 i‡(
iTy≥
 == 0) {

116 
iOff
++;

119 
iLí
 = ()
	`usGëW‹d
(
iOff
, 
aucBuf„r
);

120 
iOff
 += 2;

121 i‡(
iTy≥
 == 1) {

122 
iOff
 +
iLí
;

125 i‡(
iTy≥
 != 2) {

126 
	`wîr
(0, "UnknownÅype of 'fastsaved' format");

127 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

128  
FALSE
;

131 
	`NO_DBG_DEC
(
iLí
);

132 
iOff
 += 2;

133 
iPõ˚s
 = (
iLí
 - 4) / 12;

134 
	`DBG_DEC
(
iPõ˚s
);

135 
iIndex
 = 0; iIndex < 
iPõ˚s
; iIndex++) {

136 
ulOff£t
 = 
	`ulGëL⁄g
(

137 
iOff
 + (
iPõ˚s
 + 1Ë* 4 + 
iIndex
 * 8 + 2,

138 
aucBuf„r
);

139 
ulTŸLígth
 = 
	`ulGëL⁄g
(
iOff
 + (
iIndex
 + 1) * 4,

140 
aucBuf„r
) -

141 
	`ulGëL⁄g
(
iOff
 + 
iIndex
 * 4,

142 
aucBuf„r
);

143 i‡(!
	`bAddD©aBlocks
(
ulOff£t
, 
ulTŸLígth
,

144 
ulSèπBlock
,

145 
aulBBD
, 
tBBDLí
)) {

146 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

147  
FALSE
;

152 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

153  
TRUE
;

154 
	}
}

	@findtext.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~"™tiw‹d.h
"

19 
BOOL


20 
	$bAddTextBlocks
(
ULONG
 
ulCh¨PosFú°
, ULONG 
ulTŸÆLígth
,

21 
BOOL
 
bU£sUnicode
, 
USHORT
 
usPr›Mod
,

22 
ULONG
 
ulSèπBlock
, c⁄° ULONG *
aulBBD
, 
size_t
 
tBBDLí
)

24 
ãxt_block_ty≥
 
tTextBlock
;

25 
ULONG
 
ulCh¨Pos
, 
ulOff£t
, 
ulIndex
;

26 
lToGo
;

28 
	`Áû
(
ulTŸÆLígth
 > (
ULONG
)
LONG_MAX
 / 2);

29 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

30 
	`Áû
(
aulBBD
 =
NULL
);

32 
	`NO_DBG_HEX
(
ulCh¨PosFú°
);

33 
	`NO_DBG_DEC
(
ulTŸÆLígth
);

35 i‡(
bU£sUnicode
) {

37 
	`NO_DBG_MSG
("Uses Unicode");

38 
lToGo
 = ()
ulTŸÆLígth
 * 2;

41 
	`NO_DBG_MSG
("Uses ASCII");

42 
lToGo
 = ()
ulTŸÆLígth
;

45 
ulCh¨Pos
 = 
ulCh¨PosFú°
;

46 
ulOff£t
 = 
ulCh¨PosFú°
;

47 
ulIndex
 = 
ulSèπBlock
;

48 
ulIndex
 !
END_OF_CHAIN
 && 
lToGo
 > 0;

49 
ulIndex
 = 
aulBBD
[ulIndex]) {

50 i‡(
ulIndex
 >(
ULONG
)
tBBDLí
) {

51 
	`DBG_DEC
(
ulIndex
);

52 
	`DBG_DEC
(
tBBDLí
);

53 
	`wîr
(1, "The Big Block Depot is damaged");

55 i‡(
ulOff£t
 >
BIG_BLOCK_SIZE
) {

56 
ulOff£t
 -
BIG_BLOCK_SIZE
;

59 
tTextBlock
.
ulFûeOff£t
 =

60 (
ulIndex
 + 1Ë* 
BIG_BLOCK_SIZE
 + 
ulOff£t
;

61 
tTextBlock
.
ulCh¨Pos
 = ulCharPos;

62 
tTextBlock
.
ulLígth
 = 
	`mö
(
BIG_BLOCK_SIZE
 - 
ulOff£t
,

63 (
ULONG
)
lToGo
);

64 
tTextBlock
.
bU£sUnicode
 = bUsesUnicode;

65 
tTextBlock
.
usPr›Mod
 = usPropMod;

66 
ulOff£t
 = 0;

67 i‡(!
	`bAdd2TextBlockLi°
(&
tTextBlock
)) {

68 
	`DBG_HEX
(
tTextBlock
.
ulFûeOff£t
);

69 
	`DBG_HEX
(
tTextBlock
.
ulCh¨Pos
);

70 
	`DBG_DEC
(
tTextBlock
.
ulLígth
);

71 
	`DBG_DEC
(
tTextBlock
.
bU£sUnicode
);

72 
	`DBG_DEC
(
tTextBlock
.
usPr›Mod
);

73  
FALSE
;

75 
ulCh¨Pos
 +
tTextBlock
.
ulLígth
;

76 
lToGo
 -()
tTextBlock
.
ulLígth
;

78 
	`DBG_DEC_C
(
lToGo
 != 0,ÜToGo);

79  
lToGo
 == 0;

80 
	}
}

89 
BOOL


90 
	$bGë6DocumítText
(
FILE
 *
pFûe
, 
BOOL
 
bU£sUnicode
, 
ULONG
 
ulSèπBlock
,

91 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
, c⁄° 
UCHAR
 *
aucHódî
)

93 
UCHAR
 *
aucBuf„r
;

94 
ULONG
 
ulBegöTextInfo
, 
ulTextOff£t
, 
ulTŸLígth
;

95 
size_t
 
tTextInfoLí
;

96 
iIndex
, 
iTy≥
, 
iOff
, 
iLí
, 
iPõ˚s
;

97 
USHORT
 
usPr›Mod
;

99 
	`DBG_MSG
("bGet6DocumentText");

101 
	`Áû
(
pFûe
 =
NULL
);

102 
	`Áû
(
aulBBD
 =
NULL
);

103 
	`Áû
(
aucHódî
 =
NULL
);

105 
ulBegöTextInfo
 = 
	`ulGëL⁄g
(0x160, 
aucHódî
);

106 
	`DBG_HEX
(
ulBegöTextInfo
);

107 
tTextInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x164, 
aucHódî
);

108 
	`DBG_DEC
(
tTextInfoLí
);

110 
aucBuf„r
 = 
	`xmÆloc
(
tTextInfoLí
);

111 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

112 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

113 
aucBuf„r
, 
ulBegöTextInfo
, 
tTextInfoLí
)) {

114 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

115  
FALSE
;

117 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tTextInfoLí
);

119 
iOff
 = 0;

120 (
size_t
)
iOff
 < 
tTextInfoLí
) {

121 
iTy≥
 = ()
	`ucGëByã
(
iOff
, 
aucBuf„r
);

122 
iOff
++;

123 i‡(
iTy≥
 == 0) {

124 
	`DBG_FIXME
();

125 
iOff
++;

128 i‡(
iTy≥
 == 1) {

129 
iLí
 = ()
	`usGëW‹d
(
iOff
, 
aucBuf„r
);

130 
	`vAdd2Pr›ModLi°
(
aucBuf„r
 + 
iOff
);

131 
iOff
 +
iLí
 + 2;

134 i‡(
iTy≥
 != 2) {

135 
	`wîr
(0, "UnknownÅype of 'fastsaved' format");

136 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

137  
FALSE
;

140 
iLí
 = ()
	`usGëW‹d
(
iOff
, 
aucBuf„r
);

141 
	`NO_DBG_DEC
(
iLí
);

142 
iOff
 += 4;

143 
iPõ˚s
 = (
iLí
 - 4) / 12;

144 
	`DBG_DEC
(
iPõ˚s
);

145 
iIndex
 = 0; iIndex < 
iPõ˚s
; iIndex++) {

146 
ulTextOff£t
 = 
	`ulGëL⁄g
(

147 
iOff
 + (
iPõ˚s
 + 1Ë* 4 + 
iIndex
 * 8 + 2,

148 
aucBuf„r
);

149 
usPr›Mod
 = 
	`usGëW‹d
(

150 
iOff
 + (
iPõ˚s
 + 1Ë* 4 + 
iIndex
 * 8 + 6,

151 
aucBuf„r
);

152 
ulTŸLígth
 = 
	`ulGëL⁄g
(
iOff
 + (
iIndex
 + 1) * 4,

153 
aucBuf„r
) -

154 
	`ulGëL⁄g
(
iOff
 + 
iIndex
 * 4,

155 
aucBuf„r
);

156 
	`NO_DBG_HEX_C
(
usPr›Mod
 != 0, usPropMod);

157 i‡(!
	`bAddTextBlocks
(
ulTextOff£t
, 
ulTŸLígth
,

158 
bU£sUnicode
, 
usPr›Mod
,

159 
ulSèπBlock
,

160 
aulBBD
, 
tBBDLí
)) {

161 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

162  
FALSE
;

167 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

168  
TRUE
;

169 
	}
}

176 
BOOL


177 
	$bGë8DocumítText
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

178 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

179 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

180 c⁄° 
UCHAR
 *
aucHódî
)

182 c⁄° 
ULONG
 *
aulBlockDïŸ
;

183 
UCHAR
 *
aucBuf„r
;

184 
ULONG
 
ulTextOff£t
, 
ulBegöTextInfo
;

185 
ULONG
 
ulTŸLígth
, 
ulLí
;

186 
lIndex
, 
lPõ˚s
, 
lOff
;

187 
size_t
 
tTextInfoLí
, 
tBlockDïŸLí
, 
tBlockSize
;

188 
iTy≥
, 
iLí
;

189 
BOOL
 
bU£sUnicode
;

190 
USHORT
 
usPr›Mod
;

192 
	`DBG_MSG
("bGet8DocumentText");

194 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 == NULL);

195 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

196 
	`Áû
(
aucHódî
 =
NULL
);

198 
ulBegöTextInfo
 = 
	`ulGëL⁄g
(0x1a2, 
aucHódî
);

199 
	`DBG_HEX
(
ulBegöTextInfo
);

200 
tTextInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x1a6, 
aucHódî
);

201 
	`DBG_DEC
(
tTextInfoLí
);

203 
	`DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

204 
	`DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

205 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

206  
FALSE
;

209 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

211 
aulBlockDïŸ
 = 
aulSBD
;

212 
tBlockDïŸLí
 = 
tSBDLí
;

213 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

216 
aulBlockDïŸ
 = 
aulBBD
;

217 
tBlockDïŸLí
 = 
tBBDLí
;

218 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

220 
aucBuf„r
 = 
	`xmÆloc
(
tTextInfoLí
);

221 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

222 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

223 
aucBuf„r
, 
ulBegöTextInfo
, 
tTextInfoLí
)) {

224 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

225  
FALSE
;

227 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tTextInfoLí
);

229 
lOff
 = 0;

230 
lOff
 < ()
tTextInfoLí
) {

231 
iTy≥
 = ()
	`ucGëByã
(
lOff
, 
aucBuf„r
);

232 
lOff
++;

233 i‡(
iTy≥
 == 0) {

234 
	`DBG_FIXME
();

235 
lOff
++;

238 i‡(
iTy≥
 == 1) {

239 
iLí
 = ()
	`usGëW‹d
(
lOff
, 
aucBuf„r
);

240 
	`vAdd2Pr›ModLi°
(
aucBuf„r
 + 
lOff
);

241 
lOff
 +()
iLí
 + 2;

244 i‡(
iTy≥
 != 2) {

245 
	`wîr
(0, "UnknownÅype of 'fastsaved' format");

246 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

247  
FALSE
;

250 
ulLí
 = 
	`ulGëL⁄g
(
lOff
, 
aucBuf„r
);

251 i‡(
ulLí
 < 4) {

252 
	`DBG_DEC
(
ulLí
);

253  
FALSE
;

255 
lOff
 += 4;

256 
lPõ˚s
 = ()((
ulLí
 - 4) / 12);

257 
	`DBG_DEC
(
lPõ˚s
);

258 
lIndex
 = 0;ÜIndex < 
lPõ˚s
;ÜIndex++) {

259 
ulTextOff£t
 = 
	`ulGëL⁄g
(

260 
lOff
 + (
lPõ˚s
 + 1Ë* 4 + 
lIndex
 * 8 + 2,

261 
aucBuf„r
);

262 
usPr›Mod
 = 
	`usGëW‹d
(

263 
lOff
 + (
lPõ˚s
 + 1Ë* 4 + 
lIndex
 * 8 + 6,

264 
aucBuf„r
);

265 
ulTŸLígth
 = 
	`ulGëL⁄g
(
lOff
 + (
lIndex
 + 1) * 4,

266 
aucBuf„r
) -

267 
	`ulGëL⁄g
(
lOff
 + 
lIndex
 * 4,

268 
aucBuf„r
);

269 i‡((
ulTextOff£t
 & 
	`BIT
(30)) == 0) {

270 
bU£sUnicode
 = 
TRUE
;

272 
bU£sUnicode
 = 
FALSE
;

273 
ulTextOff£t
 &~
	`BIT
(30);

274 
ulTextOff£t
 /= 2;

276 
	`NO_DBG_HEX_C
(
usPr›Mod
 != 0, usPropMod);

277 i‡(!
	`bAddTextBlocks
(
ulTextOff£t
, 
ulTŸLígth
,

278 
bU£sUnicode
, 
usPr›Mod
,

279 
pPPS
->
tW‹dDocumít
.
ulSB
,

280 
aulBBD
, 
tBBDLí
)) {

281 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

282  
FALSE
;

287 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

288  
TRUE
;

289 
	}
}

	@fmt_text.c

13 
	~<°rög.h
>

14 
	~"™tiw‹d.h
"

17 
ícodög_ty≥
 
	geEncodög
 = 
ícodög_√uåÆ
;

19 
	glYt›Cuº
 = 0;

21 
UCHAR
 
	gucNb•
 = 0;

28 
	$vPrﬁogueFMT
(
dügøm_ty≥
 *
pDüg
, c⁄° 
›ti⁄s_ty≥
 *
pO±i⁄s
)

30 
	`Áû
(
pDüg
 =
NULL
);

31 
	`Áû
(
pO±i⁄s
 =
NULL
);

33 
eEncodög
 = 
pO±i⁄s
->eEncoding;

34 
pDüg
->
lXÀ·
 = 0;

35 
pDüg
->
lYt›
 = 0;

36 
lYt›Cuº
 = 0;

37 
	}
}

43 
	$vPrötFMT
(
FILE
 *
pFûe
,

44 c⁄° *
szSåög
, 
size_t
 
tSåögLígth
, 
USHORT
 
usF⁄t°yÀ
)

46 c⁄° 
UCHAR
 *
pucByã
, *
pucSèπ
, *
pucLa°
, *
pucN⁄S∑˚
;

48 
	`Áû
(
szSåög
 =
NULL
);

50 i‡(
szSåög
 =
NULL
 || szSåög[0] ='\0' || 
tSåögLígth
 == 0) {

54 i‡(
eEncodög
 =
ícodög_utf_8
) {

55 
	`Ârötf
(
pFûe
, "%.*s", ()
tSåögLígth
, 
szSåög
);

59 i‡(
ucNb•
 == 0) {

60 
ucNb•
 = 
	`ucGëNb•Ch¨a˘î
();

61 
	`DBG_HEX_C
(
ucNb•
 != 0xa0, ucNbsp);

64 
pucSèπ
 = (
UCHAR
 *)
szSåög
;

65 
pucLa°
 = 
pucSèπ
 + 
tSåögLígth
 - 1;

66 
pucN⁄S∑˚
 = 
pucLa°
;

67 (*
pucN⁄S∑˚
 =(
UCHAR
)' ' || *pucN⁄S∑˚ =
ucNb•
) &&

68 
pucN⁄S∑˚
 > 
pucSèπ
) {

69 
pucN⁄S∑˚
--;

73 
pucByã
 = 
pucSèπ
;

74 (*
pucByã
 =(
UCHAR
)' ' || *pucByã =
ucNb•
) &&

75 
pucByã
 <
pucLa°
) {

76 ()
	`putc
(' ', 
pFûe
);

77 
pucByã
++;

80 i‡(
pucByã
 > 
pucLa°
) {

86 i‡(
	`bIsBﬁd
(
usF⁄t°yÀ
)) {

87 
	`DBG_MSG
("BOLD");

88 ()
	`putc
('*', 
pFûe
);

90 i‡(
	`bIsIèlic
(
usF⁄t°yÀ
)) {

91 
	`DBG_MSG
("Italic");

92 ()
	`putc
('/', 
pFûe
);

94 i‡(
	`bIsUndîlöe
(
usF⁄t°yÀ
)) {

95 
	`DBG_MSG
("Underline");

96 ()
	`putc
('_', 
pFûe
);

100 
pucByã
 <
pucN⁄S∑˚
) {

101 i‡(*
pucByã
 =
ucNb•
) {

102 ()
	`putc
(' ', 
pFûe
);

104 ()
	`putc
(()*
pucByã
, 
pFûe
);

106 
pucByã
++;

110 i‡(
	`bIsUndîlöe
(
usF⁄t°yÀ
)) {

111 ()
	`putc
('_', 
pFûe
);

113 i‡(
	`bIsIèlic
(
usF⁄t°yÀ
)) {

114 ()
	`putc
('/', 
pFûe
);

116 i‡(
	`bIsBﬁd
(
usF⁄t°yÀ
)) {

117 ()
	`putc
('*', 
pFûe
);

121 
pucByã
 <
pucLa°
) {

122 ()
	`putc
(' ', 
pFûe
);

123 
pucByã
++;

125 
	}
}

134 
	$vMoveTo
(
dügøm_ty≥
 *
pDüg
)

136 
iCou¡
, 
iNbr
;

138 
	`Áû
(
pDüg
 =
NULL
);

139 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

141 i‡(
pDüg
->
lYt›
 !
lYt›Cuº
) {

142 
iNbr
 = 
	`iDøwUnôs2Ch¨
(
pDüg
->
lXÀ·
);

143 
iCou¡
 = 0; iCou¡ < 
iNbr
; iCount++) {

144 ()
	`putc
(
FILLER_CHAR
, 
pDüg
->
pOutFûe
);

146 
lYt›Cuº
 = 
pDüg
->
lYt›
;

148 
	}
}

154 
	$vSub°rögFMT
(
dügøm_ty≥
 *
pDüg
,

155 c⁄° *
szSåög
, 
size_t
 
tSåögLígth
, 
lSåögWidth
,

156 
USHORT
 
usF⁄t°yÀ
)

158 
	`Áû
(
pDüg
 =
NULL
 || 
szSåög
 == NULL);

159 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

160 
	`Áû
(
pDüg
->
lXÀ·
 < 0);

161 
	`Áû
(
tSåögLígth
 !
	`°æí
(
szSåög
));

163 i‡(
szSåög
[0] ='\0' || 
tSåögLígth
 == 0) {

167 
	`vMoveTo
(
pDüg
);

168 
	`vPrötFMT
(
pDüg
->
pOutFûe
, 
szSåög
, 
tSåögLígth
, 
usF⁄t°yÀ
);

169 
pDüg
->
lXÀ·
 +
lSåögWidth
;

170 
	}
}

	@fontinfo.h

2 c⁄° *
	gszF⁄äames
[32] = {

37 
	gaiUndîlöeInfo
[32][2] = {

	@fontlist.c

9 
	~<°dlib.h
>

10 
	~<°ddef.h
>

11 
	~"™tiw‹d.h
"

18 
	sf⁄t_desc_èg
 {

19 
f⁄t_block_ty≥
 
	mtInfo
;

20 
f⁄t_desc_èg
 *
	mpNext
;

21 } 
	tf⁄t_mem_ty≥
;

24 
f⁄t_mem_ty≥
 *
	gpAnch‹
 = 
NULL
;

25 
f⁄t_mem_ty≥
 *
	gpF⁄tLa°
 = 
NULL
;

32 
	$vDe°royF⁄tInfoLi°
()

34 
f⁄t_mem_ty≥
 *
pCuº
, *
pNext
;

36 
	`DBG_MSG
("vDestroyFontInfoList");

39 
pCuº
 = 
pAnch‹
;

40 
pCuº
 !
NULL
) {

41 
pNext
 = 
pCuº
->pNext;

42 
pCuº
 = 
	`x‰ì
(pCurr);

43 
pCuº
 = 
pNext
;

45 
pAnch‹
 = 
NULL
;

47 
pF⁄tLa°
 = 
NULL
;

48 
	}
}

54 
	$vC‹ª˘F⁄tVÆues
(
f⁄t_block_ty≥
 *
pF⁄tBlock
)

56 
UINT
 
uiRólSize
;

57 
USHORT
 
usRólStyÀ
;

59 
uiRólSize
 = 
pF⁄tBlock
->
usF⁄tSize
;

60 
usRólStyÀ
 = 
pF⁄tBlock
->
usF⁄tStyÀ
;

61 i‡(
	`bIsSmÆlC≠ôÆs
(
pF⁄tBlock
->
usF⁄tStyÀ
)) {

63 
uiRólSize
 = (uiRealSize * 4 + 2) / 5;

64 
usRólStyÀ
 &~
FONT_SMALL_CAPITALS
;

65 
usRólStyÀ
 |
FONT_CAPITALS
;

67 i‡(
	`bIsSu≥rs¸ùt
(
pF⁄tBlock
->
usF⁄tStyÀ
) ||

68 
	`bIsSubs¸ùt
(
pF⁄tBlock
->
usF⁄tStyÀ
)) {

70 
uiRólSize
 = (uiRealSize * 2 + 1) / 3;

73 i‡(
uiRólSize
 < 
MIN_FONT_SIZE
) {

74 
	`DBG_DEC
(
uiRólSize
);

75 
uiRólSize
 = 
MIN_FONT_SIZE
;

76 } i‡(
uiRólSize
 > 
MAX_FONT_SIZE
) {

77 
	`DBG_DEC
(
uiRólSize
);

78 
uiRólSize
 = 
MAX_FONT_SIZE
;

81 
pF⁄tBlock
->
usF⁄tSize
 = (
USHORT
)
uiRólSize
;

82 i‡(
pF⁄tBlock
->
ucF⁄tCﬁ‹
 == 8) {

84 
pF⁄tBlock
->
ucF⁄tCﬁ‹
 = 16;

86 
pF⁄tBlock
->
usF⁄tStyÀ
 = 
usRólStyÀ
;

87 
	}
}

93 
	$vAdd2F⁄tInfoLi°
(c⁄° 
f⁄t_block_ty≥
 *
pF⁄tBlock
)

95 
f⁄t_mem_ty≥
 *
pLi°Membî
;

97 
	`Áû
(
pF⁄tBlock
 =
NULL
);

99 
	`NO_DBG_MSG
("bAdd2FontInfoList");

101 i‡(
pF⁄tBlock
->
ulFûeOff£t
 =
FC_INVALID
) {

109 
	`NO_DBG_HEX
(
pF⁄tBlock
->
ulFûeOff£t
);

110 
	`NO_DBG_DEC_C
(
pF⁄tBlock
->
ucF⁄tNumbî
 != 0,

111 
pF⁄tBlock
->
ucF⁄tNumbî
);

112 
	`NO_DBG_DEC_C
(
pF⁄tBlock
->
usF⁄tSize
 !
DEFAULT_FONT_SIZE
,

113 
pF⁄tBlock
->
usF⁄tSize
);

114 
	`NO_DBG_DEC_C
(
pF⁄tBlock
->
ucF⁄tCﬁ‹
 != 0,

115 
pF⁄tBlock
->
ucF⁄tCﬁ‹
);

116 
	`NO_DBG_HEX_C
(
pF⁄tBlock
->
usF⁄tStyÀ
 != 0x00,

117 
pF⁄tBlock
->
usF⁄tStyÀ
);

119 i‡(
pF⁄tLa°
 !
NULL
 &&

120 
pF⁄tLa°
->
tInfo
.
ulFûeOff£t
 =
pF⁄tBlock
->ulFileOffset) {

125 
	`Áû
(
pF⁄tLa°
->
pNext
 !
NULL
);

126 
pF⁄tLa°
->
tInfo
 = *
pF⁄tBlock
;

131 
pLi°Membî
 = 
	`xmÆloc
((
f⁄t_mem_ty≥
));

133 
pLi°Membî
->
tInfo
 = *
pF⁄tBlock
;

134 
pLi°Membî
->
pNext
 = 
NULL
;

136 
	`vC‹ª˘F⁄tVÆues
(&
pLi°Membî
->
tInfo
);

138 i‡(
pAnch‹
 =
NULL
) {

139 
pAnch‹
 = 
pLi°Membî
;

141 
	`Áû
(
pF⁄tLa°
 =
NULL
);

142 
pF⁄tLa°
->
pNext
 = 
pLi°Membî
;

144 
pF⁄tLa°
 = 
pLi°Membî
;

145 
	}
}

150 c⁄° 
f⁄t_block_ty≥
 *

151 
	$pGëNextF⁄tInfoLi°Iãm
(c⁄° 
f⁄t_block_ty≥
 *
pCuº
)

153 c⁄° 
f⁄t_mem_ty≥
 *
pRec‹d
;

154 
size_t
 
tOff£t
;

156 i‡(
pCuº
 =
NULL
) {

157 i‡(
pAnch‹
 =
NULL
) {

159  
NULL
;

162  &
pAnch‹
->
tInfo
;

164 
tOff£t
 = 
	`off£tof
(
f⁄t_mem_ty≥
, 
tInfo
);

166 
pRec‹d
 = (
f⁄t_mem_ty≥
 *)(*)((*)
pCuº
 - 
tOff£t
);

167 
	`Áû
(
pCuº
 !&
pRec‹d
->
tInfo
);

168 i‡(
pRec‹d
->
pNext
 =
NULL
) {

170  
NULL
;

172  &
pRec‹d
->
pNext
->
tInfo
;

173 
	}
}

	@fonts.c

9 
	~<˘y≥.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

14 
	#FONT_LINE_LENGTH
 81

	)

17 
	#PITCH_UNKNOWN
 0

	)

18 
	#PITCH_FIXED
 1

	)

19 
	#PITCH_VARIABLE
 2

	)

22 
	#FAMILY_UNKNOWN
 0

	)

23 
	#FAMILY_ROMAN
 1

	)

24 
	#FAMILY_SWISS
 2

	)

25 
	#FAMILY_MODERN
 3

	)

26 
	#FAMILY_SCRIPT
 4

	)

27 
	#FAMILY_DECORATIVE
 5

	)

30 
size_t
 
	gtF⁄tTabÀRec‹ds
 = 0;

31 
f⁄t_èbÀ_ty≥
 *
	gpF⁄tTabÀ
 = 
NULL
;

39 
	$iGëF⁄tByNumbî
(
UCHAR
 
ucW‹dF⁄tNumbî
, 
USHORT
 
usF⁄tStyÀ
)

41 
iIndex
;

43 
iIndex
 = 0; iIndex < ()
tF⁄tTabÀRec‹ds
; iIndex++) {

44 i‡(
ucW‹dF⁄tNumbî
 =
pF⁄tTabÀ
[
iIndex
].ucWordFontNumber &&

45 
usF⁄tStyÀ
 =
pF⁄tTabÀ
[
iIndex
].usFontStyle &&

46 
pF⁄tTabÀ
[
iIndex
].
szOurF⁄äame
[0] != '\0') {

47  
iIndex
;

50 
	`DBG_DEC
(
ucW‹dF⁄tNumbî
);

51 
	`DBG_HEX
(
usF⁄tStyÀ
);

53 
	}
}

61 
	$szGëOurF⁄äame
(
iIndex
)

63 i‡(
iIndex
 < 0 || iIndex >()
tF⁄tTabÀRec‹ds
) {

64  
NULL
;

66  
pF⁄tTabÀ
[
iIndex
].
szOurF⁄äame
;

67 
	}
}

75 
	$iF⁄äame2F⁄äumbî
(c⁄° *
szOurF⁄äame
, 
USHORT
 
usF⁄tStyÀ
)

77 
iIndex
;

79 
iIndex
 = 0; iIndex < ()
tF⁄tTabÀRec‹ds
; iIndex++) {

80 i‡(
pF⁄tTabÀ
[
iIndex
].
usF⁄tStyÀ
 == usFontStyle &&

81 
	`STREQ
(
pF⁄tTabÀ
[
iIndex
].
szOurF⁄äame
, szOurFontname)) {

82  ()
pF⁄tTabÀ
[
iIndex
].
ucW‹dF⁄tNumbî
;

86 
	}
}

92 
	$szGëDeÁu…F⁄t
(
UCHAR
 
ucFFN
, 
iEmphasis
)

94 
UCHAR
 
ucPrq
, 
ucFf
;

96 
	`Áû
(
iEmphasis
 < 0 || iEmphasis > 3);

98 
ucPrq
 = 
ucFFN
 & 0x03;

99 
ucFf
 = (
ucFFN
 & 0x70) >> 4;

100 
	`NO_DBG_DEC
(
ucPrq
);

101 
	`NO_DBG_DEC
(
ucFf
);

102 i‡(
ucPrq
 =
PITCH_FIXED
) {

104 
iEmphasis
) {

105 1:  
FONT_MONOSPACED_BOLD
;

106 2:  
FONT_MONOSPACED_ITALIC
;

107 3:  
FONT_MONOSPACED_BOLDITALIC
;

108 :  
FONT_MONOSPACED_PLAIN
;

110 } i‡(
ucFf
 =
FAMILY_ROMAN
) {

112 
iEmphasis
) {

113 1:  
FONT_SERIF_BOLD
;

114 2:  
FONT_SERIF_ITALIC
;

115 3:  
FONT_SERIF_BOLDITALIC
;

116 :  
FONT_SERIF_PLAIN
;

118 } i‡(
ucFf
 =
FAMILY_SWISS
) {

120 
iEmphasis
) {

121 1:  
FONT_SANS_SERIF_BOLD
;

122 2:  
FONT_SANS_SERIF_ITALIC
;

123 3:  
FONT_SANS_SERIF_BOLDITALIC
;

124 :  
FONT_SANS_SERIF_PLAIN
;

128 
iEmphasis
) {

129 1:  
FONT_SERIF_BOLD
;

130 2:  
FONT_SERIF_ITALIC
;

131 3:  
FONT_SERIF_BOLDITALIC
;

132 :  
FONT_SERIF_PLAIN
;

135 
	}
}

143 
BOOL


144 
	$bF⁄tEquÆ
(c⁄° 
UCHAR
 *
aucW‹d
, c⁄° *
szTabÀ
, 
iByãsPîCh¨
)

146 c⁄° 
UCHAR
 *
pucTmp
;

147 c⁄° *
pcTmp
;

149 
	`Áû
(
aucW‹d
 =
NULL
 || 
szTabÀ
 == NULL);

150 
	`Áû
(
iByãsPîCh¨
 != 1 && iBytesPerChar != 2);

152 
pucTmp
 = 
aucW‹d
, 
pcTmp
 = 
szTabÀ
;

153 *
pucTmp
 != 0;

154 
pucTmp
 +
iByãsPîCh¨
, 
pcTmp
++) {

155 i‡(
	`ulToUµî
((
ULONG
)*
pucTmp
) !=

156 
	`ulToUµî
((
ULONG
)(
UCHAR
)*
pcTmp
)) {

157  
FALSE
;

160  *
pcTmp
 == '\0';

161 
	}
}

167 
	$vF⁄äame2TabÀ
(c⁄° 
UCHAR
 *
aucF⁄t
, c⁄° UCHAR *
aucA…F⁄t
,

168 
iByãsPîCh¨
, 
iEmphasis
, 
UCHAR
 
ucFFN
,

169 c⁄° *
szW‹dF⁄t
, c⁄° *
szOurF⁄t
,

170 
f⁄t_èbÀ_ty≥
 *
pF⁄tTabÀRec‹d
)

172 
BOOL
 
bM©chFound
;

174 
	`Áû
(
aucF⁄t
 =
NULL
 ||áucFont[0] == 0);

175 
	`Áû
(
aucA…F⁄t
 !
NULL
 &&áucAltFont[0] == 0);

176 
	`Áû
(
iByãsPîCh¨
 != 1 && iBytesPerChar != 2);

177 
	`Áû
(
iEmphasis
 < 0 || iEmphasis > 3);

178 
	`Áû
(
szW‹dF⁄t
 =
NULL
 || szWordFont[0] == '\0');

179 
	`Áû
(
szOurF⁄t
 =
NULL
 || szOurFont[0] == '\0');

180 
	`Áû
(
pF⁄tTabÀRec‹d
 =
NULL
);

182 
bM©chFound
 = 
	`bF⁄tEquÆ
(
aucF⁄t
, 
szW‹dF⁄t
, 
iByãsPîCh¨
);

184 i‡(!
bM©chFound
 && 
aucA…F⁄t
 !
NULL
) {

185 
bM©chFound
 = 
	`bF⁄tEquÆ
(
aucA…F⁄t
, 
szW‹dF⁄t
, 
iByãsPîCh¨
);

188 i‡(!
bM©chFound
 &&

189 
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
[0] == '\0' &&

190 
szW‹dF⁄t
[0] == '*' &&

191 
szW‹dF⁄t
[1] == '\0') {

196 
szOurF⁄t
 = 
	`szGëDeÁu…F⁄t
(
ucFFN
, 
iEmphasis
);

197 
bM©chFound
 = 
TRUE
;

200 i‡(
bM©chFound
) {

201 
iByãsPîCh¨
) {

203 ()
	`°∫˝y
(
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
,

204 (c⁄° *)
aucF⁄t
,

205 (
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
) - 1);

208 ()
	`unö˝y
(
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
,

209 
aucF⁄t
,

210 (
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
) - 1);

213 
	`DBG_FIXME
();

214 
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
[0] = '\0';

217 
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
[

218 (
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
) - 1] = '\0';

219 ()
	`°∫˝y
(
pF⁄tTabÀRec‹d
->
szOurF⁄äame
, 
szOurF⁄t
,

220 (
pF⁄tTabÀRec‹d
->
szOurF⁄äame
) - 1);

221 
pF⁄tTabÀRec‹d
->
szOurF⁄äame
[

222 (
pF⁄tTabÀRec‹d
->
szOurF⁄äame
) - 1] = '\0';

223 
	`NO_DBG_MSG
(
pF⁄tTabÀRec‹d
->
szW‹dF⁄äame
);

224 
	`NO_DBG_MSG
(
pF⁄tTabÀRec‹d
->
szOurF⁄äame
);

225 
pF⁄tTabÀRec‹d
->
ucFFN
 = ucFFN;

226 
pF⁄tTabÀRec‹d
->
ucEmphasis
 = (
UCHAR
)
iEmphasis
;

228 
	}
}

234 
	$vCª©eF⁄tTabÀ
()

236 
f⁄t_èbÀ_ty≥
 *
pTmp
;

237 
iNbr
;

239 i‡(
tF⁄tTabÀRec‹ds
 == 0) {

240 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

245 
pF⁄tTabÀ
 = 
	`xˇŒoc
(
tF⁄tTabÀRec‹ds
, (*pFontTable));

248 
iNbr
 = 0, 
pTmp
 = 
pF⁄tTabÀ
;

249 
pTmp
 < 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

250 
iNbr
++, 
pTmp
++) {

251 
pTmp
->
ucW‹dF⁄tNumbî
 = (
UCHAR
)(
iNbr
 / 4);

252 
iNbr
 % 4) {

254 
pTmp
->
usF⁄tStyÀ
 = 
FONT_REGULAR
;

257 
pTmp
->
usF⁄tStyÀ
 = 
FONT_BOLD
;

260 
pTmp
->
usF⁄tStyÀ
 = 
FONT_ITALIC
;

263 
pTmp
->
usF⁄tStyÀ
 = 
FONT_BOLD
|
FONT_ITALIC
;

266 
	`DBG_DEC
(
iNbr
);

270 
	}
}

276 
	$vMöimizeF⁄tTabÀ
()

278 
f⁄t_block_ty≥
 
tF⁄tNext
;

279 c⁄° 
°yÀ_block_ty≥
 *
pStyÀ
;

280 c⁄° 
f⁄t_block_ty≥
 *
pF⁄t
;

281 
f⁄t_èbÀ_ty≥
 *
pTmp
;

282 
iUnU£d
;

283 
BOOL
 
bMu°AddTabÀF⁄t
;

285 
	`NO_DBG_MSG
("vMinimizeFontTable");

287 i‡(
tF⁄tTabÀRec‹ds
 == 0) {

288 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

293 
bMu°AddTabÀF⁄t
 = 
TRUE
;

296 
	`DBG_MSG
("Before");

297 
	`DBG_DEC
(
tF⁄tTabÀRec‹ds
);

298 
pTmp
 = 
pF⁄tTabÀ
;

299 
pTmp
 < 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

300 
pTmp
++) {

301 
	`DBG_DEC
(
pTmp
->
ucW‹dF⁄tNumbî
);

302 
	`DBG_HEX
(
pTmp
->
usF⁄tStyÀ
);

303 
	`DBG_MSG
(
pTmp
->
szW‹dF⁄äame
);

304 
	`DBG_MSG
(
pTmp
->
szOurF⁄äame
);

311 
pF⁄tTabÀ
[0].
ucInU£
 = 1;

314 
pF⁄t
 = 
NULL
;

315 (
pF⁄t
 = 
	`pGëNextF⁄tInfoLi°Iãm
’F⁄t)Ë!
NULL
) {

316 
pTmp
 = 
pF⁄tTabÀ
 + 4 * ()
pF⁄t
->
ucF⁄tNumbî
;

317 i‡(
	`bIsBﬁd
(
pF⁄t
->
usF⁄tStyÀ
)) {

318 
pTmp
++;

320 i‡(
	`bIsIèlic
(
pF⁄t
->
usF⁄tStyÀ
)) {

321 
pTmp
 += 2;

323 i‡(
pTmp
 >
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
) {

326 i‡(
	`STREQ
(
pTmp
->
szOurF⁄äame
, 
TABLE_FONT
)) {

328 
bMu°AddTabÀF⁄t
 = 
FALSE
;

330 
pTmp
->
ucInU£
 = 1;

334 
pStyÀ
 = 
NULL
;

335 (
pStyÀ
 = 
	`pGëNextStyÀInfoLi°Iãm
’StyÀ)Ë!
NULL
) {

336 
	`vFûlF⁄tFromStyÀshìt
(
pStyÀ
->
usI°dNext
, &
tF⁄tNext
);

337 
	`vC‹ª˘F⁄tVÆues
(&
tF⁄tNext
);

338 
pTmp
 = 
pF⁄tTabÀ
 + 4 * ()
tF⁄tNext
.
ucF⁄tNumbî
;

339 i‡(
	`bIsBﬁd
(
tF⁄tNext
.
usF⁄tStyÀ
)) {

340 
pTmp
++;

342 i‡(
	`bIsIèlic
(
tF⁄tNext
.
usF⁄tStyÀ
)) {

343 
pTmp
 += 2;

345 i‡(
pTmp
 >
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
) {

348 i‡(
	`STREQ
(
pTmp
->
szOurF⁄äame
, 
TABLE_FONT
)) {

350 
bMu°AddTabÀF⁄t
 = 
FALSE
;

352 
pTmp
->
ucInU£
 = 1;

356 
iUnU£d
 = 0;

357 
pTmp
 = 
pF⁄tTabÀ
;

358 
pTmp
 < 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

359 
pTmp
++) {

360 i‡(
pTmp
->
ucInU£
 == 0) {

361 
iUnU£d
++;

364 i‡(
iUnU£d
 > 0) {

365 
	`Áû
(
pTmp
 - 
iUnU£d
 <
pF⁄tTabÀ
);

366 *(
pTmp
 - 
iUnU£d
) = *pTmp;

369 
	`Áû
(
iUnU£d
 < 0);

370 
	`Áû
(
tF⁄tTabÀRec‹ds
 <(
size_t
)
iUnU£d
);

371 
tF⁄tTabÀRec‹ds
 -(
size_t
)
iUnU£d
;

373 i‡(
bMu°AddTabÀF⁄t
) {

374 
pTmp
 = 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

375 
	`Áû
(
pTmp
 <
pF⁄tTabÀ
);

376 
pTmp
->
ucW‹dF⁄tNumbî
 = (pTmp - 1)->ucWordFontNumber + 1;

377 
pTmp
->
usF⁄tStyÀ
 = 
FONT_REGULAR
;

378 
pTmp
->
ucInU£
 = 1;

379 
	`°r˝y
(
pTmp
->
szW‹dF⁄äame
, "Extra Table Font");

380 
	`°r˝y
(
pTmp
->
szOurF⁄äame
, 
TABLE_FONT
);

381 
tF⁄tTabÀRec‹ds
++;

382 
iUnU£d
--;

384 i‡(
iUnU£d
 > 0) {

386 
pF⁄tTabÀ
 = 
	`xªÆloc
(pFontTable,

387 
tF⁄tTabÀRec‹ds
 * (*
pF⁄tTabÀ
));

389 #i‡
	`deföed
(
DEBUG
)

390 
	`DBG_MSG
("After");

391 
	`DBG_DEC
(
tF⁄tTabÀRec‹ds
);

392 
pTmp
 = 
pF⁄tTabÀ
;

393 
pTmp
 < 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

394 
pTmp
++) {

395 
	`DBG_DEC
(
pTmp
->
ucW‹dF⁄tNumbî
);

396 
	`DBG_HEX
(
pTmp
->
usF⁄tStyÀ
);

397 
	`DBG_MSG
(
pTmp
->
szW‹dF⁄äame
);

398 
	`DBG_MSG
(
pTmp
->
szOurF⁄äame
);

401 
	}
}

408 
BOOL


409 
	$bRódF⁄tFûe
(
FILE
 *
pF⁄tTabÀFûe
, *
szW‹dF⁄t
,

410 *
piIèlic
, *
piBﬁd
, *
szOurF⁄t
, *
piS≥cül
)

412 *
pcTmp
;

413 
iFõlds
;

414 
szLöe
[
FONT_LINE_LENGTH
];

416 
	`Áû
(
szW‹dF⁄t
 =
NULL
 || 
szOurF⁄t
 == NULL);

417 
	`Áû
(
piIèlic
 =
NULL
 || 
piBﬁd
 =NULL || 
piS≥cül
 == NULL);

419 
	`fgës
(
szLöe
, ()(szLöe), 
pF⁄tTabÀFûe
Ë!
NULL
) {

420 i‡(
szLöe
[0] == '#' ||

421 
szLöe
[0] == '\n' ||

422 
szLöe
[0] == '\r') {

425 
iFõlds
 = 
	`ssˇnf
(
szLöe
, "%[^,],%d,%d,%1s%[^,],%d",

426 
szW‹dF⁄t
, 
piIèlic
, 
piBﬁd
,

427 &
szOurF⁄t
[0], &szOurF⁄t[1], 
piS≥cül
);

428 i‡(
iFõlds
 != 6) {

429 
pcTmp
 = 
	`°rchr
(
szLöe
, '\r');

430 i‡(
pcTmp
 !
NULL
) {

431 *
pcTmp
 = '\0';

433 
pcTmp
 = 
	`°rchr
(
szLöe
, '\n');

434 i‡(
pcTmp
 !
NULL
) {

435 *
pcTmp
 = '\0';

437 
	`DBG_DEC
(
iFõlds
);

438 
	`wîr
(0, "Sy¡axÉº‹ in: '%s'", 
szLöe
);

441 i‡(
	`°æí
(
szW‹dF⁄t
) >=

442 (
pF⁄tTabÀ
[0].
szW‹dF⁄äame
)) {

443 
	`wîr
(0, "W‹d f⁄äamêtoÿl⁄g: '%s'", 
szW‹dF⁄t
);

446 i‡(
	`°æí
(
szOurF⁄t
) >=

447 (
pF⁄tTabÀ
[0].
szOurF⁄äame
)) {

448 
	`wîr
(0, "Loˇ»f⁄äamêtoÿl⁄g: '%s'", 
szOurF⁄t
);

452  
TRUE
;

454  
FALSE
;

455 
	}
}

461 
	$vCª©e0F⁄tTabÀ
()

463 
FILE
 *
pF⁄tTabÀFûe
;

464 
f⁄t_èbÀ_ty≥
 *
pTmp
;

465 
UCHAR
 *
aucF⁄t
;

466 
iBﬁd
, 
iIèlic
, 
iS≥cül
, 
iEmphasis
, 
iFtc
;

467 
UCHAR
 
ucPrq
, 
ucFf
, 
ucFFN
;

468 
szW‹dF⁄t
[
FONT_LINE_LENGTH
], 
szOurF⁄t
[FONT_LINE_LENGTH];

470 
tF⁄tTabÀRec‹ds
 = 0;

471 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

473 
pF⁄tTabÀFûe
 = 
	`pO≥nF⁄tTabÀFûe
();

474 i‡(
pF⁄tTabÀFûe
 =
NULL
) {

480 
tF⁄tTabÀRec‹ds
 = 64;

481 
tF⁄tTabÀRec‹ds
 *= 4;

482 
tF⁄tTabÀRec‹ds
++;

483 
	`vCª©eF⁄tTabÀ
();

486 
iIèlic
 = 0;

487 
iBﬁd
 = 0;

488 
iS≥cül
 = 0;

489 
	`bRódF⁄tFûe
(
pF⁄tTabÀFûe
, 
szW‹dF⁄t
,

490 &
iIèlic
, &
iBﬁd
, 
szOurF⁄t
, &
iS≥cül
)) {

491 
iEmphasis
 = 0;

492 i‡(
iBﬁd
 != 0) {

493 
iEmphasis
++;

495 i‡(
iIèlic
 != 0) {

496 
iEmphasis
 += 2;

498 
iFtc
 = 0, 
pTmp
 = 
pF⁄tTabÀ
 + 
iEmphasis
;

499 
pTmp
 < 
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
;

500 
iFtc
++, 
pTmp
 += 4) {

501 i‡(
iFtc
 >= 16 && iFtc <= 55) {

502 
ucPrq
 = 
PITCH_VARIABLE
;

503 
ucFf
 = 
FAMILY_ROMAN
;

504 
aucF⁄t
 = (
UCHAR
 *)"Times";

506 
ucPrq
 = 
PITCH_FIXED
;

507 
ucFf
 = 
FAMILY_MODERN
;

508 
aucF⁄t
 = (
UCHAR
 *)"Courier";

510 
ucFFN
 = (
ucFf
 << 4Ë| 
ucPrq
;

511 
	`vF⁄äame2TabÀ
(
aucF⁄t
, 
NULL
, 1, 
iEmphasis
,

512 
ucFFN
, 
szW‹dF⁄t
, 
szOurF⁄t
, 
pTmp
);

515 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

516 
	`vMöimizeF⁄tTabÀ
();

517 
	}
}

523 
	$vCª©e2F⁄tTabÀ
(
FILE
 *
pFûe
, 
iW‹dVîsi⁄
, c⁄° 
UCHAR
 *
aucHódî
)

525 
FILE
 *
pF⁄tTabÀFûe
;

526 
f⁄t_èbÀ_ty≥
 *
pTmp
;

527 
UCHAR
 *
aucF⁄t
;

528 
UCHAR
 *
aucBuf„r
;

529 
ULONG
 
ulBegöF⁄tInfo
;

530 
size_t
 
tF⁄tInfoLí
;

531 
iPos
, 
iOff
, 
iRecLí
;

532 
iBﬁd
, 
iIèlic
, 
iS≥cül
, 
iEmphasis
;

533 
UCHAR
 
ucFFN
;

534 
szW‹dF⁄t
[
FONT_LINE_LENGTH
], 
szOurF⁄t
[FONT_LINE_LENGTH];

536 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

537 
	`Áû
(
iW‹dVîsi⁄
 != 1 && iWordVersion != 2);

539 
tF⁄tTabÀRec‹ds
 = 0;

540 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

542 
pF⁄tTabÀFûe
 = 
	`pO≥nF⁄tTabÀFûe
();

543 i‡(
pF⁄tTabÀFûe
 =
NULL
) {

548 
ulBegöF⁄tInfo
 = 
	`ulGëL⁄g
(0xb2, 
aucHódî
);

549 
	`DBG_HEX
(
ulBegöF⁄tInfo
);

550 
tF⁄tInfoLí
 = (
size_t
)
	`usGëW‹d
(0xb6, 
aucHódî
);

551 
	`DBG_DEC
(
tF⁄tInfoLí
);

553 i‡(
ulBegöF⁄tInfo
 > (
ULONG
)
LONG_MAX
 || 
tF⁄tInfoLí
 == 0) {

555 
	`DBG_HEX_C
(
tF⁄tInfoLí
 !0, 
ulBegöF⁄tInfo
);

556 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

560 
aucBuf„r
 = 
	`xmÆloc
(
tF⁄tInfoLí
);

561 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tF⁄tInfoLí
, 
ulBegöF⁄tInfo
, 
pFûe
)) {

562 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

563 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

566 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tF⁄tInfoLí
);

567 
	`DBG_DEC
(
	`usGëW‹d
(0, 
aucBuf„r
));

570 i‡(
iW‹dVîsi⁄
 == 1) {

571 
	`Áû
(
tF⁄tInfoLí
 < 2);

573 
tF⁄tTabÀRec‹ds
 = 3;

574 
iOff
 = 2;

576 
	`Áû
(
tF⁄tInfoLí
 < 6);

578 
tF⁄tTabÀRec‹ds
 = 0;

579 
iOff
 = 3;

581 
iPos
 = 2;

582 
iPos
 + 
iOff
 < ()
tF⁄tInfoLí
) {

583 
iRecLí
 = ()
	`ucGëByã
(
iPos
, 
aucBuf„r
);

584 
	`NO_DBG_DEC
(
iRecLí
);

585 
	`NO_DBG_MSG
(
aucBuf„r
 + 
iPos
 + 
iOff
);

586 
iPos
 +
iRecLí
 + 1;

587 
tF⁄tTabÀRec‹ds
++;

589 
tF⁄tTabÀRec‹ds
 *= 4;

590 
tF⁄tTabÀRec‹ds
++;

591 
	`vCª©eF⁄tTabÀ
();

594 i‡(
iW‹dVîsi⁄
 == 1) {

595 
	`Áû
(
tF⁄tTabÀRec‹ds
 < 13);

596 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Tm†Rmn", 
NULL
, 1, 0,

597 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

598 "*", "Times-Rom™", 
pF⁄tTabÀ
 + 0);

599 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Tm†Rmn", 
NULL
, 1, 1,

600 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

601 "*", "Times-Bﬁd", 
pF⁄tTabÀ
 + 1);

602 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Tm†Rmn", 
NULL
, 1, 2,

603 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

604 "*", "Times-Ièlic", 
pF⁄tTabÀ
 + 2);

605 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Tm†Rmn", 
NULL
, 1, 3,

606 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

607 "*", "Times-BﬁdIèlic", 
pF⁄tTabÀ
 + 3);

608 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Symbﬁ", 
NULL
, 1, 0,

609 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

610 "*", "Times-Rom™", 
pF⁄tTabÀ
 + 4);

611 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Symbﬁ", 
NULL
, 1, 1,

612 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

613 "*", "Times-Bﬁd", 
pF⁄tTabÀ
 + 5);

614 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Symbﬁ", 
NULL
, 1, 2,

615 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

616 "*", "Times-Ièlic", 
pF⁄tTabÀ
 + 6);

617 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Symbﬁ", 
NULL
, 1, 3,

618 (
UCHAR
)((
FAMILY_ROMAN
 << 4Ë| 
PITCH_VARIABLE
),

619 "*", "Times-BﬁdIèlic", 
pF⁄tTabÀ
 + 7);

620 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Hñv", 
NULL
, 1, 0,

621 (
UCHAR
)((
FAMILY_SWISS
 << 4Ë| 
PITCH_VARIABLE
),

622 "*", "Hñvëiˇ", 
pF⁄tTabÀ
 + 8);

623 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Hñv", 
NULL
, 1, 1,

624 (
UCHAR
)((
FAMILY_SWISS
 << 4Ë| 
PITCH_VARIABLE
),

625 "*", "Hñvëiˇ-Bﬁd", 
pF⁄tTabÀ
 + 9);

626 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Hñv", 
NULL
, 1, 2,

627 (
UCHAR
)((
FAMILY_SWISS
 << 4Ë| 
PITCH_VARIABLE
),

628 "*", "Hñvëiˇ-Oblique", 
pF⁄tTabÀ
 + 10);

629 
	`vF⁄äame2TabÀ
((
UCHAR
 *)"Hñv", 
NULL
, 1, 3,

630 (
UCHAR
)((
FAMILY_SWISS
 << 4Ë| 
PITCH_VARIABLE
),

631 "*", "Hñvëiˇ-BﬁdOblique", 
pF⁄tTabÀ
 + 11);

635 
iIèlic
 = 0;

636 
iBﬁd
 = 0;

637 
iS≥cül
 = 0;

638 
	`bRódF⁄tFûe
(
pF⁄tTabÀFûe
, 
szW‹dF⁄t
,

639 &
iIèlic
, &
iBﬁd
, 
szOurF⁄t
, &
iS≥cül
)) {

640 
iEmphasis
 = 0;

641 i‡(
iBﬁd
 != 0) {

642 
iEmphasis
++;

644 i‡(
iIèlic
 != 0) {

645 
iEmphasis
 += 2;

647 
pTmp
 = 
pF⁄tTabÀ
 + 
iEmphasis
;

648 
iPos
 = 2;

649 
iPos
 + 
iOff
 < ()
tF⁄tInfoLí
) {

650 
iRecLí
 = ()
	`ucGëByã
(
iPos
, 
aucBuf„r
);

651 
ucFFN
 = 
	`ucGëByã
(
iPos
 + 1, 
aucBuf„r
);

652 
aucF⁄t
 = 
aucBuf„r
 + 
iPos
 + 
iOff
;

653 
	`vF⁄äame2TabÀ
(
aucF⁄t
, 
NULL
, 1, 
iEmphasis
,

654 
ucFFN
, 
szW‹dF⁄t
, 
szOurF⁄t
, 
pTmp
);

655 
pTmp
 += 4;

656 
iPos
 +
iRecLí
 + 1;

659 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

660 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

661 
	`vMöimizeF⁄tTabÀ
();

662 
	}
}

668 
	$vCª©e6F⁄tTabÀ
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

669 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

670 c⁄° 
UCHAR
 *
aucHódî
)

672 
FILE
 *
pF⁄tTabÀFûe
;

673 
f⁄t_èbÀ_ty≥
 *
pTmp
;

674 
UCHAR
 *
aucF⁄t
, *
aucA…F⁄t
;

675 
UCHAR
 *
aucBuf„r
;

676 
ULONG
 
ulBegöF⁄tInfo
;

677 
size_t
 
tF⁄tInfoLí
;

678 
iPos
, 
iRecLí
, 
iOff£tA…Name
;

679 
iBﬁd
, 
iIèlic
, 
iS≥cül
, 
iEmphasis
;

680 
UCHAR
 
ucFFN
;

681 
szW‹dF⁄t
[
FONT_LINE_LENGTH
], 
szOurF⁄t
[FONT_LINE_LENGTH];

683 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

684 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

685 
	`Áû
(
aulBBD
 =
NULL
);

687 
tF⁄tTabÀRec‹ds
 = 0;

688 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

690 
pF⁄tTabÀFûe
 = 
	`pO≥nF⁄tTabÀFûe
();

691 i‡(
pF⁄tTabÀFûe
 =
NULL
) {

696 
ulBegöF⁄tInfo
 = 
	`ulGëL⁄g
(0xd0, 
aucHódî
);

697 
	`DBG_HEX
(
ulBegöF⁄tInfo
);

698 
tF⁄tInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xd4, 
aucHódî
);

699 
	`DBG_DEC
(
tF⁄tInfoLí
);

700 
	`Áû
(
tF⁄tInfoLí
 < 9);

702 
aucBuf„r
 = 
	`xmÆloc
(
tF⁄tInfoLí
);

703 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

704 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

705 
aucBuf„r
, 
ulBegöF⁄tInfo
, 
tF⁄tInfoLí
)) {

706 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

707 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

710 
	`DBG_DEC
(
	`usGëW‹d
(0, 
aucBuf„r
));

713 
tF⁄tTabÀRec‹ds
 = 0;

714 
iPos
 = 2;

715 
iPos
 + 6 < ()
tF⁄tInfoLí
) {

716 
iRecLí
 = ()
	`ucGëByã
(
iPos
, 
aucBuf„r
);

717 
	`NO_DBG_DEC
(
iRecLí
);

718 
iOff£tA…Name
 = ()
	`ucGëByã
(
iPos
 + 5, 
aucBuf„r
);

719 
	`NO_DBG_MSG
(
aucBuf„r
 + 
iPos
 + 6);

720 
	`NO_DBG_MSG_C
(
iOff£tA…Name
 > 0,

721 
aucBuf„r
 + 
iPos
 + 6 + 
iOff£tA…Name
);

722 
iPos
 +
iRecLí
 + 1;

723 
tF⁄tTabÀRec‹ds
++;

725 
tF⁄tTabÀRec‹ds
 *= 4;

726 
tF⁄tTabÀRec‹ds
++;

727 
	`vCª©eF⁄tTabÀ
();

730 
iIèlic
 = 0;

731 
iBﬁd
 = 0;

732 
iS≥cül
 = 0;

733 
	`bRódF⁄tFûe
(
pF⁄tTabÀFûe
, 
szW‹dF⁄t
,

734 &
iIèlic
, &
iBﬁd
, 
szOurF⁄t
, &
iS≥cül
)) {

735 
iEmphasis
 = 0;

736 i‡(
iBﬁd
 != 0) {

737 
iEmphasis
++;

739 i‡(
iIèlic
 != 0) {

740 
iEmphasis
 += 2;

742 
pTmp
 = 
pF⁄tTabÀ
 + 
iEmphasis
;

743 
iPos
 = 2;

744 
iPos
 + 6 < ()
tF⁄tInfoLí
) {

745 
iRecLí
 = ()
	`ucGëByã
(
iPos
, 
aucBuf„r
);

746 
ucFFN
 = 
	`ucGëByã
(
iPos
 + 1, 
aucBuf„r
);

747 
aucF⁄t
 = 
aucBuf„r
 + 
iPos
 + 6;

748 
iOff£tA…Name
 = ()
	`ucGëByã
(
iPos
 + 5, 
aucBuf„r
);

749 i‡(
iOff£tA…Name
 <= 0) {

750 
aucA…F⁄t
 = 
NULL
;

752 
aucA…F⁄t
 = 
aucF⁄t
 + 
iOff£tA…Name
;

753 
	`NO_DBG_MSG
(
aucF⁄t
);

754 
	`NO_DBG_MSG
(
aucA…F⁄t
);

756 
	`vF⁄äame2TabÀ
(
aucF⁄t
, 
aucA…F⁄t
, 1, 
iEmphasis
,

757 
ucFFN
, 
szW‹dF⁄t
, 
szOurF⁄t
, 
pTmp
);

758 
pTmp
 += 4;

759 
iPos
 +
iRecLí
 + 1;

762 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

763 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

764 
	`vMöimizeF⁄tTabÀ
();

765 
	}
}

771 
	$vCª©e8F⁄tTabÀ
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

772 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

773 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

774 c⁄° 
UCHAR
 *
aucHódî
)

776 
FILE
 *
pF⁄tTabÀFûe
;

777 
f⁄t_èbÀ_ty≥
 *
pTmp
;

778 c⁄° 
ULONG
 *
aulBlockDïŸ
;

779 
UCHAR
 *
aucF⁄t
, *
aucA…F⁄t
;

780 
UCHAR
 *
aucBuf„r
;

781 
ULONG
 
ulBegöF⁄tInfo
;

782 
size_t
 
tF⁄tInfoLí
, 
tBlockDïŸLí
, 
tBlockSize
;

783 
iPos
, 
iRecLí
, 
iOff£tA…Name
;

784 
iBﬁd
, 
iIèlic
, 
iS≥cül
, 
iEmphasis
;

785 
UCHAR
 
ucFFN
;

786 
szW‹dF⁄t
[
FONT_LINE_LENGTH
], 
szOurF⁄t
[FONT_LINE_LENGTH];

788 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

789 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

791 
tF⁄tTabÀRec‹ds
 = 0;

792 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

794 
pF⁄tTabÀFûe
 = 
	`pO≥nF⁄tTabÀFûe
();

795 i‡(
pF⁄tTabÀFûe
 =
NULL
) {

800 
ulBegöF⁄tInfo
 = 
	`ulGëL⁄g
(0x112, 
aucHódî
);

801 
	`DBG_HEX
(
ulBegöF⁄tInfo
);

802 
tF⁄tInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x116, 
aucHódî
);

803 
	`DBG_DEC
(
tF⁄tInfoLí
);

804 
	`Áû
(
tF⁄tInfoLí
 < 46);

806 
	`DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

807 
	`DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

808 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

809 
	`DBG_MSG
("No fontnameÅable");

810 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

814 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

816 
aulBlockDïŸ
 = 
aulSBD
;

817 
tBlockDïŸLí
 = 
tSBDLí
;

818 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

821 
aulBlockDïŸ
 = 
aulBBD
;

822 
tBlockDïŸLí
 = 
tBBDLí
;

823 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

825 
aucBuf„r
 = 
	`xmÆloc
(
tF⁄tInfoLí
);

826 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

827 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

828 
aucBuf„r
, 
ulBegöF⁄tInfo
, 
tF⁄tInfoLí
)) {

829 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

830 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

833 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tF⁄tInfoLí
);

836 
tF⁄tTabÀRec‹ds
 = (
size_t
)
	`usGëW‹d
(0, 
aucBuf„r
);

837 
tF⁄tTabÀRec‹ds
 *= 4;

838 
tF⁄tTabÀRec‹ds
++;

839 
	`vCª©eF⁄tTabÀ
();

842 
iIèlic
 = 0;

843 
iBﬁd
 = 0;

844 
iS≥cül
 = 0;

845 
	`bRódF⁄tFûe
(
pF⁄tTabÀFûe
, 
szW‹dF⁄t
,

846 &
iIèlic
, &
iBﬁd
, 
szOurF⁄t
, &
iS≥cül
)) {

847 
iEmphasis
 = 0;

848 i‡(
iBﬁd
 != 0) {

849 
iEmphasis
++;

851 i‡(
iIèlic
 != 0) {

852 
iEmphasis
 += 2;

854 
pTmp
 = 
pF⁄tTabÀ
 + 
iEmphasis
;

855 
iPos
 = 4;

856 
iPos
 + 40 < ()
tF⁄tInfoLí
) {

857 
iRecLí
 = ()
	`ucGëByã
(
iPos
, 
aucBuf„r
);

858 
ucFFN
 = 
	`ucGëByã
(
iPos
 + 1, 
aucBuf„r
);

859 
aucF⁄t
 = 
aucBuf„r
 + 
iPos
 + 40;

860 
iOff£tA…Name
 = ()
	`unûí
(
aucF⁄t
);

861 i‡(
iPos
 + 40 + 
iOff£tA…Name
 + 4 >
iRecLí
) {

862 
aucA…F⁄t
 = 
NULL
;

864 
aucA…F⁄t
 = 
aucF⁄t
 + 
iOff£tA…Name
 + 2;

865 
	`NO_DBG_UNICODE
(
aucF⁄t
);

866 
	`NO_DBG_UNICODE
(
aucA…F⁄t
);

868 
	`vF⁄äame2TabÀ
(
aucF⁄t
, 
aucA…F⁄t
, 2, 
iEmphasis
,

869 
ucFFN
, 
szW‹dF⁄t
, 
szOurF⁄t
, 
pTmp
);

870 
pTmp
 += 4;

871 
iPos
 +
iRecLí
 + 1;

874 ()
	`f˛o£
(
pF⁄tTabÀFûe
);

875 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

876 
	`vMöimizeF⁄tTabÀ
();

877 
	}
}

883 
	$vDe°royF⁄tTabÀ
()

885 
	`DBG_MSG
("vDestroyFontTable");

887 
tF⁄tTabÀRec‹ds
 = 0;

888 
pF⁄tTabÀ
 = 
	`x‰ì
(pFontTable);

889 
	}
}

896 c⁄° 
f⁄t_èbÀ_ty≥
 *

897 
	$pGëNextF⁄tTabÀRec‹d
(c⁄° 
f⁄t_èbÀ_ty≥
 *
pRec‹dCuº
)

899 
size_t
 
tIndexCuº
;

901 i‡(
pRec‹dCuº
 =
NULL
) {

903  &
pF⁄tTabÀ
[0];

906 i‡(
pRec‹dCuº
 < 
pF⁄tTabÀ
 ||

907 
pRec‹dCuº
 >
pF⁄tTabÀ
 + 
tF⁄tTabÀRec‹ds
) {

909 
	`DBG_HEX
(
pRec‹dCuº
);

910 
	`DBG_HEX
(
pF⁄tTabÀ
);

911  
NULL
;

914 
tIndexCuº
 = (
size_t
)(
pRec‹dCuº
 - 
pF⁄tTabÀ
);

915 i‡(
tIndexCuº
 + 1 < 
tF⁄tTabÀRec‹ds
) {

917  &
pF⁄tTabÀ
[
tIndexCuº
 + 1];

920  
NULL
;

921 
	}
}

928 
size_t


929 
	$tGëF⁄tTabÀLígth
()

931  
tF⁄tTabÀRec‹ds
;

932 
	}
}

934 #i‡!
deföed
(
__riscos
)

939 
	$vC‹ª˘4PDF
()

941 
f⁄t_èbÀ_ty≥
 *
pTmp
;

942 c⁄° *
szOurF⁄t
;

944 
pTmp
 = 
pF⁄tTabÀ
;ÖTm∞<ÖF⁄tTabÀ + 
tF⁄tTabÀRec‹ds
;ÖTmp++) {

945 i‡(
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_MONOSPACED_PLAIN
) ||

946 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_MONOSPACED_BOLD
) ||

947 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_MONOSPACED_ITALIC
) ||

948 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_MONOSPACED_BOLDITALIC
) ||

949 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SERIF_PLAIN
) ||

950 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SERIF_BOLD
) ||

951 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SERIF_ITALIC
) ||

952 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SERIF_BOLDITALIC
) ||

953 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SANS_SERIF_PLAIN
) ||

954 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SANS_SERIF_BOLD
) ||

955 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SANS_SERIF_ITALIC
) ||

956 
	`STRCEQ
(
pTmp
->
szOurF⁄äame
, 
FONT_SANS_SERIF_BOLDITALIC
)) {

960 
szOurF⁄t
 =

961 
	`szGëDeÁu…F⁄t
(
pTmp
->
ucFFN
, (ÌTmp->
ucEmphasis
);

962 ()
	`°∫˝y
(
pTmp
->
szOurF⁄äame
, 
szOurF⁄t
,

963 (
pTmp
->
szOurF⁄äame
) - 1);

964 
pTmp
->
szOurF⁄äame
[(pTmp->szOurFontname) - 1] = '\0';

966 
	}
}

972 
	$vC‹ª˘4CyrPS
()

974 
f⁄t_èbÀ_ty≥
 *
pTmp
;

975 c⁄° *
szOurF⁄t
;

976 
UCHAR
 
ucFFN
;

978 
ucFFN
 = (
FAMILY_UNKNOWN
 << 4Ë| 
PITCH_FIXED
;

979 
pTmp
 = 
pF⁄tTabÀ
;ÖTm∞<ÖF⁄tTabÀ + 
tF⁄tTabÀRec‹ds
;ÖTmp++) {

980 
szOurF⁄t
 = 
	`szGëDeÁu…F⁄t
(
ucFFN
, ()
pTmp
->
ucEmphasis
);

981 ()
	`°∫˝y
(
pTmp
->
szOurF⁄äame
, 
szOurF⁄t
,

982 (
pTmp
->
szOurF⁄äame
) - 1);

983 
pTmp
->
szOurF⁄äame
[(pTmp->szOurFontname) - 1] = '\0';

985 
	}
}

992 
	$vC‹ª˘F⁄tTabÀ
(
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
, 
ícodög_ty≥
 
eEncodög
)

994 #i‡!
	`deföed
(
__riscos
)

995 i‡(
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

996 
	`vC‹ª˘4PDF
();

998 i‡(
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 &&

999 
eEncodög
 =
ícodög_cyrûlic
) {

1000 
	`vC‹ª˘4CyrPS
();

1003 
	}
}

1011 
	$lCompuãS∑˚Width
(
døwfûe_f⁄åef
 
tF⁄tRef
, 
USHORT
 
usF⁄tSize
)

1013 
szS∑˚
[] = " ";

1015 
	`Áû
(
usF⁄tSize
 < 
MIN_FONT_SIZE
 || usF⁄tSizê> 
MAX_FONT_SIZE
);

1017  
	`lCompuãSåögWidth
(
szS∑˚
, 1, 
tF⁄tRef
, 
usF⁄tSize
);

1018 
	}
}

	@fonts_u.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~"™tiw‹d.h
"

13 
	~"f⁄töfo.h
"

16 
BOOL
 
	gbU£PœöText
 = 
TRUE
;

18 
ícodög_ty≥
 
	geEncodög
 = 
ícodög_√uåÆ
;

26 
FILE
 *

27 
	$pO≥nF⁄tTabÀFûe
()

29 
FILE
 *
pFûe
;

30 c⁄° *
szHome
, *
szA¡iw‹d
, *
szGlobÆFûe
;

31 
szEnvú⁄mítFûe
[
PATH_MAX
+1];

32 
szLoˇlFûe
[
PATH_MAX
+1];

34 
szEnvú⁄mítFûe
[0] = '\0';

35 
szLoˇlFûe
[0] = '\0';

38 
szA¡iw‹d
 = 
	`szGëA¡iw‹dDúe˘‹y
();

39 i‡(
szA¡iw‹d
 !
NULL
 && szAntiword[0] != '\0') {

40 i‡(
	`°æí
(
szA¡iw‹d
) +

41 (
FILE_SEPARATOR
 
FONTNAMES_FILE
) >=

42 (
szEnvú⁄mítFûe
)) {

43 
	`wîr
(0,

45  
NULL
;

47 
	`•rötf
(
szEnvú⁄mítFûe
, "%s%s",

48 
szA¡iw‹d
,

49 
FILE_SEPARATOR
 
FONTNAMES_FILE
);

50 
	`DBG_MSG
(
szEnvú⁄mítFûe
);

52 
pFûe
 = 
	`f›í
(
szEnvú⁄mítFûe
, "r");

53 i‡(
pFûe
 !
NULL
) {

54  
pFûe
;

59 
szHome
 = 
	`szGëHomeDúe˘‹y
();

60 i‡(
	`°æí
(
szHome
) +

61 (
FILE_SEPARATOR
 
ANTIWORD_DIR
 FILE_SEPARATOR 
FONTNAMES_FILE
) >=

62 (
szLoˇlFûe
)) {

63 
	`wîr
(0, "TheÇame of your HOME directory isÅooÜong");

64  
NULL
;

67 
	`•rötf
(
szLoˇlFûe
, "%s%s",

68 
szHome
,

69 
FILE_SEPARATOR
 
ANTIWORD_DIR
 FILE_SEPARATOR 
FONTNAMES_FILE
);

70 
	`DBG_MSG
(
szLoˇlFûe
);

72 
pFûe
 = 
	`f›í
(
szLoˇlFûe
, "r");

73 i‡(
pFûe
 !
NULL
) {

74  
pFûe
;

78 
szGlobÆFûe
 = 
GLOBAL_ANTIWORD_DIR
 
FILE_SEPARATOR
 
FONTNAMES_FILE
;

79 
	`DBG_MSG
(
szGlobÆFûe
);

81 
pFûe
 = 
	`f›í
(
szGlobÆFûe
, "r");

82 i‡(
pFûe
 !
NULL
) {

83  
pFûe
;

86 i‡(
szEnvú⁄mítFûe
[0] != '\0') {

87 
	`wîr
(0, "I canÇot open your fontnames file.\n"

91 
szEnvú⁄mítFûe
, 
szLoˇlFûe
, 
szGlobÆFûe
);

93 
	`wîr
(0, "I canÇot open your fontnames file.\n"

96 
szLoˇlFûe
, 
szGlobÆFûe
);

98  
NULL
;

99 
	}
}

105 
	$vClo£F⁄t
()

107 
	`NO_DBG_MSG
("vCloseFont");

109 
eEncodög
 = 
ícodög_√uåÆ
;

110 
bU£PœöText
 = 
TRUE
;

111 
	}
}

122 
	$lCompuãSåögWidth
(c⁄° *
szSåög
, 
size_t
 
tSåögLígth
,

123 
døwfûe_f⁄åef
 
tF⁄tRef
, 
USHORT
 
usF⁄tSize
)

125 
USHORT
 *
ausCh¨Widths
;

126 
UCHAR
 *
pucCh¨
;

127 
lRñWidth
;

128 
size_t
 
tIndex
;

129 
iF⁄tRef
;

131 
	`Áû
(
szSåög
 =
NULL
);

132 
	`Áû
(
usF⁄tSize
 < 
MIN_FONT_SIZE
 || usF⁄tSizê> 
MAX_FONT_SIZE
);

134 i‡(
szSåög
[0] ='\0' || 
tSåögLígth
 == 0) {

139 i‡(
eEncodög
 =
ícodög_utf_8
) {

140 
	`Áû
(!
bU£PœöText
);

141  
	`lCh¨2MûliPoöts
(

142 
	`utf8_°rwidth
(
szSåög
, 
tSåögLígth
));

145  
	`lCh¨2MûliPoöts
(
tSåögLígth
);

146 
	}
}

156 
size_t


157 
	$tCou¡Cﬁumns
(c⁄° *
szSåög
, 
size_t
 
tLígth
)

159 
	`Áû
(
szSåög
 =
NULL
);

161 i‡(
eEncodög
 !
ícodög_utf_8
) {

163  
tLígth
;

165  (
size_t
)
	`utf8_°rwidth
(
szSåög
, 
tLígth
);

166 
	}
}

173 
size_t


174 
	$tGëCh¨a˘îLígth
(c⁄° *
szSåög
)

176 
	`Áû
(
szSåög
 =
NULL
);

178 i‡(
eEncodög
 !
ícodög_utf_8
) {

181  (
size_t
)
	`utf8_chæígth
(
szSåög
);

182 
	}
}

	@hdrftrlist.c

9 
	~<°rög.h
>

10 
	~"™tiw‹d.h
"

13 
	#HDR_EVEN_PAGES
 0

	)

14 
	#HDR_ODD_PAGES
 1

	)

15 
	#FTR_EVEN_PAGES
 2

	)

16 
	#FTR_ODD_PAGES
 3

	)

17 
	#HDR_FIRST_PAGE
 4

	)

18 
	#FTR_FIRST_PAGE
 5

	)

24 
	shdr·r_loˇl_èg
 {

25 
hdr·r_block_ty≥
 
	mtInfo
;

26 
ULONG
 
	mulCh¨PosSèπ
;

27 
ULONG
 
	mulCh¨PosNext
;

28 
BOOL
 
	mbU£ful
;

29 
BOOL
 
	mbTextOrigöÆ
;

30 } 
	thdr·r_loˇl_ty≥
;

31 
	shdr·r_mem_èg
 {

32 
hdr·r_loˇl_ty≥
 
	m©EÀmít
[6];

33 } 
	thdr·r_mem_ty≥
;

36 
hdr·r_mem_ty≥
 *
	gpHdrFåLi°
 = 
NULL
;

37 
size_t
 
	gtHdrFåLí
 = 0;

44 
	$vDe°royHdrFåInfoLi°
()

46 
hdr·r_mem_ty≥
 *
pRec‹d
;

47 
ouçut_ty≥
 *
pCuº
, *
pNext
;

48 
size_t
 
tHdrFå
, 
tIndex
;

50 
	`DBG_MSG
("vDestroyHdrFtrInfoList");

53 
tHdrFå
 = 0;ÅHdrFå < 
tHdrFåLí
;ÅHdrFtr++) {

54 
pRec‹d
 = 
pHdrFåLi°
 + 
tHdrFå
;

55 
tIndex
 = 0;

56 
tIndex
 < 
	`ñemítsof
(
pRec‹d
->
©EÀmít
);

57 
tIndex
++) {

58 i‡(!
pRec‹d
->
©EÀmít
[
tIndex
].
bTextOrigöÆ
) {

61 
pCuº
 = 
pRec‹d
->
©EÀmít
[
tIndex
].
tInfo
.
pText
;

62 
pCuº
 !
NULL
) {

63 
pCuº
->
szSt‹age
 = 
	`x‰ì
(pCurr->szStorage);

64 
pNext
 = 
pCuº
->pNext;

65 
pCuº
 = 
	`x‰ì
(pCurr);

66 
pCuº
 = 
pNext
;

70 
pHdrFåLi°
 = 
	`x‰ì
(pHdrFtrList);

72 
tHdrFåLí
 = 0;

73 
	}
}

79 
	$vCª©8HdrFåInfoLi°
(c⁄° 
ULONG
 *
aulCh¨Pos
, 
size_t
 
tLígth
)

81 
hdr·r_mem_ty≥
 *
pLi°Membî
;

82 
size_t
 
tHdrFå
, 
tIndex
, 
tMaöIndex
;

84 
	`Áû
(
aulCh¨Pos
 =
NULL
);

86 
	`DBG_DEC
(
tLígth
);

87 i‡(
tLígth
 <= 1) {

90 
tHdrFåLí
 = 
tLígth
 / 12;

91 i‡(
tLígth
 % 12 != 0 &&ÅLength % 12 != 1) {

92 
tHdrFåLí
++;

94 
	`DBG_DEC
(
tHdrFåLí
);

96 
pHdrFåLi°
 = 
	`xˇŒoc
(
tHdrFåLí
, (
hdr·r_mem_ty≥
));

98 
tHdrFå
 = 0;ÅHdrFå < 
tHdrFåLí
;ÅHdrFtr++) {

99 
pLi°Membî
 = 
pHdrFåLi°
 + 
tHdrFå
;

100 
tIndex
 = 0, 
tMaöIndex
 = 
tHdrFå
 * 12;

101 
tIndex
 < 6 && 
tMaöIndex
 < 
tLígth
;

102 
tIndex
++, 
tMaöIndex
++) {

103 
pLi°Membî
->
©EÀmít
[
tIndex
].
tInfo
.
pText
 = 
NULL
;

104 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosSèπ
 =

105 
aulCh¨Pos
[
tMaöIndex
];

106 i‡(
tMaöIndex
 + 1 < 
tLígth
) {

107 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosNext
 =

108 
aulCh¨Pos
[
tMaöIndex
 + 1];

110 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosNext
 =

111 
aulCh¨Pos
[
tMaöIndex
];

115 
	}
}

121 
	$vCª©6HdrFåInfoLi°
(c⁄° 
ULONG
 *
aulCh¨Pos
, 
size_t
 
tLígth
)

123 c⁄° 
size_t
 
©Index
[] =

124 { 
SIZE_T_MAX
, SIZE_T_MAX, 
FTR_FIRST_PAGE
, 
HDR_FIRST_PAGE
,

125 
FTR_ODD_PAGES
, 
FTR_EVEN_PAGES
, 
HDR_ODD_PAGES
, 
HDR_EVEN_PAGES
,

127 
hdr·r_mem_ty≥
 *
pLi°Membî
;

128 
size_t
 
tHdrFå
, 
tTmp
, 
tIndex
, 
tMaöIndex
, 
tBô
;

129 
UCHAR
 
ucD›S≥cifiˇti⁄
, 
ucSïS≥cifiˇti⁄
;

131 
	`Áû
(
aulCh¨Pos
 =
NULL
);

133 
	`DBG_DEC
(
tLígth
);

134 i‡(
tLígth
 <= 1) {

137 
tHdrFåLí
 = 
	`tGëNumbîOfSe˘i⁄s
();

138 i‡(
tHdrFåLí
 == 0) {

139 
tHdrFåLí
 = 1;

141 
	`DBG_DEC
(
tHdrFåLí
);

143 
pHdrFåLi°
 = 
	`xˇŒoc
(
tHdrFåLí
, (
hdr·r_mem_ty≥
));

146 
ucD›S≥cifiˇti⁄
 = 
	`ucGëD›HdrFåS≥cifiˇti⁄
();

147 
	`DBG_HEX
(
ucD›S≥cifiˇti⁄
 & 0xe0);

148 
tMaöIndex
 = 0;

149 
tBô
 = 7;ÅBit >= 5;ÅBit--) {

150 i‡((
ucD›S≥cifiˇti⁄
 & 
	`BIT
(
tBô
)) != 0) {

151 
tMaöIndex
++;

154 
	`DBG_DEC
(
tMaöIndex
);

156 
tHdrFå
 = 0;ÅHdrFå < 
tHdrFåLí
;ÅHdrFtr++) {

157 
ucSïS≥cifiˇti⁄
 = 
	`ucGëSïHdrFåS≥cifiˇti⁄
(
tHdrFå
);

158 
	`DBG_HEX
(
ucSïS≥cifiˇti⁄
 & 0xfc);

159 
pLi°Membî
 = 
pHdrFåLi°
 + 
tHdrFå
;

160 
tTmp
 = 0;

161 
tTmp
 < 
	`ñemítsof
(
pLi°Membî
->
©EÀmít
);

162 
tTmp
++) {

163 
pLi°Membî
->
©EÀmít
[
tTmp
].
tInfo
.
pText
 = 
NULL
;

165 
tBô
 = 7;ÅBit >= 2;ÅBit--) {

166 i‡(
tMaöIndex
 >
tLígth
) {

169 i‡((
ucSïS≥cifiˇti⁄
 & 
	`BIT
(
tBô
)) == 0) {

172 
tIndex
 = 
©Index
[
tBô
];

173 
	`Áû
(
tIndex
 >= 6);

174 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosSèπ
 =

175 
aulCh¨Pos
[
tMaöIndex
];

176 i‡(
tMaöIndex
 + 1 < 
tLígth
) {

177 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosNext
 =

178 
aulCh¨Pos
[
tMaöIndex
 + 1];

180 
pLi°Membî
->
©EÀmít
[
tIndex
].
ulCh¨PosNext
 =

181 
aulCh¨Pos
[
tMaöIndex
];

183 
tMaöIndex
++;

186 
	}
}

192 
	$vCª©2HdrFåInfoLi°
(c⁄° 
ULONG
 *
aulCh¨Pos
, 
size_t
 
tLígth
)

194 
	`vCª©6HdrFåInfoLi°
(
aulCh¨Pos
, 
tLígth
);

195 
	}
}

200 c⁄° 
hdr·r_block_ty≥
 *

201 
	$pGëHdrFåInfo
(
iSe˘i⁄Index
,

202 
BOOL
 
bW™tHódî
, BOOL 
bOddPage
, BOOL 
bFú°InSe˘i⁄
)

204 
hdr·r_mem_ty≥
 *
pCuº
;

206 
	`Áû
(
iSe˘i⁄Index
 < 0);

207 
	`Áû
(
pHdrFåLi°
 =
NULL
 && 
tHdrFåLí
 != 0);

209 i‡(
pHdrFåLi°
 =
NULL
 || 
tHdrFåLí
 == 0) {

211  
NULL
;

214 i‡(
iSe˘i⁄Index
 < 0) {

215 
iSe˘i⁄Index
 = 0;

216 } i‡(
iSe˘i⁄Index
 >()
tHdrFåLí
) {

217 
iSe˘i⁄Index
 = ()(
tHdrFåLí
 - 1);

220 
pCuº
 = 
pHdrFåLi°
 + 
iSe˘i⁄Index
;

222 i‡(
bFú°InSe˘i⁄
) {

223 i‡(
bW™tHódî
) {

224  &
pCuº
->
©EÀmít
[
HDR_FIRST_PAGE
].
tInfo
;

226  &
pCuº
->
©EÀmít
[
FTR_FIRST_PAGE
].
tInfo
;

229 i‡(
bW™tHódî
) {

230 i‡(
bOddPage
) {

231  &
pCuº
->
©EÀmít
[
HDR_ODD_PAGES
].
tInfo
;

233  &
pCuº
->
©EÀmít
[
HDR_EVEN_PAGES
].
tInfo
;

236 i‡(
bOddPage
) {

237  &
pCuº
->
©EÀmít
[
FTR_ODD_PAGES
].
tInfo
;

239  &
pCuº
->
©EÀmít
[
FTR_EVEN_PAGES
].
tInfo
;

243 
	}
}

251 
	$lCompuãHdrFåHeight
(c⁄° 
ouçut_ty≥
 *
pAnch‹
)

253 c⁄° 
ouçut_ty≥
 *
pCuº
;

254 
lTŸÆ
;

255 
USHORT
 
usF⁄tSizeMax
;

257 
lTŸÆ
 = 0;

258 
usF⁄tSizeMax
 = 0;

259 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

260 i‡(
pCuº
->
tNextFªe
 == 1) {

261 i‡(
pCuº
->
szSt‹age
[0] =
PAR_END
) {

263 
lTŸÆ
 +
	`lCompuãLódög
(
usF⁄tSizeMax
);

264 
lTŸÆ
 +
	`lMûliPoöts2DøwUnôs
(

265 ()
pCuº
->
usF⁄tSize
 * 200);

266 
usF⁄tSizeMax
 = 0;

269 i‡(
pCuº
->
szSt‹age
[0] =
HARD_RETURN
) {

271 
lTŸÆ
 +
	`lCompuãLódög
(
usF⁄tSizeMax
);

272 
usF⁄tSizeMax
 = 0;

276 i‡(
pCuº
->
usF⁄tSize
 > 
usF⁄tSizeMax
) {

277 
usF⁄tSizeMax
 = 
pCuº
->
usF⁄tSize
;

280 i‡(
usF⁄tSizeMax
 != 0) {

282 
lTŸÆ
 +
	`lCompuãLódög
(
usF⁄tSizeMax
);

284  
lTŸÆ
;

285 
	}
}

291 
	$vPª∑ªHdrFåText
(
FILE
 *
pFûe
)

293 
hdr·r_mem_ty≥
 *
pCuº
, *
pPªv
;

294 
hdr·r_loˇl_ty≥
 *
pTmp
;

295 
ouçut_ty≥
 *
pText
;

296 
size_t
 
tHdrFå
, 
tIndex
;

298 
	`Áû
(
pFûe
 =
NULL
);

299 
	`Áû
(
pHdrFåLi°
 =
NULL
 && 
tHdrFåLí
 != 0);

301 i‡(
pHdrFåLi°
 =
NULL
 || 
tHdrFåLí
 == 0) {

307 
tHdrFå
 = 0;ÅHdrFå < 
tHdrFåLí
;ÅHdrFtr++) {

308 
pCuº
 = 
pHdrFåLi°
 + 
tHdrFå
;

309 
tIndex
 = 0;

310 
tIndex
 < 
	`ñemítsof
(
pHdrFåLi°
->
©EÀmít
);

311 
tIndex
++) {

312 
pTmp
 = &
pCuº
->
©EÀmít
[
tIndex
];

313 
pTmp
->
bU£ful
 =

314 
pTmp
->
ulCh¨PosSèπ
 !pTmp->
ulCh¨PosNext
;

315 i‡(
pTmp
->
bU£ful
) {

316 
pText
 = 
	`pHdrFåDe¸y±‹
(
pFûe
,

317 
pTmp
->
ulCh¨PosSèπ
,

318 
pTmp
->
ulCh¨PosNext
);

319 
pTmp
->
tInfo
.
pText
 =ÖText;

320 
pTmp
->
tInfo
.
lHeight
 =

321 
	`lCompuãHdrFåHeight
(
pText
);

322 
pTmp
->
bTextOrigöÆ
 = 
pText
 !
NULL
;

324 
pTmp
->
tInfo
.
pText
 = 
NULL
;

325 
pTmp
->
tInfo
.
lHeight
 = 0;

326 
pTmp
->
bTextOrigöÆ
 = 
FALSE
;

332 i‡(
pHdrFåLi°
->
©EÀmít
[
HDR_FIRST_PAGE
].
bU£ful
) {

333 
pTmp
 = &
pHdrFåLi°
->
©EÀmít
[
HDR_ODD_PAGES
];

334 i‡(!
pTmp
->
bU£ful
) {

335 *
pTmp
 = 
pHdrFåLi°
->
©EÀmít
[
HDR_FIRST_PAGE
];

336 
pTmp
->
bTextOrigöÆ
 = 
FALSE
;

338 
pTmp
 = &
pHdrFåLi°
->
©EÀmít
[
HDR_EVEN_PAGES
];

339 i‡(!
pTmp
->
bU£ful
) {

340 *
pTmp
 = 
pHdrFåLi°
->
©EÀmít
[
HDR_FIRST_PAGE
];

341 
pTmp
->
bTextOrigöÆ
 = 
FALSE
;

344 i‡(
pHdrFåLi°
->
©EÀmít
[
FTR_FIRST_PAGE
].
bU£ful
) {

345 
pTmp
 = &
pHdrFåLi°
->
©EÀmít
[
FTR_ODD_PAGES
];

346 i‡(!
pTmp
->
bU£ful
) {

347 *
pTmp
 = 
pHdrFåLi°
->
©EÀmít
[
FTR_FIRST_PAGE
];

348 
pTmp
->
bTextOrigöÆ
 = 
FALSE
;

350 
pTmp
 = &
pHdrFåLi°
->
©EÀmít
[
FTR_EVEN_PAGES
];

351 i‡(!
pTmp
->
bU£ful
) {

352 *
pTmp
 = 
pHdrFåLi°
->
©EÀmít
[
FTR_FIRST_PAGE
];

353 
pTmp
->
bTextOrigöÆ
 = 
FALSE
;

356 
tHdrFå
 = 1, 
pCuº
 = &
pHdrFåLi°
[1];

357 
tHdrFå
 < 
tHdrFåLí
;

358 
tHdrFå
++, 
pCuº
++) {

359 
pPªv
 = 
pCuº
 - 1;

360 
tIndex
 = 0;

361 
tIndex
 < 
	`ñemítsof
(
pHdrFåLi°
->
©EÀmít
);

362 
tIndex
++) {

363 i‡(!
pCuº
->
©EÀmít
[
tIndex
].
bU£ful
 &&

364 
pPªv
->
©EÀmít
[
tIndex
].
bU£ful
) {

365 
pCuº
->
©EÀmít
[
tIndex
] =

366 
pPªv
->
©EÀmít
[
tIndex
];

367 
pCuº
->
©EÀmít
[
tIndex
].
bTextOrigöÆ
 = 
FALSE
;

371 
	}
}

	@listlist.c

12 
	~"™tiw‹d.h
"

18 
	sli°_desc_èg
 {

19 
li°_block_ty≥
 
	mtInfo
;

20 
ULONG
 
	mulLi°ID
;

21 
USHORT
 
	musI°d
;

22 
UCHAR
 
	mucLi°Levñ
;

23 
li°_desc_èg
 *
	mpNext
;

24 } 
	tli°_desc_ty≥
;

26 
	sli°_vÆue_èg
 {

27 
USHORT
 
	musVÆue
;

28 
USHORT
 
	musLi°Index
;

29 
UCHAR
 
	mucLi°Levñ
;

30 
li°_vÆue_èg
 *
	mpNext
;

31 } 
	tli°_vÆue_ty≥
;

34 
ULONG
 *
	gaulLfoLi°
 = 
NULL
;

35 
USHORT
 
	gusLfoLí
 = 0;

37 
li°_desc_ty≥
 *
	gpAnch‹
 = 
NULL
;

38 
li°_desc_ty≥
 *
	gpBlockLa°
 = 
NULL
;

40 
li°_vÆue_ty≥
 *
	gpVÆues
 = 
NULL
;

42 
	giOldLi°SeqNumbî
 = 0;

43 
USHORT
 
	gusOldLi°VÆue
 = 0;

50 
	$vDe°royLi°InfoLi°
()

52 
li°_desc_ty≥
 *
pCuº
, *
pNext
;

53 
li°_vÆue_ty≥
 *
pVÆueCuº
, *
pVÆueNext
;

55 
	`DBG_MSG
("vDestroyListInfoList");

58 
usLfoLí
 = 0;

59 
aulLfoLi°
 = 
	`x‰ì
(aulLfoList);

62 
pCuº
 = 
pAnch‹
;

63 
pCuº
 !
NULL
) {

64 
pNext
 = 
pCuº
->pNext;

65 
pCuº
 = 
	`x‰ì
(pCurr);

66 
pCuº
 = 
pNext
;

68 
pAnch‹
 = 
NULL
;

70 
pBlockLa°
 = 
NULL
;

73 
pVÆueCuº
 = 
pVÆues
;

74 
pVÆueCuº
 !
NULL
) {

75 
pVÆueNext
 = 
pVÆueCuº
->
pNext
;

76 
pVÆueCuº
 = 
	`x‰ì
(pValueCurr);

77 
pVÆueCuº
 = 
pVÆueNext
;

79 
pVÆues
 = 
NULL
;

81 
iOldLi°SeqNumbî
 = 0;

82 
usOldLi°VÆue
 = 0;

83 
	}
}

89 
	$vBuûdLfoLi°
(c⁄° 
UCHAR
 *
aucBuf„r
, 
size_t
 
tBufLí
)

91 
size_t
 
tRec‹ds
;

92 
iIndex
;

94 
	`Áû
(
aucBuf„r
 =
NULL
);

96 i‡(
tBufLí
 < 4) {

99 
tRec‹ds
 = (
size_t
)
	`ulGëL⁄g
(0, 
aucBuf„r
);

100 
	`NO_DBG_DEC
(
tRec‹ds
);

101 i‡(4 + 16 * 
tRec‹ds
 > 
tBufLí
 ||ÅRecords >= 0x7fff) {

103 
	`DBG_DEC
(
tRec‹ds
);

104 
	`DBG_DEC
(4 + 16 * 
tRec‹ds
);

105 
	`DBG_DEC
(
tBufLí
);

108 
aulLfoLi°
 = 
	`xˇŒoc
(
tRec‹ds
, (
ULONG
));

109 
iIndex
 = 0; iIndex < ()
tRec‹ds
; iIndex++) {

110 
aulLfoLi°
[
iIndex
] = 
	`ulGëL⁄g
(4 + 16 * iIndex, 
aucBuf„r
);

111 
	`NO_DBG_HEX
(
aulLfoLi°
[
iIndex
]);

113 
usLfoLí
 = (
USHORT
)
tRec‹ds
;

114 
	}
}

120 
	$vAdd2Li°InfoLi°
(
ULONG
 
ulLi°ID
, 
USHORT
 
usI°d
, 
UCHAR
 
ucLi°Levñ
,

121 c⁄° 
li°_block_ty≥
 *
pLi°Block
)

123 
li°_desc_ty≥
 *
pLi°Membî
;

125 
	`Áû
(
pLi°Block
 =
NULL
);

127 
	`NO_DBG_HEX
(
ulLi°ID
);

128 
	`NO_DBG_DEC
(
usI°d
);

129 
	`NO_DBG_DEC
(
ucLi°Levñ
);

130 
	`NO_DBG_DEC
(
pLi°Block
->
ulSèπAt
);

131 
	`NO_DBG_DEC
(
pLi°Block
->
bNoRe°¨t
);

132 
	`NO_DBG_DEC
(
pLi°Block
->
sLe·Indít
);

133 
	`NO_DBG_HEX
(
pLi°Block
->
ucNFC
);

134 
	`NO_DBG_HEX
(
pLi°Block
->
usLi°Ch¨
);

137 
pLi°Membî
 = 
	`xmÆloc
((
li°_desc_ty≥
));

139 
pLi°Membî
->
tInfo
 = *
pLi°Block
;

140 
pLi°Membî
->
ulLi°ID
 = ulListID;

141 
pLi°Membî
->
usI°d
 = usIstd;

142 
pLi°Membî
->
ucLi°Levñ
 = ucListLevel;

143 
pLi°Membî
->
pNext
 = 
NULL
;

145 i‡(
pLi°Membî
->
tInfo
.
ulSèπAt
 > 0xffff) {

146 
	`DBG_DEC
(
pLi°Membî
->
tInfo
.
ulSèπAt
);

147 
pLi°Membî
->
tInfo
.
ulSèπAt
 = 1;

150 i‡(
pAnch‹
 =
NULL
) {

151 
pAnch‹
 = 
pLi°Membî
;

153 
	`Áû
(
pBlockLa°
 =
NULL
);

154 
pBlockLa°
->
pNext
 = 
pLi°Membî
;

156 
pBlockLa°
 = 
pLi°Membî
;

157 
	}
}

164 c⁄° 
li°_block_ty≥
 *

165 
	$pGëLi°Info
(
USHORT
 
usLi°Index
, 
UCHAR
 
ucLi°Levñ
)

167 
li°_desc_ty≥
 *
pCuº
;

168 
li°_block_ty≥
 *
pNórM©ch
;

169 
ULONG
 
ulLi°ID
;

171 i‡(
usLi°Index
 == 0) {

172  
NULL
;

174 i‡(
usLi°Index
 - 1 >
usLfoLí
 || 
ucLi°Levñ
 > 8) {

175 
	`DBG_DEC
(
usLi°Index
);

176 
	`DBG_DEC
(
ucLi°Levñ
);

177  
NULL
;

179 
	`Áû
(
aulLfoLi°
 =
NULL
);

180 
ulLi°ID
 = 
aulLfoLi°
[
usLi°Index
 - 1];

181 
	`NO_DBG_HEX
(
ulLi°ID
);

183 
pNórM©ch
 = 
NULL
;

184 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

185 i‡(
pCuº
->
ulLi°ID
 != ulListID) {

189 i‡(
pCuº
->
ucLi°Levñ
 == ucListLevel) {

191  &
pCuº
->
tInfo
;

193 i‡(
pCuº
->
ucLi°Levñ
 == 0) {

195 
pNórM©ch
 = &
pCuº
->
tInfo
;

199  
pNórM©ch
;

200 
	}
}

207 c⁄° 
li°_block_ty≥
 *

208 
	$pGëLi°InfoByI°d
(
USHORT
 
usI°d
)

210 
li°_desc_ty≥
 *
pCuº
;

212 i‡(
usI°d
 =
ISTD_INVALID
 || usI°d =
STI_NIL
 || usI°d =
STI_USER
) {

213  
NULL
;

216 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

217 i‡(
pCuº
->
usI°d
 == usIstd) {

218  &
pCuº
->
tInfo
;

221  
NULL
;

222 
	}
}

228 
	$vRe°¨tLi°VÆues
(
USHORT
 
usLi°Index
, 
UCHAR
 
ucLi°Levñ
)

230 
li°_vÆue_ty≥
 *
pPªv
, *
pCuº
, *
pNext
;

231 
iCou¡î
;

233 
iCou¡î
 = 0;

234 
pPªv
 = 
NULL
;

235 
pCuº
 = 
pVÆues
;

237 
pCuº
 !
NULL
) {

238 i‡(
pCuº
->
usLi°Index
 != usListIndex ||

239 
pCuº
->
ucLi°Levñ
 <= ucListLevel) {

240 
pPªv
 = 
pCuº
;

241 
pCuº
 =ÖCuº->
pNext
;

245 
pNext
 = 
pCuº
->pNext;

246 i‡(
pPªv
 =
NULL
) {

247 
pVÆues
 = 
pNext
;

249 
pPªv
->
pNext
 =ÖNext;

251 
	`DBG_DEC
(
pCuº
->
usLi°Index
);

252 
	`DBG_DEC
(
pCuº
->
ucLi°Levñ
);

253 
pCuº
 = 
	`x‰ì
(pCurr);

254 
pCuº
 = 
pNext
;

255 
iCou¡î
++;

257 
	`DBG_DEC_C
(
iCou¡î
 > 0, iCounter);

258 
	}
}

265 
USHORT


266 
	$usGëLi°VÆue
(
iLi°SeqNumbî
, 
iW‹dVîsi⁄
,

267 c⁄° 
°yÀ_block_ty≥
 *
pStyÀ
)

269 
li°_vÆue_ty≥
 *
pCuº
;

270 
USHORT
 
usVÆue
;

272 
	`Áû
(
iLi°SeqNumbî
 < 0);

273 
	`Áû
(
iLi°SeqNumbî
 < 
iOldLi°SeqNumbî
);

274 
	`Áû
(
iW‹dVîsi⁄
 < 0);

275 
	`Áû
(
pStyÀ
 =
NULL
);

277 i‡(
iLi°SeqNumbî
 <= 0) {

281 i‡(
iW‹dVîsi⁄
 < 8) {

283 i‡(
iLi°SeqNumbî
 =
iOldLi°SeqNumbî
 ||

284 (
iLi°SeqNumbî
 =
iOldLi°SeqNumbî
 + 1 &&

285 
	`eGëNumTy≥
(
pStyÀ
->
ucNumLevñ
Ë=
Àvñ_ty≥_£quí˚
)) {

286 i‡(!
pStyÀ
->
bNumPau£
) {

287 
usOldLi°VÆue
++;

290 
usOldLi°VÆue
 = 
pStyÀ
->
usSèπAt
;

292 
iOldLi°SeqNumbî
 = 
iLi°SeqNumbî
;

293  
usOldLi°VÆue
;

297 i‡(
pStyÀ
->
usLi°Index
 == 0 ||

298 
pStyÀ
->
usLi°Index
 - 1 >
usLfoLí
 ||

299 
pStyÀ
->
ucLi°Levñ
 > 8) {

304 
pCuº
 = 
pVÆues
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

305 i‡(
pCuº
->
usLi°Index
 =
pStyÀ
->usListIndex &&

306 
pCuº
->
ucLi°Levñ
 =
pStyÀ
->ucListLevel) {

308 
pCuº
->
usVÆue
++;

309 
usVÆue
 = 
pCuº
->usValue;

310 i‡(!
pStyÀ
->
bNoRe°¨t
) {

311 
	`vRe°¨tLi°VÆues
(
pStyÀ
->
usLi°Index
,

312 
pStyÀ
->
ucLi°Levñ
);

314  
usVÆue
;

319 
pCuº
 = 
	`xmÆloc
((
li°_vÆue_ty≥
));

320 
pCuº
->
usVÆue
 = 
pStyÀ
->
usSèπAt
;

321 
pCuº
->
usLi°Index
 = 
pStyÀ
->usListIndex;

322 
pCuº
->
ucLi°Levñ
 = 
pStyÀ
->ucListLevel;

323 
pCuº
->
pNext
 = 
pVÆues
;

324 
pVÆues
 = 
pCuº
;

325 
usVÆue
 = 
pCuº
->usValue;

326 i‡(!
pStyÀ
->
bNoRe°¨t
) {

327 
	`vRe°¨tLi°VÆues
(
pStyÀ
->
usLi°Index
,ÖStyÀ->
ucLi°Levñ
);

329  
usVÆue
;

330 
	}
}

	@main_u.c

26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~"vîsi⁄.h
"

29 
	~"™tiw‹d.h
"

32 c⁄° *
	gszTask
 = 
NULL
;

36 
	$vUßge
()

38 
	`Ârötf
(
°dîr
, "\tName: %s\n", 
szTask
);

39 
	`Ârötf
(
°dîr
, "\tPuΩo£: "
PURPOSESTRING
"\n");

40 
	`Ârötf
(
°dîr
, "\tAuth‹: "
AUTHORSTRING
"\n");

41 
	`Ârötf
(
°dîr
, "\tVîsi⁄: "
VERSIONSTRING
);

42 
	`Ârötf
(
°dîr
, "\n");

43 
	`Ârötf
(
°dîr
, "\tSètus: "
STATUSSTRING
"\n");

44 
	`Ârötf
(
°dîr
,

45 "\tUßge: %†[swôches] w‹dfûe1 [w‹dfûe2 ...]\n", 
szTask
);

46 
	`Ârötf
(
°dîr
,

49 
	`Ârötf
(
°dîr
, "\t\t-f formattedÅext output\n");

50 
	`Ârötf
(
°dîr
, "\t\t-tÅext output (default)\n");

51 
	`Ârötf
(
°dîr
, "\t\t-m <mapping> character mapping file\n");

52 
	`Ârötf
(
°dîr
, "\t\t-w <width> in characters ofÅext output\n");

53 
	`Ârötf
(
°dîr
, "\t\t-r ShowÑemovedÅext\n");

54 
	`Ârötf
(
°dîr
, "\t\t-s Show hidden (by Word)Åext\n");

55 
	}
}

62 
FILE
 *

63 
	$pStdö2TmpFûe
(*
lFûesize
)

65 
FILE
 *
pTmpFûe
;

66 
size_t
 
tSize
;

67 
BOOL
 
bFaûuª
;

68 
UCHAR
 
aucByãs
[
BUFSIZ
];

70 
	`DBG_MSG
("pStdin2TmpFile");

72 
	`Áû
(
lFûesize
 =
NULL
);

75 
pTmpFûe
 = 
	`tmpfûe
();

76 i‡(
pTmpFûe
 =
NULL
) {

77  
NULL
;

81 *
lFûesize
 = 0;

82 
bFaûuª
 = 
TRUE
;

84 
tSize
 = 
	`‰ód
(
aucByãs
, 1, ◊ucByãs), 
°dö
);

85 i‡(
tSize
 == 0) {

86 
bFaûuª
 = 
	`„of
(
°dö
) == 0;

89 i‡(
	`fwrôe
(
aucByãs
, 1, 
tSize
, 
pTmpFûe
) !=ÅSize) {

90 
bFaûuª
 = 
TRUE
;

93 *
lFûesize
 +()
tSize
;

97 i‡(
bFaûuª
) {

98 *
lFûesize
 = 0;

99 ()
	`f˛o£
(
pTmpFûe
);

100  
NULL
;

102 
	`ªwöd
(
pTmpFûe
);

103  
pTmpFûe
;

104 
	}
}

111 
BOOL


112 
	$bPro˚ssFûe
(c⁄° *
szFûíame
)

114 
FILE
 *
pFûe
;

115 
dügøm_ty≥
 *
pDüg
;

116 
lFûesize
;

117 
iW‹dVîsi⁄
;

118 
BOOL
 
bResu…
;

120 
	`Áû
(
szFûíame
 =
NULL
 || szFilename[0] == '\0');

122 
	`DBG_MSG
(
szFûíame
);

124 i‡(
szFûíame
[0] == '-' && szFilename[1] == '\0') {

125 
pFûe
 = 
	`pStdö2TmpFûe
(&
lFûesize
);

126 i‡(
pFûe
 =
NULL
) {

127 
	`wîr
(0, "I can't saveÅhe standard inputÅoá file");

128  
FALSE
;

131 
pFûe
 = 
	`f›í
(
szFûíame
, "rb");

132 i‡(
pFûe
 =
NULL
) {

133 
	`wîr
(0, "I c™'à›í '%s' f‹Ñódög", 
szFûíame
);

134  
FALSE
;

137 
lFûesize
 = 
	`lGëFûesize
(
szFûíame
);

138 i‡(
lFûesize
 < 0) {

139 ()
	`f˛o£
(
pFûe
);

140 
	`wîr
(0, "I c™'àgëÅhêsizêo‡'%s'", 
szFûíame
);

141  
FALSE
;

145 
iW‹dVîsi⁄
 = 
	`iGuessVîsi⁄Numbî
(
pFûe
, 
lFûesize
);

146 i‡(
iW‹dVîsi⁄
 < 0 || iWordVersion == 3) {

147 i‡(
	`bIsRtfFûe
(
pFûe
)) {

148 
	`wîr
(0, "%s isÇotá Word Document."

150 
szFûíame
);

151 } i‡(
	`bIsW‹dPî„˘Fûe
(
pFûe
)) {

152 
	`wîr
(0, "%s isÇotá Word Document."

154 
szFûíame
);

156 
	`wîr
(0, "%†i†nŸá W‹d Documít.", 
szFûíame
);

158 ()
	`f˛o£
(
pFûe
);

159  
FALSE
;

162 
	`ªwöd
(
pFûe
);

164 
pDüg
 = 
	`pCª©eDügøm
(
szTask
, 
szFûíame
);

165 i‡(
pDüg
 =
NULL
) {

166 ()
	`f˛o£
(
pFûe
);

167  
FALSE
;

170 
bResu…
 = 
	`bW‹dDe¸y±‹
(
pFûe
, 
lFûesize
, 
pDüg
);

171 
	`vDe°royDügøm
(
pDüg
);

173 ()
	`f˛o£
(
pFûe
);

174  
bResu…
;

175 
	}
}

178 
	$maö
(
¨gc
, **
¨gv
)

180 
›ti⁄s_ty≥
 
tO±i⁄s
;

181 c⁄° *
szW‹dfûe
;

182 
iFú°
, 
iIndex
, 
iGoodCou¡
;

183 
BOOL
 
bUßge
, 
bMu…ùÀ
, 
bU£TXT
;

185 i‡(
¨gc
 <= 0) {

186  
EXIT_FAILURE
;

189 
szTask
 = 
	`szBa£«me
(
¨gv
[0]);

191 i‡(
¨gc
 <= 1) {

192 
iFú°
 = 1;

193 
bUßge
 = 
TRUE
;

195 
iFú°
 = 
	`iRódO±i⁄s
(
¨gc
, 
¨gv
);

196 
bUßge
 = 
iFú°
 <= 0;

198 i‡(
bUßge
) {

199 
	`vUßge
();

200  
iFú°
 < 0 ? 
EXIT_FAILURE
 : 
EXIT_SUCCESS
;

203 
	`vGëO±i⁄s
(&
tO±i⁄s
);

205 
bMu…ùÀ
 = 
¨gc
 - 
iFú°
 > 1;

206 
bU£TXT
 = 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ãxt
 ||

207 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
;

208 
iGoodCou¡
 = 0;

212 
iIndex
 = 
iFú°
; iIndex < 
¨gc
; iIndex++) {

213 i‡(
bMu…ùÀ
 && 
bU£TXT
) {

214 
szW‹dfûe
 = 
	`szBa£«me
(
¨gv
[
iIndex
]);

215 
	`Ârötf
(
°dout
, "::::::::::::::\n");

216 
	`Ârötf
(
°dout
, "%s\n", 
szW‹dfûe
);

217 
	`Ârötf
(
°dout
, "::::::::::::::\n");

219 i‡(
	`bPro˚ssFûe
(
¨gv
[
iIndex
])) {

220 
iGoodCou¡
++;

224 
	`DBG_DEC
(
iGoodCou¡
);

225  
iGoodCou¡
 <0 ? 
EXIT_FAILURE
 : 
EXIT_SUCCESS
;

226 
	}
}

	@misc.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<˘y≥.h
>

13 
	~<time.h
>

14 
	~<î∫o.h
>

15 
	~<sys/ty≥s.h
>

16 
	~<sys/°©.h
>

17 #i‡!
deföed
(
S_ISREG
)

18 
	#S_ISREG
(
x
Ë(((xË& 
S_IFMT
Ë=
S_IFREG
)

	)

20 
	~"™tiw‹d.h
"

26 
	$szGëHomeDúe˘‹y
()

28 c⁄° *
szHome
;

30 
szHome
 = 
	`gëív
("HOME");

32 i‡(
szHome
 =
NULL
 || szHome[0] == '\0') {

33 
	`wîr
(0, "I can't findÅheÇame of your HOME directory");

34 
szHome
 = "";

36  
szHome
;

37 
	}
}

43 
	$szGëA¡iw‹dDúe˘‹y
()

45  
	`gëív
("ANTIWORDHOME");

46 
	}
}

53 
	$lGëFûesize
(c⁄° *
szFûíame
)

55 
°©
 
tBuf„r
;

57 
î∫o
 = 0;

58 i‡(
	`°©
(
szFûíame
, &
tBuf„r
) != 0) {

59 
	`wîr
(0, "Gë Fûesizêîr‹ %d", 
î∫o
);

62 i‡(!
	`S_ISREG
(
tBuf„r
.
°_mode
)) {

66  ()
tBuf„r
.
°_size
;

67 
	}
}

69 #i‡
deföed
(
DEBUG
)

71 
	$vPrötBlock
(c⁄° *
szFûe
, 
iLöe
,

72 c⁄° 
UCHAR
 *
aucBlock
, 
size_t
 
tLígth
)

74 
i
, 
j
;

76 
	`Áû
(
szFûe
 =
NULL
 || 
iLöe
 < 0 || 
aucBlock
 == NULL);

78 
	`Ârötf
(
°dîr
, "%s[%3d]:\n", 
szFûe
, 
iLöe
);

79 
i
 = 0; i < 32; i++) {

80 i‡(16 * 
i
 >()
tLígth
) {

83 
	`Ârötf
(
°dîr
, "%03x: ", ()(16 * 
i
));

84 
j
 = 0; j < 16; j++) {

85 i‡(16 * 
i
 + 
j
 < ()
tLígth
) {

86 
	`Ârötf
(
°dîr
, "%02x ",

87 ()
aucBlock
[16 * 
i
 + 
j
]);

90 
	`Ârötf
(
°dîr
, "\n");

92 
	}
}

95 
	$vPrötUnicode
(c⁄° *
szFûe
, 
iLöe
, c⁄° 
UCHAR
 *
aucUni
, 
size_t
 
tLí
)

97 *
szASCII
;

99 
	`Áû
(
tLí
 % 2 != 0);

101 
tLí
 /= 2;

102 
szASCII
 = 
	`xmÆloc
(
tLí
 + 1);

103 ()
	`unö˝y
(
szASCII
, 
aucUni
, 
tLí
);

104 
szASCII
[
tLí
] = '\0';

105 ()
	`Ârötf
(
°dîr
, "%s[%3d]: %.*s\n",

106 
szFûe
, 
iLöe
, ()
tLí
, 
szASCII
);

107 
szASCII
 = 
	`x‰ì
(szASCII);

108 
	}
}

110 
BOOL


111 
	$bCheckDoubÀLökedLi°
(
ouçut_ty≥
 *
pAnch‹
)

113 
ouçut_ty≥
 *
pCuº
, *
pLa°
;

114 
iInLi°
;

116 
pLa°
 = 
pAnch‹
;

117 
iInLi°
 = 0;

118 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

119 
pLa°
 = 
pCuº
;

120 
iInLi°
++;

122 
	`NO_DBG_DEC
(
iInLi°
);

123 
pCuº
 = 
pLa°
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pPªv
) {

124 
pLa°
 = 
pCuº
;

125 
iInLi°
--;

127 
	`DBG_DEC_C
(
iInLi°
 != 0, iInList);

128  
pAnch‹
 =
pLa°
 && 
iInLi°
 == 0;

129 
	}
}

138 
BOOL


139 
	$bRódByãs
(
UCHAR
 *
aucByãs
, 
size_t
 
tMemb
, 
ULONG
 
ulOff£t
, 
FILE
 *
pFûe
)

141 
	`Áû
(
aucByãs
 =
NULL
 || 
pFûe
 =NULL || 
ulOff£t
 > (
ULONG
)
LONG_MAX
);

143 i‡(
ulOff£t
 > (
ULONG
)
LONG_MAX
) {

144  
FALSE
;

146 i‡(
	`f£ek
(
pFûe
, ()
ulOff£t
, 
SEEK_SET
) != 0) {

147  
FALSE
;

149 i‡(
	`‰ód
(
aucByãs
, (
UCHAR
), 
tMemb
, 
pFûe
) !=ÅMemb) {

150  
FALSE
;

152  
TRUE
;

153 
	}
}

162 
BOOL


163 
	$bRódBuf„r
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

164 c⁄° 
ULONG
 *
aulBlockDïŸ
, 
size_t
 
tBlockDïŸLí
, size_à
tBlockSize
,

165 
UCHAR
 *
aucBuf„r
, 
ULONG
 
ulOff£t
, 
size_t
 
tToRód
)

167 
ULONG
 
ulBegö
, 
ulIndex
;

168 
size_t
 
tLí
;

170 
	`Áû
(
pFûe
 =
NULL
);

171 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

172 
	`Áû
(
aulBlockDïŸ
 =
NULL
);

173 
	`Áû
(
tBlockSize
 !
BIG_BLOCK_SIZE
 &&ÅBlockSizê!
SMALL_BLOCK_SIZE
);

174 
	`Áû
(
aucBuf„r
 =
NULL
);

175 
	`Áû
(
tToRód
 == 0);

177 
ulIndex
 = 
ulSèπBlock
;

178 
ulIndex
 !
END_OF_CHAIN
 && 
tToRód
 != 0;

179 
ulIndex
 = 
aulBlockDïŸ
[ulIndex]) {

180 i‡(
ulIndex
 >(
ULONG
)
tBlockDïŸLí
) {

181 
	`DBG_DEC
(
ulIndex
);

182 
	`DBG_DEC
(
tBlockDïŸLí
);

183 i‡(
tBlockSize
 >
BIG_BLOCK_SIZE
) {

184 
	`wîr
(1, "The Big Block Depot is damaged");

186 
	`wîr
(1, "The Small Block Depot is damaged");

189 i‡(
ulOff£t
 >(
ULONG
)
tBlockSize
) {

190 
ulOff£t
 -
tBlockSize
;

193 
ulBegö
 = 
	`ulDïŸOff£t
(
ulIndex
, 
tBlockSize
Ë+ 
ulOff£t
;

194 
tLí
 = 
	`mö
(
tBlockSize
 - (
size_t
)
ulOff£t
, 
tToRód
);

195 
ulOff£t
 = 0;

196 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tLí
, 
ulBegö
, 
pFûe
)) {

197 
	`wîr
(0, "Ród big block 0x%lxÇŸÖossibÀ", 
ulBegö
);

198  
FALSE
;

200 
aucBuf„r
 +
tLí
;

201 
tToRód
 -
tLí
;

203 
	`DBG_DEC_C
(
tToRód
 != 0,ÅToRead);

204  
tToRód
 == 0;

205 
	}
}

212 
ULONG


213 
	$ulCﬁ‹2Cﬁ‹
(
UCHAR
 
ucF⁄tCﬁ‹
)

215 c⁄° 
ULONG
 
aulCﬁ‹TabÀ
[] = {

234 i‡((
size_t
)
ucF⁄tCﬁ‹
 >
	`ñemítsof
(
aulCﬁ‹TabÀ
)) {

235  
aulCﬁ‹TabÀ
[0];

237  
aulCﬁ‹TabÀ
[()
ucF⁄tCﬁ‹
];

238 
	}
}

246 
	$iFödS∂ô
(c⁄° *
szSåög
, 
size_t
 
tSåögLí
)

248 
size_t
 
tS∂ô
;

250 i‡(
tSåögLí
 == 0) {

253 
tS∂ô
 = 
tSåögLí
 - 1;

254 
tS∂ô
 >= 1) {

255 i‡(
szSåög
[
tS∂ô
] == ' ' ||

256 (
szSåög
[
tS∂ô
] == '-' && szString[tSplit - 1] != ' ')) {

257  ()
tS∂ô
;

259 
tS∂ô
--;

262 
	}
}

269 
ouçut_ty≥
 *

270 
	$pS∂ôLi°
(
ouçut_ty≥
 *
pAnch‹
)

272 
ouçut_ty≥
 *
pCuº
, *
pLe·Ovî
;

273 
iIndex
;

275 
	`Áû
(
pAnch‹
 =
NULL
);

277 
pCuº
 = 
pAnch‹
;ÖCuº->
pNext
 !
NULL
;ÖCurr =ÖCurr->pNext)

279 
iIndex
 = -1;

280 ; 
pCuº
 !
NULL
;ÖCuº =ÖCuº->
pPªv
) {

281 
iIndex
 = 
	`iFödS∂ô
(
pCuº
->
szSt‹age
,ÖCuº->
tNextFªe
);

282 i‡(
iIndex
 >= 0) {

287 i‡(
pCuº
 =
NULL
 || 
iIndex
 < 0) {

289  
NULL
;

292 
	`NO_DBG_MSG
("pLeftOver");

293 
pLe·Ovî
 = 
	`xmÆloc
((*pLeftOver));

294 
	`Áû
(
pCuº
->
tNextFªe
 < (
size_t
)
iIndex
);

295 
pLe·Ovî
->
tSt‹ageSize
 = 
pCuº
->
tNextFªe
 - (
size_t
)
iIndex
;

296 
pLe·Ovî
->
szSt‹age
 = 
	`xmÆloc
’Le·Ovî->
tSt‹ageSize
);

297 
pLe·Ovî
->
tNextFªe
 = 
pCuº
->tNextFªê- (
size_t
)
iIndex
 - 1;

298 ()
	`°∫˝y
(
pLe·Ovî
->
szSt‹age
,

299 
pCuº
->
szSt‹age
 + 
iIndex
 + 1, 
pLe·Ovî
->
tNextFªe
);

300 
pLe·Ovî
->
szSt‹age
[pLe·Ovî->
tNextFªe
] = '\0';

301 
	`NO_DBG_MSG
(
pLe·Ovî
->
szSt‹age
);

302 
pLe·Ovî
->
ucF⁄tCﬁ‹
 = 
pCuº
->ucFontColor;

303 
pLe·Ovî
->
usF⁄tStyÀ
 = 
pCuº
->usFontStyle;

304 
pLe·Ovî
->
tF⁄tRef
 = 
pCuº
->tFontRef;

305 
pLe·Ovî
->
usF⁄tSize
 = 
pCuº
->usFontSize;

306 
pLe·Ovî
->
lSåögWidth
 = 
	`lCompuãSåögWidth
(

307 
pLe·Ovî
->
szSt‹age
,

308 
pLe·Ovî
->
tNextFªe
,

309 
pLe·Ovî
->
tF⁄tRef
,

310 
pLe·Ovî
->
usF⁄tSize
);

311 
pLe·Ovî
->
pPªv
 = 
NULL
;

312 
pLe·Ovî
->
pNext
 = 
pCuº
->pNext;

313 i‡(
pLe·Ovî
->
pNext
 !
NULL
) {

314 
pLe·Ovî
->
pNext
->
pPªv
 =ÖLeftOver;

316 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pLe·Ovî
));

318 
	`NO_DBG_MSG
("pAnchor");

319 
	`NO_DBG_HEX
(
pCuº
->
szSt‹age
[
iIndex
]);

320 
iIndex
 >0 && 
	`is•a˚
(()(
UCHAR
)
pCuº
->
szSt‹age
[iIndex])) {

321 
iIndex
--;

323 
pCuº
->
tNextFªe
 = (
size_t
)
iIndex
 + 1;

324 
pCuº
->
szSt‹age
[pCuº->
tNextFªe
] = '\0';

325 
	`NO_DBG_MSG
(
pCuº
->
szSt‹age
);

326 
pCuº
->
lSåögWidth
 = 
	`lCompuãSåögWidth
(

327 
pCuº
->
szSt‹age
,

328 
pCuº
->
tNextFªe
,

329 
pCuº
->
tF⁄tRef
,

330 
pCuº
->
usF⁄tSize
);

331 
pCuº
->
pNext
 = 
NULL
;

332 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pAnch‹
));

334  
pLe·Ovî
;

335 
	}
}

342 
size_t


343 
	$tNumbî2Rom™
(
UINT
 
uiNumbî
, 
BOOL
 
bUµîCa£
, *
szOuçut
)

345 *
ouç
, *
p
, *
q
;

346 
UINT
 
uiNextVÆ
, 
uiVÆue
;

348 
	`Áû
(
szOuçut
 =
NULL
);

350 
uiNumbî
 %= 4000;

351 i‡(
uiNumbî
 == 0) {

352 
szOuçut
[0] = '\0';

356 
ouç
 = 
szOuçut
;

357 
p
 = 
bUµîCa£
 ? "M\2D\5C\2L\5X\2V\5I" : "m\2d\5c\2l\5x\2v\5i";

358 
uiVÆue
 = 1000;

360 
uiNumbî
 >
uiVÆue
) {

361 *
ouç
++ = *
p
;

362 
uiNumbî
 -
uiVÆue
;

364 i‡(
uiNumbî
 == 0) {

365 *
ouç
 = '\0';

366 
	`Áû
(
ouç
 < 
szOuçut
);

367  (
size_t
)(
ouç
 - 
szOuçut
);

369 
q
 = 
p
 + 1;

370 
uiNextVÆ
 = 
uiVÆue
 / (
UINT
)(
UCHAR
)*
q
;

371 i‡(()*
q
 == 2) {

372 
uiNextVÆ
 /(
UINT
)(
UCHAR
)*(
q
 += 2);

374 i‡(
uiNumbî
 + 
uiNextVÆ
 >
uiVÆue
) {

375 *
ouç
++ = *++
q
;

376 
uiNumbî
 +
uiNextVÆ
;

378 
p
++;

379 
uiVÆue
 /(
UINT
)(
UCHAR
)(*
p
++);

382 
	}
}

389 
size_t


390 
	$tNumbî2AÕha
(
UINT
 
uiNumbî
, 
BOOL
 
bUµîCa£
, *
szOuçut
)

392 *
ouç
;

393 
UINT
 
uiTmp
;

395 
	`Áû
(
szOuçut
 =
NULL
);

397 i‡(
uiNumbî
 == 0) {

398 
szOuçut
[0] = '\0';

402 
ouç
 = 
szOuçut
;

403 
uiTmp
 = (
UINT
)(
bUµîCa£
 ? 'A': 'a');

404 i‡(
uiNumbî
 <= 26) {

405 
uiNumbî
 -= 1;

406 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
);

407 } i‡(
uiNumbî
 <= 26U + 26U*26U) {

408 
uiNumbî
 -= 26 + 1;

409 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
 / 26);

410 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
 % 26);

411 } i‡(
uiNumbî
 <= 26U + 26U*26U + 26U*26U*26U) {

412 
uiNumbî
 -= 26 + 26*26 + 1;

413 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
 / (26*26));

414 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
 / 26 % 26);

415 *
ouç
++ = ()(
uiTmp
 + 
uiNumbî
 % 26);

417 *
ouç
 = '\0';

418 
	`Áû
(
ouç
 < 
szOuçut
);

419  (
size_t
)(
ouç
 - 
szOuçut
);

420 
	}
}

426 
	$unö˝y
(*
s1
, c⁄° 
UCHAR
 *
s2
, 
size_t
 
n
)

428 *
pcDe°
;

429 
ULONG
 
ulCh¨
;

430 
size_t
 
tLí
;

431 
USHORT
 
usUni
;

433 
pcDe°
 = 
s1
, 
tLí
 = 0;ÅLí < 
n
;ÖcDest++,ÅLen++) {

434 
usUni
 = 
	`usGëW‹d
(
tLí
 * 2, 
s2
);

435 i‡(
usUni
 == 0) {

438 
ulCh¨
 = 
	`ulTøn¶©eCh¨a˘îs
(
usUni
, 0, 8,

439 
c⁄vîsi⁄_unknown
, 
ícodög_√uåÆ
, 
FALSE
);

440 i‡(
ulCh¨
 =
IGNORE_CHARACTER
) {

441 
ulCh¨
 = (
ULONG
)'?';

443 *
pcDe°
 = ()
ulCh¨
;

445 ; 
tLí
 < 
n
;ÅLen++) {

446 *
pcDe°
++ = '\0';

448  
s1
;

449 
	}
}

456 
size_t


457 
	$unûí
(c⁄° 
UCHAR
 *
s
)

459 
size_t
 
tLí
;

460 
USHORT
 
usUni
;

462 
tLí
 = 0;

464 
usUni
 = 
	`usGëW‹d
(
tLí
, 
s
);

465 i‡(
usUni
 == 0) {

466  
tLí
;

468 
tLí
 += 2;

470 
	}
}

476 
	$szBa£«me
(c⁄° *
szFûíame
)

478 c⁄° *
szTmp
;

480 
	`Áû
(
szFûíame
 =
NULL
);

482 i‡(
szFûíame
 =
NULL
 || szFilename[0] == '\0') {

486 
szTmp
 = 
	`°ºchr
(
szFûíame
, 
FILE_SEPARATOR
[0]);

487 i‡(
szTmp
 =
NULL
) {

488  
szFûíame
;

490  ++
szTmp
;

491 
	}
}

501 
	$lCompuãLódög
(
USHORT
 
usF⁄tSize
)

503 
lLódög
;

505 
lLódög
 = ()
usF⁄tSize
 * 500L;

506 i‡(
usF⁄tSize
 < 18) {

507 
lLódög
 *= 112;

508 } i‡(
usF⁄tSize
 < 28) {

509 
lLódög
 *= 124;

510 } i‡(
usF⁄tSize
 < 48) {

511 
lLódög
 *= 104;

513 
lLódög
 *= 100;

515 
lLódög
 = 
	`lMûliPoöts2DøwUnôs
(lLeading);

516 
lLódög
 += 50;

517 
lLódög
 /= 100;

518  
lLódög
;

519 
	}
}

526 
size_t


527 
	$tUcs2Utf8
(
ULONG
 
ulCh¨
, *
szResu…
, 
size_t
 
tMaxResu…Lí
)

529 i‡(
szResu…
 =
NULL
 || 
tMaxResu…Lí
 == 0) {

533 i‡(
ulCh¨
 < 0x80 && 
tMaxResu…Lí
 >= 2) {

534 
szResu…
[0] = ()
ulCh¨
;

535 
szResu…
[1] = '\0';

538 i‡(
ulCh¨
 < 0x800 && 
tMaxResu…Lí
 >= 3) {

539 
szResu…
[0] = ()(0xc0 | 
ulCh¨
 >> 6);

540 
szResu…
[1] = ()(0x80 | (
ulCh¨
 & 0x3f));

541 
szResu…
[2] = '\0';

544 i‡(
ulCh¨
 < 0x10000 && 
tMaxResu…Lí
 >= 4) {

545 
szResu…
[0] = ()(0xe0 | 
ulCh¨
 >> 12);

546 
szResu…
[1] = ()(0x80 | (
ulCh¨
 >> 6 & 0x3f));

547 
szResu…
[2] = ()(0x80 | (
ulCh¨
 & 0x3f));

548 
szResu…
[3] = '\0';

551 i‡(
ulCh¨
 < 0x200000 && 
tMaxResu…Lí
 >= 5) {

552 
szResu…
[0] = ()(0xf0 | 
ulCh¨
 >> 18);

553 
szResu…
[1] = ()(0x80 | (
ulCh¨
 >> 12 & 0x3f));

554 
szResu…
[2] = ()(0x80 | (
ulCh¨
 >> 6 & 0x3f));

555 
szResu…
[3] = ()(0x80 | (
ulCh¨
 & 0x3f));

556 
szResu…
[4] = '\0';

559 
szResu…
[0] = '\0';

561 
	}
}

567 
	$vGëBuŒëVÆue
(
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
, 
ícodög_ty≥
 
eEncodög
,

568 *
szResu…
, 
size_t
 
tMaxResu…Lí
)

570 
	`Áû
(
szResu…
 =
NULL
);

571 
	`Áû
(
tMaxResu…Lí
 < 2);

573 i‡(
eEncodög
 =
ícodög_utf_8
) {

574 ()
	`tUcs2Utf8
(
UNICODE_BULLET
, 
szResu…
, 
tMaxResu…Lí
);

576 
szResu…
[0] = ()
	`ucGëBuŒëCh¨a˘î
(
eC⁄vîsi⁄Ty≥
,

577 
eEncodög
);

578 
szResu…
[1] = '\0';

580 
	}
}

585 
BOOL


586 
	$bAŒZîo
(c⁄° 
UCHAR
 *
aucByãs
, 
size_t
 
tLígth
)

588 
size_t
 
tIndex
;

590 i‡(
aucByãs
 =
NULL
 || 
tLígth
 == 0) {

591  
TRUE
;

594 
tIndex
 = 0;ÅIndex < 
tLígth
;ÅIndex++) {

595 i‡(
aucByãs
[
tIndex
] != 0) {

596  
FALSE
;

599  
TRUE
;

600 
	}
}

611 
BOOL


612 
	$bGëCode£tFromLoˇÀ
(*
szCode£t
, 
size_t
 
tMaxCode£tLígth
, 
BOOL
 *
pbEuro
)

614 c⁄° *
szLoˇÀ
;

615 c⁄° *
pcTmp
;

616 
size_t
 
tIndex
;

617 
szModifõr
[6];

619 i‡(
pbEuro
 !
NULL
) {

620 *
pbEuro
 = 
FALSE
;

622 i‡(
szCode£t
 =
NULL
 || 
tMaxCode£tLígth
 == 0) {

623  
FALSE
;

627 
szLoˇÀ
 = 
	`gëív
("LC_ALL");

628 i‡(
szLoˇÀ
 =
NULL
 || szLocale[0] == '\0') {

629 
szLoˇÀ
 = 
	`gëív
("LC_CTYPE");

630 i‡(
szLoˇÀ
 =
NULL
 || szLocale[0] == '\0') {

631 
szLoˇÀ
 = 
	`gëív
("LANG");

634 i‡(
szLoˇÀ
 =
NULL
 || szLocale[0] == '\0') {

636  
FALSE
;

638 
	`DBG_MSG
(
szLoˇÀ
);

639 
pcTmp
 = 
	`°rchr
(
szLoˇÀ
, '.');

640 i‡(
pcTmp
 =
NULL
) {

642 
szCode£t
[0] = '\0';

645 
pcTmp
++;

646 
tIndex
 = 0;ÅIndex < 
tMaxCode£tLígth
;ÅIndex++) {

647 i‡(*
pcTmp
 == '@' || *pcTmp == '+' ||

648 *
pcTmp
 == ',' || *pcTmp == '_' ||

649 *
pcTmp
 == '\0') {

650 
szCode£t
[
tIndex
] = '\0';

653 
szCode£t
[
tIndex
] = *
pcTmp
;

654 
pcTmp
++;

656 
szCode£t
[
tMaxCode£tLígth
 - 1] = '\0';

658 i‡(
pbEuro
 =
NULL
) {

660  
TRUE
;

662 
pcTmp
 = 
	`°rchr
(
szLoˇÀ
, '@');

663 i‡(
pcTmp
 !
NULL
) {

665 
pcTmp
++;

666 
tIndex
 = 0;ÅIndex < (
szModifõr
);ÅIndex++) {

667 i‡(*
pcTmp
 == '+' || *pcTmp == ',' ||

668 *
pcTmp
 == '_' || *pcTmp == '\0') {

669 
szModifõr
[
tIndex
] = '\0';

672 
szModifõr
[
tIndex
] = *
pcTmp
;

673 
pcTmp
++;

675 
szModifõr
[(szModifier) - 1] = '\0';

676 *
pbEuro
 = 
	`STRCEQ
(
szModifõr
, "Euro");

678  
TRUE
;

679 
	}
}

686 
BOOL


687 
	$bGëN‹mÆizedCode£t
(*
szCode£t
, 
size_t
 
tMaxCode£tLígth
, 
BOOL
 *
pbEuro
)

689 
BOOL
 
bO∆yDigôs
;

690 c⁄° *
pcSrc
;

691 *
pcDe°
;

692 *
szTmp
, *
szCode£tN‹m
;

694 i‡(
pbEuro
 !
NULL
) {

695 *
pbEuro
 = 
FALSE
;

697 i‡(
szCode£t
 =
NULL
 || 
tMaxCode£tLígth
 < 4) {

698  
FALSE
;

702 
szTmp
 = 
	`xmÆloc
(
tMaxCode£tLígth
 - 3);

703 i‡(!
	`bGëCode£tFromLoˇÀ
(
szTmp
, 
tMaxCode£tLígth
 - 3, 
pbEuro
)) {

704 
szTmp
 = 
	`x‰ì
(szTmp);

705  
FALSE
;

708 
szCode£tN‹m
 = 
	`xmÆloc
(
tMaxCode£tLígth
 - 3);

709 
bO∆yDigôs
 = 
TRUE
;

710 
pcDe°
 = 
szCode£tN‹m
;

711 
pcSrc
 = 
szTmp
; *pcSrc != '\0';ÖcSrc++) {

712 i‡(
	`iß um
(*
pcSrc
)) {

713 *
pcDe°
 = 
	`tﬁowî
(*
pcSrc
);

714 i‡(!
	`isdigô
(*
pcDe°
)) {

715 
bO∆yDigôs
 = 
FALSE
;

717 
pcDe°
++;

720 *
pcDe°
 = '\0';

721 
	`DBG_MSG
(
szCode£tN‹m
);

723 i‡(
bO∆yDigôs
 && 
szCode£tN‹m
[0] != '\0') {

724 
	`Áû
(
	`°æí
(
szCode£tN‹m
Ë+ 3 >
tMaxCode£tLígth
);

725 
	`•rötf
(
szCode£t
, "iso%s", 
szCode£tN‹m
);

727 
	`Áû
(
	`°æí
(
szCode£tN‹m
Ë>
tMaxCode£tLígth
);

728 
	`°∫˝y
(
szCode£t
, 
szCode£tN‹m
, 
pcDe°
 - szCodesetNorm + 1);

729 
szCode£t
[
tMaxCode£tLígth
 - 1] = '\0';

731 
	`DBG_MSG
(
szCode£t
);

733 
szCode£tN‹m
 = 
	`x‰ì
(szCodesetNorm);

734 
szTmp
 = 
	`x‰ì
(szTmp);

735  
TRUE
;

736 
	}
}

744 
	$szGëDeÁu…M≠pögFûe
()

747 c⁄° *
szCode£t
;

748 c⁄° *
szM≠pögFûe
;

749 } 
©M≠pögFûe
[] = {

750 { "iso88591", 
MAPPING_FILE_8859_1
 },

751 { "iso88592", 
MAPPING_FILE_8859_2
 },

755 { "iso88596", 
MAPPING_FILE_8859_5
 },

762 { "iso885915", 
MAPPING_FILE_8859_15
 },

764 { "koi8r", 
MAPPING_FILE_KOI8_R
 },

765 { "koi8u", 
MAPPING_FILE_KOI8_U
 },

766 { "utf8", 
MAPPING_FILE_UTF_8
 },

767 { "˝437", 
MAPPING_FILE_CP437
 },

769 { "˝852", 
MAPPING_FILE_CP852
 },

772 { "˝866", 
MAPPING_FILE_CP866
 },

773 { "˝1250", 
MAPPING_FILE_CP1250
 },

774 { "˝1251", 
MAPPING_FILE_CP1251
 },

777 
size_t
 
tIndex
;

778 
BOOL
 
bEuro
;

779 
szCode£t
[20];

781 
szCode£t
[0] = '\0';

782 
bEuro
 = 
FALSE
;

784 i‡(!
	`bGëN‹mÆizedCode£t
(
szCode£t
, (szCode£t), &
bEuro
)) {

785  
MAPPING_FILE_8859_1
;

787 i‡(
szCode£t
[0] == '\0') {

788 i‡(
bEuro
) {

790  
MAPPING_FILE_8859_15
;

793  
MAPPING_FILE_8859_1
;

797 
tIndex
 = 0;ÅIndex < 
	`ñemítsof
(
©M≠pögFûe
);ÅIndex++) {

798 i‡(
	`STREQ
(
©M≠pögFûe
[
tIndex
].
szCode£t
, szCodeset)) {

799  
©M≠pögFûe
[
tIndex
].
szM≠pögFûe
;

803  
MAPPING_FILE_8859_1
;

804 
	}
}

811 
time_t


812 
	$tC⁄vîtDTTM
(
ULONG
 
ulDTTM
)

814 
tm
 
tTime
;

815 
time_t
 
tResu…
;

817 i‡(
ulDTTM
 == 0) {

818  (
time_t
)-1;

820 
	`mem£t
(&
tTime
, 0, (tTime));

821 
tTime
.
tm_mö
 = ()(
ulDTTM
 & 0x0000003f);

822 
tTime
.
tm_hour
 = ()((
ulDTTM
 & 0x000007c0) >> 6);

823 
tTime
.
tm_mday
 = ()((
ulDTTM
 & 0x0000f800) >> 11);

824 
tTime
.
tm_m⁄
 = ()((
ulDTTM
 & 0x000f0000) >> 16);

825 
tTime
.
tm_yór
 = ()((
ulDTTM
 & 0x1ff00000) >> 20);

826 
tTime
.
tm_isd°
 = -1;

827 
tTime
.
tm_m⁄
--;

828 
tResu…
 = 
	`mktime
(&
tTime
);

829 
	`NO_DBG_MSG
(
	`˘ime
(&
tResu…
));

830  
tResu…
;

831 
	}
}

	@notes.c

9 
	~"™tiw‹d.h
"

15 
	sfoŸnŸe_loˇl_èg
 {

16 
foŸnŸe_block_ty≥
 
	mtInfo
;

17 
ULONG
 
	mulCh¨PosSèπ
;

18 
ULONG
 
	mulCh¨PosNext
;

19 
BOOL
 
	mbU£ful
;

20 } 
	tfoŸnŸe_loˇl_ty≥
;

23 
ULONG
 *
	gaulFoŸnŸeLi°
 = 
NULL
;

24 
size_t
 
	gtFoŸnŸeLi°Lígth
 = 0;

25 
ULONG
 *
	gaulEndnŸeLi°
 = 
NULL
;

26 
size_t
 
	gtEndnŸeLi°Lígth
 = 0;

28 
foŸnŸe_loˇl_ty≥
 *
	gpFoŸnŸeText
 = 
NULL
;

29 
size_t
 
	gtFoŸnŸeTextLígth
 = 0;

36 
	$vDe°royNŸesInfoLi°s
()

38 
foŸnŸe_loˇl_ty≥
 *
pRec‹d
;

39 
size_t
 
tFoŸnŸe
;

41 
	`TRACE_MSG
("vDestroyNotesInfoLists");

44 
aulEndnŸeLi°
 = 
	`x‰ì
(aulEndnoteList);

45 
aulFoŸnŸeLi°
 = 
	`x‰ì
(aulFootnoteList);

46 
tEndnŸeLi°Lígth
 = 0;

47 
tFoŸnŸeLi°Lígth
 = 0;

48 
tFoŸnŸe
 = 0;ÅFoŸnŸê< 
tFoŸnŸeTextLígth
;ÅFootnote++) {

49 
pRec‹d
 = 
pFoŸnŸeText
 + 
tFoŸnŸe
;

50 
pRec‹d
->
tInfo
.
szText
 = 
	`x‰ì
(pRecord->tInfo.szText);

52 
pFoŸnŸeText
 = 
	`x‰ì
(pFootnoteText);

53 
tFoŸnŸeTextLígth
 = 0;

54 
	}
}

60 
	$vGë0FoŸnŸesInfoAndText
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

62 
foŸnŸe_loˇl_ty≥
 *
pCuº
;

63 
UCHAR
 *
aucBuf„r
;

64 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöFoŸnŸeInfo
;

65 
ULONG
 
ulCh¨Pos
, 
ulBegöNextBlock
;

66 
size_t
 
tFoŸnŸes
, 
tFoŸnŸeInfoLí
;

67 
size_t
 
tIndex
;

68 
UCHAR
 
aucTmp
[2];

70 
	`TRACE_MSG
("vGet0FootnotesInfoAndText");

72 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

74 
ulBegöOfText
 = 128;

75 
	`NO_DBG_HEX
(
ulBegöOfText
);

76 
ulBegöFoŸnŸeInfo
 = 128 * (
ULONG
)
	`usGëW‹d
(0x14, 
aucHódî
);

77 
	`DBG_HEX
(
ulBegöFoŸnŸeInfo
);

78 
ulBegöNextBlock
 = 128 * (
ULONG
)
	`usGëW‹d
(0x16, 
aucHódî
);

79 
	`DBG_HEX
(
ulBegöNextBlock
);

81 i‡(
ulBegöFoŸnŸeInfo
 =
ulBegöNextBlock
) {

82 
	`DBG_MSG
("No Footnotes inÅhis document");

87 i‡(!
	`bRódByãs
(
aucTmp
, 2, 
ulBegöFoŸnŸeInfo
, 
pFûe
)) {

90 
tFoŸnŸes
 = (
size_t
)
	`usGëW‹d
(0, 
aucTmp
);

91 i‡(
tFoŸnŸes
 < 2) {

92 
	`DBG_MSG
("No Footnotes inÅhis document (2)");

94 
	`DBG_DEC
(
tFoŸnŸes
);

95 
tFoŸnŸeInfoLí
 = 8 * 
tFoŸnŸes
;

97 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeInfoLí
);

98 i‡(!
	`bRódByãs
(
aucBuf„r
,

99 
tFoŸnŸeInfoLí
, 
ulBegöFoŸnŸeInfo
 + 4, 
pFûe
)) {

100 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

103 
	`DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeInfoLí
);

106 
	`Áû
(
tFoŸnŸeLi°Lígth
 != 0);

107 
tFoŸnŸeLi°Lígth
 = 
tFoŸnŸes
 - 1;

108 
	`Áû
(
tFoŸnŸeLi°Lígth
 == 0);

110 
	`Áû
(
aulFoŸnŸeLi°
 !
NULL
);

111 
aulFoŸnŸeLi°
 = 
	`xˇŒoc
(
tFoŸnŸeLi°Lígth
, (
ULONG
));

113 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeLi°Lígth
;ÅIndex++) {

114 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 8, 
aucBuf„r
);

115 
	`DBG_HEX
(
ulOff£t
);

116 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

117 
	`DBG_HEX
(
ulFûeOff£t
);

118 
aulFoŸnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

122 
	`Áû
(
tFoŸnŸeTextLígth
 != 0);

123 
tFoŸnŸeTextLígth
 = 
tFoŸnŸes
 - 1;

124 
	`Áû
(
tFoŸnŸeTextLígth
 == 0);

126 
	`Áû
(
pFoŸnŸeText
 !
NULL
);

127 
pFoŸnŸeText
 = 
	`xˇŒoc
(
tFoŸnŸeTextLígth
,

128 (
foŸnŸe_loˇl_ty≥
));

130 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeTextLígth
;ÅIndex++) {

131 
pCuº
 = 
pFoŸnŸeText
 + 
tIndex
;

132 
pCuº
->
tInfo
.
szText
 = 
NULL
;

133 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 8 + 4, 
aucBuf„r
);

134 
	`DBG_HEX
(
ulOff£t
);

135 
ulCh¨Pos
 = 
ulBegöOfText
 + 
ulOff£t
;

136 
	`DBG_HEX
(
ulCh¨Pos
);

137 
	`DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

138 
pCuº
->
ulCh¨PosSèπ
 = 
ulCh¨Pos
;

139 
ulOff£t
 = 
	`ulGëL⁄g
((
tIndex
 + 1Ë* 8 + 4, 
aucBuf„r
);

140 
	`DBG_HEX
(
ulOff£t
);

141 
ulCh¨Pos
 = 
ulBegöOfText
 + 
ulOff£t
;

142 
	`DBG_HEX
(
ulCh¨Pos
);

143 
	`DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

144 
pCuº
->
ulCh¨PosNext
 = 
ulCh¨Pos
;

145 
pCuº
->
bU£ful
 =ÖCuº->
ulCh¨PosSèπ
 !pCuº->
ulCh¨PosNext
;

147 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

148 
	}
}

154 
	$vGë0NŸesInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

156 
	`TRACE_MSG
("vGet0NotesInfo");

158 
	`vGë0FoŸnŸesInfoAndText
(
pFûe
, 
aucHódî
);

160 
	}
}

166 
	$vGë2FoŸnŸesInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

168 
UCHAR
 *
aucBuf„r
;

169 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöFoŸnŸeInfo
;

170 
size_t
 
tFoŸnŸeInfoLí
;

171 
size_t
 
tIndex
;

173 
	`TRACE_MSG
("vGet2FootnotesInfo");

175 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

177 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

178 
	`NO_DBG_HEX
(
ulBegöOfText
);

179 
ulBegöFoŸnŸeInfo
 = 
	`ulGëL⁄g
(0x64, 
aucHódî
);

180 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeInfo
);

181 
tFoŸnŸeInfoLí
 = (
size_t
)
	`usGëW‹d
(0x68, 
aucHódî
);

182 
	`NO_DBG_DEC
(
tFoŸnŸeInfoLí
);

184 i‡(
tFoŸnŸeInfoLí
 < 10) {

185 
	`DBG_MSG
("No Footnotes inÅhis document");

189 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeInfoLí
);

190 i‡(!
	`bRódByãs
(
aucBuf„r
,

191 
tFoŸnŸeInfoLí
, 
ulBegöFoŸnŸeInfo
, 
pFûe
)) {

192 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

195 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeInfoLí
);

197 
	`Áû
(
tFoŸnŸeLi°Lígth
 != 0);

198 
tFoŸnŸeLi°Lígth
 = (
tFoŸnŸeInfoLí
 - 4) / 6;

199 
	`Áû
(
tFoŸnŸeLi°Lígth
 == 0);

201 
	`Áû
(
aulFoŸnŸeLi°
 !
NULL
);

202 
aulFoŸnŸeLi°
 = 
	`xˇŒoc
(
tFoŸnŸeLi°Lígth
, (
ULONG
));

204 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeLi°Lígth
;ÅIndex++) {

205 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

206 
	`NO_DBG_HEX
(
ulOff£t
);

207 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

208 
	`NO_DBG_HEX
(
ulFûeOff£t
);

209 
aulFoŸnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

211 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

212 
	}
}

218 
	$vGë2FoŸnŸesText
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

220 
foŸnŸe_loˇl_ty≥
 *
pCuº
;

221 
UCHAR
 *
aucBuf„r
;

222 
ULONG
 
ulCh¨Pos
, 
ulBegöOfFoŸnŸes
, 
ulOff£t
, 
ulBegöFoŸnŸeText
;

223 
size_t
 
tFoŸnŸeTextLí
;

224 
size_t
 
tIndex
;

226 
	`TRACE_MSG
("vGet2FootnotesText");

228 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

230 
ulBegöOfFoŸnŸes
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

231 
ulBegöOfFoŸnŸes
 +
	`ulGëL⁄g
(0x34, 
aucHódî
);

232 
	`NO_DBG_HEX
(
ulBegöOfFoŸnŸes
);

234 
ulBegöFoŸnŸeText
 = 
	`ulGëL⁄g
(0x6a, 
aucHódî
);

235 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeText
);

236 
tFoŸnŸeTextLí
 =

237 (
size_t
)
	`usGëW‹d
(0x6e, 
aucHódî
);

238 
	`NO_DBG_DEC
(
tFoŸnŸeTextLí
);

240 i‡(
tFoŸnŸeTextLí
 < 12) {

241 
	`DBG_MSG
("No FootnoteÅext inÅhis document");

245 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeTextLí
);

246 i‡(!
	`bRódByãs
(
aucBuf„r
,

247 
tFoŸnŸeTextLí
, 
ulBegöFoŸnŸeText
, 
pFûe
)) {

248 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

251 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeTextLí
);

253 
	`Áû
(
tFoŸnŸeTextLígth
 != 0);

254 
tFoŸnŸeTextLígth
 = 
tFoŸnŸeTextLí
 / 4 - 2;

255 
	`Áû
(
tFoŸnŸeTextLígth
 == 0);

257 
	`Áû
(
pFoŸnŸeText
 !
NULL
);

258 
pFoŸnŸeText
 = 
	`xˇŒoc
(
tFoŸnŸeTextLígth
,

259 (
foŸnŸe_loˇl_ty≥
));

261 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeTextLígth
;ÅIndex++) {

262 
pCuº
 = 
pFoŸnŸeText
 + 
tIndex
;

263 
pCuº
->
tInfo
.
szText
 = 
NULL
;

264 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

265 
	`NO_DBG_HEX
(
ulOff£t
);

266 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

267 
	`NO_DBG_HEX
(
ulCh¨Pos
);

268 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

269 
pCuº
->
ulCh¨PosSèπ
 = 
ulCh¨Pos
;

270 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4 + 4, 
aucBuf„r
);

271 
	`NO_DBG_HEX
(
ulOff£t
);

272 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

273 
	`NO_DBG_HEX
(
ulCh¨Pos
);

274 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

275 
pCuº
->
ulCh¨PosNext
 = 
ulCh¨Pos
;

276 
pCuº
->
bU£ful
 =ÖCuº->
ulCh¨PosSèπ
 !pCuº->
ulCh¨PosNext
;

278 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

279 
	}
}

285 
	$vGë2NŸesInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

287 
	`TRACE_MSG
("vGet2NotesInfo");

289 
	`vGë2FoŸnŸesInfo
(
pFûe
, 
aucHódî
);

290 
	`vGë2FoŸnŸesText
(
pFûe
, 
aucHódî
);

292 
	}
}

298 
	$vGë6FoŸnŸesInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

299 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

300 c⁄° 
UCHAR
 *
aucHódî
)

302 
UCHAR
 *
aucBuf„r
;

303 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöFoŸnŸeInfo
;

304 
size_t
 
tFoŸnŸeInfoLí
;

305 
size_t
 
tIndex
;

307 
	`TRACE_MSG
("vGet6FootnotesInfo");

309 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

310 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

311 
	`Áû
(
aulBBD
 =
NULL
);

313 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

314 
	`NO_DBG_HEX
(
ulBegöOfText
);

315 
ulBegöFoŸnŸeInfo
 = 
	`ulGëL⁄g
(0x68, 
aucHódî
);

316 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeInfo
);

317 
tFoŸnŸeInfoLí
 =

318 (
size_t
)
	`ulGëL⁄g
(0x6c, 
aucHódî
);

319 
	`NO_DBG_DEC
(
tFoŸnŸeInfoLí
);

321 i‡(
tFoŸnŸeInfoLí
 < 10) {

322 
	`DBG_MSG
("No Footnotes inÅhis document");

326 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeInfoLí
);

327 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

328 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

329 
aucBuf„r
, 
ulBegöFoŸnŸeInfo
, 
tFoŸnŸeInfoLí
)) {

330 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

333 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeInfoLí
);

335 
	`Áû
(
tFoŸnŸeLi°Lígth
 != 0);

336 
tFoŸnŸeLi°Lígth
 = (
tFoŸnŸeInfoLí
 - 4) / 6;

337 
	`Áû
(
tFoŸnŸeLi°Lígth
 == 0);

339 
	`Áû
(
aulFoŸnŸeLi°
 !
NULL
);

340 
aulFoŸnŸeLi°
 = 
	`xˇŒoc
(
tFoŸnŸeLi°Lígth
, (
ULONG
));

342 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeLi°Lígth
;ÅIndex++) {

343 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

344 
	`NO_DBG_HEX
(
ulOff£t
);

345 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

346 
	`NO_DBG_HEX
(
ulFûeOff£t
);

347 
aulFoŸnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

349 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

350 
	}
}

356 
	$vGë6FoŸnŸesText
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

357 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

358 c⁄° 
UCHAR
 *
aucHódî
)

360 
foŸnŸe_loˇl_ty≥
 *
pCuº
;

361 
UCHAR
 *
aucBuf„r
;

362 
ULONG
 
ulCh¨Pos
, 
ulBegöOfFoŸnŸes
, 
ulOff£t
, 
ulBegöFoŸnŸeText
;

363 
size_t
 
tFoŸnŸeTextLí
;

364 
size_t
 
tIndex
;

366 
	`TRACE_MSG
("vGet6FootnotesText");

368 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

369 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

370 
	`Áû
(
aulBBD
 =
NULL
);

372 
ulBegöOfFoŸnŸes
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

373 
ulBegöOfFoŸnŸes
 +
	`ulGëL⁄g
(0x34, 
aucHódî
);

374 
	`NO_DBG_HEX
(
ulBegöOfFoŸnŸes
);

376 
ulBegöFoŸnŸeText
 = 
	`ulGëL⁄g
(0x70, 
aucHódî
);

377 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeText
);

378 
tFoŸnŸeTextLí
 =

379 (
size_t
)
	`ulGëL⁄g
(0x74, 
aucHódî
);

380 
	`NO_DBG_DEC
(
tFoŸnŸeTextLí
);

382 i‡(
tFoŸnŸeTextLí
 < 12) {

383 
	`DBG_MSG
("No FootnoteÅext inÅhis document");

387 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeTextLí
);

388 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

389 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

390 
aucBuf„r
, 
ulBegöFoŸnŸeText
, 
tFoŸnŸeTextLí
)) {

391 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

394 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeTextLí
);

396 
	`Áû
(
tFoŸnŸeTextLígth
 != 0);

397 
tFoŸnŸeTextLígth
 = 
tFoŸnŸeTextLí
 / 4 - 2;

398 
	`Áû
(
tFoŸnŸeTextLígth
 == 0);

400 
	`Áû
(
pFoŸnŸeText
 !
NULL
);

401 
pFoŸnŸeText
 = 
	`xˇŒoc
(
tFoŸnŸeTextLígth
,

402 (
foŸnŸe_loˇl_ty≥
));

404 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeTextLígth
;ÅIndex++) {

405 
pCuº
 = 
pFoŸnŸeText
 + 
tIndex
;

406 
pCuº
->
tInfo
.
szText
 = 
NULL
;

407 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

408 
	`NO_DBG_HEX
(
ulOff£t
);

409 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

410 
	`NO_DBG_HEX
(
ulCh¨Pos
);

411 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

412 
pCuº
->
ulCh¨PosSèπ
 = 
ulCh¨Pos
;

413 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4 + 4, 
aucBuf„r
);

414 
	`NO_DBG_HEX
(
ulOff£t
);

415 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

416 
	`NO_DBG_HEX
(
ulCh¨Pos
);

417 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

418 
pCuº
->
ulCh¨PosNext
 = 
ulCh¨Pos
;

419 
pCuº
->
bU£ful
 =ÖCuº->
ulCh¨PosSèπ
 !pCuº->
ulCh¨PosNext
;

421 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

422 
	}
}

428 
	$vGë6EndnŸesInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

429 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

430 c⁄° 
UCHAR
 *
aucHódî
)

432 
UCHAR
 *
aucBuf„r
;

433 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöEndnŸeInfo
;

434 
size_t
 
tEndnŸeInfoLí
;

435 
size_t
 
tIndex
;

437 
	`TRACE_MSG
("vGet6EndnotesInfo");

439 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

440 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

441 
	`Áû
(
aulBBD
 =
NULL
);

443 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

444 
	`NO_DBG_HEX
(
ulBegöOfText
);

445 
ulBegöEndnŸeInfo
 = 
	`ulGëL⁄g
(0x1d2, 
aucHódî
);

446 
	`NO_DBG_HEX
(
ulBegöEndnŸeInfo
);

447 
tEndnŸeInfoLí
 =

448 (
size_t
)
	`ulGëL⁄g
(0x1d6, 
aucHódî
);

449 
	`NO_DBG_DEC
(
tEndnŸeInfoLí
);

451 i‡(
tEndnŸeInfoLí
 < 10) {

452 
	`DBG_MSG
("No Endnotes inÅhis document");

456 
aucBuf„r
 = 
	`xmÆloc
(
tEndnŸeInfoLí
);

457 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

458 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

459 
aucBuf„r
, 
ulBegöEndnŸeInfo
, 
tEndnŸeInfoLí
)) {

460 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

463 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tEndnŸeInfoLí
);

465 
	`Áû
(
tEndnŸeLi°Lígth
 != 0);

466 
tEndnŸeLi°Lígth
 = (
tEndnŸeInfoLí
 - 4) / 6;

467 
	`Áû
(
tEndnŸeLi°Lígth
 == 0);

469 
	`Áû
(
aulEndnŸeLi°
 !
NULL
);

470 
aulEndnŸeLi°
 = 
	`xˇŒoc
(
tEndnŸeLi°Lígth
, (
ULONG
));

472 
tIndex
 = 0;ÅIndex < 
tEndnŸeLi°Lígth
;ÅIndex++) {

473 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

474 
	`NO_DBG_HEX
(
ulOff£t
);

475 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

476 
	`NO_DBG_HEX
(
ulFûeOff£t
);

477 
aulEndnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

479 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

480 
	}
}

486 
	$vGë6NŸesInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

487 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

488 c⁄° 
UCHAR
 *
aucHódî
)

490 
	`TRACE_MSG
("vGet6NotesInfo");

492 
	`vGë6FoŸnŸesInfo
(
pFûe
, 
ulSèπBlock
,

493 
aulBBD
, 
tBBDLí
, 
aucHódî
);

494 
	`vGë6FoŸnŸesText
(
pFûe
, 
ulSèπBlock
,

495 
aulBBD
, 
tBBDLí
, 
aucHódî
);

496 
	`vGë6EndnŸesInfo
(
pFûe
, 
ulSèπBlock
,

497 
aulBBD
, 
tBBDLí
, 
aucHódî
);

498 
	}
}

504 
	$vGë8FoŸnŸesInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

505 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

506 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

507 c⁄° 
UCHAR
 *
aucHódî
)

509 c⁄° 
ULONG
 *
aulBlockDïŸ
;

510 
UCHAR
 *
aucBuf„r
;

511 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöFoŸnŸeInfo
;

512 
size_t
 
tFoŸnŸeInfoLí
, 
tBlockDïŸLí
, 
tBlockSize
;

513 
size_t
 
tIndex
;

515 
	`TRACE_MSG
("vGet8FootnotesInfo");

517 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

518 
	`NO_DBG_HEX
(
ulBegöOfText
);

519 
ulBegöFoŸnŸeInfo
 = 
	`ulGëL⁄g
(0xØ, 
aucHódî
);

520 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeInfo
);

521 
tFoŸnŸeInfoLí
 =

522 (
size_t
)
	`ulGëL⁄g
(0x´, 
aucHódî
);

523 
	`NO_DBG_DEC
(
tFoŸnŸeInfoLí
);

525 i‡(
tFoŸnŸeInfoLí
 < 10) {

526 
	`DBG_MSG
("No Footnotes inÅhis document");

530 
	`NO_DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

531 
	`NO_DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

532 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

533 
	`DBG_MSG
("No footnotes information");

537 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

539 
aulBlockDïŸ
 = 
aulSBD
;

540 
tBlockDïŸLí
 = 
tSBDLí
;

541 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

544 
aulBlockDïŸ
 = 
aulBBD
;

545 
tBlockDïŸLí
 = 
tBBDLí
;

546 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

548 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeInfoLí
);

549 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

550 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

551 
aucBuf„r
, 
ulBegöFoŸnŸeInfo
, 
tFoŸnŸeInfoLí
)) {

552 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

555 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeInfoLí
);

557 
	`Áû
(
tFoŸnŸeLi°Lígth
 != 0);

558 
tFoŸnŸeLi°Lígth
 = (
tFoŸnŸeInfoLí
 - 4) / 6;

559 
	`Áû
(
tFoŸnŸeLi°Lígth
 == 0);

561 
	`Áû
(
aulFoŸnŸeLi°
 !
NULL
);

562 
aulFoŸnŸeLi°
 = 
	`xˇŒoc
(
tFoŸnŸeLi°Lígth
, (
ULONG
));

564 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeLi°Lígth
;ÅIndex++) {

565 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

566 
	`NO_DBG_HEX
(
ulOff£t
);

567 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

568 
	`NO_DBG_HEX
(
ulFûeOff£t
);

569 
aulFoŸnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

571 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

572 
	}
}

578 
	$vGë8FoŸnŸesText
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

579 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

580 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

581 c⁄° 
UCHAR
 *
aucHódî
)

583 
foŸnŸe_loˇl_ty≥
 *
pCuº
;

584 c⁄° 
ULONG
 *
aulBlockDïŸ
;

585 
UCHAR
 *
aucBuf„r
;

586 
ULONG
 
ulCh¨Pos
, 
ulBegöOfFoŸnŸes
, 
ulOff£t
, 
ulBegöFoŸnŸeText
;

587 
size_t
 
tFoŸnŸeTextLí
, 
tBlockDïŸLí
, 
tBlockSize
;

588 
size_t
 
tIndex
;

590 
	`TRACE_MSG
("vGet8FootnotesText");

592 
ulBegöOfFoŸnŸes
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

593 
ulBegöOfFoŸnŸes
 +
	`ulGëL⁄g
(0x4c, 
aucHódî
);

594 
	`NO_DBG_HEX
(
ulBegöOfFoŸnŸes
);

596 
ulBegöFoŸnŸeText
 = 
	`ulGëL⁄g
(0xb2, 
aucHódî
);

597 
	`NO_DBG_HEX
(
ulBegöFoŸnŸeText
);

598 
tFoŸnŸeTextLí
 =

599 (
size_t
)
	`ulGëL⁄g
(0xb6, 
aucHódî
);

600 
	`NO_DBG_DEC
(
tFoŸnŸeTextLí
);

602 i‡(
tFoŸnŸeTextLí
 < 12) {

603 
	`DBG_MSG
("No FootnoteÅext inÅhis document");

607 
	`NO_DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

608 
	`NO_DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

609 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

610 
	`DBG_MSG
("No footnoteÅext information");

614 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

616 
aulBlockDïŸ
 = 
aulSBD
;

617 
tBlockDïŸLí
 = 
tSBDLí
;

618 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

621 
aulBlockDïŸ
 = 
aulBBD
;

622 
tBlockDïŸLí
 = 
tBBDLí
;

623 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

625 
aucBuf„r
 = 
	`xmÆloc
(
tFoŸnŸeTextLí
);

626 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

627 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

628 
aucBuf„r
, 
ulBegöFoŸnŸeText
, 
tFoŸnŸeTextLí
)) {

629 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

632 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tFoŸnŸeTextLí
);

634 
	`Áû
(
tFoŸnŸeTextLígth
 != 0);

635 
tFoŸnŸeTextLígth
 = 
tFoŸnŸeTextLí
 / 4 - 2;

636 
	`Áû
(
tFoŸnŸeTextLígth
 == 0);

638 
	`Áû
(
pFoŸnŸeText
 !
NULL
);

639 
pFoŸnŸeText
 = 
	`xˇŒoc
(
tFoŸnŸeTextLígth
,

640 (
foŸnŸe_loˇl_ty≥
));

642 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeTextLígth
;ÅIndex++) {

643 
pCuº
 = 
pFoŸnŸeText
 + 
tIndex
;

644 
pCuº
->
tInfo
.
szText
 = 
NULL
;

645 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

646 
	`NO_DBG_HEX
(
ulOff£t
);

647 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

648 
	`NO_DBG_HEX
(
ulCh¨Pos
);

649 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

650 
pCuº
->
ulCh¨PosSèπ
 = 
ulCh¨Pos
;

651 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4 + 4, 
aucBuf„r
);

652 
	`NO_DBG_HEX
(
ulOff£t
);

653 
ulCh¨Pos
 = 
ulBegöOfFoŸnŸes
 + 
ulOff£t
;

654 
	`NO_DBG_HEX
(
ulCh¨Pos
);

655 
	`NO_DBG_HEX
(
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
));

656 
pCuº
->
ulCh¨PosNext
 = 
ulCh¨Pos
;

657 
pCuº
->
bU£ful
 =ÖCuº->
ulCh¨PosSèπ
 !pCuº->
ulCh¨PosNext
;

659 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

660 
	}
}

666 
	$vGë8EndnŸesInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

667 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

668 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

669 c⁄° 
UCHAR
 *
aucHódî
)

671 c⁄° 
ULONG
 *
aulBlockDïŸ
;

672 
UCHAR
 *
aucBuf„r
;

673 
ULONG
 
ulFûeOff£t
, 
ulBegöOfText
, 
ulOff£t
, 
ulBegöEndnŸeInfo
;

674 
size_t
 
tEndnŸeInfoLí
, 
tBlockDïŸLí
, 
tBlockSize
;

675 
size_t
 
tIndex
;

677 
	`TRACE_MSG
("vGet8EndnotesInfo");

679 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

680 
	`NO_DBG_HEX
(
ulBegöOfText
);

681 
ulBegöEndnŸeInfo
 = 
	`ulGëL⁄g
(0x20a, 
aucHódî
);

682 
	`NO_DBG_HEX
(
ulBegöEndnŸeInfo
);

683 
tEndnŸeInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x20e, 
aucHódî
);

684 
	`NO_DBG_DEC
(
tEndnŸeInfoLí
);

686 i‡(
tEndnŸeInfoLí
 < 10) {

687 
	`DBG_MSG
("NoÉndnotes inÅhis document");

691 
	`NO_DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

692 
	`NO_DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

693 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

694 
	`DBG_MSG
("NoÉndnotes information");

698 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

700 
aulBlockDïŸ
 = 
aulSBD
;

701 
tBlockDïŸLí
 = 
tSBDLí
;

702 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

705 
aulBlockDïŸ
 = 
aulBBD
;

706 
tBlockDïŸLí
 = 
tBBDLí
;

707 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

709 
aucBuf„r
 = 
	`xmÆloc
(
tEndnŸeInfoLí
);

710 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

711 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

712 
aucBuf„r
, 
ulBegöEndnŸeInfo
, 
tEndnŸeInfoLí
)) {

713 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

716 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tEndnŸeInfoLí
);

718 
	`Áû
(
tEndnŸeLi°Lígth
 != 0);

719 
tEndnŸeLi°Lígth
 = (
tEndnŸeInfoLí
 - 4) / 6;

720 
	`Áû
(
tEndnŸeLi°Lígth
 == 0);

722 
	`Áû
(
aulEndnŸeLi°
 !
NULL
);

723 
aulEndnŸeLi°
 = 
	`xˇŒoc
(
tEndnŸeLi°Lígth
, (
ULONG
));

725 
tIndex
 = 0;ÅIndex < 
tEndnŸeLi°Lígth
;ÅIndex++) {

726 
ulOff£t
 = 
	`ulGëL⁄g
(
tIndex
 * 4, 
aucBuf„r
);

727 
	`NO_DBG_HEX
(
ulOff£t
);

728 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulBegöOfText
 + 
ulOff£t
);

729 
	`NO_DBG_HEX
(
ulFûeOff£t
);

730 
aulEndnŸeLi°
[
tIndex
] = 
ulFûeOff£t
;

732 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

733 
	}
}

739 
	$vGë8NŸesInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

740 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

741 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

742 c⁄° 
UCHAR
 *
aucHódî
)

744 
	`TRACE_MSG
("vGet8NotesInfo");

746 
	`vGë8FoŸnŸesInfo
(
pFûe
, 
pPPS
,

747 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

748 
	`vGë8FoŸnŸesText
(
pFûe
, 
pPPS
,

749 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

750 
	`vGë8EndnŸesInfo
(
pFûe
, 
pPPS
,

751 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

752 
	}
}

758 
	$vGëNŸesInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

759 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

760 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

761 c⁄° 
UCHAR
 *
aucHódî
, 
iW‹dVîsi⁄
)

763 
	`TRACE_MSG
("vGetNotesInfo");

765 
	`Áû
(
pFûe
 =
NULL
);

766 
	`Áû
(
pPPS
 =
NULL
 && 
iW‹dVîsi⁄
 >= 6);

767 
	`Áû
(
aulBBD
 =
NULL
 && 
tBBDLí
 != 0);

768 
	`Áû
(
aulSBD
 =
NULL
 && 
tSBDLí
 != 0);

769 
	`Áû
(
aucHódî
 =
NULL
);

771 
iW‹dVîsi⁄
) {

773 
	`vGë0NŸesInfo
(
pFûe
, 
aucHódî
);

777 
	`vGë2NŸesInfo
(
pFûe
, 
aucHódî
);

784 
	`vGë6NŸesInfo
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

785 
aulBBD
, 
tBBDLí
, 
aucHódî
);

788 
	`vGë8NŸesInfo
(
pFûe
, 
pPPS
,

789 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

792 
	`wîr
(0, "Sorry,ÇoÇotes information");

795 
	}
}

801 
	$vPª∑ªFoŸnŸeText
(
FILE
 *
pFûe
)

803 
foŸnŸe_loˇl_ty≥
 *
pCuº
;

804 
size_t
 
tFoŸnŸe
;

806 
	`Áû
(
pFûe
 =
NULL
);

807 
	`Áû
(
pFoŸnŸeText
 =
NULL
 && 
tFoŸnŸeTextLígth
 != 0);

809 i‡(
pFoŸnŸeText
 =
NULL
 || 
tFoŸnŸeTextLígth
 == 0) {

815 
tFoŸnŸe
 = 0;ÅFoŸnŸê< 
tFoŸnŸeTextLígth
;ÅFootnote++) {

816 
pCuº
 = 
pFoŸnŸeText
 + 
tFoŸnŸe
;

817 
pCuº
->
bU£ful
 =ÖCuº->
ulCh¨PosSèπ
 !pCuº->
ulCh¨PosNext
;

818 i‡(
pCuº
->
bU£ful
) {

819 
pCuº
->
tInfo
.
szText
 = 
	`szFoŸnŸeDe¸y±‹
(
pFûe
,

820 
pCuº
->
ulCh¨PosSèπ
,

821 
pCuº
->
ulCh¨PosNext
);

823 
pCuº
->
tInfo
.
szText
 = 
NULL
;

826 
	}
}

832 
	$szGëFoŸnoŸText
(
UINT
 
uiFoŸnŸeIndex
)

834 i‡((
size_t
)
uiFoŸnŸeIndex
 >
tFoŸnŸeTextLígth
) {

835  
NULL
;

837  
pFoŸnŸeText
[
uiFoŸnŸeIndex
].
tInfo
.
szText
;

838 
	}
}

843 
nŸëy≥_íum


844 
	$eGëNŸëy≥
(
ULONG
 
ulFûeOff£t
)

846 
size_t
 
tIndex
;

848 
	`TRACE_MSG
("eGetNotetype");

850 
	`Áû
(
aulFoŸnŸeLi°
 =
NULL
 && 
tFoŸnŸeLi°Lígth
 != 0);

851 
	`Áû
(
aulEndnŸeLi°
 =
NULL
 && 
tEndnŸeLi°Lígth
 != 0);

854 i‡(
tFoŸnŸeLi°Lígth
 =0 && 
tEndnŸeLi°Lígth
 == 0) {

855  
nŸëy≥_is_unknown
;

857 i‡(
tEndnŸeLi°Lígth
 == 0) {

858  
nŸëy≥_is_foŸnŸe
;

860 i‡(
tFoŸnŸeLi°Lígth
 == 0) {

861  
nŸëy≥_is_ídnŸe
;

864 
tIndex
 = 0;ÅIndex < 
tFoŸnŸeLi°Lígth
;ÅIndex++) {

865 i‡(
aulFoŸnŸeLi°
[
tIndex
] =
ulFûeOff£t
) {

866  
nŸëy≥_is_foŸnŸe
;

869 
tIndex
 = 0;ÅIndex < 
tEndnŸeLi°Lígth
;ÅIndex++) {

870 i‡(
aulEndnŸeLi°
[
tIndex
] =
ulFûeOff£t
) {

871  
nŸëy≥_is_ídnŸe
;

875  
nŸëy≥_is_unknown
;

876 
	}
}

	@options.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<°dlib.h
>

13 
	~<uni°d.h
>

14 
	~"™tiw‹d.h
"

16 
	#LEAFNAME_SIZE
 (32+1)

	)

19 
›ti⁄s_ty≥
 
	gtO±i⁄sCuº
;

20 
	s∑≥rsize_èg
 {

21 
	mszName
[16];

22 
USHORT
 
	musWidth
;

23 
USHORT
 
	musHeight
;

24 } 
	t∑≥rsize_ty≥
;

26 c⁄° 
∑≥rsize_ty≥
 
	g©P≠îSizes
[] = {

44 c⁄° 
›ti⁄s_ty≥
 
	gtO±i⁄sDeÁu…
 = {

45 
DEFAULT_SCREEN_WIDTH
,

46 
c⁄vîsi⁄_ãxt
,

47 
TRUE
,

48 
TRUE
,

49 
FALSE
,

50 
ícodög_œtö_1
,

51 
INT_MAX
,

52 
INT_MAX
,

61 
BOOL


62 
	$bC‹ª˘P≠îsize
(c⁄° *
szName
, 
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
)

64 c⁄° 
∑≥rsize_ty≥
 *
pP≠îSize
;

66 
pP≠îSize
 = 
©P≠îSizes
;

67 
pP≠îSize
->
szName
[0] != '\0';

68 
pP≠îSize
++) {

69 i‡(!
	`STRCEQ
(
pP≠îSize
->
szName
, szName)) {

72 
	`DBG_DEC
(
pP≠îSize
->
usWidth
);

73 
	`DBG_DEC
(
pP≠îSize
->
usHeight
);

74 
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =ÉConversionType;

75 
tO±i⁄sCuº
.
iPageHeight
 = ()
pP≠îSize
->
usHeight
;

76 
tO±i⁄sCuº
.
iPageWidth
 = ()
pP≠îSize
->
usWidth
;

77  
TRUE
;

79  
FALSE
;

80 
	}
}

88 
	$szCª©eSuffix
(c⁄° *
szLó‚ame
)

90 c⁄° *
pcDŸ
;

92 
pcDŸ
 = 
	`°ºchr
(
szLó‚ame
, '.');

93 i‡(
pcDŸ
 !
NULL
 && 
	`STRCEQ
(pcDot, ".txt")) {

98 
	}
}

103 
ícodög_ty≥


104 
	$eM≠pögFûe2Encodög
(c⁄° *
szLó‚ame
)

106 
szM≠pögFûe
[
LEAFNAME_SIZE
+4];

108 
	`Áû
(
szLó‚ame
 =
NULL
);

110 i‡(
	`°æí
(
szLó‚ame
Ë+ 4 >(
szM≠pögFûe
)) {

111 
	`DBG_MSG
(
szLó‚ame
);

112  
ícodög_œtö_1
;

115 
	`•rötf
(
szM≠pögFûe
, "%s%s", 
szLó‚ame
, 
	`szCª©eSuffix
(szLeafname));

117 
	`DBG_MSG
(
szM≠pögFûe
);

119 i‡(
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_UTF_8
)) {

120  
ícodög_utf_8
;

122 i‡(
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_CP852
) ||

123 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_CP1250
) ||

124 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_8859_2
)) {

125  
ícodög_œtö_2
;

127 i‡(
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_KOI8_R
) ||

128 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_KOI8_U
) ||

129 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_CP866
) ||

130 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_CP1251
) ||

131 
	`STRCEQ
(
szM≠pögFûe
, 
MAPPING_FILE_8859_5
)) {

132  
ícodög_cyrûlic
;

134  
ícodög_œtö_1
;

135 
	}
}

142 
FILE
 *

143 
	$pO≥nCh¨a˘îM≠pögFûe
(c⁄° *
szLó‚ame
)

145 
FILE
 *
pFûe
;

146 c⁄° *
szHome
, *
szA¡iw‹d
, *
szSuffix
;

147 
size_t
 
tFûíameLí
;

148 
szM≠pögFûe
[
PATH_MAX
+1];

150 i‡(
szLó‚ame
 =
NULL
 || szLeafname[0] == '\0') {

151  
NULL
;

154 
	`DBG_MSG
(
szLó‚ame
);

157 
szSuffix
 = 
	`szCª©eSuffix
(
szLó‚ame
);

160 
tFûíameLí
 = 
	`°æí
(
szLó‚ame
Ë+ såÀn(
szSuffix
);

163 
szA¡iw‹d
 = 
	`szGëA¡iw‹dDúe˘‹y
();

164 i‡(
szA¡iw‹d
 !
NULL
 && szAntiword[0] != '\0') {

165 i‡(
	`°æí
(
szA¡iw‹d
Ë+ 
tFûíameLí
 <

166 (
szM≠pögFûe
) -

167 (
FILE_SEPARATOR
)) {

168 
	`•rötf
(
szM≠pögFûe
,

169 "%s" 
FILE_SEPARATOR
 "%s%s",

170 
szA¡iw‹d
, 
szLó‚ame
, 
szSuffix
);

171 
	`DBG_MSG
(
szM≠pögFûe
);

172 
pFûe
 = 
	`f›í
(
szM≠pögFûe
, "r");

173 i‡(
pFûe
 !
NULL
) {

174  
pFûe
;

177 
	`wîr
(0, "Environment mappingfilename ignored");

182 
szHome
 = 
	`szGëHomeDúe˘‹y
();

183 i‡(
	`°æí
(
szHome
Ë+ 
tFûíameLí
 <

184 (
szM≠pögFûe
) -

185 (
ANTIWORD_DIR
) -

186 2 * (
FILE_SEPARATOR
)) {

187 
	`•rötf
(
szM≠pögFûe
,

188 "%s" 
FILE_SEPARATOR
 
ANTIWORD_DIR
 FILE_SEPARATOR "%s%s",

189 
szHome
, 
szLó‚ame
, 
szSuffix
);

190 
	`DBG_MSG
(
szM≠pögFûe
);

191 
pFûe
 = 
	`f›í
(
szM≠pögFûe
, "r");

192 i‡(
pFûe
 !
NULL
) {

193  
pFûe
;

196 
	`wîr
(0, "Local mappingfilenameÅooÜong, ignored");

200 i‡(
tFûíameLí
 <

201 (
szM≠pögFûe
) -

202 (
GLOBAL_ANTIWORD_DIR
) -

203 (
FILE_SEPARATOR
)) {

204 
	`•rötf
(
szM≠pögFûe
,

205 
GLOBAL_ANTIWORD_DIR
 
FILE_SEPARATOR
 "%s%s",

206 
szLó‚ame
, 
szSuffix
);

207 
	`DBG_MSG
(
szM≠pögFûe
);

208 
pFûe
 = 
	`f›í
(
szM≠pögFûe
, "r");

209 i‡(
pFûe
 !
NULL
) {

210  
pFûe
;

213 
	`wîr
(0, "Global mappingfilenameÅooÜong, ignored");

215 
	`wîr
(0, "I can't open your mapping file (%s%s)\n"

216 "Iài†nŸ i¿'%s" 
FILE_SEPARATOR
 
ANTIWORD_DIR
 "'Çor in '"

217 
GLOBAL_ANTIWORD_DIR
 "'.", 
szLó‚ame
, 
szSuffix
, 
szHome
);

218  
NULL
;

219 
	}
}

225 
	$vClo£Ch¨a˘îM≠pögFûe
(
FILE
 *
pFûe
)

227 ()
	`f˛o£
(
pFûe
);

228 
	}
}

239 
	$iRódO±i⁄s
(
¨gc
, **
¨gv
)

241 *
›èrg
;

242 
›töd
;

243 *
pcCh¨
, *
szTmp
;

244 
iCh¨
;

245 
szLó‚ame
[
LEAFNAME_SIZE
];

246 
FILE
 *
pCh¨a˘îM≠pögFûe
;

247 
iTmp
;

248 
BOOL
 
bSuc˚ss
;

250 
	`DBG_MSG
("iReadOptions");

253 
tO±i⁄sCuº
 = 
tO±i⁄sDeÁu…
;

256 
szTmp
 = 
	`gëív
("COLUMNS");

257 i‡(
szTmp
 !
NULL
) {

258 
	`DBG_MSG
(
szTmp
);

259 
iTmp
 = ()
	`°πﬁ
(
szTmp
, &
pcCh¨
, 10);

260 i‡(*
pcCh¨
 == '\0') {

261 
iTmp
 -= 4;

262 i‡(
iTmp
 < 
MIN_SCREEN_WIDTH
) {

263 
iTmp
 = 
MIN_SCREEN_WIDTH
;

264 } i‡(
iTmp
 > 
MAX_SCREEN_WIDTH
) {

265 
iTmp
 = 
MAX_SCREEN_WIDTH
;

267 
tO±i⁄sCuº
.
iP¨agøphBªak
 = 
iTmp
;

268 
	`DBG_DEC
(
tO±i⁄sCuº
.
iP¨agøphBªak
);

271 
	`°∫˝y
(
szLó‚ame
, 
	`szGëDeÁu…M≠pögFûe
(), (szLeafname) - 1);

272 
szLó‚ame
[(szLeafname) - 1] = '\0';

274 (
iCh¨
 = 
	`gë›t
(
¨gc
, 
¨gv
, "La:fhi:m:p:rstw:x:")) != -1) {

275 
iCh¨
) {

277 
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 = 
c⁄vîsi⁄_fmt_ãxt
;

282 i‡(
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
) {

283 
	`wîr
(0, "XML doesn'tÇeedá mapping file");

286 
	`°∫˝y
(
szLó‚ame
, 
›èrg
, (szLeafname) - 1);

287 
szLó‚ame
[(szLeafname) - 1] = '\0';

288 
	`DBG_MSG
(
szLó‚ame
);

291 i‡(!
	`bC‹ª˘P≠îsize
(
›èrg
, 
c⁄vîsi⁄_ps
)) {

292 
	`wîr
(0, "-p withoutá validÖapersize");

297 
tO±i⁄sCuº
.
bRemoveRemovedText
 = 
FALSE
;

300 
tO±i⁄sCuº
.
bHideHiddíText
 = 
FALSE
;

303 
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 = 
c⁄vîsi⁄_ãxt
;

306 
iTmp
 = ()
	`°πﬁ
(
›èrg
, &
pcCh¨
, 10);

307 i‡(*
pcCh¨
 == '\0') {

308 i‡(
iTmp
 !0 && iTm∞< 
MIN_SCREEN_WIDTH
) {

309 
iTmp
 = 
MIN_SCREEN_WIDTH
;

310 } i‡(
iTmp
 > 
MAX_SCREEN_WIDTH
) {

311 
iTmp
 = 
MAX_SCREEN_WIDTH
;

313 
tO±i⁄sCuº
.
iP¨agøphBªak
 = 
iTmp
;

314 
	`DBG_DEC
(
tO±i⁄sCuº
.
iP¨agøphBªak
);

318 i‡(
	`STREQ
(
›èrg
, "db")) {

319 
tO±i⁄sCuº
.
iP¨agøphBªak
 = 0;

320 
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 = 
c⁄vîsi⁄_xml
;

321 
	`°r˝y
(
szLó‚ame
, 
MAPPING_FILE_UTF_8
);

323 
	`wîr
(0, "-x %†i†nŸ suµ‹ãd", 
›èrg
);

332 
tO±i⁄sCuº
.
eEncodög
 = 
	`eM≠pögFûe2Encodög
(
szLó‚ame
);

333 
	`DBG_DEC
(
tO±i⁄sCuº
.
eEncodög
);

335 i‡(
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 &&

336 
tO±i⁄sCuº
.
eEncodög
 =
ícodög_utf_8
) {

337 
	`wîr
(0,

342 i‡(
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
 &&

343 
tO±i⁄sCuº
.
eEncodög
 =
ícodög_utf_8
) {

344 
	`wîr
(0,

349 i‡(
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
 &&

350 
tO±i⁄sCuº
.
eEncodög
 =
ícodög_cyrûlic
) {

351 
	`wîr
(0,

356 i‡(
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

357 
tO±i⁄sCuº
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

359 i‡(
tO±i⁄sCuº
.
bU£L™dsˇ≥
) {

361 
iTmp
 = 
tO±i⁄sCuº
.
iPageHeight
;

362 
tO±i⁄sCuº
.
iPageHeight
 =ÅO±i⁄sCuº.
iPageWidth
;

363 
tO±i⁄sCuº
.
iPageWidth
 = 
iTmp
;

366 
tO±i⁄sCuº
.
iP¨agøphBªak
 = 
	`iMûliPoöts2Ch¨
(

367 ()
tO±i⁄sCuº
.
iPageWidth
 * 1000 -

368 
	`lDøwUnôs2MûliPoöts
(

369 
PS_LEFT_MARGIN
 + 
PS_RIGHT_MARGIN
));

370 
	`DBG_DEC
(
tO±i⁄sCuº
.
iP¨agøphBªak
);

373 
pCh¨a˘îM≠pögFûe
 = 
	`pO≥nCh¨a˘îM≠pögFûe
(
szLó‚ame
);

374 i‡(
pCh¨a˘îM≠pögFûe
 !
NULL
) {

375 
bSuc˚ss
 = 
	`bRódCh¨a˘îM≠pögTabÀ
(
pCh¨a˘îM≠pögFûe
);

376 
	`vClo£Ch¨a˘îM≠pögFûe
(
pCh¨a˘îM≠pögFûe
);

378 
bSuc˚ss
 = 
FALSE
;

380  
bSuc˚ss
 ? 
›töd
 : -1;

381 
	}
}

387 
	$vGëO±i⁄s
(
›ti⁄s_ty≥
 *
pO±i⁄s
)

389 
	`Áû
(
pO±i⁄s
 =
NULL
);

391 *
pO±i⁄s
 = 
tO±i⁄sCuº
;

392 
	}
}

	@out2window.c

9 
	~<°rög.h
>

10 
	~<°dlib.h
>

11 
	~<˘y≥.h
>

12 
	~"™tiw‹d.h
"

15 
	gauiHdrCou¡î
[9];

22 
	$vSåög2Dügøm
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pAnch‹
)

24 
ouçut_ty≥
 *
pOuçut
;

25 
lWidth
;

26 
USHORT
 
usMaxF⁄tSize
;

28 
	`TRACE_MSG
("vString2Diagram");

30 
	`Áû
(
pDüg
 =
NULL
);

31 
	`Áû
(
pAnch‹
 =
NULL
);

34 
usMaxF⁄tSize
 = 
MIN_FONT_SIZE
;

35 
pOuçut
 = 
pAnch‹
;ÖOuçuà!
NULL
;ÖOuçuàpOuçut->
pNext
) {

36 i‡(
pOuçut
->
usF⁄tSize
 > 
usMaxF⁄tSize
) {

37 
usMaxF⁄tSize
 = 
pOuçut
->
usF⁄tSize
;

42 
	`vMove2NextLöeTXT
(
pDüg
);

45 
pOuçut
 = 
pAnch‹
;ÖOuçuà!
NULL
;ÖOuçuàpOuçut->
pNext
) {

46 
lWidth
 = 
	`lMûliPoöts2DøwUnôs
(
pOuçut
->
lSåögWidth
);

47 
	`vSub°rög2Dügøm
(
pDüg
, 
pOuçut
->
szSt‹age
,

48 
pOuçut
->
tNextFªe
, 
lWidth
,ÖOuçut->
ucF⁄tCﬁ‹
,

49 
pOuçut
->
usF⁄tStyÀ
,ÖOuçut->
tF⁄tRef
,

50 
pOuçut
->
usF⁄tSize
, 
usMaxF⁄tSize
);

54 
pDüg
->
lXÀ·
 = 0;

55 
	`TRACE_MSG
("leaving vString2Diagram");

56 
	}
}

62 
	$vSëLe·Indíèti⁄
(
dügøm_ty≥
 *
pDüg
, 
lLe·Indíèti⁄
)

64 
lX
;

66 
	`TRACE_MSG
("vSetLeftIndentation");

68 
	`Áû
(
pDüg
 =
NULL
);

69 
	`Áû
(
lLe·Indíèti⁄
 < 0);

71 
lX
 = 
	`lMûliPoöts2DøwUnôs
(
lLe·Indíèti⁄
);

72 i‡(
lX
 > 0) {

73 
pDüg
->
lXÀ·
 = 
lX
;

75 
pDüg
->
lXÀ·
 = 0;

77 
	}
}

83 
	$lCompuãNëWidth
(
ouçut_ty≥
 *
pAnch‹
)

85 
ouçut_ty≥
 *
pTmp
;

86 
lNëWidth
;

88 
	`TRACE_MSG
("lComputeNetWidth");

90 
	`Áû
(
pAnch‹
 =
NULL
);

93 
lNëWidth
 = 0;

94 
pTmp
 = 
pAnch‹
;ÖTmp->
pNext
 !
NULL
;ÖTmp =ÖTmp->pNext) {

95 
	`Áû
(
pTmp
->
lSåögWidth
 < 0);

96 
lNëWidth
 +
pTmp
->
lSåögWidth
;

98 
	`Áû
(
pTmp
 =
NULL
);

99 
	`Áû
(
pTmp
->
pNext
 !
NULL
);

102 
pTmp
->
tNextFªe
 != 0 &&

103 
	`is•a˚
(()(
UCHAR
)
pTmp
->
szSt‹age
[pTmp->
tNextFªe
 - 1])) {

104 
pTmp
->
szSt‹age
[pTmp->
tNextFªe
 - 1] = '\0';

105 
pTmp
->
tNextFªe
--;

106 
	`NO_DBG_DEC
(
pTmp
->
lSåögWidth
);

107 
pTmp
->
lSåögWidth
 = 
	`lCompuãSåögWidth
(

108 
pTmp
->
szSt‹age
,

109 
pTmp
->
tNextFªe
,

110 
pTmp
->
tF⁄tRef
,

111 
pTmp
->
usF⁄tSize
);

112 
	`NO_DBG_DEC
(
pTmp
->
lSåögWidth
);

116 
lNëWidth
 +
pTmp
->
lSåögWidth
;

117  
lNëWidth
;

118 
	}
}

126 
	$iCompuãHﬁes
(
ouçut_ty≥
 *
pAnch‹
)

128 
ouçut_ty≥
 *
pTmp
;

129 
size_t
 
tIndex
;

130 
iCou¡î
;

131 
BOOL
 
bWasS∑˚
, 
bIsS∑˚
;

133 
	`TRACE_MSG
("iComputeHoles");

135 
	`Áû
(
pAnch‹
 =
NULL
);

137 
iCou¡î
 = 0;

138 
bIsS∑˚
 = 
FALSE
;

140 
pTmp
 = 
pAnch‹
;ÖTm∞!
NULL
;ÖTm∞pTmp->
pNext
) {

141 
	`Áû
(
pTmp
->
tNextFªe
 !
	`°æí
’Tmp->
szSt‹age
));

142 
tIndex
 = 0;ÅIndex <
pTmp
->
tNextFªe
;ÅIndex++) {

143 
bWasS∑˚
 = 
bIsS∑˚
;

144 
bIsS∑˚
 = 
	`is•a˚
(()(
UCHAR
)
pTmp
->
szSt‹age
[
tIndex
]);

145 i‡(
bWasS∑˚
 && !
bIsS∑˚
) {

146 
iCou¡î
++;

150  
iCou¡î
;

151 
	}
}

157 
	$vAlign2Wödow
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pAnch‹
,

158 
lS¸ìnWidth
, 
UCHAR
 
ucAlignmít
)

160 
lNëWidth
, 
lLe·Indíèti⁄
;

162 
	`TRACE_MSG
("vAlign2Window");

164 
	`Áû
(
pDüg
 =
NULL
 || 
pAnch‹
 == NULL);

165 
	`Áû
(
lS¸ìnWidth
 < 
	`lCh¨2MûliPoöts
(
MIN_SCREEN_WIDTH
));

167 
lNëWidth
 = 
	`lCompuãNëWidth
(
pAnch‹
);

169 i‡(
lS¸ìnWidth
 > 
	`lCh¨2MûliPoöts
(
MAX_SCREEN_WIDTH
) ||

170 
lNëWidth
 <= 0) {

175 
	`vSåög2Dügøm
(
pDüg
, 
pAnch‹
);

176 
	`TRACE_MSG
("leaving vAlign2Window #1");

180 
ucAlignmít
) {

181 
ALIGNMENT_CENTER
:

182 
lLe·Indíèti⁄
 = (
lS¸ìnWidth
 - 
lNëWidth
) / 2;

183 
	`DBG_DEC_C
(
lLe·Indíèti⁄
 < 0,ÜLeftIndentation);

184 i‡(
lLe·Indíèti⁄
 > 0) {

185 
	`vSëLe·Indíèti⁄
(
pDüg
, 
lLe·Indíèti⁄
);

188 
ALIGNMENT_RIGHT
:

189 
lLe·Indíèti⁄
 = 
lS¸ìnWidth
 - 
lNëWidth
;

190 
	`DBG_DEC_C
(
lLe·Indíèti⁄
 < 0,ÜLeftIndentation);

191 i‡(
lLe·Indíèti⁄
 > 0) {

192 
	`vSëLe·Indíèti⁄
(
pDüg
, 
lLe·Indíèti⁄
);

195 
ALIGNMENT_JUSTIFY
:

196 
ALIGNMENT_LEFT
:

200 
	`vSåög2Dügøm
(
pDüg
, 
pAnch‹
);

201 
	`TRACE_MSG
("leaving vAlign2Window #2");

202 
	}
}

208 
	$vJu°ify2Wödow
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pAnch‹
,

209 
lS¸ìnWidth
, 
lRightIndíèti⁄
, 
UCHAR
 
ucAlignmít
)

211 
ouçut_ty≥
 *
pTmp
;

212 *
pcNew
, *
pcOld
, *
szSt‹age
;

213 
lNëWidth
, 
lS∑˚Width
, 
lToAdd
;

214 
iFûÀrLí
, 
iHﬁes
;

216 
	`TRACE_MSG
("vJustify2Window");

218 
	`Áû
(
pDüg
 =
NULL
 || 
pAnch‹
 == NULL);

219 
	`Áû
(
lS¸ìnWidth
 < 
MIN_SCREEN_WIDTH
);

220 
	`Áû
(
lRightIndíèti⁄
 > 0);

222 i‡(
ucAlignmít
 !
ALIGNMENT_JUSTIFY
) {

223 
	`vAlign2Wödow
(
pDüg
, 
pAnch‹
, 
lS¸ìnWidth
, 
ucAlignmít
);

227 
lNëWidth
 = 
	`lCompuãNëWidth
(
pAnch‹
);

229 i‡(
lS¸ìnWidth
 > 
	`lCh¨2MûliPoöts
(
MAX_SCREEN_WIDTH
) ||

230 
lNëWidth
 <= 0) {

235 
	`vSåög2Dügøm
(
pDüg
, 
pAnch‹
);

236 
	`TRACE_MSG
("leaving vJustify2Window #1");

241 
	`Áû
(
ucAlignmít
 !
ALIGNMENT_JUSTIFY
);

242 
lS∑˚Width
 = 
	`lCompuãSåögWidth
(" ", 1,

243 
pAnch‹
->
tF⁄tRef
,ÖAnch‹->
usF⁄tSize
);

244 
lToAdd
 = 
lS¸ìnWidth
 -

245 
lNëWidth
 -

246 
	`lDøwUnôs2MûliPoöts
(
pDüg
->
lXÀ·
) +

247 
lRightIndíèti⁄
;

248 #i‡
	`deföed
(
DEBUG
)

249 i‡(
lToAdd
 / 
lS∑˚Width
 < -1) {

250 
	`DBG_DEC
(
lS∑˚Width
);

251 
	`DBG_DEC
(
lToAdd
);

252 
	`DBG_DEC
(
lS¸ìnWidth
);

253 
	`DBG_DEC
(
lNëWidth
);

254 
	`DBG_DEC
(
	`lDøwUnôs2MûliPoöts
(
pDüg
->
lXÀ·
));

255 
	`DBG_DEC
(
pDüg
->
lXÀ·
);

256 
	`DBG_DEC
(
lRightIndíèti⁄
);

259 
lToAdd
 /
lS∑˚Width
;

260 
	`DBG_DEC_C
(
lToAdd
 < 0,ÜToAdd);

261 i‡(
lToAdd
 <= 0) {

262 
	`vSåög2Dügøm
(
pDüg
, 
pAnch‹
);

263 
	`TRACE_MSG
("leaving vJustify2Window #2");

268 
iHﬁes
 = 
	`iCompuãHﬁes
(
pAnch‹
);

269 
pTmp
 = 
pAnch‹
;ÖTm∞!
NULL
;ÖTm∞pTmp->
pNext
) {

270 
	`Áû
(
pTmp
->
tNextFªe
 !
	`°æí
’Tmp->
szSt‹age
));

271 
	`Áû
(
lToAdd
 < 0);

272 
szSt‹age
 = 
	`xmÆloc
(
pTmp
->
tNextFªe
 + (
size_t
)
lToAdd
 + 1);

273 
pcNew
 = 
szSt‹age
;

274 
pcOld
 = 
pTmp
->
szSt‹age
; *pcOld != '\0';ÖcOld++) {

275 *
pcNew
++ = *
pcOld
;

276 i‡(*
pcOld
 == ' ' &&

277 *(
pcOld
 + 1) != ' ' &&

278 
iHﬁes
 > 0) {

279 
iFûÀrLí
 = ()(
lToAdd
 / 
iHﬁes
);

280 
lToAdd
 -
iFûÀrLí
;

281 
iHﬁes
--;

282 ; 
iFûÀrLí
 > 0; iFillerLen--) {

283 *
pcNew
++ = ' ';

287 *
pcNew
 = '\0';

288 
pTmp
->
szSt‹age
 = 
	`x‰ì
(pTmp->szStorage);

289 
pTmp
->
szSt‹age
 = szStorage;

290 
pTmp
->
tSt‹ageSize
 =ÖTmp->
tNextFªe
 + (
size_t
)
lToAdd
 + 1;

291 
pTmp
->
lSåögWidth
 +=

292 (
pcNew
 - 
szSt‹age
 - ()
pTmp
->
tNextFªe
) *

293 
lS∑˚Width
;

294 
	`Áû
(
pcNew
 < 
szSt‹age
);

295 
pTmp
->
tNextFªe
 = (
size_t
)(
pcNew
 - 
szSt‹age
);

296 
	`Áû
(
pTmp
->
tNextFªe
 !
	`°æí
’Tmp->
szSt‹age
));

298 
	`DBG_DEC_C
(
lToAdd
 != 0,ÜToAdd);

299 
	`vSåög2Dügøm
(
pDüg
, 
pAnch‹
);

300 
	`TRACE_MSG
("leaving vJustify2Window #3");

301 
	}
}

307 
	$vRe£tStyÀs
()

309 
	`TRACE_MSG
("vResetStyles");

311 ()
	`mem£t
(
auiHdrCou¡î
, 0, (auiHdrCounter));

312 
	}
}

319 
size_t


320 
	$tStyÀ2Wödow
(*
szLöe
, 
size_t
 
tLöeSize
, c⁄° 
°yÀ_block_ty≥
 *
pStyÀ
,

321 c⁄° 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

323 *
pcTxt
;

324 
size_t
 
tIndex
, 
tStyÀIndex
;

325 
BOOL
 
bNìdPªvLvl
;

326 
Àvñ_ty≥_íum
 
eNumTy≥
;

327 
UCHAR
 
ucNFC
;

329 
	`TRACE_MSG
("tStyle2Window");

331 
	`Áû
(
szLöe
 =
NULL
 || 
pStyÀ
 =NULL || 
pSe˘i⁄
 == NULL);

333 i‡(
pStyÀ
->
usI°d
 == 0 ||ÖStyle->usIstd > 9) {

334 
szLöe
[0] = '\0';

339 
tStyÀIndex
 = (
size_t
)
pStyÀ
->
usI°d
 - 1;

340 
tIndex
 = 0;ÅIndex < 9;ÅIndex++) {

341 i‡(
tIndex
 =
tStyÀIndex
) {

342 
auiHdrCou¡î
[
tIndex
]++;

343 } i‡(
tIndex
 > 
tStyÀIndex
) {

344 
auiHdrCou¡î
[
tIndex
] = 0;

345 } i‡(
auiHdrCou¡î
[
tIndex
] == 0) {

346 
auiHdrCou¡î
[
tIndex
] = 1;

350 
eNumTy≥
 = 
	`eGëNumTy≥
(
pStyÀ
->
ucNumLevñ
);

351 i‡(
eNumTy≥
 !
Àvñ_ty≥_ouéöe
) {

352 
szLöe
[0] = '\0';

357 
pcTxt
 = 
szLöe
;

358 
bNìdPªvLvl
 = (
pSe˘i⁄
->
usNìdPªvLvl
 & 
	`BIT
(
tStyÀIndex
)) != 0;

359 
tIndex
 = 0;ÅIndex <
tStyÀIndex
;ÅIndex++) {

360 i‡(
tIndex
 =
tStyÀIndex
 ||

361 (
bNìdPªvLvl
 && 
tIndex
 < 
tStyÀIndex
)) {

362 i‡(
pcTxt
 - 
szLöe
 >
tLöeSize
 - 25) {

364 
	`DBG_DEC
(
pcTxt
 - 
szLöe
);

365 
	`DBG_DEC
(
tLöeSize
 - 25);

366 
	`DBG_FIXME
();

367 
szLöe
[0] = '\0';

370 
ucNFC
 = 
pSe˘i⁄
->
aucNFC
[
tIndex
];

371 
ucNFC
) {

372 
LIST_ARABIC_NUM
:

373 
LIST_NUMBER_TXT
:

374 
LIST_ORDINAL_TXT
:

375 
pcTxt
 +
	`•rötf
(pcTxt, "%u",

376 
auiHdrCou¡î
[
tIndex
]);

378 
LIST_UPPER_ROMAN
:

379 
LIST_LOWER_ROMAN
:

380 
pcTxt
 +
	`tNumbî2Rom™
(

381 
auiHdrCou¡î
[
tIndex
],

382 
ucNFC
 =
LIST_UPPER_ROMAN
,

383 
pcTxt
);

385 
LIST_UPPER_ALPHA
:

386 
LIST_LOWER_ALPHA
:

387 
pcTxt
 +
	`tNumbî2AÕha
(

388 
auiHdrCou¡î
[
tIndex
],

389 
ucNFC
 =
LIST_UPPER_ALPHA
,

390 
pcTxt
);

392 
LIST_OUTLINE_NUM
:

393 
pcTxt
 +
	`•rötf
(pcTxt, "%02u",

394 
auiHdrCou¡î
[
tIndex
]);

397 
	`DBG_DEC
(
ucNFC
);

398 
	`DBG_FIXME
();

399 
pcTxt
 +
	`•rötf
(pcTxt, "%u",

400 
auiHdrCou¡î
[
tIndex
]);

403 i‡(
tIndex
 < 
tStyÀIndex
) {

404 *
pcTxt
++ = '.';

405 } i‡(
tIndex
 =
tStyÀIndex
) {

406 *
pcTxt
++ = ' ';

410 *
pcTxt
 = '\0';

411 
	`NO_DBG_MSG_C
(()
pStyÀ
->
usI°d
 >= 1 &&

412 ()
pStyÀ
->
usI°d
 <= 9 &&

413 
eNumTy≥
 !
Àvñ_ty≥_n⁄e
 &&

414 
eNumTy≥
 !
Àvñ_ty≥_ouéöe
, 
szLöe
);

415 
	`NO_DBG_MSG_C
(
szLöe
[0] != '\0', szLine);

416 
	`Áû
(
pcTxt
 < 
szLöe
);

417  (
size_t
)(
pcTxt
 - 
szLöe
);

418 
	}
}

427 
	$vRemoveRowEnd
(*
szRowTxt
)

429 
iLa°Index
;

431 
	`TRACE_MSG
("vRemoveRowEnd");

433 
	`Áû
(
szRowTxt
 =
NULL
 || szRowTxt[0] == '\0');

435 
iLa°Index
 = ()
	`°æí
(
szRowTxt
) - 1;

437 i‡(
szRowTxt
[
iLa°Index
] =
TABLE_SEPARATOR
 ||

438 
szRowTxt
[
iLa°Index
] == ()0x0a) {

439 
szRowTxt
[
iLa°Index
] = '\0';

440 
iLa°Index
--;

442 
	`DBG_HEX
(
szRowTxt
[
iLa°Index
]);

445 i‡(
iLa°Index
 >0 && 
szRowTxt
[iLastIndex] == ()0x0a) {

446 
szRowTxt
[
iLa°Index
] = '\0';

447 
iLa°Index
--;

450 i‡(
iLa°Index
 >0 && 
szRowTxt
[iLa°Index] =
TABLE_SEPARATOR
) {

451 
szRowTxt
[
iLa°Index
] = '\0';

455 
	`DBG_DEC
(
iLa°Index
);

456 
	`DBG_HEX
(
szRowTxt
[
iLa°Index
]);

457 
	`DBG_MSG
(
szRowTxt
);

458 
	}
}

465 
size_t


466 
	$tCompuãSåögLígthMax
(c⁄° *
szSåög
, 
size_t
 
tCﬁumnWidthMax
)

468 c⁄° *
pcTmp
;

469 
size_t
 
tLígthMax
, 
tLíPªv
, 
tLí
, 
tWidth
;

471 
	`TRACE_MSG
("tComputeStringLengthMax");

473 
	`Áû
(
szSåög
 =
NULL
);

474 
	`Áû
(
tCﬁumnWidthMax
 == 0);

476 
pcTmp
 = 
	`°rchr
(
szSåög
, '\n');

477 i‡(
pcTmp
 !
NULL
) {

478 
tLígthMax
 = (
size_t
)(
pcTmp
 - 
szSåög
 + 1);

480 
tLígthMax
 = 
	`°æí
(
szSåög
);

482 i‡(
tLígthMax
 == 0) {

486 
tLí
 = 0;

487 
tWidth
 = 0;

489 
tLíPªv
 = 
tLí
;

490 
tLí
 +
	`tGëCh¨a˘îLígth
(
szSåög
 +ÅLen);

491 
	`DBG_DEC_C
(
tLí
 > 
tLígthMax
,ÅLen);

492 
	`DBG_DEC_C
(
tLí
 > 
tLígthMax
,ÅLengthMax);

493 
	`Áû
(
tLí
 > 
tLígthMax
);

494 
tWidth
 = 
	`tCou¡Cﬁumns
(
szSåög
, 
tLí
);

495 i‡(
tWidth
 > 
tCﬁumnWidthMax
) {

496  
tLíPªv
;

498 i‡(
tLí
 >
tLígthMax
) {

499  
tLígthMax
;

502 
	}
}

509 
size_t


510 
	$tGëBªakögPoöt
(c⁄° *
szSåög
,

511 
size_t
 
tLí
, size_à
tWidth
, size_à
tCﬁumnWidthMax
)

513 
iIndex
;

515 
	`TRACE_MSG
("tGetBreakingPoint");

517 
	`Áû
(
szSåög
 =
NULL
);

518 
	`Áû
(
tLí
 > 
	`°æí
(
szSåög
));

519 
	`Áû
(
tWidth
 > 
tCﬁumnWidthMax
);

521 i‡(
tWidth
 < 
tCﬁumnWidthMax
 ||

522 (
tWidth
 =
tCﬁumnWidthMax
 &&

523 (
szSåög
[
tLí
] == ' ' ||

524 
szSåög
[
tLí
] == '\n' ||

525 
szSåög
[
tLí
] == '\0'))) {

527  
tLí
;

530 
iIndex
 = ()
tLí
 - 1; iIndex >= 0; iIndex--) {

531 i‡(
szSåög
[
iIndex
] == ' ') {

532  (
size_t
)
iIndex
;

536  
tLí
;

537 
	}
}

542 
size_t


543 
	$tCompuãCﬁumnWidthMax
(
sWidth
, 
lCh¨Width
, 
dFa˘‹
)

545 
size_t
 
tCﬁumnWidthMax
;

547 
	`TRACE_MSG
("tComputeColumnWidthMax");

549 
	`Áû
(
sWidth
 < 0);

550 
	`Áû
(
lCh¨Width
 <= 0);

551 
	`Áû
(
dFa˘‹
 <= 0.0);

553 
tCﬁumnWidthMax
 = (
size_t
)(

554 (
	`lTwùs2MûliPoöts
(
sWidth
Ë* 
dFa˘‹
 + 
lCh¨Width
 / 2.0) /

555 
lCh¨Width
);

556 i‡(
tCﬁumnWidthMax
 == 0) {

560 i‡(
tCﬁumnWidthMax
 > 1) {

562 
tCﬁumnWidthMax
--;

564 
	`NO_DBG_DEC
(
tCﬁumnWidthMax
);

565  
tCﬁumnWidthMax
;

566 
	}
}

572 
	$vTabÀRow2Wödow
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pOuçut
,

573 c⁄° 
row_block_ty≥
 *
pRowInfo
,

574 
c⁄vîsi⁄_ty≥
 
eC⁄vîsi⁄Ty≥
, 
iP¨agøphBªak
)

576 
ouçut_ty≥
 
tRow
;

577 *
aszCﬁTxt
[
TABLE_COLUMN_MAX
];

578 *
szLöe
, *
pcTxt
;

579 
dMagnify
;

580 
lCh¨WidthL¨ge
, 
lCh¨WidthSmÆl
;

581 
size_t
 
tCﬁumnWidthTŸÆ
, 
©CﬁumnWidthMax
[
TABLE_COLUMN_MAX
];

582 
size_t
 
tSize
, 
tCﬁumnWidthMax
, 
tWidth
, 
tLí
;

583 
iIndex
, 
iNbrOfCﬁumns
, 
iTmp
;

584 
BOOL
 
bNŸRódy
;

586 
	`TRACE_MSG
("vTableRow2Window");

588 
	`Áû
(
pDüg
 =
NULL
 || 
pOuçut
 =NULL || 
pRowInfo
 == NULL);

589 
	`Áû
(
pOuçut
->
szSt‹age
 =
NULL
);

590 
	`Áû
(
pOuçut
->
pNext
 !
NULL
);

591 
	`Áû
(
iP¨agøphBªak
 < 0);

594 
lCh¨WidthL¨ge
 = 
	`lCompuãSåögWidth
("W", 1,

595 
pOuçut
->
tF⁄tRef
,ÖOuçut->
usF⁄tSize
);

596 
	`NO_DBG_DEC
(
lCh¨WidthL¨ge
);

597 
lCh¨WidthSmÆl
 = 
	`lCompuãSåögWidth
("i", 1,

598 
pOuçut
->
tF⁄tRef
,ÖOuçut->
usF⁄tSize
);

599 
	`NO_DBG_DEC
(
lCh¨WidthSmÆl
);

601 
	`Áû
(
lCh¨WidthL¨ge
 !
lCh¨WidthSmÆl
);

603 
	`vRemoveRowEnd
(
pOuçut
->
szSt‹age
);

606 
aszCﬁTxt
[0] = 
pOuçut
->
szSt‹age
;

607 
iNbrOfCﬁumns
 = 1;

608 
iNbrOfCﬁumns
 < 
TABLE_COLUMN_MAX
;

609 
iNbrOfCﬁumns
++) {

610 
aszCﬁTxt
[
iNbrOfCﬁumns
] =

611 
	`°rchr
(
aszCﬁTxt
[
iNbrOfCﬁumns
 - 1],

612 
TABLE_SEPARATOR
);

613 i‡(
aszCﬁTxt
[
iNbrOfCﬁumns
] =
NULL
) {

616 *
aszCﬁTxt
[
iNbrOfCﬁumns
] = '\0';

617 
aszCﬁTxt
[
iNbrOfCﬁumns
]++;

618 
	`NO_DBG_DEC
(
iNbrOfCﬁumns
);

619 
	`NO_DBG_MSG
(
aszCﬁTxt
[
iNbrOfCﬁumns
]);

623 
iNbrOfCﬁumns
 > ()
pRowInfo
->
ucNumbîOfCﬁumns
 &&

624 
pRowInfo
->
asCﬁumnWidth
[
iNbrOfCﬁumns
] == 0) {

625 
iNbrOfCﬁumns
--;

628 
	`DBG_DEC_C
(
iNbrOfCﬁumns
 !()
pRowInfo
->
ucNumbîOfCﬁumns
,

629 
iNbrOfCﬁumns
);

630 
	`DBG_DEC_C
(
iNbrOfCﬁumns
 !()
pRowInfo
->
ucNumbîOfCﬁumns
,

631 
pRowInfo
->
ucNumbîOfCﬁumns
);

632 i‡(
iNbrOfCﬁumns
 !()
pRowInfo
->
ucNumbîOfCﬁumns
) {

633 
	`wîr
(0, "Skippingán unmatchedÅableÑow");

637 #i‡
	`deföed
(
__FULL_TEXT_SEARCH
)

639 
iIndex
 = 0; iIndex < 
iNbrOfCﬁumns
; iIndex++) {

640 
	`Ârötf
(
pDüg
->
pOutFûe
, "%s\n" , 
aszCﬁTxt
[
iIndex
]);

645 i‡(
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ãxt
 ||

646 
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
) {

647 i‡(
iP¨agøphBªak
 == 0 ||

648 
iP¨agøphBªak
 >
MAX_SCREEN_WIDTH
) {

649 
dMagnify
 = ()
MAX_SCREEN_WIDTH
;

650 } i‡(
iP¨agøphBªak
 <
MIN_SCREEN_WIDTH
) {

651 
dMagnify
 = ()
MIN_SCREEN_WIDTH
;

653 
dMagnify
 = ()
iP¨agøphBªak
;

655 
dMagnify
 /()
DEFAULT_SCREEN_WIDTH
;

656 
	`DBG_FLT_C
(
dMagnify
 < 0.99 || dMagnify > 1.01, dMagnify);

658 
dMagnify
 = 1.0;

660 
tCﬁumnWidthTŸÆ
 = 0;

661 
iIndex
 = 0; iIndex < 
iNbrOfCﬁumns
; iIndex++) {

662 
©CﬁumnWidthMax
[
iIndex
] = 
	`tCompuãCﬁumnWidthMax
(

663 
pRowInfo
->
asCﬁumnWidth
[
iIndex
],

664 
lCh¨WidthL¨ge
,

665 
dMagnify
);

666 
tCﬁumnWidthTŸÆ
 +
©CﬁumnWidthMax
[
iIndex
];

673 
tSize
 = 3 * (1 + 
tCﬁumnWidthTŸÆ
 + (
size_t
)
iNbrOfCﬁumns
 + 3);

674 
szLöe
 = 
	`xmÆloc
(
tSize
);

678 
bNŸRódy
 = 
FALSE
;

679 
pcTxt
 = 
szLöe
;

680 *
pcTxt
++ = 
TABLE_SEPARATOR_CHAR
;

681 
iIndex
 = 0; iIndex < 
iNbrOfCﬁumns
; iIndex++) {

682 
tCﬁumnWidthMax
 = 
©CﬁumnWidthMax
[
iIndex
];

683 i‡(
aszCﬁTxt
[
iIndex
] =
NULL
) {

685 
iTmp
 = 0;

686 
iTmp
 < ()
tCﬁumnWidthMax
;

687 
iTmp
++) {

688 *
pcTxt
++ = ()
FILLER_CHAR
;

690 *
pcTxt
++ = 
TABLE_SEPARATOR_CHAR
;

691 *
pcTxt
 = '\0';

695 
tLí
 = 
	`tCompuãSåögLígthMax
(

696 
aszCﬁTxt
[
iIndex
], 
tCﬁumnWidthMax
);

697 
	`NO_DBG_DEC
(
tLí
);

698 
tLí
 != 0 &&

699 (
aszCﬁTxt
[
iIndex
][
tLí
 - 1] == '\n' ||

700 
aszCﬁTxt
[
iIndex
][
tLí
 - 1] == ' ')) {

701 
aszCﬁTxt
[
iIndex
][
tLí
 - 1] = ' ';

702 
tLí
--;

704 
tWidth
 = 
	`tCou¡Cﬁumns
(
aszCﬁTxt
[
iIndex
], 
tLí
);

705 
	`Áû
(
tWidth
 > 
tCﬁumnWidthMax
);

706 
tLí
 = 
	`tGëBªakögPoöt
(
aszCﬁTxt
[
iIndex
],

707 
tLí
, 
tWidth
, 
tCﬁumnWidthMax
);

708 
tWidth
 = 
	`tCou¡Cﬁumns
(
aszCﬁTxt
[
iIndex
], 
tLí
);

709 i‡(
tLí
 =0 && *
aszCﬁTxt
[
iIndex
] == '\0') {

711 
aszCﬁTxt
[
iIndex
] = 
NULL
;

714 
pcTxt
 +
	`•rötf
(pcTxt,

715 "%.*s", ()
tLí
, 
aszCﬁTxt
[
iIndex
]);

716 i‡(
tLí
 =0 && *
aszCﬁTxt
[
iIndex
] != ' ') {

717 
tLí
 = 
	`tGëCh¨a˘îLígth
(

718 
aszCﬁTxt
[
iIndex
]);

719 
	`DBG_CHR
(*
aszCﬁTxt
[
iIndex
]);

720 
	`DBG_FIXME
();

721 
	`Áû
(
tLí
 == 0);

723 
aszCﬁTxt
[
iIndex
] +
tLí
;

724 *
aszCﬁTxt
[
iIndex
] == ' ') {

725 
aszCﬁTxt
[
iIndex
]++;

727 i‡(*
aszCﬁTxt
[
iIndex
] == '\0') {

729 
aszCﬁTxt
[
iIndex
] = 
NULL
;

732 
bNŸRódy
 = 
TRUE
;

736 
iTmp
 = 0;

737 
iTmp
 < ()
tCﬁumnWidthMax
 - ()
tWidth
;

738 
iTmp
++) {

739 *
pcTxt
++ = ()
FILLER_CHAR
;

742 *
pcTxt
++ = 
TABLE_SEPARATOR_CHAR
;

743 *
pcTxt
 = '\0';

746 *
pcTxt
 = '\0';

747 
tRow
 = *
pOuçut
;

748 
tRow
.
szSt‹age
 = 
szLöe
;

749 
	`Áû
(
pcTxt
 < 
szLöe
);

750 
tRow
.
tNextFªe
 = (
size_t
)(
pcTxt
 - 
szLöe
);

751 
tRow
.
lSåögWidth
 = 
	`lCompuãSåögWidth
(

752 
tRow
.
szSt‹age
,

753 
tRow
.
tNextFªe
,

754 
tRow
.
tF⁄tRef
,

755 
tRow
.
usF⁄tSize
);

756 
	`vSåög2Dügøm
(
pDüg
, &
tRow
);

757 
	`TRACE_MSG
("after vString2Diagram in vTableRow2Window");

758 } 
bNŸRódy
);

760 
szLöe
 = 
	`x‰ì
(szLine);

761 
	`TRACE_MSG
("leaving vTableRow2Window");

763 
	}
}

	@output.c

9 
	~"™tiw‹d.h
"

11 
c⁄vîsi⁄_ty≥
 
	geC⁄vîsi⁄Ty≥
 = 
c⁄vîsi⁄_unknown
;

12 
ícodög_ty≥
 
	geEncodög
 = 
ícodög_√uåÆ
;

19 
	$vPrﬁogue1
(
dügøm_ty≥
 *
pDüg
, c⁄° *
szTask
, c⁄° *
szFûíame
)

21 
›ti⁄s_ty≥
 
tO±i⁄s
;

23 
	`Áû
(
pDüg
 =
NULL
);

24 
	`Áû
(
szTask
 =
NULL
 || szTask[0] == '\0');

26 
	`vGëO±i⁄s
(&
tO±i⁄s
);

27 
eC⁄vîsi⁄Ty≥
 = 
tO±i⁄s
.eConversionType;

28 
eEncodög
 = 
tO±i⁄s
.eEncoding;

30 
eC⁄vîsi⁄Ty≥
) {

31 
c⁄vîsi⁄_ãxt
:

32 
	`vPrﬁogueTXT
(
pDüg
, &
tO±i⁄s
);

34 
c⁄vîsi⁄_fmt_ãxt
:

35 
	`vPrﬁogueFMT
(
pDüg
, &
tO±i⁄s
);

38 
	`DBG_DEC
(
eC⁄vîsi⁄Ty≥
);

41 
	}
}

47 
	$vEpûogue
(
dügøm_ty≥
 *
pDüg
)

49 
eC⁄vîsi⁄Ty≥
) {

50 
c⁄vîsi⁄_ãxt
:

51 
c⁄vîsi⁄_fmt_ãxt
:

52 
	`vEpûogueTXT
(
pDüg
->
pOutFûe
);

55 
	`DBG_DEC
(
eC⁄vîsi⁄Ty≥
);

58 
	}
}

64 
	$vImagePrﬁogue
(
dügøm_ty≥
 *
pDüg
, c⁄° 
imaged©a_ty≥
 *
pImg
)

67 
	}
}

73 
	$vImageEpûogue
(
dügøm_ty≥
 *
pDüg
)

76 
	}
}

83 
BOOL


84 
	$bAddDummyImage
(
dügøm_ty≥
 *
pDüg
, c⁄° 
imaged©a_ty≥
 *
pImg
)

86  
FALSE
;

87 
	}
}

94 
dügøm_ty≥
 *

95 
	$pCª©eDügøm
(c⁄° *
szTask
, c⁄° *
szFûíame
)

97 
dügøm_ty≥
 *
pDüg
;

99 
	`Áû
(
szTask
 =
NULL
 || szTask[0] == '\0');

100 
	`DBG_MSG
("pCreateDiagram");

103 
pDüg
 = 
	`xmÆloc
((
dügøm_ty≥
));

105 
pDüg
->
pOutFûe
 = 
°dout
;

106 
	`vPrﬁogue1
(
pDüg
, 
szTask
, 
szFûíame
);

108  
pDüg
;

109 
	}
}

115 
	$vDe°royDügøm
(
dügøm_ty≥
 *
pDüg
)

117 
	`DBG_MSG
("vDestroyDiagram");

119 
	`Áû
(
pDüg
 =
NULL
);

121 i‡(
pDüg
 =
NULL
) {

124 
	`vEpûogue
(
pDüg
);

125 
pDüg
 = 
	`x‰ì
(pDiag);

126 
	}
}

132 
	$vPrﬁogue2
(
dügøm_ty≥
 *
pDüg
, 
iW‹dVîsi⁄
)

135 
	}
}

141 
	$vSub°rög2Dügøm
(
dügøm_ty≥
 *
pDüg
,

142 *
szSåög
, 
size_t
 
tSåögLígth
, 
lSåögWidth
,

143 
UCHAR
 
ucF⁄tCﬁ‹
, 
USHORT
 
usF⁄t°yÀ
, 
døwfûe_f⁄åef
 
tF⁄tRef
,

144 
USHORT
 
usF⁄tSize
, USHORT 
usMaxF⁄tSize
)

146 
eC⁄vîsi⁄Ty≥
) {

147 
c⁄vîsi⁄_ãxt
:

148 
	`vSub°rögTXT
(
pDüg
, 
szSåög
, 
tSåögLígth
, 
lSåögWidth
);

150 
c⁄vîsi⁄_fmt_ãxt
:

151 
	`vSub°rögFMT
(
pDüg
, 
szSåög
, 
tSåögLígth
, 
lSåögWidth
,

152 
usF⁄t°yÀ
);

155 
	`DBG_DEC
(
eC⁄vîsi⁄Ty≥
);

158 
pDüg
->
lXÀ·
 +
lSåögWidth
;

159 
	}
}

165 
	$vEndOfP¨agøph
(
dügøm_ty≥
 *
pDüg
,

166 
døwfûe_f⁄åef
 
tF⁄tRef
, 
USHORT
 
usF⁄tSize
, 
lA·îIndíèti⁄
)

168 
	`Áû
(
pDüg
 =
NULL
);

169 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

170 
	`Áû
(
usF⁄tSize
 < 
MIN_FONT_SIZE
 || usF⁄tSizê> 
MAX_FONT_SIZE
);

171 
	`Áû
(
lA·îIndíèti⁄
 < 0);

173 
eC⁄vîsi⁄Ty≥
) {

174 
c⁄vîsi⁄_ãxt
:

175 
c⁄vîsi⁄_fmt_ãxt
:

176 
	`vEndOfP¨agøphTXT
(
pDüg
, 
lA·îIndíèti⁄
);

179 
	`DBG_DEC
(
eC⁄vîsi⁄Ty≥
);

182 
	}
}

188 
	$vEndOfPage
(
dügøm_ty≥
 *
pDüg
, 
lA·îIndíèti⁄
, 
BOOL
 
bNewSe˘i⁄
)

190 
eC⁄vîsi⁄Ty≥
) {

191 
c⁄vîsi⁄_ãxt
:

192 
c⁄vîsi⁄_fmt_ãxt
:

193 
	`vEndOfPageTXT
(
pDüg
, 
lA·îIndíèti⁄
);

196 
	`DBG_DEC
(
eC⁄vîsi⁄Ty≥
);

199 
	}
}

	@pictlist.c

9 
	~<°dlib.h
>

10 
	~"™tiw‹d.h
"

17 
	spi˘uª_mem_èg
 {

18 
pi˘uª_block_ty≥
 
	mtInfo
;

19 
pi˘uª_mem_èg
 *
	mpNext
;

20 } 
	tpi˘uª_mem_ty≥
;

23 
pi˘uª_mem_ty≥
 *
	gpAnch‹
 = 
NULL
;

24 
pi˘uª_mem_ty≥
 *
	gpPi˘uªLa°
 = 
NULL
;

31 
	$vDe°royPi˘InfoLi°
()

33 
pi˘uª_mem_ty≥
 *
pCuº
, *
pNext
;

35 
	`DBG_MSG
("vDestroyPictInfoList");

38 
pCuº
 = 
pAnch‹
;

39 
pCuº
 !
NULL
) {

40 
pNext
 = 
pCuº
->pNext;

41 
pCuº
 = 
	`x‰ì
(pCurr);

42 
pCuº
 = 
pNext
;

44 
pAnch‹
 = 
NULL
;

46 
pPi˘uªLa°
 = 
NULL
;

47 
	}
}

53 
	$vAdd2Pi˘InfoLi°
(c⁄° 
pi˘uª_block_ty≥
 *
pPi˘uªBlock
)

55 
pi˘uª_mem_ty≥
 *
pLi°Membî
;

57 
	`Áû
(
pPi˘uªBlock
 =
NULL
);

59 
	`NO_DBG_MSG
("bAdd2PictInfoList");

61 i‡(
pPi˘uªBlock
->
ulFûeOff£t
 =
FC_INVALID
) {

68 i‡(
pPi˘uªBlock
->
ulFûeOff£tPi˘uª
 =
FC_INVALID
) {

76 
	`NO_DBG_HEX
(
pPi˘uªBlock
->
ulFûeOff£t
);

77 
	`NO_DBG_HEX
(
pPi˘uªBlock
->
ulFûeOff£tPi˘uª
);

78 
	`NO_DBG_HEX
(
pPi˘uªBlock
->
ulPi˘uªOff£t
);

81 
pLi°Membî
 = 
	`xmÆloc
((
pi˘uª_mem_ty≥
));

83 
pLi°Membî
->
tInfo
 = *
pPi˘uªBlock
;

84 
pLi°Membî
->
pNext
 = 
NULL
;

86 i‡(
pAnch‹
 =
NULL
) {

87 
pAnch‹
 = 
pLi°Membî
;

89 
	`Áû
(
pPi˘uªLa°
 =
NULL
);

90 
pPi˘uªLa°
->
pNext
 = 
pLi°Membî
;

92 
pPi˘uªLa°
 = 
pLi°Membî
;

93 
	}
}

	@prop0.c

9 
	~<°rög.h
>

10 
	~<time.h
>

11 
	~"™tiw‹d.h
"

19 
time_t


20 
	$tC⁄vîtDosD©e
(c⁄° *
szDosD©e
)

22 
tm
 
tTime
;

23 c⁄° *
pcTmp
;

24 
time_t
 
tResu…
;

26 
	`mem£t
(&
tTime
, 0, (tTime));

27 
pcTmp
 = 
szDosD©e
;

29 i‡(!
	`isdigô
(*
pcTmp
)) {

30  (
time_t
)-1;

32 
tTime
.
tm_m⁄
 = ()(*
pcTmp
 - '0');

33 
pcTmp
++;

34 i‡(
	`isdigô
(*
pcTmp
)) {

35 
tTime
.
tm_m⁄
 *= 10;

36 
tTime
.
tm_m⁄
 +()(*
pcTmp
 - '0');

37 
pcTmp
++;

40 i‡(
	`iß um
(*
pcTmp
)) {

41  (
time_t
)-1;

43 
pcTmp
++;

45 i‡(!
	`isdigô
(*
pcTmp
)) {

46  (
time_t
)-1;

48 
tTime
.
tm_mday
 = ()(*
pcTmp
 - '0');

49 
pcTmp
++;

50 i‡(
	`isdigô
(*
pcTmp
)) {

51 
tTime
.
tm_mday
 *= 10;

52 
tTime
.
tm_mday
 +()(*
pcTmp
 - '0');

53 
pcTmp
++;

56 i‡(
	`iß um
(*
pcTmp
)) {

57  (
time_t
)-1;

59 
pcTmp
++;

61 i‡(!
	`isdigô
(*
pcTmp
)) {

62  (
time_t
)-1;

64 
tTime
.
tm_yór
 = ()(*
pcTmp
 - '0');

65 
pcTmp
++;

66 i‡(
	`isdigô
(*
pcTmp
)) {

67 
tTime
.
tm_yór
 *= 10;

68 
tTime
.
tm_yór
 +()(*
pcTmp
 - '0');

69 
pcTmp
++;

72 i‡(
tTime
.
tm_m⁄
 =0 ||ÅTime.
tm_mday
 == 0 ||ÅTime.tm_mday > 31) {

73  (
time_t
)-1;

76 
tTime
.
tm_m⁄
--;

77 i‡(
tTime
.
tm_yór
 < 80) {

78 
tTime
.
tm_yór
 += 100;

80 
tTime
.
tm_isd°
 = -1;

81 
tResu…
 = 
	`mktime
(&
tTime
);

82 
	`NO_DBG_MSG
(
	`˘ime
(&
tResu…
));

83  
tResu…
;

84 
	}
}

90 
	$vGë0D›Info
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

92 
documít_block_ty≥
 
tDocumít
;

93 
UCHAR
 *
aucBuf„r
;

94 
ULONG
 
ulBegöSumdInfo
, 
ulBegöNextBlock
;

95 
size_t
 
tLí
;

96 
USHORT
 
usOff£t
;

98 
tDocumít
.
ucHdrFåS≥cifiˇti⁄
 = 0;

99 
tDocumít
.
usDeÁu…TabWidth
 = 
	`usGëW‹d
(0x70, 
aucHódî
);

100 
tDocumít
.
tCª©eD©e
 = (
time_t
)-1;

101 
tDocumít
.
tRevi£dD©e
 = (
time_t
)-1;

103 
ulBegöSumdInfo
 = 128 * (
ULONG
)
	`usGëW‹d
(0x1c, 
aucHódî
);

104 
	`DBG_HEX
(
ulBegöSumdInfo
);

105 
ulBegöNextBlock
 = 128 * (
ULONG
)
	`usGëW‹d
(0x6a, 
aucHódî
);

106 
	`DBG_HEX
(
ulBegöNextBlock
);

108 i‡(
ulBegöSumdInfo
 < 
ulBegöNextBlock
 && ulBeginNextBlock != 0) {

110 
tLí
 = (
size_t
)(
ulBegöNextBlock
 - 
ulBegöSumdInfo
);

111 
aucBuf„r
 = 
	`xmÆloc
(
tLí
);

113 i‡(
	`bRódByãs
(
aucBuf„r
, 
tLí
, 
ulBegöSumdInfo
, 
pFûe
)) {

114 
usOff£t
 = 
	`usGëW‹d
(12, 
aucBuf„r
);

115 i‡(
aucBuf„r
[
usOff£t
] != 0) {

116 
	`NO_DBG_STRN
(
aucBuf„r
 + 
usOff£t
, 8);

117 
tDocumít
.
tRevi£dD©e
 =

118 
	`tC⁄vîtDosD©e
((*)
aucBuf„r
 + 
usOff£t
);

120 
usOff£t
 = 
	`usGëW‹d
(14, 
aucBuf„r
);

121 i‡(
aucBuf„r
[
usOff£t
] != 0) {

122 
	`NO_DBG_STRN
(
aucBuf„r
 + 
usOff£t
, 8);

123 
tDocumít
.
tCª©eD©e
 =

124 
	`tC⁄vîtDosD©e
((*)
aucBuf„r
 + 
usOff£t
);

127 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

129 
	`vCª©eDocumítInfoLi°
(&
tDocumít
);

130 
	}
}

137 
	$vGë0Se˘i⁄Info
(c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
,

138 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

140 
USHORT
 
usCcﬁ
;

141 
UCHAR
 
ucTmp
;

143 
	`Áû
(
aucGΩ¥l
 =
NULL
 || 
pSe˘i⁄
 == NULL);

145 i‡(
tByãs
 < 2) {

149 
ucTmp
 = 
	`ucGëByã
(1, 
aucGΩ¥l
);

150 
	`DBG_HEX
(
ucTmp
);

151 
ucTmp
 &= 0x07;

152 
	`DBG_HEX
(
ucTmp
);

153 
pSe˘i⁄
->
bNewPage
 = 
ucTmp
 != 0 && ucTmp != 1;

154 i‡(
tByãs
 < 18) {

158 
usCcﬁ
 = (
USHORT
)
	`ucGëByã
(17, 
aucGΩ¥l
);

159 
	`DBG_DEC
(
usCcﬁ
);

160 
	}
}

166 
	$vGë0SïInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

168 
£˘i⁄_block_ty≥
 
tSe˘i⁄
;

169 
UCHAR
 *
aucBuf„r
;

170 
ULONG
 
ulBegöOfText
, 
ulTextOff£t
, 
ulBegöSe˘Info
;

171 
ULONG
 
ulCh¨Pos
, 
ulSe˘Page
, 
ulBegöNextBlock
;

172 
size_t
 
tSe˘InfoLí
, 
tIndex
, 
tSe˘i⁄s
, 
tByãs
;

173 
UCHAR
 
aucTmp
[2], 
aucF∑ge
[35];

175 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

177 
ulBegöOfText
 = 128;

178 
	`NO_DBG_HEX
(
ulBegöOfText
);

179 
ulBegöSe˘Info
 = 128 * (
ULONG
)
	`usGëW‹d
(0x18, 
aucHódî
);

180 
	`DBG_HEX
(
ulBegöSe˘Info
);

181 
ulBegöNextBlock
 = 128 * (
ULONG
)
	`usGëW‹d
(0x1a, 
aucHódî
);

182 
	`DBG_HEX
(
ulBegöNextBlock
);

183 i‡(
ulBegöSe˘Info
 =
ulBegöNextBlock
) {

189 i‡(!
	`bRódByãs
(
aucTmp
, 2, 
ulBegöSe˘Info
, 
pFûe
)) {

192 
tSe˘i⁄s
 = (
size_t
)
	`usGëW‹d
(0, 
aucTmp
);

193 
	`NO_DBG_DEC
(
tSe˘i⁄s
);

196 
tSe˘InfoLí
 = 10 * 
tSe˘i⁄s
;

197 
	`NO_DBG_DEC
(
tSe˘InfoLí
);

198 
aucBuf„r
 = 
	`xmÆloc
(
tSe˘InfoLí
);

199 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tSe˘InfoLí
, 
ulBegöSe˘Info
 + 4, 
pFûe
)) {

200 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

203 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tSe˘InfoLí
);

206 
tIndex
 = 0;ÅIndex < 
tSe˘i⁄s
;ÅIndex++) {

207 
ulTextOff£t
 = 
	`ulGëL⁄g
(10 * 
tIndex
, 
aucBuf„r
);

208 
	`NO_DBG_HEX
(
ulTextOff£t
);

209 
ulCh¨Pos
 = 
ulBegöOfText
 + 
ulTextOff£t
;

210 
	`NO_DBG_HEX
(
ulTextOff£t
);

211 
ulSe˘Page
 = 
	`ulGëL⁄g
(10 * 
tIndex
 + 6, 
aucBuf„r
);

212 
	`NO_DBG_HEX
(
ulSe˘Page
);

213 i‡(
ulSe˘Page
 =
FC_INVALID
 ||

214 
ulSe˘Page
 < 128 ||

215 
ulSe˘Page
 >
ulBegöSe˘Info
) {

216 
	`DBG_HEX_C
(
ulSe˘Page
 !
FC_INVALID
, ulSectPage);

217 
	`vDeÁu…2Se˘i⁄InfoLi°
(
ulCh¨Pos
);

221 i‡(!
	`bRódByãs
(
aucTmp
, 1, 
ulSe˘Page
, 
pFûe
)) {

224 
tByãs
 = 1 + (
size_t
)
	`ucGëByã
(0, 
aucTmp
);

225 
	`NO_DBG_DEC
(
tByãs
);

226 i‡(
tByãs
 > (
aucF∑ge
)) {

227 
	`DBG_DEC
(
tByãs
);

228 
tByãs
 = (
aucF∑ge
);

231 i‡(!
	`bRódByãs
(
aucF∑ge
, 
tByãs
, 
ulSe˘Page
, 
pFûe
)) {

234 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
tByãs
);

236 
	`vGëDeÁu…Se˘i⁄
(&
tSe˘i⁄
);

237 
	`vGë0Se˘i⁄Info
(
aucF∑ge
 + 1, 
tByãs
 - 1, &
tSe˘i⁄
);

238 
	`vAdd2Se˘i⁄InfoLi°
(&
tSe˘i⁄
, 
ulCh¨Pos
);

241 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

242 
	}
}

249 
	$vGë0StyÀInfo
(
iFodo
, c⁄° 
UCHAR
 *
aucGΩ¥l
, 
°yÀ_block_ty≥
 *
pStyÀ
)

251 
iByãs
;

252 
UCHAR
 
ucTmp
;

254 
	`Áû
(
iFodo
 <0 || 
aucGΩ¥l
 =
NULL
 || 
pStyÀ
 == NULL);

256 
pStyÀ
->
usI°dNext
 = 
ISTD_NORMAL
;

258 
iByãs
 = ()
	`ucGëByã
(
iFodo
, 
aucGΩ¥l
);

259 i‡(
iByãs
 < 1) {

263 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 1, 
aucGΩ¥l
);

264 i‡((
ucTmp
 & 
	`BIT
(0)) != 0) {

265 
ucTmp
 >>= 1;

266 i‡(
ucTmp
 >= 88 && ucTmp <= 94) {

268 
pStyÀ
->
usI°d
 = 
ucTmp
 - 87;

269 
pStyÀ
->
ucNumLevñ
 = 1;

272 i‡(
iByãs
 < 2) {

276 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 2, 
aucGΩ¥l
);

277 
pStyÀ
->
ucAlignmít
 = 
ucTmp
 & 0x02;

278 i‡(
iByãs
 < 3) {

282 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 3, 
aucGΩ¥l
);

283 
ucTmp
 &= 0x7f;

284 i‡(
ucTmp
 >= 88 && ucTmp <= 94) {

286 
pStyÀ
->
usI°d
 = 
ucTmp
 - 87;

287 
pStyÀ
->
ucNumLevñ
 = 1;

289 i‡(
iByãs
 < 6) {

293 
pStyÀ
->
sRightIndít
 = ()
	`usGëW‹d
(
iFodo
 + 5, 
aucGΩ¥l
);

294 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

295 i‡(
iByãs
 < 8) {

299 
pStyÀ
->
sLe·Indít
 = ()
	`usGëW‹d
(
iFodo
 + 7, 
aucGΩ¥l
);

300 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

301 i‡(
iByãs
 < 10) {

305 
pStyÀ
->
sLe·Indít1
 = ()
	`usGëW‹d
(
iFodo
 + 9, 
aucGΩ¥l
);

306 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít1
);

307 i‡(
iByãs
 < 14) {

311 
pStyÀ
->
usBef‹eIndít
 = 
	`usGëW‹d
(
iFodo
 + 13, 
aucGΩ¥l
);

312 
	`NO_DBG_DEC
(
pStyÀ
->
usBef‹eIndít
);

313 i‡(
iByãs
 < 16) {

317 
pStyÀ
->
usA·îIndít
 = 
	`usGëW‹d
(
iFodo
 + 15, 
aucGΩ¥l
);

318 
	`NO_DBG_DEC
(
pStyÀ
->
usA·îIndít
);

319 
	}
}

325 
	$vGë0P≠Info
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

327 
°yÀ_block_ty≥
 
tStyÀ
;

328 
ULONG
 
ulBegöP¨fInfo
, 
ulCh¨Pos
, 
ulCh¨PosNext
;

329 
iIndex
, 
iRun
, 
iFodo
;

330 
UCHAR
 
aucF∑ge
[128];

332 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

334 
ulBegöP¨fInfo
 = 128 * (
ULONG
)
	`usGëW‹d
(0x12, 
aucHódî
);

335 
	`NO_DBG_HEX
(
ulBegöP¨fInfo
);

338 i‡(!
	`bRódByãs
(
aucF∑ge
, 128, 
ulBegöP¨fInfo
, 
pFûe
)) {

341 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 128);

342 
ulCh¨PosNext
 = 
	`ulGëL⁄g
(0, 
aucF∑ge
);

343 
iRun
 = ()
	`ucGëByã
(0x7f, 
aucF∑ge
);

344 
	`NO_DBG_DEC
(
iRun
);

345 
iIndex
 = 0; iIndex < 
iRun
; iIndex++) {

346 
iFodo
 = ()
	`usGëW‹d
(6 * 
iIndex
 + 8, 
aucF∑ge
);

347 i‡(
iFodo
 <= 0 || iFodo > 0x79) {

348 
	`DBG_DEC_C
(
iFodo
 != ()0xffff, iFodo);

351 
	`vFûlStyÀFromStyÀshìt
(0, &
tStyÀ
);

352 
	`vGë0StyÀInfo
(
iFodo
, 
aucF∑ge
 + 4, &
tStyÀ
);

353 
ulCh¨Pos
 = 
ulCh¨PosNext
;

354 
ulCh¨PosNext
 = 
	`ulGëL⁄g
(6 * 
iIndex
 + 4, 
aucF∑ge
);

355 
tStyÀ
.
ulFûeOff£t
 = 
ulCh¨Pos
;

356 
	`vAdd2StyÀInfoLi°
(&
tStyÀ
);

358 
ulBegöP¨fInfo
 += 128;

359 } 
ulCh¨PosNext
 =
ulBegöP¨fInfo
);

360 
	}
}

367 
	$vGë0F⁄tInfo
(
iFodo
, c⁄° 
UCHAR
 *
aucGΩ¥l
, 
f⁄t_block_ty≥
 *
pF⁄t
)

369 
iByãs
;

370 
UCHAR
 
ucTmp
;

372 
	`Áû
(
iFodo
 <0 || 
aucGΩ¥l
 =
NULL
 || 
pF⁄t
 == NULL);

374 
iByãs
 = ()
	`ucGëByã
(
iFodo
, 
aucGΩ¥l
);

375 i‡(
iByãs
 < 2) {

379 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 2, 
aucGΩ¥l
);

380 i‡((
ucTmp
 & 
	`BIT
(0)) != 0) {

381 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

383 i‡((
ucTmp
 & 
	`BIT
(1)) != 0) {

384 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_ITALIC
;

386 
pF⁄t
->
ucF⁄tNumbî
 = 
ucTmp
 >> 2;

387 
	`NO_DBG_DEC
(
pF⁄t
->
ucF⁄tNumbî
);

388 i‡(
iByãs
 < 3) {

392 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
	`ucGëByã
(
iFodo
 + 3, 
aucGΩ¥l
);

393 
	`NO_DBG_DEC
(
pF⁄t
->
usF⁄tSize
);

394 i‡(
iByãs
 < 4) {

398 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 4, 
aucGΩ¥l
);

399 i‡((
ucTmp
 & 
	`BIT
(0)) != 0 || (ucTmp & BIT(2)) != 0) {

400 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

402 i‡((
ucTmp
 & 
	`BIT
(1)) != 0) {

403 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_STRIKE
;

405 i‡((
ucTmp
 & 
	`BIT
(4)) != 0) {

406 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_CAPITALS
;

408 i‡((
ucTmp
 & 
	`BIT
(5)) != 0) {

409 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SMALL_CAPITALS
;

411 i‡((
ucTmp
 & 
	`BIT
(7)) != 0) {

412 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_HIDDEN
;

414 
	`DBG_HEX
(
pF⁄t
->
usF⁄tStyÀ
);

415 i‡(
iByãs
 < 6) {

419 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 6, 
aucGΩ¥l
);

420 i‡(
ucTmp
 != 0) {

421 i‡(
ucTmp
 < 128) {

422 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUPERSCRIPT
;

423 
	`DBG_MSG
("Superscript");

425 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUBSCRIPT
;

426 
	`DBG_MSG
("Subscript");

429 i‡(
iByãs
 < 7) {

433 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 7, 
aucGΩ¥l
);

434 
ucTmp
 & 0x07) {

435 0: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_BLACK
; ;

436 1: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_RED
; ;

437 2: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_GREEN
; ;

438 3: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_BLUE
; ;

439 4: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_CYAN
; ;

440 5: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_MAGENTA
; ;

441 6: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_YELLOW
; ;

442 7: 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_WHITE
; ;

443 :
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_BLACK
; ;

445 
	`NO_DBG_DEC
(
pF⁄t
->
ucF⁄tCﬁ‹
);

446 
	}
}

452 
	$vGë0ChrInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

454 
f⁄t_block_ty≥
 
tF⁄t
;

455 
ULONG
 
ulBegöCh¨Info
, 
ulCh¨Pos
, 
ulCh¨PosNext
;

456 
iIndex
, 
iRun
, 
iFodo
;

457 
UCHAR
 
aucF∑ge
[128];

459 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

461 
ulBegöCh¨Info
 = 
	`ulGëL⁄g
(0x0e, 
aucHódî
);

462 
	`NO_DBG_HEX
(
ulBegöCh¨Info
);

463 
ulBegöCh¨Info
 = 
	`ROUND128
(ulBeginCharInfo);

464 
	`NO_DBG_HEX
(
ulBegöCh¨Info
);

467 i‡(!
	`bRódByãs
(
aucF∑ge
, 128, 
ulBegöCh¨Info
, 
pFûe
)) {

470 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 128);

471 
ulCh¨PosNext
 = 
	`ulGëL⁄g
(0, 
aucF∑ge
);

472 
iRun
 = ()
	`ucGëByã
(0x7f, 
aucF∑ge
);

473 
	`NO_DBG_DEC
(
iRun
);

474 
iIndex
 = 0; iIndex < 
iRun
; iIndex++) {

475 
iFodo
 = ()
	`usGëW‹d
(6 * 
iIndex
 + 8, 
aucF∑ge
);

476 i‡(
iFodo
 <= 0 || iFodo > 0x79) {

477 
	`DBG_DEC_C
(
iFodo
 != ()0xffff, iFodo);

480 
	`vFûlF⁄tFromStyÀshìt
(0, &
tF⁄t
);

481 
	`vGë0F⁄tInfo
(
iFodo
, 
aucF∑ge
 + 4, &
tF⁄t
);

482 
ulCh¨Pos
 = 
ulCh¨PosNext
;

483 
ulCh¨PosNext
 = 
	`ulGëL⁄g
(6 * 
iIndex
 + 4, 
aucF∑ge
);

484 
tF⁄t
.
ulFûeOff£t
 = 
ulCh¨Pos
;

485 
	`vAdd2F⁄tInfoLi°
(&
tF⁄t
);

487 
ulBegöCh¨Info
 += 128;

488 } 
ulCh¨PosNext
 =
ulBegöCh¨Info
);

489 
	}
}

	@prop2.c

9 
	~<°rög.h
>

10 
	~"™tiw‹d.h
"

13 
	#MAX_FILESIZE
 0x2000000UL

	)

19 
	$iGë2InfoLígth
(
iByãNbr
, c⁄° 
UCHAR
 *
aucGΩ¥l
)

21 
iTmp
, 
iDñ
, 
iAdd
;

23 
	`ucGëByã
(
iByãNbr
, 
aucGΩ¥l
)) {

25  2 + ()
	`ucGëByã
(
iByãNbr
 + 1, 
aucGΩ¥l
);

37 
iTmp
 = ()
	`ucGëByã
(
iByãNbr
 + 1, 
aucGΩ¥l
);

38 i‡(
iTmp
 == 255) {

39 
iDñ
 = ()
	`ucGëByã
(
iByãNbr
 + 2, 
aucGΩ¥l
);

40 
iAdd
 = ()
	`ucGëByã
(

41 
iByãNbr
 + 3 + 
iDñ
 * 4, 
aucGΩ¥l
);

42 
iTmp
 = 2 + 
iDñ
 * 4 + 
iAdd
 * 3;

44  2 + 
iTmp
;

56 
	}
}

62 
	$vGë2D›Info
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

64 
documít_block_ty≥
 
tDocumít
;

65 
UCHAR
 *
aucBuf„r
;

66 
ULONG
 
ulBegöDo˝Info
, 
ulTmp
;

67 
size_t
 
tDo˝InfoLí
;

68 
USHORT
 
usTmp
;

70 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x112, 
aucHódî
);

71 
	`DBG_HEX
(
ulBegöDo˝Info
);

72 
tDo˝InfoLí
 = (
size_t
)
	`usGëW‹d
(0x116, 
aucHódî
);

73 
	`DBG_DEC
(
tDo˝InfoLí
);

74 i‡(
tDo˝InfoLí
 < 28) {

75 
	`DBG_MSG
("No Document information");

79 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

80 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tDo˝InfoLí
, 
ulBegöDo˝Info
, 
pFûe
)) {

81 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

85 
usTmp
 = 
	`usGëW‹d
(0x00, 
aucBuf„r
);

86 
tDocumít
.
ucHdrFåS≥cifiˇti⁄
 = (
UCHAR
)(
usTmp
 >> 8);

87 
tDocumít
.
usDeÁu…TabWidth
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

88 
ulTmp
 = 
	`ulGëL⁄g
(0x14, 
aucBuf„r
);

89 
tDocumít
.
tCª©eD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

90 
ulTmp
 = 
	`ulGëL⁄g
(0x18, 
aucBuf„r
);

91 
tDocumít
.
tRevi£dD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

92 
	`vCª©eDocumítInfoLi°
(&
tDocumít
);

94 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

95 
	}
}

102 
	$vGë2Se˘i⁄Info
(c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
,

103 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

105 
iFodoOff
, 
iInfoLí
;

106 
USHORT
 
usCcﬁ
;

107 
UCHAR
 
ucTmp
;

109 
	`Áû
(
aucGΩ¥l
 =
NULL
 || 
pSe˘i⁄
 == NULL);

111 
iFodoOff
 = 0;

112 
tByãs
 >(
size_t
)
iFodoOff
 + 1) {

113 
	`ucGëByã
(
iFodoOff
, 
aucGΩ¥l
)) {

115 
ucTmp
 = 
	`ucGëByã
(
iFodoOff
 + 1, 
aucGΩ¥l
);

116 
	`DBG_DEC
(
ucTmp
);

117 
pSe˘i⁄
->
bNewPage
 = 
ucTmp
 != 0 && ucTmp != 1;

120 
usCcﬁ
 = 1 + 
	`usGëW‹d
(
iFodoOff
 + 1, 
aucGΩ¥l
);

121 
	`DBG_DEC
(
usCcﬁ
);

124 
pSe˘i⁄
->
ucHdrFåS≥cifiˇti⁄
 =

125 
	`ucGëByã
(
iFodoOff
 + 1, 
aucGΩ¥l
);

130 
iInfoLí
 = 
	`iGë2InfoLígth
(
iFodoOff
, 
aucGΩ¥l
);

131 
	`Áû
(
iInfoLí
 <= 0);

132 
iFodoOff
 +
iInfoLí
;

134 
	}
}

140 
	$vGë2SïInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

142 
£˘i⁄_block_ty≥
 
tSe˘i⁄
;

143 
ULONG
 *
aulSe˘Page
, *
aulCh¨Pos
;

144 
UCHAR
 *
aucBuf„r
, *
aucF∑ge
;

145 
ULONG
 
ulBegöOfText
, 
ulTextOff£t
, 
ulBegöSe˘Info
;

146 
size_t
 
tSe˘InfoLí
, 
tIndex
, 
tOff£t
, 
tLí
, 
tByãs
;

147 
UCHAR
 
aucTmp
[1];

149 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

151 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

152 
	`NO_DBG_HEX
(
ulBegöOfText
);

153 
ulBegöSe˘Info
 = 
	`ulGëL⁄g
(0x7c, 
aucHódî
);

154 
	`DBG_HEX
(
ulBegöSe˘Info
);

155 
tSe˘InfoLí
 = (
size_t
)
	`usGëW‹d
(0x80, 
aucHódî
);

156 
	`DBG_DEC
(
tSe˘InfoLí
);

157 i‡(
tSe˘InfoLí
 < 4) {

158 
	`DBG_DEC
(
tSe˘InfoLí
);

162 
aucBuf„r
 = 
	`xmÆloc
(
tSe˘InfoLí
);

163 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tSe˘InfoLí
, 
ulBegöSe˘Info
, 
pFûe
)) {

164 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

167 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tSe˘InfoLí
);

170 
tLí
 = (
tSe˘InfoLí
 - 4) / 10;

172 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

173 
tIndex
 = 0, 
tOff£t
 = 0;

174 
tIndex
 < 
tLí
;

175 
tIndex
++, 
tOff£t
 += 4) {

176 
ulTextOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

177 
	`NO_DBG_HEX
(
ulTextOff£t
);

178 
aulCh¨Pos
[
tIndex
] = 
ulBegöOfText
 + 
ulTextOff£t
;

179 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

182 
aulSe˘Page
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

183 
tIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

184 
tIndex
 < 
tLí
;

185 
tIndex
++, 
tOff£t
 += 6) {

186 
aulSe˘Page
[
tIndex
] = 
	`ulGëL⁄g
(
tOff£t
 + 2, 
aucBuf„r
);

187 
	`NO_DBG_HEX
(
aulSe˘Page
[
tIndex
]);

189 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

192 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

193 i‡(
aulSe˘Page
[
tIndex
] =
FC_INVALID
) {

194 
	`vDeÁu…2Se˘i⁄InfoLi°
(
aulCh¨Pos
[
tIndex
]);

198 i‡(!
	`bRódByãs
(
aucTmp
, 1, 
aulSe˘Page
[
tIndex
], 
pFûe
)) {

201 
tByãs
 = 1 + (
size_t
)
	`ucGëByã
(0, 
aucTmp
);

202 
	`NO_DBG_DEC
(
tByãs
);

204 
aucF∑ge
 = 
	`xmÆloc
(
tByãs
);

205 i‡(!
	`bRódByãs
(
aucF∑ge
, 
tByãs
, 
aulSe˘Page
[
tIndex
], 
pFûe
)) {

206 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

209 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
tByãs
);

211 
	`vGëDeÁu…Se˘i⁄
(&
tSe˘i⁄
);

212 
	`vGë2Se˘i⁄Info
(
aucF∑ge
 + 1, 
tByãs
 - 1, &
tSe˘i⁄
);

213 
	`vAdd2Se˘i⁄InfoLi°
(&
tSe˘i⁄
, 
aulCh¨Pos
[
tIndex
]);

214 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

216 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

217 
aulSe˘Page
 = 
	`x‰ì
(aulSectPage);

218 
	}
}

224 
	$vGë2HdrFåInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

226 
ULONG
 *
aulCh¨Pos
;

227 
UCHAR
 *
aucBuf„r
;

228 
ULONG
 
ulHdrFåOff£t
, 
ulBegöHdrFåInfo
;

229 
size_t
 
tHdrFåInfoLí
, 
tIndex
, 
tOff£t
, 
tLí
;

231 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

233 
ulBegöHdrFåInfo
 = 
	`ulGëL⁄g
(0x9a, 
aucHódî
);

234 
	`NO_DBG_HEX
(
ulBegöHdrFåInfo
);

235 
tHdrFåInfoLí
 = (
size_t
)
	`usGëW‹d
(0x9e, 
aucHódî
);

236 
	`NO_DBG_DEC
(
tHdrFåInfoLí
);

237 i‡(
tHdrFåInfoLí
 < 8) {

238 
	`DBG_DEC_C
(
tHdrFåInfoLí
 != 0,ÅHdrFtrInfoLen);

242 
aucBuf„r
 = 
	`xmÆloc
(
tHdrFåInfoLí
);

243 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tHdrFåInfoLí
, 
ulBegöHdrFåInfo
, 
pFûe
)) {

244 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

247 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tHdrFåInfoLí
);

249 
tLí
 = 
tHdrFåInfoLí
 / 4 - 1;

251 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

252 
tIndex
 = 0, 
tOff£t
 = 0;

253 
tIndex
 < 
tLí
;

254 
tIndex
++, 
tOff£t
 += 4) {

255 
ulHdrFåOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

256 
	`NO_DBG_HEX
(
ulHdrFåOff£t
);

257 
aulCh¨Pos
[
tIndex
] = 
	`ulHdrFåOff£t2Ch¨Pos
(
ulHdrFåOff£t
);

258 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

260 
	`vCª©2HdrFåInfoLi°
(
aulCh¨Pos
, 
tLí
);

261 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

262 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

263 
	}
}

268 
row_öfo_íum


269 
	$eGë2RowInfo
(
iFodo
,

270 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
row_block_ty≥
 *
pRow
)

272 
iFodoOff
, 
iInfoLí
;

273 
iIndex
, 
iSize
, 
iCﬁ
;

274 
iPosCuº
, 
iPosPªv
;

275 
USHORT
 
usTmp
;

276 
BOOL
 
bFound24_0
, 
bFound24_1
, 
bFound25_0
, 
bFound25_1
, 
bFound154
;

278 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pRow
 == NULL);

280 
iFodoOff
 = 0;

281 
bFound24_0
 = 
FALSE
;

282 
bFound24_1
 = 
FALSE
;

283 
bFound25_0
 = 
FALSE
;

284 
bFound25_1
 = 
FALSE
;

285 
bFound154
 = 
FALSE
;

286 
iByãs
 >
iFodoOff
 + 1) {

287 
iInfoLí
 = 0;

288 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

290 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
))) {

291 
bFound24_1
 = 
TRUE
;

293 
bFound24_0
 = 
TRUE
;

297 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
))) {

298 
bFound25_1
 = 
TRUE
;

300 
bFound25_0
 = 
TRUE
;

304 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

305 
usTmp
 &= 0x01ff;

306 
	`NO_DBG_DEC
(
usTmp
 >> 6);

307 i‡(
usTmp
 == 0) {

308 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_TOP
;

310 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_TOP
;

314 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

315 
usTmp
 &= 0x01ff;

316 
	`NO_DBG_DEC
(
usTmp
 >> 6);

317 i‡(
usTmp
 == 0) {

318 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_LEFT
;

320 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_LEFT
;

324 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

325 
usTmp
 &= 0x01ff;

326 
	`NO_DBG_DEC
(
usTmp
 >> 6);

327 i‡(
usTmp
 == 0) {

328 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_BOTTOM
;

330 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_BOTTOM
;

334 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

335 
usTmp
 &= 0x01ff;

336 
	`NO_DBG_DEC
(
usTmp
 >> 6);

337 i‡(
usTmp
 == 0) {

338 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_RIGHT
;

340 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_RIGHT
;

344 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

345 
usTmp
 &= 0x0018;

346 
	`NO_DBG_DEC
(
usTmp
 >> 3);

347 i‡(
usTmp
 == 0) {

348 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_TOP
;

350 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_TOP
;

354 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

355 
usTmp
 &= 0x0018;

356 
	`NO_DBG_DEC
(
usTmp
 >> 3);

357 i‡(
usTmp
 == 0) {

358 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_LEFT
;

360 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_LEFT
;

364 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

365 
usTmp
 &= 0x0018;

366 
	`NO_DBG_DEC
(
usTmp
 >> 3);

367 i‡(
usTmp
 == 0) {

368 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_BOTTOM
;

370 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_BOTTOM
;

374 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

375 
usTmp
 &= 0x0018;

376 
	`NO_DBG_DEC
(
usTmp
 >> 3);

377 i‡(
usTmp
 == 0) {

378 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_RIGHT
;

380 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_RIGHT
;

385 
iSize
 = ()
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

386 i‡(
iSize
 < 6 || 
iByãs
 < 
iFodoOff
 + 7) {

387 
	`DBG_DEC
(
iSize
);

388 
	`DBG_DEC
(
iByãs
);

389 
	`DBG_DEC
(
iFodoOff
);

390 
iInfoLí
 = 1;

393 
iCﬁ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

394 i‡(
iCﬁ
 < 1 ||

395 
iByãs
 < 
iFodoOff
 + 3 + (
iCﬁ
 + 1) * 2) {

396 
	`DBG_DEC
(
iCﬁ
);

397 
	`DBG_DEC
(
iByãs
);

398 
	`DBG_DEC
(
iFodoOff
);

399 
	`DBG_DEC
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
));

400 
iInfoLí
 = 1;

403 i‡(
iCﬁ
 >()
	`ñemítsof
(
pRow
->
asCﬁumnWidth
)) {

404 
	`DBG_DEC
(
iCﬁ
);

405 
	`wîr
(1, "TheÇumber of columns is corrupt");

407 
pRow
->
ucNumbîOfCﬁumns
 = (
UCHAR
)
iCﬁ
;

408 
iPosPªv
 = ()()
	`usGëW‹d
(

409 
iFodo
 + 
iFodoOff
 + 4,

410 
aucGΩ¥l
);

411 
iIndex
 = 0; iIndex < 
iCﬁ
; iIndex++) {

412 
iPosCuº
 = ()()
	`usGëW‹d
(

413 
iFodo
 + 
iFodoOff
 + 6 + 
iIndex
 * 2,

414 
aucGΩ¥l
);

415 
pRow
->
asCﬁumnWidth
[
iIndex
] =

416 ()(
iPosCuº
 - 
iPosPªv
);

417 
iPosPªv
 = 
iPosCuº
;

419 
bFound154
 = 
TRUE
;

424 i‡(
iInfoLí
 <= 0) {

425 
iInfoLí
 =

426 
	`iGë2InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

427 
	`Áû
(
iInfoLí
 <= 0);

429 
iFodoOff
 +
iInfoLí
;

431 i‡(
bFound24_1
 && 
bFound25_1
 && 
bFound154
) {

432  
found_íd_of_row
;

434 i‡(
bFound24_0
 && 
bFound25_0
 && !
bFound154
) {

435  
found_nŸ_íd_of_row
;

437 i‡(
bFound24_1
) {

438  
found_a_˚Œ
;

440 i‡(
bFound24_0
) {

441  
found_nŸ_a_˚Œ
;

443  
found_nŸhög
;

444 
	}
}

451 
	$vGë2StyÀInfo
(
iFodo
,

452 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
°yÀ_block_ty≥
 *
pStyÀ
)

454 
iFodoOff
, 
iInfoLí
;

455 
iTmp
, 
iDñ
, 
iAdd
;

456 
sTmp
;

457 
UCHAR
 
ucTmp
;

459 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pStyÀ
 == NULL);

461 
	`NO_DBG_DEC
(
pStyÀ
->
usI°d
);

463 
iFodoOff
 = 0;

464 
iByãs
 >
iFodoOff
 + 1) {

465 
iInfoLí
 = 0;

466 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

468 
sTmp
 = ()
	`ucGëByã
(

469 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

470 
	`NO_DBG_DEC
(
sTmp
);

473 
pStyÀ
->
ucAlignmít
 = 
	`ucGëByã
(

474 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

477 
pStyÀ
->
ucNFC
 = 
	`ucGëByã
(

478 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

481 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

482 
pStyÀ
->
ucNumLevñ
 = 
ucTmp
;

483 
pStyÀ
->
bNumPau£
 =

484 
	`eGëNumTy≥
(
ucTmp
Ë=
Àvñ_ty≥_∑u£
;

488 
iTmp
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

489 i‡(
iTmp
 < 2) {

490 
iInfoLí
 = 1;

493 
	`NO_DBG_DEC
(
iTmp
);

494 
iDñ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

495 i‡(
iTmp
 < 2 + 2 * 
iDñ
) {

496 
iInfoLí
 = 1;

499 
	`NO_DBG_DEC
(
iDñ
);

500 
iAdd
 = ()
	`ucGëByã
(

501 
iFodo
 + 
iFodoOff
 + 3 + 2 * 
iDñ
, 
aucGΩ¥l
);

502 i‡(
iTmp
 < 2 + 2 * 
iDñ
 + 2 * 
iAdd
) {

503 
iInfoLí
 = 1;

506 
	`NO_DBG_DEC
(
iAdd
);

509 
pStyÀ
->
sRightIndít
 = ()
	`usGëW‹d
(

510 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

511 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

514 
pStyÀ
->
sLe·Indít
 = ()
	`usGëW‹d
(

515 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

516 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

519 
sTmp
 = ()
	`usGëW‹d
(

520 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

521 
pStyÀ
->
sLe·Indít
 +
sTmp
;

522 i‡(
pStyÀ
->
sLe·Indít
 < 0) {

523 
pStyÀ
->
sLe·Indít
 = 0;

525 
	`NO_DBG_DEC
(
sTmp
);

526 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

529 
pStyÀ
->
sLe·Indít1
 = ()
	`usGëW‹d
(

530 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

531 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít1
);

534 
pStyÀ
->
usBef‹eIndít
 = 
	`usGëW‹d
(

535 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

536 
	`NO_DBG_DEC
(
pStyÀ
->
usBef‹eIndít
);

539 
pStyÀ
->
usA·îIndít
 = 
	`usGëW‹d
(

540 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

541 
	`NO_DBG_DEC
(
pStyÀ
->
usA·îIndít
);

546 i‡(
iInfoLí
 <= 0) {

547 
iInfoLí
 =

548 
	`iGë2InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

549 
	`Áû
(
iInfoLí
 <= 0);

551 
iFodoOff
 +
iInfoLí
;

553 
	}
}

559 
	$vGë2P≠Info
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

561 
row_block_ty≥
 
tRow
;

562 
°yÀ_block_ty≥
 
tStyÀ
;

563 
USHORT
 *
ausP¨fPage
;

564 
UCHAR
 *
aucBuf„r
;

565 
ULONG
 
ulCh¨Pos
, 
ulCh¨PosFú°
, 
ulCh¨PosLa°
;

566 
ULONG
 
ulBegöP¨fInfo
;

567 
size_t
 
tP¨fInfoLí
, 
tP¨fPageNum
, 
tOff£t
, 
tSize
, 
tLíOld
, 
tLí
;

568 
iIndex
, 
iIndex2
, 
iRun
, 
iFodo
, 
iLí
;

569 
row_öfo_íum
 
eRowInfo
;

570 
USHORT
 
usP¨fFú°Page
, 
usCou¡
, 
usI°d
;

571 
UCHAR
 
ucStc
;

572 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

574 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

576 
ulBegöP¨fInfo
 = 
	`ulGëL⁄g
(0xa6, 
aucHódî
);

577 
	`NO_DBG_HEX
(
ulBegöP¨fInfo
);

578 
tP¨fInfoLí
 = (
size_t
)
	`usGëW‹d
(0xØ, 
aucHódî
);

579 
	`NO_DBG_DEC
(
tP¨fInfoLí
);

580 i‡(
tP¨fInfoLí
 < 4) {

581 
	`DBG_DEC
(
tP¨fInfoLí
);

585 
aucBuf„r
 = 
	`xmÆloc
(
tP¨fInfoLí
);

586 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tP¨fInfoLí
, 
ulBegöP¨fInfo
, 
pFûe
)) {

587 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

590 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tP¨fInfoLí
);

592 
tLí
 = (
tP¨fInfoLí
 - 4) / 6;

593 
ausP¨fPage
 = 
	`xˇŒoc
(
tLí
, (
USHORT
));

594 
iIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

595 
iIndex
 < ()
tLí
;

596 
iIndex
++, 
tOff£t
 += 2) {

597 
ausP¨fPage
[
iIndex
] = 
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

598 
	`NO_DBG_DEC
(
ausP¨fPage
[
iIndex
]);

600 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

601 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

602 
tP¨fPageNum
 = (
size_t
)
	`usGëW‹d
(0x144, 
aucHódî
);

603 
	`DBG_DEC
(
tP¨fPageNum
);

604 i‡(
tLí
 < 
tP¨fPageNum
) {

606 
tLíOld
 = 
tLí
;

607 
usP¨fFú°Page
 = 
	`usGëW‹d
(0x140, 
aucHódî
);

608 
	`DBG_DEC
(
usP¨fFú°Page
);

609 
tLí
 +
tP¨fPageNum
 - 1;

610 
tSize
 = 
tLí
 * (
USHORT
);

611 
ausP¨fPage
 = 
	`xªÆloc
◊usP¨fPage, 
tSize
);

613 
usCou¡
 = 
usP¨fFú°Page
 + 1;

614 
iIndex
 = ()
tLíOld
; iIndex < ()
tLí
; iIndex++) {

615 
ausP¨fPage
[
iIndex
] = 
usCou¡
;

616 
	`NO_DBG_DEC
(
ausP¨fPage
[
iIndex
]);

617 
usCou¡
++;

621 ()
	`mem£t
(&
tRow
, 0, (tRow));

622 
ulCh¨PosFú°
 = 
CP_INVALID
;

623 
iIndex
 = 0; iIndex < ()
tLí
; iIndex++) {

624 i‡(!
	`bRódByãs
(
aucF∑ge
, 
BIG_BLOCK_SIZE
,

625 (
ULONG
)
ausP¨fPage
[
iIndex
] * 
BIG_BLOCK_SIZE
,

626 
pFûe
)) {

629 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
BIG_BLOCK_SIZE
);

630 
iRun
 = ()
	`ucGëByã
(0x1ff, 
aucF∑ge
);

631 
	`NO_DBG_DEC
(
iRun
);

632 
iIndex2
 = 0; iIndex2 < 
iRun
; iIndex2++) {

633 i‡((
iRun
 + 1Ë* 4 + 
iIndex2
 * 1 >
BIG_BLOCK_SIZE
) {

636 
	`NO_DBG_HEX
(
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
));

637 
iFodo
 = 2 * ()
	`ucGëByã
(

638 (
iRun
 + 1Ë* 4 + 
iIndex2
 * 1, 
aucF∑ge
);

639 i‡(
iFodo
 <= 0) {

643 
iLí
 = 2 * ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

645 
ucStc
 = 
	`ucGëByã
(
iFodo
 + 1, 
aucF∑ge
);

646 
usI°d
 = 
	`usStc2i°d
(
ucStc
);

648 
	`vFûlStyÀFromStyÀshìt
(
usI°d
, &
tStyÀ
);

649 
	`vGë2StyÀInfo
(
iFodo
, 
aucF∑ge
 + 8, 
iLí
 - 8, &
tStyÀ
);

650 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
);

651 
	`NO_DBG_HEX
(
ulCh¨Pos
);

652 
tStyÀ
.
ulFûeOff£t
 = 
ulCh¨Pos
;

653 
	`vAdd2StyÀInfoLi°
(&
tStyÀ
);

655 
eRowInfo
 = 
	`eGë2RowInfo
(
iFodo
,

656 
aucF∑ge
 + 8, 
iLí
 - 8, &
tRow
);

658 
eRowInfo
) {

659 
found_a_˚Œ
:

660 i‡(
ulCh¨PosFú°
 !
CP_INVALID
) {

663 
ulCh¨PosFú°
 = 
	`ulGëL⁄g
(

664 
iIndex2
 * 4, 
aucF∑ge
);

665 
	`NO_DBG_HEX
(
ulCh¨PosFú°
);

666 
tRow
.
ulCh¨PosSèπ
 = 
ulCh¨PosFú°
;

667 
tRow
.
ulFûeOff£tSèπ
 = 
ulCh¨PosFú°
;

669 
found_íd_of_row
:

670 
ulCh¨PosLa°
 = 
	`ulGëL⁄g
(

671 
iIndex2
 * 4, 
aucF∑ge
);

672 
	`NO_DBG_HEX
(
ulCh¨PosLa°
);

673 
tRow
.
ulCh¨PosEnd
 = 
ulCh¨PosLa°
;

675 
tRow
.
ulFûeOff£tEnd
 = 
ulCh¨PosLa°
 + 1;

676 
	`vAdd2RowInfoLi°
(&
tRow
);

677 ()
	`mem£t
(&
tRow
, 0, (tRow));

678 
ulCh¨PosFú°
 = 
CP_INVALID
;

680 
found_nŸhög
:

683 
	`DBG_DEC
(
eRowInfo
);

688 
ausP¨fPage
 = 
	`x‰ì
(ausParfPage);

689 
	}
}

696 
	$vGë1F⁄tInfo
(
iFodo
,

697 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
, 
f⁄t_block_ty≥
 *
pF⁄t
)

699 
BOOL
 
bIcoCh™ge
, 
bFtcCh™ge
, 
bHpsCh™ge
, 
bKulCh™ge
;

700 
USHORT
 
usTmp
;

701 
UCHAR
 
ucTmp
;

702 
UCHAR
 
aucChpx
[12];

704 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pF⁄t
 == NULL);

706 i‡(
tByãs
 > (
aucChpx
)) {

707 
	`NO_DBG_PRINT_BLOCK
(
aucGΩ¥l
 + 
iFodo
, 
tByãs
);

712 ()
	`mem£t
(
aucChpx
, 0, (aucChpx));

713 ()
	`mem˝y
(
aucChpx
, 
aucGΩ¥l
 + 
iFodo
, 
	`mö
(
tByãs
, (aucChpx)));

715 
usTmp
 = 
	`usGëW‹d
(0, 
aucChpx
);

716 i‡((
usTmp
 & 
	`BIT
(0)) != 0) {

717 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_BOLD
;

719 i‡((
usTmp
 & 
	`BIT
(1)) != 0) {

720 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_ITALIC
;

722 i‡((
usTmp
 & 
	`BIT
(2)) != 0) {

723 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_STRIKE
;

725 i‡((
usTmp
 & 
	`BIT
(5)) != 0) {

726 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_SMALL_CAPITALS
;

728 i‡((
usTmp
 & 
	`BIT
(6)) != 0) {

729 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_CAPITALS
;

731 i‡((
usTmp
 & 
	`BIT
(7)) != 0) {

732 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_HIDDEN
;

735 
ucTmp
 = 
	`ucGëByã
(5, 
aucChpx
);

736 i‡(
ucTmp
 != 0) {

737 i‡(
ucTmp
 < 128) {

738 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUPERSCRIPT
;

739 
	`DBG_MSG
("Superscript");

741 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUBSCRIPT
;

742 
	`DBG_MSG
("Subscript");

746 
bIcoCh™ge
 = (
usTmp
 & 
	`BIT
(10)) != 0;

747 
bFtcCh™ge
 = (
usTmp
 & 
	`BIT
(11)) != 0;

748 
bHpsCh™ge
 = (
usTmp
 & 
	`BIT
(12)) != 0;

749 
bKulCh™ge
 = (
usTmp
 & 
	`BIT
(13)) != 0;

751 i‡(
bFtcCh™ge
) {

752 
usTmp
 = 
	`usGëW‹d
(2, 
aucChpx
);

753 i‡(
usTmp
 <(
USHORT
)
UCHAR_MAX
) {

754 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usTmp
;

756 
pF⁄t
->
ucF⁄tNumbî
 = 0;

760 i‡(
bHpsCh™ge
) {

761 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
	`ucGëByã
(4, 
aucChpx
);

764 i‡(
bIcoCh™ge
 || 
bKulCh™ge
) {

765 
usTmp
 = 
	`usGëW‹d
(6, 
aucChpx
);

766 i‡(
bIcoCh™ge
) {

767 
pF⁄t
->
ucF⁄tCﬁ‹
 = (
UCHAR
)((
usTmp
 & 0x0f00) >> 8);

768 i‡(
pF⁄t
->
ucF⁄tCﬁ‹
 <= 7) {

770 
pF⁄t
->
ucF⁄tCﬁ‹
++;

772 
	`DBG_DEC
(
pF⁄t
->
ucF⁄tCﬁ‹
);

773 
pF⁄t
->
ucF⁄tCﬁ‹
 = 0;

776 i‡(
bKulCh™ge
) {

777 
usTmp
 = (usTmp & 0x7000) >> 12;

778 
	`DBG_DEC_C
(
usTmp
 > 4, usTmp);

779 i‡(
usTmp
 == 0) {

780 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_UNDERLINE
;

782 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

786 
	}
}

793 
	$vGë2F⁄tInfo
(
iFodo
,

794 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
, 
f⁄t_block_ty≥
 *
pF⁄t
)

796 
BOOL
 
bIcoCh™ge
, 
bFtcCh™ge
, 
bHpsCh™ge
, 
bKulCh™ge
;

797 
USHORT
 
usTmp
;

798 
UCHAR
 
ucTmp
;

799 
UCHAR
 
aucChpx
[18];

801 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pF⁄t
 == NULL);

803 i‡(
tByãs
 > (
aucChpx
)) {

804 
	`NO_DBG_PRINT_BLOCK
(
aucGΩ¥l
 + 
iFodo
, 
tByãs
);

809 ()
	`mem£t
(
aucChpx
, 0, (aucChpx));

810 ()
	`mem˝y
(
aucChpx
, 
aucGΩ¥l
 + 
iFodo
, 
	`mö
(
tByãs
, (aucChpx)));

812 
usTmp
 = 
	`usGëW‹d
(0, 
aucChpx
);

813 i‡((
usTmp
 & 
	`BIT
(0)) != 0) {

814 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_BOLD
;

816 i‡((
usTmp
 & 
	`BIT
(1)) != 0) {

817 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_ITALIC
;

819 i‡(
usTmp
 & 
	`BIT
(3)) {

820 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_MARKDEL
;

822 i‡((
usTmp
 & 
	`BIT
(5)) != 0) {

823 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_SMALL_CAPITALS
;

825 i‡((
usTmp
 & 
	`BIT
(6)) != 0) {

826 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_CAPITALS
;

828 i‡((
usTmp
 & 
	`BIT
(7)) != 0) {

829 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_HIDDEN
;

831 i‡(
usTmp
 & 
	`BIT
(10)) {

832 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_STRIKE
;

835 
ucTmp
 = 
	`ucGëByã
(10, 
aucChpx
);

836 
	`DBG_MSG_C
(
ucTmp
 != 0 && ucTmp < 128, "Superscript");

837 
	`DBG_MSG_C
(
ucTmp
 >= 128, "Subscript");

839 
usTmp
 = 
	`usGëW‹d
(2, 
aucChpx
);

840 i‡(
usTmp
 == 0) {

845 
bIcoCh™ge
 = (
usTmp
 & 
	`BIT
(0)) != 0;

846 
bFtcCh™ge
 = (
usTmp
 & 
	`BIT
(1)) != 0;

847 
bHpsCh™ge
 = (
usTmp
 & 
	`BIT
(2)) != 0;

848 
bKulCh™ge
 = (
usTmp
 & 
	`BIT
(3)) != 0;

850 i‡(
bFtcCh™ge
) {

851 
usTmp
 = 
	`usGëW‹d
(4, 
aucChpx
);

852 i‡(
usTmp
 <(
USHORT
)
UCHAR_MAX
) {

853 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usTmp
;

855 
pF⁄t
->
ucF⁄tNumbî
 = 0;

859 i‡(
bHpsCh™ge
) {

860 
pF⁄t
->
usF⁄tSize
 = 
	`usGëW‹d
(6, 
aucChpx
);

863 i‡(
bIcoCh™ge
 || 
bKulCh™ge
) {

864 
ucTmp
 = 
	`ucGëByã
(9, 
aucChpx
);

865 i‡(
bIcoCh™ge
) {

866 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
ucTmp
 & 0x1f;

867 i‡(
pF⁄t
->
ucF⁄tCﬁ‹
 > 16) {

868 
	`DBG_DEC
(
pF⁄t
->
ucF⁄tCﬁ‹
);

869 
pF⁄t
->
ucF⁄tCﬁ‹
 = 0;

872 i‡(
bKulCh™ge
) {

873 
ucTmp
 = (ucTmp & 0xe0) >> 5;

874 
	`DBG_DEC_C
(
ucTmp
 > 4, ucTmp);

875 i‡(
ucTmp
 == 0) {

876 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_UNDERLINE
;

878 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

882 
	}
}

888 
BOOL


889 
	$bGë1PicInfo
(
iFodo
,

890 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
, 
pi˘uª_block_ty≥
 *
pPi˘uª
)

892 
ULONG
 
ulTmp
;

893 
UCHAR
 
aucChpx
[12];

895 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pPi˘uª
 == NULL);

897 i‡(
tByãs
 > (
aucChpx
)) {

898 
	`NO_DBG_PRINT_BLOCK
(
aucGΩ¥l
 + 
iFodo
, 
tByãs
);

899 
tByãs
 = (
aucChpx
);

903 ()
	`mem£t
(
aucChpx
, 0, (aucChpx));

904 ()
	`mem˝y
(
aucChpx
, 
aucGΩ¥l
 + 
iFodo
, 
	`mö
(
tByãs
, (aucChpx)));

906 
ulTmp
 = 
	`ulGëL⁄g
(8, 
aucChpx
);

907 i‡(
ulTmp
 !0 && ulTm∞< 
MAX_FILESIZE
) {

908 
pPi˘uª
->
ulPi˘uªOff£t
 = 
ulTmp
;

909 
	`DBG_HEX
(
pPi˘uª
->
ulPi˘uªOff£t
);

910  
TRUE
;

912  
FALSE
;

913 
	}
}

919 
BOOL


920 
	$bGë2PicInfo
(
iFodo
,

921 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
, 
pi˘uª_block_ty≥
 *
pPi˘uª
)

923 
ULONG
 
ulTmp
;

924 
UCHAR
 
aucChpx
[18];

926 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pPi˘uª
 == NULL);

928 i‡(
tByãs
 > (
aucChpx
)) {

929 
	`NO_DBG_PRINT_BLOCK
(
aucGΩ¥l
 + 
iFodo
, 
tByãs
);

930 
tByãs
 = (
aucChpx
);

934 ()
	`mem£t
(
aucChpx
, 0, (aucChpx));

935 ()
	`mem˝y
(
aucChpx
, 
aucGΩ¥l
 + 
iFodo
, 
	`mö
(
tByãs
, (aucChpx)));

937 
ulTmp
 = 
	`ulGëL⁄g
(14, 
aucChpx
);

938 i‡(
ulTmp
 !0 && ulTm∞< 
MAX_FILESIZE
) {

939 
pPi˘uª
->
ulPi˘uªOff£t
 = 
ulTmp
;

940 
	`DBG_HEX
(
pPi˘uª
->
ulPi˘uªOff£t
);

941 
	`DBG_DEC
(
tByãs
);

942  
TRUE
;

944  
FALSE
;

945 
	}
}

951 
	$vGë2ChrInfo
(
FILE
 *
pFûe
, 
iW‹dVîsi⁄
, c⁄° 
UCHAR
 *
aucHódî
)

953 
f⁄t_block_ty≥
 
tF⁄t
;

954 
pi˘uª_block_ty≥
 
tPi˘uª
;

955 
USHORT
 *
ausCh¨Page
;

956 
UCHAR
 *
aucBuf„r
;

957 
ULONG
 
ulFûeOff£t
, 
ulCh¨Pos
, 
ulBegöCh¨Info
;

958 
size_t
 
tCh¨InfoLí
, 
tOff£t
, 
tSize
, 
tChrLí
, 
tCh¨PageNum
;

959 
size_t
 
tLíOld
, 
tLí
;

960 
iIndex
, 
iIndex2
, 
iRun
, 
iFodo
;

961 
BOOL
 
bSuc˚ss1
, 
bSuc˚ss2
;

962 
USHORT
 
usCh¨Fú°Page
, 
usCou¡
, 
usI°d
;

963 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

965 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

966 
	`Áû
(
iW‹dVîsi⁄
 != 1 && iWordVersion != 2);

968 
ulBegöCh¨Info
 = 
	`ulGëL⁄g
(0xa0, 
aucHódî
);

969 
	`DBG_HEX
(
ulBegöCh¨Info
);

970 
tCh¨InfoLí
 = (
size_t
)
	`usGëW‹d
(0xa4, 
aucHódî
);

971 
	`DBG_DEC
(
tCh¨InfoLí
);

972 i‡(
tCh¨InfoLí
 < 4) {

973 
	`DBG_DEC
(
tCh¨InfoLí
);

977 
aucBuf„r
 = 
	`xmÆloc
(
tCh¨InfoLí
);

978 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tCh¨InfoLí
, 
ulBegöCh¨Info
, 
pFûe
)) {

979 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

982 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tCh¨InfoLí
);

984 
tLí
 = (
tCh¨InfoLí
 - 4) / 6;

985 
ausCh¨Page
 = 
	`xˇŒoc
(
tLí
, (
USHORT
));

986 
iIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

987 
iIndex
 < ()
tLí
;

988 
iIndex
++, 
tOff£t
 += 2) {

989 
ausCh¨Page
[
iIndex
] = 
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

990 
	`NO_DBG_DEC
(
ausCh¨Page
[
iIndex
]);

992 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

993 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

994 
tCh¨PageNum
 = (
size_t
)
	`usGëW‹d
(0x142, 
aucHódî
);

995 
	`DBG_DEC
(
tCh¨PageNum
);

996 i‡(
tLí
 < 
tCh¨PageNum
) {

998 
tLíOld
 = 
tLí
;

999 
usCh¨Fú°Page
 = 
	`usGëW‹d
(0x13e, 
aucHódî
);

1000 
	`NO_DBG_DEC
(
usCh¨Fú°Page
);

1001 
tLí
 +
tCh¨PageNum
 - 1;

1002 
tSize
 = 
tLí
 * (
USHORT
);

1003 
ausCh¨Page
 = 
	`xªÆloc
◊usCh¨Page, 
tSize
);

1005 
usCou¡
 = 
usCh¨Fú°Page
 + 1;

1006 
iIndex
 = ()
tLíOld
; iIndex < ()
tLí
; iIndex++) {

1007 
ausCh¨Page
[
iIndex
] = 
usCou¡
;

1008 
	`NO_DBG_DEC
(
ausCh¨Page
[
iIndex
]);

1009 
usCou¡
++;

1013 
iIndex
 = 0; iIndex < ()
tLí
; iIndex++) {

1014 i‡(!
	`bRódByãs
(
aucF∑ge
, 
BIG_BLOCK_SIZE
,

1015 (
ULONG
)
ausCh¨Page
[
iIndex
] * 
BIG_BLOCK_SIZE
,

1016 
pFûe
)) {

1019 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
BIG_BLOCK_SIZE
);

1020 
iRun
 = ()
	`ucGëByã
(0x1ff, 
aucF∑ge
);

1021 
	`NO_DBG_DEC
(
iRun
);

1022 
iIndex2
 = 0; iIndex2 < 
iRun
; iIndex2++) {

1023 i‡((
iRun
 + 1Ë* 4 + 
iIndex2
 >
BIG_BLOCK_SIZE
) {

1026 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
);

1027 
ulFûeOff£t
 = 
ulCh¨Pos
;

1028 
iFodo
 = 2 * ()
	`ucGëByã
(

1029 (
iRun
 + 1Ë* 4 + 
iIndex2
, 
aucF∑ge
);

1031 
tChrLí
 = (
size_t
)
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

1033 
usI°d
 = 
	`usGëI°d
(
ulFûeOff£t
);

1034 
	`vFûlF⁄tFromStyÀshìt
(
usI°d
, &
tF⁄t
);

1035 i‡(
iFodo
 != 0) {

1036 i‡(
iW‹dVîsi⁄
 == 1) {

1037 
	`vGë1F⁄tInfo
(
iFodo
,

1038 
aucF∑ge
 + 1, 
tChrLí
, &
tF⁄t
);

1039 } i‡(
iW‹dVîsi⁄
 == 2) {

1040 
	`vGë2F⁄tInfo
(
iFodo
,

1041 
aucF∑ge
 + 1, 
tChrLí
, &
tF⁄t
);

1044 
tF⁄t
.
ulFûeOff£t
 = ulFileOffset;

1045 
	`vAdd2F⁄tInfoLi°
(&
tF⁄t
);

1047 i‡(
iFodo
 <= 0) {

1051 ()
	`mem£t
(&
tPi˘uª
, 0, (tPicture));

1052 
bSuc˚ss1
 = 
iW‹dVîsi⁄
 == 1 &&

1053 
	`bGë1PicInfo
(
iFodo
, 
aucF∑ge
 + 1,

1054 
tChrLí
, &
tPi˘uª
);

1055 
bSuc˚ss2
 = 
iW‹dVîsi⁄
 == 2 &&

1056 
	`bGë2PicInfo
(
iFodo
, 
aucF∑ge
 + 1,

1057 
tChrLí
, &
tPi˘uª
);

1058 i‡(
bSuc˚ss1
 || 
bSuc˚ss2
) {

1059 
tPi˘uª
.
ulFûeOff£t
 = ulFileOffset;

1060 
tPi˘uª
.
ulFûeOff£tPi˘uª
 =

1061 
tPi˘uª
.
ulPi˘uªOff£t
;

1062 
	`vAdd2Pi˘InfoLi°
(&
tPi˘uª
);

1066 
ausCh¨Page
 = 
	`x‰ì
(ausCharPage);

1067 
	}
}

	@prop6.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

18 
	$iGë6InfoLígth
(
iByãNbr
, c⁄° 
UCHAR
 *
aucGΩ¥l
)

20 
iTmp
, 
iDñ
, 
iAdd
;

22 
	`ucGëByã
(
iByãNbr
, 
aucGΩ¥l
)) {

37  2 + ()
	`ucGëByã
(
iByãNbr
 + 1, 
aucGΩ¥l
);

41 
iTmp
 = ()
	`ucGëByã
(
iByãNbr
 + 1, 
aucGΩ¥l
);

42 i‡(
iTmp
 == 255) {

43 
iDñ
 = ()
	`ucGëByã
(
iByãNbr
 + 2, 
aucGΩ¥l
);

44 
iAdd
 = ()
	`ucGëByã
(

45 
iByãNbr
 + 3 + 
iDñ
 * 4, 
aucGΩ¥l
);

46 
iTmp
 = 2 + 
iDñ
 * 4 + 
iAdd
 * 3;

48  2 + 
iTmp
;

58 
	}
}

64 
	$vGë6D›Info
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

65 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

66 c⁄° 
UCHAR
 *
aucHódî
)

68 
documít_block_ty≥
 
tDocumít
;

69 
UCHAR
 *
aucBuf„r
;

70 
ULONG
 
ulBegöDo˝Info
, 
ulTmp
;

71 
size_t
 
tDo˝InfoLí
;

72 
USHORT
 
usTmp
;

74 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x150, 
aucHódî
);

75 
	`DBG_HEX
(
ulBegöDo˝Info
);

76 
tDo˝InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x154, 
aucHódî
);

77 
	`DBG_DEC
(
tDo˝InfoLí
);

78 i‡(
tDo˝InfoLí
 < 28) {

79 
	`DBG_MSG
("No Document information");

83 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

84 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

85 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

86 
aucBuf„r
, 
ulBegöDo˝Info
, 
tDo˝InfoLí
)) {

87 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

91 
usTmp
 = 
	`usGëW‹d
(0x00, 
aucBuf„r
);

92 
tDocumít
.
ucHdrFåS≥cifiˇti⁄
 = (
UCHAR
)(
usTmp
 >> 8);

93 
tDocumít
.
usDeÁu…TabWidth
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

94 
ulTmp
 = 
	`ulGëL⁄g
(0x14, 
aucBuf„r
);

95 
tDocumít
.
tCª©eD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

96 
ulTmp
 = 
	`ulGëL⁄g
(0x18, 
aucBuf„r
);

97 
tDocumít
.
tRevi£dD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

98 
	`vCª©eDocumítInfoLi°
(&
tDocumít
);

100 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

101 
	}
}

108 
	$vGë6Se˘i⁄Info
(c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
,

109 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

111 
UINT
 
uiIndex
;

112 
iFodoOff
, 
iInfoLí
, 
iSize
, 
iTmp
;

113 
USHORT
 
usCcﬁ
;

114 
UCHAR
 
ucTmp
;

116 
	`Áû
(
aucGΩ¥l
 =
NULL
 || 
pSe˘i⁄
 == NULL);

118 
iFodoOff
 = 0;

119 
tByãs
 >(
size_t
)
iFodoOff
 + 1) {

120 
iInfoLí
 = 0;

121 
	`ucGëByã
(
iFodoOff
, 
aucGΩ¥l
)) {

123 
iSize
 = ()
	`ucGëByã
(
iFodoOff
 + 1, 
aucGΩ¥l
);

124 
	`DBG_DEC_C
(
iSize
 != 212, iSize);

125 
uiIndex
 = 0, 
iTmp
 = 
iFodoOff
 + 2;

126 
uiIndex
 < 9 && 
iTmp
 < 
iFodoOff
 + 2 + 
iSize
 - 15;

127 
uiIndex
++, 
iTmp
 += 16) {

128 
pSe˘i⁄
->
aucNFC
[
uiIndex
] =

129 
	`ucGëByã
(
iTmp
, 
aucGΩ¥l
);

130 
	`NO_DBG_DEC
(
pSe˘i⁄
->
aucNFC
[
uiIndex
]);

131 
ucTmp
 = 
	`ucGëByã
(
iTmp
 + 3, 
aucGΩ¥l
);

132 
	`NO_DBG_HEX
(
ucTmp
);

133 i‡((
ucTmp
 & 
	`BIT
(2)) != 0) {

134 
pSe˘i⁄
->
usNìdPªvLvl
 |=

135 (
USHORT
)
	`BIT
(
uiIndex
);

137 i‡((
ucTmp
 & 
	`BIT
(3)) != 0) {

138 
pSe˘i⁄
->
usH™gögIndít
 |=

139 (
USHORT
)
	`BIT
(
uiIndex
);

142 
	`DBG_HEX
(
pSe˘i⁄
->
usNìdPªvLvl
);

143 
	`DBG_HEX
(
pSe˘i⁄
->
usH™gögIndít
);

146 
ucTmp
 = 
	`ucGëByã
(
iFodoOff
 + 1, 
aucGΩ¥l
);

147 
	`DBG_DEC
(
ucTmp
);

148 
pSe˘i⁄
->
bNewPage
 = 
ucTmp
 != 0 && ucTmp != 1;

151 
usCcﬁ
 = 1 + 
	`usGëW‹d
(
iFodoOff
 + 1, 
aucGΩ¥l
);

152 
	`DBG_DEC
(
usCcﬁ
);

155 
pSe˘i⁄
->
ucHdrFåS≥cifiˇti⁄
 =

156 
	`ucGëByã
(
iFodoOff
 + 1, 
aucGΩ¥l
);

161 i‡(
iInfoLí
 <= 0) {

162 
iInfoLí
 = 
	`iGë6InfoLígth
(
iFodoOff
, 
aucGΩ¥l
);

163 
	`Áû
(
iInfoLí
 <= 0);

165 
iFodoOff
 +
iInfoLí
;

167 
	}
}

173 
	$vGë6SïInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

174 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

175 c⁄° 
UCHAR
 *
aucHódî
)

177 
£˘i⁄_block_ty≥
 
tSe˘i⁄
;

178 
ULONG
 *
aulSe˘Page
, *
aulCh¨Pos
;

179 
UCHAR
 *
aucBuf„r
, *
aucF∑ge
;

180 
ULONG
 
ulBegöOfText
, 
ulTextOff£t
, 
ulBegöSe˘Info
;

181 
size_t
 
tSe˘InfoLí
, 
tIndex
, 
tOff£t
, 
tLí
, 
tByãs
;

182 
UCHAR
 
aucTmp
[2];

184 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

185 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

186 
	`Áû
(
aulBBD
 =
NULL
);

188 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

189 
	`NO_DBG_HEX
(
ulBegöOfText
);

190 
ulBegöSe˘Info
 = 
	`ulGëL⁄g
(0x88, 
aucHódî
);

191 
	`DBG_HEX
(
ulBegöSe˘Info
);

192 
tSe˘InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x8c, 
aucHódî
);

193 
	`DBG_DEC
(
tSe˘InfoLí
);

194 i‡(
tSe˘InfoLí
 < 4) {

195 
	`DBG_DEC
(
tSe˘InfoLí
);

199 
aucBuf„r
 = 
	`xmÆloc
(
tSe˘InfoLí
);

200 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

201 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

202 
aucBuf„r
, 
ulBegöSe˘Info
, 
tSe˘InfoLí
)) {

203 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

206 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tSe˘InfoLí
);

209 
tLí
 = (
tSe˘InfoLí
 - 4) / 16;

211 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

212 
tIndex
 = 0, 
tOff£t
 = 0;ÅIndex < 
tLí
;ÅIndex++,ÅOffset += 4) {

213 
ulTextOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

214 
	`NO_DBG_HEX
(
ulTextOff£t
);

215 
aulCh¨Pos
[
tIndex
] = 
ulBegöOfText
 + 
ulTextOff£t
;

216 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

219 
aulSe˘Page
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

220 
tIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

221 
tIndex
 < 
tLí
;

222 
tIndex
++, 
tOff£t
 += 12) {

223 
aulSe˘Page
[
tIndex
] = 
	`ulGëL⁄g
(
tOff£t
 + 2, 
aucBuf„r
);

224 
	`NO_DBG_HEX
(
aulSe˘Page
[
tIndex
]);

226 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

229 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

230 i‡(
aulSe˘Page
[
tIndex
] =
FC_INVALID
) {

231 
	`vDeÁu…2Se˘i⁄InfoLi°
(
aulCh¨Pos
[
tIndex
]);

235 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

236 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

237 
aucTmp
, 
aulSe˘Page
[
tIndex
], 2)) {

240 
tByãs
 = 2 + (
size_t
)
	`usGëW‹d
(0, 
aucTmp
);

241 
	`NO_DBG_DEC
(
tByãs
);

243 
aucF∑ge
 = 
	`xmÆloc
(
tByãs
);

244 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

245 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

246 
aucF∑ge
, 
aulSe˘Page
[
tIndex
], 
tByãs
)) {

247 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

250 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
tByãs
);

252 
	`vGëDeÁu…Se˘i⁄
(&
tSe˘i⁄
);

253 
	`vGë6Se˘i⁄Info
(
aucF∑ge
 + 2, 
tByãs
 - 2, &
tSe˘i⁄
);

254 
	`vAdd2Se˘i⁄InfoLi°
(&
tSe˘i⁄
, 
aulCh¨Pos
[
tIndex
]);

255 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

257 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

258 
aulSe˘Page
 = 
	`x‰ì
(aulSectPage);

259 
	}
}

265 
	$vGë6HdrFåInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

266 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

267 c⁄° 
UCHAR
 *
aucHódî
)

269 
ULONG
 *
aulCh¨Pos
;

270 
UCHAR
 *
aucBuf„r
;

271 
ULONG
 
ulHdrFåOff£t
, 
ulBegöHdrFåInfo
;

272 
size_t
 
tHdrFåInfoLí
, 
tIndex
, 
tOff£t
, 
tLí
;

274 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

275 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

276 
	`Áû
(
aulBBD
 =
NULL
);

278 
ulBegöHdrFåInfo
 = 
	`ulGëL⁄g
(0xb0, 
aucHódî
);

279 
	`NO_DBG_HEX
(
ulBegöHdrFåInfo
);

280 
tHdrFåInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xb4, 
aucHódî
);

281 
	`NO_DBG_DEC
(
tHdrFåInfoLí
);

282 i‡(
tHdrFåInfoLí
 < 8) {

283 
	`DBG_DEC_C
(
tHdrFåInfoLí
 != 0,ÅHdrFtrInfoLen);

287 
aucBuf„r
 = 
	`xmÆloc
(
tHdrFåInfoLí
);

288 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

289 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

290 
aucBuf„r
, 
ulBegöHdrFåInfo
, 
tHdrFåInfoLí
)) {

291 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

294 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tHdrFåInfoLí
);

296 
tLí
 = 
tHdrFåInfoLí
 / 4 - 1;

298 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

299 
tIndex
 = 0, 
tOff£t
 = 0;

300 
tIndex
 < 
tLí
;

301 
tIndex
++, 
tOff£t
 += 4) {

302 
ulHdrFåOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

303 
	`NO_DBG_HEX
(
ulHdrFåOff£t
);

304 
aulCh¨Pos
[
tIndex
] = 
	`ulHdrFåOff£t2Ch¨Pos
(
ulHdrFåOff£t
);

305 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

307 
	`vCª©6HdrFåInfoLi°
(
aulCh¨Pos
, 
tLí
);

308 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

309 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

310 
	}
}

315 
row_öfo_íum


316 
	$eGë6RowInfo
(
iFodo
,

317 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
row_block_ty≥
 *
pRow
)

319 
iFodoOff
, 
iInfoLí
;

320 
iIndex
, 
iSize
, 
iCﬁ
;

321 
iPosCuº
, 
iPosPªv
;

322 
USHORT
 
usTmp
;

323 
BOOL
 
bFound24_0
, 
bFound24_1
, 
bFound25_0
, 
bFound25_1
, 
bFound190
;

325 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pRow
 == NULL);

327 
iFodoOff
 = 0;

328 
bFound24_0
 = 
FALSE
;

329 
bFound24_1
 = 
FALSE
;

330 
bFound25_0
 = 
FALSE
;

331 
bFound25_1
 = 
FALSE
;

332 
bFound190
 = 
FALSE
;

333 
iByãs
 >
iFodoOff
 + 1) {

334 
iInfoLí
 = 0;

335 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

337 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
))) {

338 
bFound24_1
 = 
TRUE
;

340 
bFound24_0
 = 
TRUE
;

344 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
))) {

345 
bFound25_1
 = 
TRUE
;

347 
bFound25_0
 = 
TRUE
;

351 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

352 
usTmp
 &= 0x0018;

353 
	`NO_DBG_DEC
(
usTmp
 >> 3);

354 i‡(
usTmp
 == 0) {

355 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_TOP
;

357 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_TOP
;

361 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

362 
usTmp
 &= 0x0018;

363 
	`NO_DBG_DEC
(
usTmp
 >> 3);

364 i‡(
usTmp
 == 0) {

365 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_LEFT
;

367 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_LEFT
;

371 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

372 
usTmp
 &= 0x0018;

373 
	`NO_DBG_DEC
(
usTmp
 >> 3);

374 i‡(
usTmp
 == 0) {

375 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_BOTTOM
;

377 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_BOTTOM
;

381 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

382 
usTmp
 &= 0x0018;

383 
	`NO_DBG_DEC
(
usTmp
 >> 3);

384 i‡(
usTmp
 == 0) {

385 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_RIGHT
;

387 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_RIGHT
;

391 
	`DBG_MSG
("188: sprmTDefTable10");

392 
iSize
 = ()
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

393 
	`DBG_DEC
(
iSize
);

396 
iSize
 = ()
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

397 i‡(
iSize
 < 6 || 
iByãs
 < 
iFodoOff
 + 7) {

398 
	`DBG_DEC
(
iSize
);

399 
	`DBG_DEC
(
iFodoOff
);

400 
iInfoLí
 = 1;

403 
iCﬁ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

404 i‡(
iCﬁ
 < 1 ||

405 
iByãs
 < 
iFodoOff
 + 3 + (
iCﬁ
 + 1) * 2) {

406 
	`DBG_DEC
(
iCﬁ
);

407 
	`DBG_DEC
(
iFodoOff
);

408 
iInfoLí
 = 1;

411 i‡(
iCﬁ
 >()
	`ñemítsof
(
pRow
->
asCﬁumnWidth
)) {

412 
	`DBG_DEC
(
iCﬁ
);

413 
	`wîr
(1, "TheÇumber of columns is corrupt");

415 
pRow
->
ucNumbîOfCﬁumns
 = (
UCHAR
)
iCﬁ
;

416 
iPosPªv
 = ()()
	`usGëW‹d
(

417 
iFodo
 + 
iFodoOff
 + 4,

418 
aucGΩ¥l
);

419 
iIndex
 = 0; iIndex < 
iCﬁ
; iIndex++) {

420 
iPosCuº
 = ()()
	`usGëW‹d
(

421 
iFodo
 + 
iFodoOff
 + 6 + 
iIndex
 * 2,

422 
aucGΩ¥l
);

423 
pRow
->
asCﬁumnWidth
[
iIndex
] =

424 ()(
iPosCuº
 - 
iPosPªv
);

425 
iPosPªv
 = 
iPosCuº
;

427 
bFound190
 = 
TRUE
;

432 i‡(
iInfoLí
 <= 0) {

433 
iInfoLí
 =

434 
	`iGë6InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

435 
	`Áû
(
iInfoLí
 <= 0);

437 
iFodoOff
 +
iInfoLí
;

440 i‡(
bFound25_1
 && 
bFound190
) {

441  
found_íd_of_row
;

443 i‡(
bFound25_0
 && !
bFound190
) {

444  
found_nŸ_íd_of_row
;

446 i‡(
bFound24_1
) {

447  
found_a_˚Œ
;

449 i‡(
bFound24_0
) {

450  
found_nŸ_a_˚Œ
;

452  
found_nŸhög
;

453 
	}
}

460 
	$vGë6StyÀInfo
(
iFodo
,

461 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
°yÀ_block_ty≥
 *
pStyÀ
)

463 
iFodoOff
, 
iInfoLí
;

464 
iTmp
, 
iDñ
, 
iAdd
, 
iBef‹e
;

465 
sTmp
;

466 
UCHAR
 
ucTmp
;

468 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pStyÀ
 == NULL);

470 
	`NO_DBG_DEC
(
pStyÀ
->
usI°d
);

472 
iFodoOff
 = 0;

473 
iByãs
 >
iFodoOff
 + 1) {

474 
iInfoLí
 = 0;

475 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

477 
sTmp
 = ()
	`ucGëByã
(

478 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

479 
	`NO_DBG_DEC
(
sTmp
);

482 
pStyÀ
->
ucAlignmít
 = 
	`ucGëByã
(

483 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

486 
iTmp
 = ()
	`ucGëByã
(

487 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

488 
	`DBG_DEC_C
(
iTmp
 < 52, iTmp);

489 i‡(
iTmp
 >= 1) {

490 
pStyÀ
->
ucNFC
 = 
	`ucGëByã
(

491 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

493 i‡(
pStyÀ
->
ucNFC
 !
LIST_BULLETS
 && 
iTmp
 >= 2) {

494 
iBef‹e
 = ()
	`ucGëByã
(

495 
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

497 
iBef‹e
 = 0;

499 i‡(
iTmp
 >= 12) {

500 
pStyÀ
->
usSèπAt
 = 
	`usGëW‹d
(

501 
iFodo
 + 
iFodoOff
 + 12, 
aucGΩ¥l
);

503 i‡(
iTmp
 >
iBef‹e
 + 21) {

504 
pStyÀ
->
usLi°Ch¨
 = (
USHORT
)
	`ucGëByã
(

505 
iFodo
 + 
iFodoOff
 + 
iBef‹e
 + 22,

506 
aucGΩ¥l
);

507 
	`NO_DBG_HEX
(
pStyÀ
->
usLi°Ch¨
);

511 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

512 
pStyÀ
->
ucNumLevñ
 = 
ucTmp
;

513 
pStyÀ
->
bNumPau£
 =

514 
	`eGëNumTy≥
(
ucTmp
Ë=
Àvñ_ty≥_∑u£
;

518 
iTmp
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

519 i‡(
iTmp
 < 2) {

520 
iInfoLí
 = 1;

523 
	`NO_DBG_DEC
(
iTmp
);

524 
iDñ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

525 i‡(
iTmp
 < 2 + 2 * 
iDñ
) {

526 
iInfoLí
 = 1;

529 
	`NO_DBG_DEC
(
iDñ
);

530 
iAdd
 = ()
	`ucGëByã
(

531 
iFodo
 + 
iFodoOff
 + 3 + 2 * 
iDñ
, 
aucGΩ¥l
);

532 i‡(
iTmp
 < 2 + 2 * 
iDñ
 + 2 * 
iAdd
) {

533 
iInfoLí
 = 1;

536 
	`NO_DBG_DEC
(
iAdd
);

539 
pStyÀ
->
sRightIndít
 = ()
	`usGëW‹d
(

540 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

541 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

544 
pStyÀ
->
sLe·Indít
 = ()
	`usGëW‹d
(

545 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

546 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

549 
sTmp
 = ()
	`usGëW‹d
(

550 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

551 
pStyÀ
->
sLe·Indít
 +
sTmp
;

552 i‡(
pStyÀ
->
sLe·Indít
 < 0) {

553 
pStyÀ
->
sLe·Indít
 = 0;

555 
	`NO_DBG_DEC
(
sTmp
);

556 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

559 
pStyÀ
->
sLe·Indít1
 = ()
	`usGëW‹d
(

560 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

561 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít1
);

564 
pStyÀ
->
usBef‹eIndít
 = 
	`usGëW‹d
(

565 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

566 
	`NO_DBG_DEC
(
pStyÀ
->
usBef‹eIndít
);

569 
pStyÀ
->
usA·îIndít
 = 
	`usGëW‹d
(

570 
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

571 
	`NO_DBG_DEC
(
pStyÀ
->
usA·îIndít
);

576 i‡(
iInfoLí
 <= 0) {

577 
iInfoLí
 =

578 
	`iGë6InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

579 
	`Áû
(
iInfoLí
 <= 0);

581 
iFodoOff
 +
iInfoLí
;

583 
	}
}

589 
	$vGë6P≠Info
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

590 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

591 c⁄° 
UCHAR
 *
aucHódî
)

593 
row_block_ty≥
 
tRow
;

594 
°yÀ_block_ty≥
 
tStyÀ
;

595 
USHORT
 *
ausP¨fPage
;

596 
UCHAR
 *
aucBuf„r
;

597 
ULONG
 
ulCh¨Pos
, 
ulCh¨PosFú°
, 
ulCh¨PosLa°
;

598 
ULONG
 
ulBegöP¨fInfo
;

599 
size_t
 
tP¨fInfoLí
, 
tP¨fPageNum
, 
tOff£t
, 
tSize
, 
tLíOld
, 
tLí
;

600 
size_t
 
tIndex
, 
tIndex2
, 
tRun
;

601 
iFodo
, 
iLí
;

602 
row_öfo_íum
 
eRowInfo
;

603 
USHORT
 
usP¨fFú°Page
, 
usCou¡
, 
usI°d
;

604 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

606 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

607 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

608 
	`Áû
(
aulBBD
 =
NULL
);

610 
ulBegöP¨fInfo
 = 
	`ulGëL⁄g
(0xc0, 
aucHódî
);

611 
	`NO_DBG_HEX
(
ulBegöP¨fInfo
);

612 
tP¨fInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xc4, 
aucHódî
);

613 
	`NO_DBG_DEC
(
tP¨fInfoLí
);

614 i‡(
tP¨fInfoLí
 < 4) {

615 
	`DBG_DEC
(
tP¨fInfoLí
);

619 
aucBuf„r
 = 
	`xmÆloc
(
tP¨fInfoLí
);

620 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

621 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

622 
aucBuf„r
, 
ulBegöP¨fInfo
, 
tP¨fInfoLí
)) {

623 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

626 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tP¨fInfoLí
);

628 
tLí
 = (
tP¨fInfoLí
 - 4) / 6;

629 
ausP¨fPage
 = 
	`xˇŒoc
(
tLí
, (
USHORT
));

630 
tIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

631 
tIndex
 < 
tLí
;

632 
tIndex
++, 
tOff£t
 += 2) {

633 
ausP¨fPage
[
tIndex
] = 
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

634 
	`NO_DBG_DEC
(
ausP¨fPage
[
tIndex
]);

636 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

637 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

638 
tP¨fPageNum
 = (
size_t
)
	`usGëW‹d
(0x190, 
aucHódî
);

639 
	`DBG_DEC
(
tP¨fPageNum
);

640 i‡(
tLí
 < 
tP¨fPageNum
) {

642 
tLíOld
 = 
tLí
;

643 
usP¨fFú°Page
 = 
	`usGëW‹d
(0x18c, 
aucHódî
);

644 
	`DBG_DEC
(
usP¨fFú°Page
);

645 
tLí
 +
tP¨fPageNum
 - 1;

646 
tSize
 = 
tLí
 * (
USHORT
);

647 
ausP¨fPage
 = 
	`xªÆloc
◊usP¨fPage, 
tSize
);

649 
usCou¡
 = 
usP¨fFú°Page
 + 1;

650 
tIndex
 = 
tLíOld
;ÅIndex < 
tLí
;ÅIndex++) {

651 
ausP¨fPage
[
tIndex
] = 
usCou¡
;

652 
	`NO_DBG_DEC
(
ausP¨fPage
[
tIndex
]);

653 
usCou¡
++;

657 ()
	`mem£t
(&
tRow
, 0, (tRow));

658 
ulCh¨PosFú°
 = 
CP_INVALID
;

659 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

660 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

661 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

662 
aucF∑ge
,

663 (
ULONG
)
ausP¨fPage
[
tIndex
] * 
BIG_BLOCK_SIZE
,

664 
BIG_BLOCK_SIZE
)) {

667 
tRun
 = (
size_t
)
	`ucGëByã
(0x1ff, 
aucF∑ge
);

668 
	`NO_DBG_DEC
(
tRun
);

669 
tIndex2
 = 0;ÅIndex2 < 
tRun
;ÅIndex2++) {

670 
	`NO_DBG_HEX
(
	`ulGëL⁄g
(
tIndex2
 * 4, 
aucF∑ge
));

671 
iFodo
 = 2 * ()
	`ucGëByã
(

672 (
tRun
 + 1Ë* 4 + 
tIndex2
 * 7, 
aucF∑ge
);

673 i‡(
iFodo
 <= 0) {

677 
iLí
 = 2 * ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

679 
usI°d
 = (
USHORT
)
	`ucGëByã
(
iFodo
 + 1, 
aucF∑ge
);

680 
	`vFûlStyÀFromStyÀshìt
(
usI°d
, &
tStyÀ
);

681 
	`vGë6StyÀInfo
(
iFodo
, 
aucF∑ge
 + 3, 
iLí
 - 3, &
tStyÀ
);

682 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
tIndex2
 * 4, 
aucF∑ge
);

683 
	`NO_DBG_HEX
(
ulCh¨Pos
);

684 
tStyÀ
.
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£tX
(

685 
ulCh¨Pos
, &
tStyÀ
.
eLi°ID
);

686 
	`vAdd2StyÀInfoLi°
(&
tStyÀ
);

688 
eRowInfo
 = 
	`eGë6RowInfo
(
iFodo
,

689 
aucF∑ge
 + 3, 
iLí
 - 3, &
tRow
);

690 
eRowInfo
) {

691 
found_a_˚Œ
:

692 i‡(
ulCh¨PosFú°
 !
CP_INVALID
) {

695 
ulCh¨PosFú°
 = 
	`ulGëL⁄g
(

696 
tIndex2
 * 4, 
aucF∑ge
);

697 
	`NO_DBG_HEX
(
ulCh¨PosFú°
);

698 
tRow
.
ulCh¨PosSèπ
 = 
ulCh¨PosFú°
;

699 
tRow
.
ulFûeOff£tSèπ
 =

700 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨PosFú°
);

701 
	`DBG_HEX_C
(
tRow
.
ulFûeOff£tSèπ
 =
FC_INVALID
,

702 
ulCh¨PosFú°
);

704 
found_íd_of_row
:

705 
ulCh¨PosLa°
 = 
	`ulGëL⁄g
(

706 
tIndex2
 * 4, 
aucF∑ge
);

707 
	`NO_DBG_HEX
(
ulCh¨PosLa°
);

708 
tRow
.
ulCh¨PosEnd
 = 
ulCh¨PosLa°
;

709 
tRow
.
ulFûeOff£tEnd
 =

710 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨PosLa°
);

711 
	`DBG_HEX_C
(
tRow
.
ulFûeOff£tEnd
 =
FC_INVALID
,

712 
ulCh¨PosLa°
);

713 
	`vAdd2RowInfoLi°
(&
tRow
);

714 ()
	`mem£t
(&
tRow
, 0, (tRow));

715 
ulCh¨PosFú°
 = 
CP_INVALID
;

717 
found_nŸhög
:

720 
	`DBG_DEC
(
eRowInfo
);

725 
ausP¨fPage
 = 
	`x‰ì
(ausParfPage);

726 
	}
}

734 
	$vGë6F⁄tInfo
(
iFodo
, 
USHORT
 
usI°d
,

735 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
f⁄t_block_ty≥
 *
pF⁄t
)

737 
lTmp
;

738 
iFodoOff
, 
iInfoLí
;

739 
USHORT
 
usTmp
;

740 
UCHAR
 
ucTmp
;

742 
	`TRACE_MSG
("vGet6FontInfo");

744 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pF⁄t
 == NULL);

746 
iFodoOff
 = 0;

747 
iByãs
 >
iFodoOff
 + 1) {

748 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

750 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

751 i‡(
ucTmp
 == 0) {

752 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_MARKDEL
;

754 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_MARKDEL
;

758 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

759 
	`NO_DBG_DEC
(
usTmp
);

762 
pF⁄t
->
usF⁄tStyÀ
 &
FONT_HIDDEN
;

763 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_DEFAULT
;

766 
	`DBG_MSG
("83: cPlain");

767 
	`vFûlF⁄tFromStyÀshìt
(
usI°d
, 
pF⁄t
);

770 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

771 
ucTmp
) {

773 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_BOLD
;

776 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

781 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_BOLD
;

784 
	`DBG_DEC
(
ucTmp
);

785 
	`DBG_FIXME
();

790 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

791 
ucTmp
) {

793 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_ITALIC
;

796 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_ITALIC
;

801 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_ITALIC
;

804 
	`DBG_DEC
(
ucTmp
);

805 
	`DBG_FIXME
();

810 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

811 
ucTmp
) {

813 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_STRIKE
;

816 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_STRIKE
;

821 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_STRIKE
;

824 
	`DBG_DEC
(
ucTmp
);

825 
	`DBG_FIXME
();

830 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

831 
ucTmp
) {

833 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_SMALL_CAPITALS
;

836 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SMALL_CAPITALS
;

841 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_SMALL_CAPITALS
;

844 
	`DBG_DEC
(
ucTmp
);

845 
	`DBG_FIXME
();

850 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

851 
ucTmp
) {

853 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_CAPITALS
;

856 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_CAPITALS
;

861 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_CAPITALS
;

864 
	`DBG_DEC
(
ucTmp
);

865 
	`DBG_FIXME
();

870 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

871 
ucTmp
) {

873 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_HIDDEN
;

876 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_HIDDEN
;

881 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_HIDDEN
;

884 
	`DBG_DEC
(
ucTmp
);

885 
	`DBG_FIXME
();

890 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

891 i‡(
usTmp
 <(
USHORT
)
UCHAR_MAX
) {

892 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usTmp
;

894 
	`DBG_DEC
(
usTmp
);

895 
	`DBG_FIXME
();

896 
pF⁄t
->
ucF⁄tNumbî
 = 0;

900 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

901 i‡(
ucTmp
 == 0 || ucTmp == 5) {

902 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_UNDERLINE
;

904 
	`NO_DBG_MSG
("UnderlineÅext");

905 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

906 i‡(
ucTmp
 == 6) {

907 
	`DBG_MSG
("BoldÅext");

908 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

913 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

914 
	`DBG_DEC
(
ucTmp
);

915 i‡(
ucTmp
 != 0) {

916 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
ucTmp
;

918 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

919 
	`DBG_DEC
(
ucTmp
);

922 
pF⁄t
->
ucF⁄tCﬁ‹
 =

923 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

926 
pF⁄t
->
usF⁄tSize
 =

927 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

930 
	`DBG_MSG
("100: sprmCHpsInc");

931 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

932 
	`DBG_DEC
(
ucTmp
);

935 
	`DBG_MSG
("103: sprmCMajority");

938 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

939 
ucTmp
 &= 0x07;

940 i‡(
ucTmp
 == 1) {

941 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUPERSCRIPT
;

942 
	`NO_DBG_MSG
("Superscript");

943 } i‡(
ucTmp
 == 2) {

944 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUBSCRIPT
;

945 
	`NO_DBG_MSG
("Subscript");

949 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

950 
lTmp
 = ()
pF⁄t
->
usF⁄tSize
 + ()
usTmp
;

951 i‡(
lTmp
 < 8) {

952 
pF⁄t
->
usF⁄tSize
 = 8;

953 } i‡(
lTmp
 > 32766) {

954 
pF⁄t
->
usF⁄tSize
 = 32766;

956 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
lTmp
;

960 
	`DBG_MSG
("108: sprmCMajority50");

963 
	`DBG_MSG
("109: sprmCHpsMul");

964 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

965 
	`DBG_DEC
(
usTmp
);

970 
iInfoLí
 = 
	`iGë6InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

971 
	`Áû
(
iInfoLí
 <= 0);

972 
iFodoOff
 +
iInfoLí
;

974 
	}
}

981 
BOOL


982 
	$bGë6PicInfo
(
iFodo
,

983 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
pi˘uª_block_ty≥
 *
pPi˘uª
)

985 
iFodoOff
, 
iInfoLí
;

986 
BOOL
 
bFound
;

987 
UCHAR
 
ucTmp
;

989 
	`TRACE_MSG
("vGet6PicInfo");

991 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pPi˘uª
 == NULL);

993 
iFodoOff
 = 0;

994 
bFound
 = 
FALSE
;

995 
iByãs
 >
iFodoOff
 + 1) {

996 
	`ucGëByã
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

998 
pPi˘uª
->
ulPi˘uªOff£t
 = 
	`ulGëL⁄g
(

999 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1000 
bFound
 = 
TRUE
;

1004 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

1005 i‡(
ucTmp
 == 0x01) {

1007  
FALSE
;

1009 
	`DBG_DEC_C
(
ucTmp
 != 0, ucTmp);

1013 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 1, 
aucGΩ¥l
);

1014 i‡(
ucTmp
 == 0x01) {

1016  
FALSE
;

1018 
	`DBG_DEC_C
(
ucTmp
 != 0, ucTmp);

1023 
iInfoLí
 = 
	`iGë6InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

1024 
	`Áû
(
iInfoLí
 <= 0);

1025 
iFodoOff
 +
iInfoLí
;

1027  
bFound
;

1028 
	}
}

1034 
	$vGë6ChrInfo
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

1035 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
, c⁄° 
UCHAR
 *
aucHódî
)

1037 
f⁄t_block_ty≥
 
tF⁄t
;

1038 
pi˘uª_block_ty≥
 
tPi˘uª
;

1039 
USHORT
 *
ausCh¨Page
;

1040 
UCHAR
 *
aucBuf„r
;

1041 
ULONG
 
ulFûeOff£t
, 
ulCh¨Pos
, 
ulBegöCh¨Info
;

1042 
size_t
 
tCh¨InfoLí
, 
tOff£t
, 
tSize
, 
tLíOld
, 
tLí
, 
tCh¨PageNum
;

1043 
size_t
 
tIndex
, 
tIndex2
, 
tRun
;

1044 
iFodo
, 
iLí
;

1045 
USHORT
 
usCh¨Fú°Page
, 
usCou¡
, 
usI°d
;

1046 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

1048 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

1049 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

1050 
	`Áû
(
aulBBD
 =
NULL
);

1052 
ulBegöCh¨Info
 = 
	`ulGëL⁄g
(0xb8, 
aucHódî
);

1053 
	`NO_DBG_HEX
(
lBegöCh¨Info
);

1054 
tCh¨InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xbc, 
aucHódî
);

1055 
	`NO_DBG_DEC
(
tCh¨InfoLí
);

1056 i‡(
tCh¨InfoLí
 < 4) {

1057 
	`DBG_DEC
(
tCh¨InfoLí
);

1061 
aucBuf„r
 = 
	`xmÆloc
(
tCh¨InfoLí
);

1062 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

1063 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

1064 
aucBuf„r
, 
ulBegöCh¨Info
, 
tCh¨InfoLí
)) {

1065 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

1069 
tLí
 = (
tCh¨InfoLí
 - 4) / 6;

1070 
ausCh¨Page
 = 
	`xˇŒoc
(
tLí
, (
USHORT
));

1071 
tIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

1072 
tIndex
 < 
tLí
;

1073 
tIndex
++, 
tOff£t
 += 2) {

1074 
ausCh¨Page
[
tIndex
] = 
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

1075 
	`NO_DBG_DEC
(
ausCh¨Page
[
tIndex
]);

1077 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

1078 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

1079 
tCh¨PageNum
 = (
size_t
)
	`usGëW‹d
(0x18e, 
aucHódî
);

1080 
	`DBG_DEC
(
tCh¨PageNum
);

1081 i‡(
tLí
 < 
tCh¨PageNum
) {

1083 
tLíOld
 = 
tLí
;

1084 
usCh¨Fú°Page
 = 
	`usGëW‹d
(0x18a, 
aucHódî
);

1085 
	`DBG_DEC
(
usCh¨Fú°Page
);

1086 
tLí
 +
tCh¨PageNum
 - 1;

1087 
tSize
 = 
tLí
 * (
USHORT
);

1088 
ausCh¨Page
 = 
	`xªÆloc
◊usCh¨Page, 
tSize
);

1090 
usCou¡
 = 
usCh¨Fú°Page
 + 1;

1091 
tIndex
 = 
tLíOld
;ÅIndex < 
tLí
;ÅIndex++) {

1092 
ausCh¨Page
[
tIndex
] = 
usCou¡
;

1093 
	`NO_DBG_DEC
(
ausCh¨Page
[
tIndex
]);

1094 
usCou¡
++;

1098 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

1099 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

1100 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

1101 
aucF∑ge
,

1102 (
ULONG
)
ausCh¨Page
[
tIndex
] * 
BIG_BLOCK_SIZE
,

1103 
BIG_BLOCK_SIZE
)) {

1106 
tRun
 = (
size_t
)
	`ucGëByã
(0x1ff, 
aucF∑ge
);

1107 
	`NO_DBG_DEC
(
tRun
);

1108 
tIndex2
 = 0;ÅIndex2 < 
tRun
;ÅIndex2++) {

1109 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
tIndex2
 * 4, 
aucF∑ge
);

1110 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
);

1111 
iFodo
 = 2 * ()
	`ucGëByã
(

1112 (
tRun
 + 1Ë* 4 + 
tIndex2
, 
aucF∑ge
);

1114 
iLí
 = ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

1116 
usI°d
 = 
	`usGëI°d
(
ulFûeOff£t
);

1117 
	`vFûlF⁄tFromStyÀshìt
(
usI°d
, &
tF⁄t
);

1118 i‡(
iFodo
 != 0) {

1119 
	`vGë6F⁄tInfo
(
iFodo
, 
usI°d
,

1120 
aucF∑ge
 + 1, 
iLí
 - 1, &
tF⁄t
);

1122 
tF⁄t
.
ulFûeOff£t
 = ulFileOffset;

1123 
	`vAdd2F⁄tInfoLi°
(&
tF⁄t
);

1125 i‡(
iFodo
 <= 0) {

1129 ()
	`mem£t
(&
tPi˘uª
, 0, (tPicture));

1130 i‡(
	`bGë6PicInfo
(
iFodo
, 
aucF∑ge
 + 1,

1131 
iLí
 - 1, &
tPi˘uª
)) {

1132 
tPi˘uª
.
ulFûeOff£t
 = ulFileOffset;

1133 
tPi˘uª
.
ulFûeOff£tPi˘uª
 =

1134 
	`ulD©aPos2FûeOff£t
(

1135 
tPi˘uª
.
ulPi˘uªOff£t
);

1136 
	`vAdd2Pi˘InfoLi°
(&
tPi˘uª
);

1140 
ausCh¨Page
 = 
	`x‰ì
(ausCharPage);

1141 
	}
}

	@prop8.c

14 
	~<°dlib.h
>

15 
	~<°rög.h
>

16 
	~"™tiw‹d.h
"

18 
	#DEFAULT_LISTCHAR
 0x002ê

	)

25 
	$iGë8InfoLígth
(
iByãNbr
, c⁄° 
UCHAR
 *
aucGΩ¥l
)

27 
iTmp
, 
iDñ
, 
iAdd
;

28 
USHORT
 
usOpCode
;

30 
usOpCode
 = 
	`usGëW‹d
(
iByãNbr
, 
aucGΩ¥l
);

32 
usOpCode
 & 0xe000) {

42 
iTmp
 = ()
	`ucGëByã
(
iByãNbr
 + 2, 
aucGΩ¥l
);

43 i‡(
usOpCode
 =0xc615 && 
iTmp
 == 255) {

44 
iDñ
 = ()
	`ucGëByã
(
iByãNbr
 + 3, 
aucGΩ¥l
);

45 
iAdd
 = ()
	`ucGëByã
(

46 
iByãNbr
 + 4 + 
iDñ
 * 4, 
aucGΩ¥l
);

47 
iTmp
 = 2 + 
iDñ
 * 4 + 
iAdd
 * 3;

49  3 + 
iTmp
;

51 
	`DBG_HEX
(
usOpCode
);

52 
	`DBG_FIXME
();

55 
	}
}

62 
UCHAR
 *

63 
	$aucFûlInfoBuf„r
(
FILE
 *
pFûe
, c⁄° 
µs_ty≥
 *
pTabÀ
,

64 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

65 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

66 
ULONG
 
ulBegöInfo
, 
size_t
 
tInfoLí
)

68 c⁄° 
ULONG
 *
aulBlockDïŸ
;

69 
UCHAR
 *
aucBuf„r
;

70 
size_t
 
tBlockDïŸLí
, 
tBlockSize
;

72 
	`Áû
(
pFûe
 =
NULL
 || 
pTabÀ
 == NULL);

73 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

74 
	`Áû
(
tInfoLí
 == 0);

76 
	`NO_DBG_DEC
(
pTabÀ
->
ulSB
);

77 
	`NO_DBG_HEX
(
pTabÀ
->
ulSize
);

78 i‡(
pTabÀ
->
ulSize
 == 0) {

79 
	`DBG_MSG
("No information");

80  
NULL
;

83 i‡(
pTabÀ
->
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

85 
aulBlockDïŸ
 = 
aulSBD
;

86 
tBlockDïŸLí
 = 
tSBDLí
;

87 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

90 
aulBlockDïŸ
 = 
aulBBD
;

91 
tBlockDïŸLí
 = 
tBBDLí
;

92 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

94 
aucBuf„r
 = 
	`xmÆloc
(
tInfoLí
);

95 i‡(!
	`bRódBuf„r
(
pFûe
, 
pTabÀ
->
ulSB
,

96 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

97 
aucBuf„r
, 
ulBegöInfo
, 
tInfoLí
)) {

98 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

99  
NULL
;

101  
aucBuf„r
;

102 
	}
}

108 
	$vGë8D›Info
(
FILE
 *
pFûe
, c⁄° 
µs_ty≥
 *
pTabÀ
,

109 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

110 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

111 c⁄° 
UCHAR
 *
aucHódî
)

113 
documít_block_ty≥
 
tDocumít
;

114 
UCHAR
 *
aucBuf„r
;

115 
ULONG
 
ulBegöDo˝Info
, 
ulTmp
;

116 
size_t
 
tDo˝InfoLí
;

117 
USHORT
 
usTmp
;

119 
	`Áû
(
pFûe
 =
NULL
 || 
pTabÀ
 =NULL || 
aucHódî
 == NULL);

120 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

122 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x192, 
aucHódî
);

123 
	`NO_DBG_HEX
(
ulBegöSe˘Info
);

124 
tDo˝InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x196, 
aucHódî
);

125 
	`NO_DBG_DEC
(
tSe˘InfoLí
);

126 i‡(
tDo˝InfoLí
 < 28) {

127 
	`DBG_MSG
("No Document information");

131 
aucBuf„r
 = 
	`aucFûlInfoBuf„r
(
pFûe
, 
pTabÀ
,

132 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

133 
ulBegöDo˝Info
, 
tDo˝InfoLí
);

134 i‡(
aucBuf„r
 =
NULL
) {

138 
usTmp
 = 
	`usGëW‹d
(0x00, 
aucBuf„r
);

139 
tDocumít
.
ucHdrFåS≥cifiˇti⁄
 = (
UCHAR
)(
usTmp
 >> 8);

140 
tDocumít
.
usDeÁu…TabWidth
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

141 
ulTmp
 = 
	`ulGëL⁄g
(0x14, 
aucBuf„r
);

142 
tDocumít
.
tCª©eD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

143 
ulTmp
 = 
	`ulGëL⁄g
(0x18, 
aucBuf„r
);

144 
tDocumít
.
tRevi£dD©e
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

145 
	`vCª©eDocumítInfoLi°
(&
tDocumít
);

147 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

148 
	}
}

155 
	$vGë8Se˘i⁄Info
(c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
,

156 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

158 
UINT
 
uiIndex
;

159 
iFodoOff
, 
iInfoLí
, 
iSize
, 
iTmp
;

160 
USHORT
 
usCcﬁ
;

161 
UCHAR
 
ucTmp
;

163 
	`Áû
(
aucGΩ¥l
 =
NULL
 || 
pSe˘i⁄
 == NULL);

165 
iFodoOff
 = 0;

166 
tByãs
 >(
size_t
)
iFodoOff
 + 2) {

167 
iInfoLí
 = 0;

168 
	`usGëW‹d
(
iFodoOff
, 
aucGΩ¥l
)) {

170 
ucTmp
 = 
	`ucGëByã
(
iFodoOff
 + 2, 
aucGΩ¥l
);

171 
	`DBG_DEC
(
ucTmp
);

172 
pSe˘i⁄
->
bNewPage
 = 
ucTmp
 != 0 && ucTmp != 1;

175 
pSe˘i⁄
->
ucHdrFåS≥cifiˇti⁄
 =

176 
	`ucGëByã
(
iFodoOff
 + 2, 
aucGΩ¥l
);

179 
usCcﬁ
 = 1 + 
	`usGëW‹d
(
iFodoOff
 + 2, 
aucGΩ¥l
);

180 
	`DBG_DEC
(
usCcﬁ
);

183 
iSize
 = ()
	`ucGëByã
(
iFodoOff
 + 2, 
aucGΩ¥l
);

184 
	`DBG_DEC_C
(
iSize
 != 212, iSize);

185 
uiIndex
 = 0, 
iTmp
 = 
iFodoOff
 + 3;

186 
uiIndex
 < 9 && 
iTmp
 < 
iFodoOff
 + 3 + 
iSize
 - 15;

187 
uiIndex
++, 
iTmp
 += 16) {

188 
pSe˘i⁄
->
aucNFC
[
uiIndex
] =

189 
	`ucGëByã
(
iTmp
, 
aucGΩ¥l
);

190 
	`DBG_DEC
(
pSe˘i⁄
->
aucNFC
[
uiIndex
]);

191 
ucTmp
 = 
	`ucGëByã
(
iTmp
 + 3, 
aucGΩ¥l
);

192 
	`DBG_HEX
(
ucTmp
);

193 i‡((
ucTmp
 & 
	`BIT
(2)) != 0) {

194 
pSe˘i⁄
->
usNìdPªvLvl
 |=

195 (
USHORT
)
	`BIT
(
uiIndex
);

197 i‡((
ucTmp
 & 
	`BIT
(3)) != 0) {

198 
pSe˘i⁄
->
usH™gögIndít
 |=

199 (
USHORT
)
	`BIT
(
uiIndex
);

202 
	`DBG_HEX
(
pSe˘i⁄
->
usNìdPªvLvl
);

203 
	`DBG_HEX
(
pSe˘i⁄
->
usH™gögIndít
);

208 i‡(
iInfoLí
 <= 0) {

209 
iInfoLí
 = 
	`iGë8InfoLígth
(
iFodoOff
, 
aucGΩ¥l
);

210 
	`Áû
(
iInfoLí
 <= 0);

212 
iFodoOff
 +
iInfoLí
;

214 
	}
}

220 
	$vGë8SïInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

221 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

222 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

223 c⁄° 
UCHAR
 *
aucHódî
)

225 
£˘i⁄_block_ty≥
 
tSe˘i⁄
;

226 
ULONG
 *
aulSe˘Page
, *
aulCh¨Pos
;

227 
UCHAR
 *
aucBuf„r
, *
aucF∑ge
;

228 
ULONG
 
ulBegöOfText
, 
ulTextOff£t
, 
ulBegöSe˘Info
;

229 
size_t
 
tSe˘InfoLí
, 
tIndex
, 
tOff£t
, 
tLí
, 
tByãs
;

230 
UCHAR
 
aucTmp
[2];

232 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

233 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

235 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

236 
	`NO_DBG_HEX
(
ulBegöOfText
);

237 
ulBegöSe˘Info
 = 
	`ulGëL⁄g
(0xˇ, 
aucHódî
);

238 
	`NO_DBG_HEX
(
ulBegöSe˘Info
);

239 
tSe˘InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x˚, 
aucHódî
);

240 
	`NO_DBG_DEC
(
tSe˘InfoLí
);

241 i‡(
tSe˘InfoLí
 < 4) {

242 
	`DBG_DEC
(
tSe˘InfoLí
);

246 
aucBuf„r
 = 
	`aucFûlInfoBuf„r
(
pFûe
, &
pPPS
->
tTabÀ
,

247 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

248 
ulBegöSe˘Info
, 
tSe˘InfoLí
);

249 i‡(
aucBuf„r
 =
NULL
) {

252 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tSe˘InfoLí
);

255 
tLí
 = (
tSe˘InfoLí
 - 4) / 16;

257 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

258 
tIndex
 = 0, 
tOff£t
 = 0;

259 
tIndex
 < 
tLí
;

260 
tIndex
++, 
tOff£t
 += 4) {

261 
ulTextOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

262 
	`NO_DBG_HEX
(
ulTextOff£t
);

263 
aulCh¨Pos
[
tIndex
] = 
ulBegöOfText
 + 
ulTextOff£t
;

264 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

267 
aulSe˘Page
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

268 
tIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

269 
tIndex
 < 
tLí
;

270 
tIndex
++, 
tOff£t
 += 12) {

271 
aulSe˘Page
[
tIndex
] = 
	`ulGëL⁄g
(
tOff£t
 + 2, 
aucBuf„r
);

272 
	`NO_DBG_HEX
(
aulSe˘Page
[
tIndex
]);

274 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

277 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

278 i‡(
aulSe˘Page
[
tIndex
] =
FC_INVALID
) {

279 
	`vDeÁu…2Se˘i⁄InfoLi°
(
aulCh¨Pos
[
tIndex
]);

283 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

284 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

285 
aucTmp
, 
aulSe˘Page
[
tIndex
], 2)) {

288 
tByãs
 = 2 + (
size_t
)
	`usGëW‹d
(0, 
aucTmp
);

289 
	`NO_DBG_DEC
(
tByãs
);

291 
aucF∑ge
 = 
	`xmÆloc
(
tByãs
);

292 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

293 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

294 
aucF∑ge
, 
aulSe˘Page
[
tIndex
], 
tByãs
)) {

295 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

298 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
tByãs
);

300 
	`vGëDeÁu…Se˘i⁄
(&
tSe˘i⁄
);

301 
	`vGë8Se˘i⁄Info
(
aucF∑ge
 + 2, 
tByãs
 - 2, &
tSe˘i⁄
);

302 
	`vAdd2Se˘i⁄InfoLi°
(&
tSe˘i⁄
, 
aulCh¨Pos
[
tIndex
]);

303 
aucF∑ge
 = 
	`x‰ì
(aucFpage);

305 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

306 
aulSe˘Page
 = 
	`x‰ì
(aulSectPage);

307 
	}
}

313 
	$vGë8HdrFåInfo
(
FILE
 *
pFûe
, c⁄° 
µs_ty≥
 *
pTabÀ
,

314 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

315 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

316 c⁄° 
UCHAR
 *
aucHódî
)

318 
ULONG
 *
aulCh¨Pos
;

319 
UCHAR
 *
aucBuf„r
;

320 
ULONG
 
ulHdrFåOff£t
, 
ulBegöHdrFåInfo
;

321 
size_t
 
tHdrFåInfoLí
, 
tIndex
, 
tOff£t
, 
tLí
;

323 
	`Áû
(
pFûe
 =
NULL
 || 
pTabÀ
 =NULL || 
aucHódî
 == NULL);

324 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

326 
ulBegöHdrFåInfo
 = 
	`ulGëL⁄g
(0xf2, 
aucHódî
);

327 
	`NO_DBG_HEX
(
ulBegöHdrFåInfo
);

328 
tHdrFåInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xf6, 
aucHódî
);

329 
	`NO_DBG_DEC
(
tHdrFåInfoLí
);

330 i‡(
tHdrFåInfoLí
 < 8) {

331 
	`DBG_DEC_C
(
tHdrFåInfoLí
 != 0,ÅHdrFtrInfoLen);

335 
aucBuf„r
 = 
	`aucFûlInfoBuf„r
(
pFûe
, 
pTabÀ
,

336 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

337 
ulBegöHdrFåInfo
, 
tHdrFåInfoLí
);

338 i‡(
aucBuf„r
 =
NULL
) {

341 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tHdrFåInfoLí
);

343 
tLí
 = 
tHdrFåInfoLí
 / 4 - 1;

344 
	`DBG_DEC_C
(
tLí
 % 12 != 1 &&ÅLen % 12 != 7,ÅLen);

346 
aulCh¨Pos
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

347 
tIndex
 = 0, 
tOff£t
 = 0;

348 
tIndex
 < 
tLí
;

349 
tIndex
++, 
tOff£t
 += 4) {

350 
ulHdrFåOff£t
 = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

351 
	`NO_DBG_HEX
(
ulHdrFåOff£t
);

352 
aulCh¨Pos
[
tIndex
] = 
	`ulHdrFåOff£t2Ch¨Pos
(
ulHdrFåOff£t
);

353 
	`NO_DBG_HEX
(
aulCh¨Pos
[
tIndex
]);

355 
	`vCª©8HdrFåInfoLi°
(
aulCh¨Pos
, 
tLí
);

357 
aulCh¨Pos
 = 
	`x‰ì
(aulCharPos);

358 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

359 
	}
}

364 
row_öfo_íum


365 
	$eGë8RowInfo
(
iFodo
,

366 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
row_block_ty≥
 *
pRow
)

368 
iFodoOff
, 
iInfoLí
;

369 
iIndex
, 
iSize
, 
iCﬁ
;

370 
iPosCuº
, 
iPosPªv
;

371 
USHORT
 
usTmp
;

372 
BOOL
 
bFound2416_0
, 
bFound2416_1
, 
bFound2417_0
, 
bFound2417_1
;

373 
BOOL
 
bFound244b_0
, 
bFound244b_1
, 
bFound244c_0
, 
bFound244c_1
;

374 
BOOL
 
bFoundd608
;

376 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pRow
 == NULL);

378 
iFodoOff
 = 0;

379 
bFound2416_0
 = 
FALSE
;

380 
bFound2416_1
 = 
FALSE
;

381 
bFound2417_0
 = 
FALSE
;

382 
bFound2417_1
 = 
FALSE
;

383 
bFound244b_0
 = 
FALSE
;

384 
bFound244b_1
 = 
FALSE
;

385 
bFound244c_0
 = 
FALSE
;

386 
bFound244c_1
 = 
FALSE
;

387 
bFoundd608
 = 
FALSE
;

388 
iByãs
 >
iFodoOff
 + 2) {

389 
iInfoLí
 = 0;

390 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

392 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
))) {

393 
bFound2416_1
 = 
TRUE
;

395 
bFound2416_0
 = 
TRUE
;

399 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
))) {

400 
bFound2417_1
 = 
TRUE
;

402 
bFound2417_0
 = 
TRUE
;

406 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
))) {

407 
bFound244b_1
 = 
TRUE
;

409 
bFound244b_0
 = 
TRUE
;

413 i‡(
	`odd
(
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
))) {

414 
bFound244c_1
 = 
TRUE
;

416 
bFound244c_0
 = 
TRUE
;

420 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

421 
usTmp
 &= 0xff00;

422 
	`NO_DBG_DEC
(
usTmp
 >> 8);

423 i‡(
usTmp
 == 0) {

424 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_TOP
;

426 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_TOP
;

430 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

431 
usTmp
 &= 0xff00;

432 
	`NO_DBG_DEC
(
usTmp
 >> 8);

433 i‡(
usTmp
 == 0) {

434 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_LEFT
;

436 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_LEFT
;

440 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

441 
usTmp
 &= 0xff00;

442 
	`NO_DBG_DEC
(
usTmp
 >> 8);

443 i‡(
usTmp
 == 0) {

444 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_BOTTOM
;

446 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_BOTTOM
;

450 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

451 
usTmp
 &= 0xff00;

452 
	`NO_DBG_DEC
(
usTmp
 >> 8);

453 i‡(
usTmp
 == 0) {

454 
pRow
->
ucB‹dîInfo
 &~
TABLE_BORDER_RIGHT
;

456 
pRow
->
ucB‹dîInfo
 |
TABLE_BORDER_RIGHT
;

460 
	`DBG_MSG
("0xd606: sprmTDefTable10");

461 
iSize
 = ()
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

462 
	`DBG_DEC
(
iSize
);

465 
iSize
 = ()
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

466 i‡(
iSize
 < 6 || 
iByãs
 < 
iFodoOff
 + 8) {

467 
	`DBG_DEC
(
iSize
);

468 
	`DBG_DEC
(
iFodoOff
);

469 
iInfoLí
 = 2;

472 
iCﬁ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 4, 
aucGΩ¥l
);

473 i‡(
iCﬁ
 < 1 ||

474 
iByãs
 < 
iFodoOff
 + 4 + (
iCﬁ
 + 1) * 2) {

475 
	`DBG_DEC
(
iCﬁ
);

476 
	`DBG_DEC
(
iFodoOff
);

477 
iInfoLí
 = 2;

480 i‡(
iCﬁ
 >()
	`ñemítsof
(
pRow
->
asCﬁumnWidth
)) {

481 
	`DBG_DEC
(
iCﬁ
);

482 
	`wîr
(1, "TheÇumber of columns is corrupt");

484 
pRow
->
ucNumbîOfCﬁumns
 = (
UCHAR
)
iCﬁ
;

485 
iPosPªv
 = ()()
	`usGëW‹d
(

486 
iFodo
 + 
iFodoOff
 + 5,

487 
aucGΩ¥l
);

488 
iIndex
 = 0; iIndex < 
iCﬁ
; iIndex++) {

489 
iPosCuº
 = ()()
	`usGëW‹d
(

490 
iFodo
 + 
iFodoOff
 + 7 + 
iIndex
 * 2,

491 
aucGΩ¥l
);

492 
pRow
->
asCﬁumnWidth
[
iIndex
] =

493 ()(
iPosCuº
 - 
iPosPªv
);

494 
iPosPªv
 = 
iPosCuº
;

496 
bFoundd608
 = 
TRUE
;

501 i‡(
iInfoLí
 <= 0) {

502 
iInfoLí
 =

503 
	`iGë8InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

504 
	`Áû
(
iInfoLí
 <= 0);

506 
iFodoOff
 +
iInfoLí
;

509 i‡(
bFound2417_1
 && 
bFoundd608
) {

510  
found_íd_of_row
;

512 i‡(
bFound2417_0
 && !
bFoundd608
) {

513  
found_nŸ_íd_of_row
;

515 i‡(
bFound2416_1
 || 
bFound244b_1
) {

516  
found_a_˚Œ
;

518 i‡(
bFound2416_0
 || 
bFound244b_0
) {

519  
found_nŸ_a_˚Œ
;

521  
found_nŸhög
;

522 
	}
}

529 
	$vGë8StyÀInfo
(
iFodo
,

530 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
°yÀ_block_ty≥
 *
pStyÀ
)

532 
li°_block_ty≥
 
tLi°6
;

533 c⁄° 
li°_block_ty≥
 *
pLi°
;

534 
iFodoOff
, 
iInfoLí
;

535 
iTmp
, 
iDñ
, 
iAdd
, 
iBef‹e
;

536 
USHORT
 
usOpCode
, 
usTmp
;

537 
sTmp
;

539 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pStyÀ
 == NULL);

541 
	`NO_DBG_DEC_C
(
pStyÀ
->
usLi°Index
 !0,ÖStyÀ->
usI°d
);

542 
	`NO_DBG_DEC_C
(
pStyÀ
->
usLi°Index
 != 0,ÖStyle->usListIndex);

544 ()
	`mem£t
(&
tLi°6
, 0, (tList6));

546 
iFodoOff
 = 0;

547 
iByãs
 >
iFodoOff
 + 2) {

548 
iInfoLí
 = 0;

549 
usOpCode
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

550 
usOpCode
) {

552 
pStyÀ
->
ucAlignmít
 = 
	`ucGëByã
(

553 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

556 
pStyÀ
->
ucLi°Levñ
 =

557 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

558 
	`NO_DBG_DEC
(
pStyÀ
->
ucLi°Levñ
);

559 
pStyÀ
->
ucNumLevñ
 =ÖStyÀ->
ucLi°Levñ
;

562 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

563 
	`NO_DBG_DEC
(
usTmp
);

566 
pStyÀ
->
usLi°Index
 =

567 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

568 
	`NO_DBG_DEC
(
pStyÀ
->
usLi°Index
);

571 
sTmp
 = ()
	`usGëW‹d
(

572 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

573 
pStyÀ
->
sLe·Indít
 +
sTmp
;

574 i‡(
pStyÀ
->
sLe·Indít
 < 0) {

575 
pStyÀ
->
sLe·Indít
 = 0;

577 
	`DBG_DEC
(
sTmp
);

578 
	`DBG_DEC
(
pStyÀ
->
sLe·Indít
);

582 
iTmp
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

583 i‡(
iTmp
 < 2) {

584 
iInfoLí
 = 1;

587 
	`NO_DBG_DEC
(
iTmp
);

588 
iDñ
 = ()
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

589 i‡(
iTmp
 < 2 + 2 * 
iDñ
) {

590 
iInfoLí
 = 1;

593 
	`NO_DBG_DEC
(
iDñ
);

594 
iAdd
 = ()
	`ucGëByã
(

595 
iFodo
 + 
iFodoOff
 + 4 + 2 * 
iDñ
, 
aucGΩ¥l
);

596 i‡(
iTmp
 < 2 + 2 * 
iDñ
 + 2 * 
iAdd
) {

597 
iInfoLí
 = 1;

600 
	`NO_DBG_DEC
(
iAdd
);

603 
pStyÀ
->
sRightIndít
 = ()
	`usGëW‹d
(

604 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

605 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

608 
pStyÀ
->
sLe·Indít
 = ()
	`usGëW‹d
(

609 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

610 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

613 
pStyÀ
->
sLe·Indít1
 = ()
	`usGëW‹d
(

614 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

615 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít1
);

618 
pStyÀ
->
usBef‹eIndít
 = 
	`usGëW‹d
(

619 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

620 
	`NO_DBG_DEC
(
pStyÀ
->
usBef‹eIndít
);

623 
pStyÀ
->
usA·îIndít
 = 
	`usGëW‹d
(

624 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

625 
	`NO_DBG_DEC
(
pStyÀ
->
usA·îIndít
);

628 
iTmp
 = ()
	`ucGëByã
(

629 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

630 
	`DBG_DEC_C
(
iTmp
 < 84, iTmp);

631 i‡(
iTmp
 >= 1) {

632 
tLi°6
.
ucNFC
 = 
	`ucGëByã
(

633 
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

635 i‡(
tLi°6
.
ucNFC
 !
LIST_BULLETS
 && 
iTmp
 >= 2) {

636 
iBef‹e
 = ()
	`ucGëByã
(

637 
iFodo
 + 
iFodoOff
 + 4, 
aucGΩ¥l
);

639 
iBef‹e
 = 0;

641 i‡(
iTmp
 >= 12) {

642 
tLi°6
.
ulSèπAt
 = (
ULONG
)
	`usGëW‹d
(

643 
iFodo
 + 
iFodoOff
 + 13, 
aucGΩ¥l
);

645 i‡(
iTmp
 >
iBef‹e
 + 22) {

646 
tLi°6
.
usLi°Ch¨
 = 
	`usGëW‹d
(

647 
iFodo
 + 
iFodoOff
 + 
iBef‹e
 + 23,

648 
aucGΩ¥l
);

649 
	`DBG_HEX
(
tLi°6
.
usLi°Ch¨
);

653 
	`NO_DBG_HEX
(
usOpCode
);

656 i‡(
iInfoLí
 <= 0) {

657 
iInfoLí
 =

658 
	`iGë8InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

659 
	`Áû
(
iInfoLí
 <= 0);

661 
iFodoOff
 +
iInfoLí
;

664 i‡(
pStyÀ
->
usLi°Index
 == 2047) {

666 
pStyÀ
->
usSèπAt
 = (
USHORT
)
tLi°6
.
ulSèπAt
;

667 
pStyÀ
->
usLi°Ch¨
 = 
tLi°6
.usListChar;

668 
pStyÀ
->
ucNFC
 = 
tLi°6
.ucNFC;

671 
pLi°
 = 
	`pGëLi°Info
(
pStyÀ
->
usLi°Index
,ÖStyÀ->
ucLi°Levñ
);

672 i‡(
pLi°
 !
NULL
) {

673 
pStyÀ
->
bNoRe°¨t
 = 
pLi°
->bNoRestart;

674 
	`Áû
(
pLi°
->
ulSèπAt
 > (
ULONG
)
USHRT_MAX
);

675 
pStyÀ
->
usSèπAt
 = (
USHORT
)
pLi°
->
ulSèπAt
;

676 
pStyÀ
->
usLi°Ch¨
 = 
pLi°
->usListChar;

677 
pStyÀ
->
ucNFC
 = 
pLi°
->ucNFC;

678 i‡(
pStyÀ
->
sLe·Indít
 <= 0) {

679 
pStyÀ
->
sLe·Indít
 = 
pLi°
->sLeftIndent;

683 
	}
}

691 
	$sGëLe·Indít
(c⁄° 
UCHAR
 *
aucGΩ¥l
, 
size_t
 
tByãs
)

693 
iOff£t
, 
iInfoLí
;

694 
USHORT
 
usOpCode
, 
usTmp
;

696 
	`Áû
(
aucGΩ¥l
 =
NULL
);

698 
iOff£t
 = 0;

699 
tByãs
 >(
size_t
)
iOff£t
 + 4) {

700 
usOpCode
 = 
	`usGëW‹d
(
iOff£t
, 
aucGΩ¥l
);

701 i‡(
usOpCode
 == 0x840f) {

702 
usTmp
 = 
	`usGëW‹d
(
iOff£t
 + 2, 
aucGΩ¥l
);

703 i‡(
usTmp
 <= 0x7fff) {

704 
	`NO_DBG_DEC
(
usTmp
);

705  ()
usTmp
;

708 
iInfoLí
 = 
	`iGë8InfoLígth
(
iOff£t
, 
aucGΩ¥l
);

709 
	`Áû
(
iInfoLí
 <= 0);

710 
iOff£t
 +
iInfoLí
;

713 
	}
}

719 
	$vGë8L°Info
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

720 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

721 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

722 c⁄° 
UCHAR
 *
aucHódî
)

724 
li°_block_ty≥
 
tLi°
;

725 c⁄° 
ULONG
 *
aulBlockDïŸ
;

726 
UCHAR
 *
aucLfoInfo
, *
aucL°fInfo
, *
aucP≠x
, *
aucXSåög
;

727 
ULONG
 
ulBegöLfoInfo
, 
ulBegöL°fInfo
, 
ulBegöLvlfInfo
;

728 
ULONG
 
ulLi°ID
, 
ulSèπ
;

729 
size_t
 
tBlockDïŸLí
, 
tBlockSize
;

730 
size_t
 
tLfoInfoLí
, 
tL°fInfoLí
, 
tP≠xLí
, 
tX°Lí
, 
tOff
;

731 
size_t
 
tL°fRec‹ds
, 
tSèπ
, 
tIndex
;

732 
iNums
;

733 
USHORT
 
usI°d
;

734 
UCHAR
 
ucTmp
, 
ucLi°Levñ
, 
ucMaxLevñ
, 
ucChpxLí
;

735 
UCHAR
 
aucLvlfInfo
[28], 
aucX°
[2];

737 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

738 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

740 
	`NO_DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

741 
	`NO_DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

742 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

743 
	`DBG_MSG
("NoÜist information");

747 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

749 
aulBlockDïŸ
 = 
aulSBD
;

750 
tBlockDïŸLí
 = 
tSBDLí
;

751 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

754 
aulBlockDïŸ
 = 
aulBBD
;

755 
tBlockDïŸLí
 = 
tBBDLí
;

756 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

760 
ulBegöLfoInfo
 = 
	`ulGëL⁄g
(0x2ó, 
aucHódî
);

761 
	`DBG_HEX
(
ulBegöLfoInfo
);

762 
tLfoInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x2ì, 
aucHódî
);

763 
	`DBG_DEC
(
tLfoInfoLí
);

764 i‡(
tLfoInfoLí
 == 0) {

765 
	`DBG_MSG
("NoÜists inÅhis document");

769 
aucLfoInfo
 = 
	`xmÆloc
(
tLfoInfoLí
);

770 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

771 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

772 
aucLfoInfo
, 
ulBegöLfoInfo
, 
tLfoInfoLí
)) {

773 
aucLfoInfo
 = 
	`x‰ì
(aucLfoInfo);

776 
	`NO_DBG_PRINT_BLOCK
(
aucLfoInfo
, 
tLfoInfoLí
);

777 
	`vBuûdLfoLi°
(
aucLfoInfo
, 
tLfoInfoLí
);

778 
aucLfoInfo
 = 
	`x‰ì
(aucLfoInfo);

781 
ulBegöL°fInfo
 = 
	`ulGëL⁄g
(0x2e2, 
aucHódî
);

782 
	`DBG_HEX
(
ulBegöL°fInfo
);

783 
tL°fInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x2e6, 
aucHódî
);

784 
	`DBG_DEC
(
tL°fInfoLí
);

785 i‡(
tL°fInfoLí
 == 0) {

786 
	`DBG_MSG
("NoÜist data on file");

790 
aucL°fInfo
 = 
	`xmÆloc
(
tL°fInfoLí
);

791 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

792 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

793 
aucL°fInfo
, 
ulBegöL°fInfo
, 
tL°fInfoLí
)) {

794 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

797 
	`NO_DBG_PRINT_BLOCK
(
aucL°fInfo
, 
tL°fInfoLí
);

799 
tL°fRec‹ds
 = (
size_t
)
	`usGëW‹d
(0, 
aucL°fInfo
);

800 i‡(2 + 
tL°fRec‹ds
 * 28 < 
tL°fInfoLí
) {

801 
	`DBG_DEC
(2 + 
tL°fRec‹ds
 * 28);

802 
	`DBG_DEC
(
tL°fInfoLí
);

803 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

808 
ulBegöLvlfInfo
 = 
ulBegöL°fInfo
 + 
tL°fInfoLí
;

809 
	`DBG_HEX
(
ulBegöLvlfInfo
);

811 
aucXSåög
 = 
NULL
;

812 
ulSèπ
 = 
ulBegöLvlfInfo
;

814 
tIndex
 = 0, 
tSèπ
 = 2;

815 
tIndex
 < 
tL°fRec‹ds
;

816 
tIndex
++, 
tSèπ
 += 28) {

817 
ulLi°ID
 = 
	`ulGëL⁄g
(
tSèπ
, 
aucL°fInfo
);

818 
	`NO_DBG_HEX
(
ulLi°ID
);

819 
ucTmp
 = 
	`ucGëByã
(
tSèπ
 + 26, 
aucL°fInfo
);

820 
ucMaxLevñ
 = 
	`odd
(
ucTmp
) ? 1 : 9;

821 
ucLi°Levñ
 = 0; ucLi°Levñ < 
ucMaxLevñ
; ucListLevel++) {

822 
	`Áû
(
aucXSåög
 !
NULL
);

823 
usI°d
 = 
	`usGëW‹d
(

824 
tSèπ
 + 8 + 2 * (
size_t
)
ucLi°Levñ
,

825 
aucL°fInfo
);

826 
	`DBG_DEC_C
(
usI°d
 !
STI_NIL
, usIstd);

827 
	`NO_DBG_HEX
(
ulSèπ
);

828 ()
	`mem£t
(&
tLi°
, 0, (tList));

830 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

831 
aulBlockDïŸ
, 
tBlockDïŸLí
,

832 
tBlockSize
, 
aucLvlfInfo
,

833 
ulSèπ
, (
aucLvlfInfo
))) {

834 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

837 
	`NO_DBG_PRINT_BLOCK
(
aucLvlfInfo
, (aucLvlfInfo));

838 i‡(
	`bAŒZîo
(
aucLvlfInfo
, (aucLvlfInfo))) {

839 
tLi°
.
ulSèπAt
 = 1;

840 
tLi°
.
ucNFC
 = 0x00;

841 
tLi°
.
bNoRe°¨t
 = 
FALSE
;

843 
tLi°
.
ulSèπAt
 = 
	`ulGëL⁄g
(0, 
aucLvlfInfo
);

844 
tLi°
.
ucNFC
 = 
	`ucGëByã
(4, 
aucLvlfInfo
);

845 
ucTmp
 = 
	`ucGëByã
(5, 
aucLvlfInfo
);

846 
tLi°
.
bNoRe°¨t
 = (
ucTmp
 & 
	`BIT
(3)) != 0;

847 
	`DBG_MSG_C
((
ucTmp
 & 
	`BIT
(4)) != 0 &&

848 (
ucTmp
 & 
	`BIT
(6)) != 0, "Found one");

850 
ulSèπ
 +(
aucLvlfInfo
);

851 
tP≠xLí
 = (
size_t
)
	`ucGëByã
(25, 
aucLvlfInfo
);

852 i‡(
tP≠xLí
 != 0) {

853 
aucP≠x
 = 
	`xmÆloc
(
tP≠xLí
);

855 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

856 
aulBlockDïŸ
, 
tBlockDïŸLí
,

857 
tBlockSize
, 
aucP≠x
,

858 
ulSèπ
, 
tP≠xLí
)) {

859 
aucP≠x
 = 
	`x‰ì
(aucPapx);

860 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

863 
	`NO_DBG_PRINT_BLOCK
(
aucP≠x
, 
tP≠xLí
);

864 
tLi°
.
sLe·Indít
 =

865 
	`sGëLe·Indít
(
aucP≠x
, 
tP≠xLí
);

866 
aucP≠x
 = 
	`x‰ì
(aucPapx);

868 
ulSèπ
 +
tP≠xLí
;

869 
ucChpxLí
 = 
	`ucGëByã
(24, 
aucLvlfInfo
);

870 
ulSèπ
 +(
ULONG
)
ucChpxLí
;

872 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

873 
aulBlockDïŸ
, 
tBlockDïŸLí
,

874 
tBlockSize
, 
aucX°
,

875 
ulSèπ
, (
aucX°
))) {

876 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

879 
	`NO_DBG_PRINT_BLOCK
(
aucX°
, (aucXst));

880 
tX°Lí
 = (
size_t
)
	`usGëW‹d
(0, 
aucX°
);

881 
ulSèπ
 +(
aucX°
);

882 i‡(
tX°Lí
 == 0) {

883 
tLi°
.
usLi°Ch¨
 = 
DEFAULT_LISTCHAR
;

884 
	`vAdd2Li°InfoLi°
(
ulLi°ID
,

885 
usI°d
,

886 
ucLi°Levñ
,

887 &
tLi°
);

890 
tX°Lí
 *= 2;

891 
aucXSåög
 = 
	`xmÆloc
(
tX°Lí
);

893 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

894 
aulBlockDïŸ
, 
tBlockDïŸLí
,

895 
tBlockSize
, 
aucXSåög
,

896 
ulSèπ
, 
tX°Lí
)) {

897 
aucXSåög
 = 
	`x‰ì
(aucXString);

898 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

901 
	`NO_DBG_PRINT_BLOCK
(
aucXSåög
, 
tX°Lí
);

902 
tOff
 = 0;

903 
iNums
 = 6; iNums < 15; iNums++) {

904 
ucTmp
 = 
	`ucGëByã
(
iNums
, 
aucLvlfInfo
);

905 i‡(
ucTmp
 == 0) {

908 
tOff
 = (
size_t
)
ucTmp
;

910 
tOff
 *= 2;

911 
	`NO_DBG_DEC
(
tOff
);

912 i‡(
tLi°
.
ucNFC
 =
LIST_SPECIAL
 ||

913 
tLi°
.
ucNFC
 =
LIST_SPECIAL2
 ||

914 
tLi°
.
ucNFC
 =
LIST_BULLETS
) {

915 
tLi°
.
usLi°Ch¨
 = 
	`usGëW‹d
(0, 
aucXSåög
);

916 } i‡(
tOff
 !0 &&ÅOf‡< 
tX°Lí
) {

917 
tLi°
.
usLi°Ch¨
 = 
	`usGëW‹d
(
tOff
, 
aucXSåög
);

919 
tLi°
.
usLi°Ch¨
 = 
DEFAULT_LISTCHAR
;

921 
	`vAdd2Li°InfoLi°
(
ulLi°ID
,

922 
usI°d
,

923 
ucLi°Levñ
,

924 &
tLi°
);

925 
ulSèπ
 +
tX°Lí
;

926 
aucXSåög
 = 
	`x‰ì
(aucXString);

929 
aucL°fInfo
 = 
	`x‰ì
(aucLstfInfo);

930 
	}
}

936 
	$vGë8P≠Info
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

937 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

938 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

939 c⁄° 
UCHAR
 *
aucHódî
)

941 
row_block_ty≥
 
tRow
;

942 
°yÀ_block_ty≥
 
tStyÀ
;

943 
ULONG
 *
aulP¨fPage
;

944 
UCHAR
 *
aucBuf„r
;

945 
ULONG
 
ulCh¨Pos
, 
ulCh¨PosFú°
, 
ulCh¨PosLa°
;

946 
ULONG
 
ulBegöP¨fInfo
;

947 
size_t
 
tP¨fInfoLí
, 
tOff£t
, 
tLí
;

948 
iIndex
, 
iIndex2
, 
iRun
, 
iFodo
, 
iLí
;

949 
row_öfo_íum
 
eRowInfo
;

950 
USHORT
 
usI°d
;

951 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

953 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

954 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

956 
ulBegöP¨fInfo
 = 
	`ulGëL⁄g
(0x102, 
aucHódî
);

957 
	`NO_DBG_HEX
(
ulBegöP¨fInfo
);

958 
tP¨fInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x106, 
aucHódî
);

959 
	`NO_DBG_DEC
(
tP¨fInfoLí
);

960 i‡(
tP¨fInfoLí
 < 4) {

961 
	`DBG_DEC
(
tP¨fInfoLí
);

965 
aucBuf„r
 = 
	`aucFûlInfoBuf„r
(
pFûe
, &
pPPS
->
tTabÀ
,

966 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

967 
ulBegöP¨fInfo
, 
tP¨fInfoLí
);

968 i‡(
aucBuf„r
 =
NULL
) {

971 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tP¨fInfoLí
);

973 
tLí
 = (
tP¨fInfoLí
 / 4 - 1) / 2;

974 
aulP¨fPage
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

975 
iIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

976 
iIndex
 < ()
tLí
;

977 
iIndex
++, 
tOff£t
 += 4) {

978 
aulP¨fPage
[
iIndex
] = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

979 
	`NO_DBG_DEC
(
aulP¨fPage
[
iIndex
]);

981 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

982 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

983 
	`NO_DBG_PRINT_BLOCK
(
aucHódî
, 
HEADER_SIZE
);

985 ()
	`mem£t
(&
tRow
, 0, (tRow));

986 
ulCh¨PosFú°
 = 
CP_INVALID
;

987 
iIndex
 = 0; iIndex < ()
tLí
; iIndex++) {

988 
	`Áû
(
aulP¨fPage
[
iIndex
] > 
ULONG_MAX
 / 
BIG_BLOCK_SIZE
);

989 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

990 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

991 
aucF∑ge
,

992 
aulP¨fPage
[
iIndex
] * 
BIG_BLOCK_SIZE
,

993 
BIG_BLOCK_SIZE
)) {

996 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
BIG_BLOCK_SIZE
);

997 
iRun
 = ()
	`ucGëByã
(0x1ff, 
aucF∑ge
);

998 
	`NO_DBG_DEC
(
iRun
);

999 
iIndex2
 = 0; iIndex2 < 
iRun
; iIndex2++) {

1000 
	`NO_DBG_HEX
(
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
));

1001 
iFodo
 = 2 * ()
	`ucGëByã
(

1002 (
iRun
 + 1Ë* 4 + 
iIndex2
 * 13, 
aucF∑ge
);

1003 i‡(
iFodo
 <= 0) {

1007 
iLí
 = 2 * ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

1008 i‡(
iLí
 == 0) {

1009 
iFodo
++;

1010 
iLí
 = 2 * ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

1013 
usI°d
 = 
	`usGëW‹d
(
iFodo
 + 1, 
aucF∑ge
);

1014 
	`vFûlStyÀFromStyÀshìt
(
usI°d
, &
tStyÀ
);

1015 
	`vGë8StyÀInfo
(
iFodo
, 
aucF∑ge
 + 3, 
iLí
 - 3, &
tStyÀ
);

1016 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
);

1017 
	`NO_DBG_HEX
(
ulCh¨Pos
);

1018 
tStyÀ
.
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£tX
(

1019 
ulCh¨Pos
, &
tStyÀ
.
eLi°ID
);

1020 
	`vAdd2StyÀInfoLi°
(&
tStyÀ
);

1022 
eRowInfo
 = 
	`eGë8RowInfo
(
iFodo
,

1023 
aucF∑ge
 + 3, 
iLí
 - 3, &
tRow
);

1024 
eRowInfo
) {

1025 
found_a_˚Œ
:

1026 i‡(
ulCh¨PosFú°
 !
CP_INVALID
) {

1029 
ulCh¨PosFú°
 = 
	`ulGëL⁄g
(

1030 
iIndex2
 * 4, 
aucF∑ge
);

1031 
	`NO_DBG_HEX
(
ulCh¨PosFú°
);

1032 
tRow
.
ulCh¨PosSèπ
 = 
ulCh¨PosFú°
;

1033 
tRow
.
ulFûeOff£tSèπ
 =

1034 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨PosFú°
);

1035 
	`NO_DBG_HEX_C
(

1036 
tRow
.
ulFûeOff£tSèπ
 =
FC_INVALID
,

1037 
ulCh¨PosFú°
);

1039 
found_íd_of_row
:

1040 
ulCh¨PosLa°
 = 
	`ulGëL⁄g
(

1041 
iIndex2
 * 4, 
aucF∑ge
);

1042 
	`NO_DBG_HEX
(
ulCh¨PosLa°
);

1043 
tRow
.
ulCh¨PosEnd
 = 
ulCh¨PosLa°
;

1044 
tRow
.
ulFûeOff£tEnd
 =

1045 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨PosLa°
);

1046 
	`NO_DBG_HEX_C
(
tRow
.
ulFûeOff£tEnd
 =
FC_INVALID
,

1047 
ulCh¨PosLa°
);

1048 
	`vAdd2RowInfoLi°
(&
tRow
);

1049 ()
	`mem£t
(&
tRow
, 0, (tRow));

1050 
ulCh¨PosFú°
 = 
CP_INVALID
;

1052 
found_nŸhög
:

1055 
	`DBG_DEC
(
eRowInfo
);

1060 
aulP¨fPage
 = 
	`x‰ì
(aulParfPage);

1061 
	}
}

1068 
	$vGë8F⁄tInfo
(
iFodo
, 
USHORT
 
usI°d
,

1069 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
f⁄t_block_ty≥
 *
pF⁄t
)

1071 
lTmp
;

1072 
iFodoOff
, 
iInfoLí
;

1073 
USHORT
 
usFtc0
, 
usFtc1
, 
usFtc2
, 
usTmp
;

1074 
UCHAR
 
ucTmp
;

1076 
	`Áû
(
iFodo
 < 0 || 
aucGΩ¥l
 =
NULL
 || 
pF⁄t
 == NULL);

1078 
usFtc0
 = 
USHRT_MAX
;

1079 
usFtc1
 = 
USHRT_MAX
;

1080 
usFtc2
 = 
USHRT_MAX
;

1082 
iFodoOff
 = 0;

1083 
iByãs
 >
iFodoOff
 + 2) {

1084 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

1086 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1087 i‡(
ucTmp
 == 0) {

1088 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_MARKDEL
;

1090 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_MARKDEL
;

1094 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1095 
ucTmp
) {

1097 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_BOLD
;

1100 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

1105 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_BOLD
;

1108 
	`DBG_DEC
(
ucTmp
);

1109 
	`DBG_FIXME
();

1114 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1115 
ucTmp
) {

1117 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_ITALIC
;

1120 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_ITALIC
;

1125 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_ITALIC
;

1128 
	`DBG_DEC
(
ucTmp
);

1129 
	`DBG_FIXME
();

1134 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1135 
ucTmp
) {

1137 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_STRIKE
;

1140 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_STRIKE
;

1145 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_STRIKE
;

1148 
	`DBG_DEC
(
ucTmp
);

1149 
	`DBG_FIXME
();

1154 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1155 
ucTmp
) {

1157 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_SMALL_CAPITALS
;

1160 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SMALL_CAPITALS
;

1165 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_SMALL_CAPITALS
;

1168 
	`DBG_DEC
(
ucTmp
);

1169 
	`DBG_FIXME
();

1174 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1175 
ucTmp
) {

1177 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_CAPITALS
;

1180 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_CAPITALS
;

1185 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_CAPITALS
;

1188 
	`DBG_DEC
(
ucTmp
);

1189 
	`DBG_FIXME
();

1194 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1195 
ucTmp
) {

1197 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_HIDDEN
;

1200 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_HIDDEN
;

1205 
pF⁄t
->
usF⁄tStyÀ
 ^
FONT_HIDDEN
;

1208 
	`DBG_DEC
(
ucTmp
);

1209 
	`DBG_FIXME
();

1214 
pF⁄t
->
usF⁄tStyÀ
 &
FONT_HIDDEN
;

1215 
pF⁄t
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_DEFAULT
;

1218 
	`DBG_MSG
("2a33: cPlain");

1219 
	`vFûlF⁄tFromStyÀshìt
(
usI°d
, 
pF⁄t
);

1222 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1223 i‡(
ucTmp
 == 0 || ucTmp == 5) {

1224 
pF⁄t
->
usF⁄tStyÀ
 &~
FONT_UNDERLINE
;

1226 
	`NO_DBG_MSG
("UnderlineÅext");

1227 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

1228 i‡(
ucTmp
 == 6) {

1229 
	`DBG_MSG
("BoldÅext");

1230 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

1235 
pF⁄t
->
ucF⁄tCﬁ‹
 =

1236 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1237 
	`NO_DBG_DEC
(
pF⁄t
->
ucF⁄tCﬁ‹
);

1240 
	`DBG_MSG
("0x2a44: sprmCHpsInc");

1241 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1242 
	`DBG_DEC
(
ucTmp
);

1245 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1246 
ucTmp
 &= 0x07;

1247 i‡(
ucTmp
 == 1) {

1248 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUPERSCRIPT
;

1249 
	`NO_DBG_MSG
("Superscript");

1250 } i‡(
ucTmp
 == 2) {

1251 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_SUBSCRIPT
;

1252 
	`NO_DBG_MSG
("Subscript");

1256 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1257 
	`NO_DBG_DEC
(
usTmp
);

1260 
pF⁄t
->
usF⁄tSize
 =

1261 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1262 
	`NO_DBG_DEC
(
pF⁄t
->
usF⁄tSize
);

1265 
	`DBG_MSG
("0x4a4d: sprmCHpsMul");

1266 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1267 
	`DBG_DEC
(
usTmp
);

1270 
usFtc0
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1273 
usFtc1
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1276 
usFtc2
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1279 
	`DBG_MSG
("0xca47: sprmCMajority");

1282 
usTmp
 = 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1283 
lTmp
 = ()
pF⁄t
->
usF⁄tSize
 + ()
usTmp
;

1284 i‡(
lTmp
 < 8) {

1285 
pF⁄t
->
usF⁄tSize
 = 8;

1286 } i‡(
lTmp
 > 32766) {

1287 
pF⁄t
->
usF⁄tSize
 = 32766;

1289 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
lTmp
;

1293 
	`DBG_MSG
("0xca4c: sprmCMajority50");

1296 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1297 
	`DBG_DEC
(
ucTmp
);

1298 i‡(
ucTmp
 != 0) {

1299 
pF⁄t
->
usF⁄tSize
 = (
USHORT
)
ucTmp
;

1301 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 3, 
aucGΩ¥l
);

1302 
	`DBG_DEC
(
ucTmp
);

1307 
iInfoLí
 = 
	`iGë8InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

1308 
	`Áû
(
iInfoLí
 <= 0);

1309 
iFodoOff
 +
iInfoLí
;

1313 
	`NO_DBG_DEC_C
(
usFtc0
 !
USHRT_MAX
, usFtc0);

1314 
	`NO_DBG_DEC_C
(
usFtc2
 !
USHRT_MAX
, usFtc2);

1315 
	`NO_DBG_DEC_C
(
usFtc1
 !
USHRT_MAX
, usFtc1);

1316 i‡(
usFtc0
 <= 0x7fff) {

1317 i‡(
usFtc0
 <(
USHORT
)
UCHAR_MAX
) {

1318 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usFtc0
;

1320 
	`DBG_DEC
(
usFtc0
);

1321 
	`DBG_FIXME
();

1322 
pF⁄t
->
ucF⁄tNumbî
 = 0;

1324 } i‡(
usFtc2
 <= 0x7fff) {

1325 i‡(
usFtc2
 <(
USHORT
)
UCHAR_MAX
) {

1326 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usFtc2
;

1328 
	`DBG_DEC
(
usFtc2
);

1329 
	`DBG_FIXME
();

1330 
pF⁄t
->
ucF⁄tNumbî
 = 0;

1332 } i‡(
usFtc1
 <= 0x7fff) {

1333 i‡(
usFtc1
 <(
USHORT
)
UCHAR_MAX
) {

1334 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usFtc1
;

1336 
	`DBG_DEC
(
usFtc1
);

1337 
	`DBG_FIXME
();

1338 
pF⁄t
->
ucF⁄tNumbî
 = 0;

1341 
	}
}

1348 
BOOL


1349 
	$bGë8PicInfo
(
iFodo
,

1350 c⁄° 
UCHAR
 *
aucGΩ¥l
, 
iByãs
, 
pi˘uª_block_ty≥
 *
pPi˘uª
)

1352 
ULONG
 
ulTmp
;

1353 
iFodoOff
, 
iInfoLí
;

1354 
BOOL
 
bFound
;

1355 
UCHAR
 
ucTmp
;

1357 
	`Áû
(
iFodo
 <0 || 
aucGΩ¥l
 =
NULL
 || 
pPi˘uª
 == NULL);

1359 
iFodoOff
 = 0;

1360 
bFound
 = 
FALSE
;

1361 
iByãs
 >
iFodoOff
 + 2) {

1362 
	`usGëW‹d
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
)) {

1365 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1366 i‡(
ucTmp
 == 0x01) {

1368  
FALSE
;

1370 
	`DBG_DEC_C
(
ucTmp
 != 0, ucTmp);

1374 
ucTmp
 = 
	`ucGëByã
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1375 i‡(
ucTmp
 == 0x01) {

1377  
FALSE
;

1379 
	`DBG_DEC_C
(
ucTmp
 != 0, ucTmp);

1382 
ulTmp
 = 
	`ulGëL⁄g
(
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1383 
	`DBG_HEX
(
ulTmp
);

1386 
pPi˘uª
->
ulPi˘uªOff£t
 = 
	`ulGëL⁄g
(

1387 
iFodo
 + 
iFodoOff
 + 2, 
aucGΩ¥l
);

1388 
bFound
 = 
TRUE
;

1393 
iInfoLí
 = 
	`iGë8InfoLígth
(
iFodo
 + 
iFodoOff
, 
aucGΩ¥l
);

1394 
	`Áû
(
iInfoLí
 <= 0);

1395 
iFodoOff
 +
iInfoLí
;

1397  
bFound
;

1398 
	}
}

1404 
	$vGë8ChrInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

1405 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

1406 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

1407 c⁄° 
UCHAR
 *
aucHódî
)

1409 
f⁄t_block_ty≥
 
tF⁄t
;

1410 
pi˘uª_block_ty≥
 
tPi˘uª
;

1411 
ULONG
 *
aulCh¨Page
;

1412 
UCHAR
 *
aucBuf„r
;

1413 
ULONG
 
ulFûeOff£t
, 
ulCh¨Pos
, 
ulBegöCh¨Info
;

1414 
size_t
 
tCh¨InfoLí
, 
tOff£t
, 
tLí
;

1415 
iIndex
, 
iIndex2
, 
iRun
, 
iFodo
, 
iLí
;

1416 
USHORT
 
usI°d
;

1417 
UCHAR
 
aucF∑ge
[
BIG_BLOCK_SIZE
];

1419 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

1420 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

1422 
ulBegöCh¨Info
 = 
	`ulGëL⁄g
(0xÁ, 
aucHódî
);

1423 
	`NO_DBG_HEX
(
ulBegöCh¨Info
);

1424 
tCh¨InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x„, 
aucHódî
);

1425 
	`NO_DBG_DEC
(
tCh¨InfoLí
);

1426 i‡(
tCh¨InfoLí
 < 4) {

1427 
	`DBG_DEC
(
tCh¨InfoLí
);

1431 
aucBuf„r
 = 
	`aucFûlInfoBuf„r
(
pFûe
, &
pPPS
->
tTabÀ
,

1432 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

1433 
ulBegöCh¨Info
, 
tCh¨InfoLí
);

1434 i‡(
aucBuf„r
 =
NULL
) {

1437 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tCh¨InfoLí
);

1439 
tLí
 = (
tCh¨InfoLí
 / 4 - 1) / 2;

1440 
aulCh¨Page
 = 
	`xˇŒoc
(
tLí
, (
ULONG
));

1441 
iIndex
 = 0, 
tOff£t
 = (
tLí
 + 1) * 4;

1442 
iIndex
 < ()
tLí
;

1443 
iIndex
++, 
tOff£t
 += 4) {

1444 
aulCh¨Page
[
iIndex
] = 
	`ulGëL⁄g
(
tOff£t
, 
aucBuf„r
);

1445 
	`NO_DBG_DEC
(
aulCh¨Page
[
iIndex
]);

1447 
	`DBG_HEX
(
	`ulGëL⁄g
(0, 
aucBuf„r
));

1448 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

1449 
	`NO_DBG_PRINT_BLOCK
(
aucHódî
, 
HEADER_SIZE
);

1451 
iIndex
 = 0; iIndex < ()
tLí
; iIndex++) {

1452 
	`Áû
(
aulCh¨Page
[
iIndex
] > 
ULONG_MAX
 / 
BIG_BLOCK_SIZE
);

1453 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

1454 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

1455 
aucF∑ge
,

1456 
aulCh¨Page
[
iIndex
] * 
BIG_BLOCK_SIZE
,

1457 
BIG_BLOCK_SIZE
)) {

1460 
	`NO_DBG_PRINT_BLOCK
(
aucF∑ge
, 
BIG_BLOCK_SIZE
);

1461 
iRun
 = ()
	`ucGëByã
(0x1ff, 
aucF∑ge
);

1462 
	`NO_DBG_DEC
(
iRun
);

1463 
iIndex2
 = 0; iIndex2 < 
iRun
; iIndex2++) {

1464 
ulCh¨Pos
 = 
	`ulGëL⁄g
(
iIndex2
 * 4, 
aucF∑ge
);

1465 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
);

1466 
iFodo
 = 2 * ()
	`ucGëByã
(

1467 (
iRun
 + 1Ë* 4 + 
iIndex2
, 
aucF∑ge
);

1469 
iLí
 = ()
	`ucGëByã
(
iFodo
, 
aucF∑ge
);

1471 
usI°d
 = 
	`usGëI°d
(
ulFûeOff£t
);

1472 
	`vFûlF⁄tFromStyÀshìt
(
usI°d
, &
tF⁄t
);

1473 i‡(
iFodo
 != 0) {

1474 
	`vGë8F⁄tInfo
(
iFodo
, 
usI°d
,

1475 
aucF∑ge
 + 1, 
iLí
 - 1, &
tF⁄t
);

1477 
tF⁄t
.
ulFûeOff£t
 = ulFileOffset;

1478 
	`vAdd2F⁄tInfoLi°
(&
tF⁄t
);

1480 i‡(
iFodo
 <= 0) {

1484 ()
	`mem£t
(&
tPi˘uª
, 0, (tPicture));

1485 i‡(
	`bGë8PicInfo
(
iFodo
, 
aucF∑ge
 + 1,

1486 
iLí
 - 1, &
tPi˘uª
)) {

1487 
tPi˘uª
.
ulFûeOff£t
 = ulFileOffset;

1488 
tPi˘uª
.
ulFûeOff£tPi˘uª
 =

1489 
	`ulD©aPos2FûeOff£t
(

1490 
tPi˘uª
.
ulPi˘uªOff£t
);

1491 
	`vAdd2Pi˘InfoLi°
(&
tPi˘uª
);

1495 
aulCh¨Page
 = 
	`x‰ì
(aulCharPage);

1496 
	}
}

	@properties.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

18 
	$vGëPr›îtyInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

19 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

20 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

21 c⁄° 
UCHAR
 *
aucHódî
, 
iW‹dVîsi⁄
)

23 
›ti⁄s_ty≥
 
tO±i⁄s
;

25 
	`TRACE_MSG
("vGetPropertyInfo");

27 
	`Áû
(
pFûe
 =
NULL
);

28 
	`Áû
(
pPPS
 =
NULL
 && 
iW‹dVîsi⁄
 >= 6);

29 
	`Áû
(
aulBBD
 =
NULL
 && 
tBBDLí
 != 0);

30 
	`Áû
(
aulSBD
 =
NULL
 && 
tSBDLí
 != 0);

31 
	`Áû
(
aucHódî
 =
NULL
);

34 
	`vGëO±i⁄s
(&
tO±i⁄s
);

37 
iW‹dVîsi⁄
) {

39 
	`vGë0D›Info
(
pFûe
, 
aucHódî
);

40 
	`vGë0SïInfo
(
pFûe
, 
aucHódî
);

41 
	`vGë0P≠Info
(
pFûe
, 
aucHódî
);

42 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

43 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

44 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
 ||

45 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
 ||

46 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

47 
	`vGë0ChrInfo
(
pFûe
, 
aucHódî
);

49 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

50 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

51 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

52 
	`vCª©e0F⁄tTabÀ
();

54 
	`vSë0Summ¨yInfo
(
pFûe
, 
aucHódî
);

58 
	`vGë2StyÀshìt
(
pFûe
, 
iW‹dVîsi⁄
, 
aucHódî
);

59 
	`vGë2D›Info
(
pFûe
, 
aucHódî
);

60 
	`vGë2SïInfo
(
pFûe
, 
aucHódî
);

61 
	`vGë2P≠Info
(
pFûe
, 
aucHódî
);

62 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

63 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

64 
	`vGë2HdrFåInfo
(
pFûe
, 
aucHódî
);

66 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

67 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

68 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
 ||

69 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
 ||

70 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

71 
	`vGë2ChrInfo
(
pFûe
, 
iW‹dVîsi⁄
, 
aucHódî
);

73 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

74 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

75 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

76 
	`vCª©e2F⁄tTabÀ
(
pFûe
, 
iW‹dVîsi⁄
, 
aucHódî
);

78 
	`vSë2Summ¨yInfo
(
pFûe
, 
iW‹dVîsi⁄
, 
aucHódî
);

85 
	`vGë6StyÀshìt
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

86 
aulBBD
, 
tBBDLí
, 
aucHódî
);

87 
	`vGë6D›Info
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

88 
aulBBD
, 
tBBDLí
, 
aucHódî
);

89 
	`vGë6SïInfo
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

90 
aulBBD
, 
tBBDLí
, 
aucHódî
);

91 
	`vGë6P≠Info
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

92 
aulBBD
, 
tBBDLí
, 
aucHódî
);

93 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

94 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

95 
	`vGë6HdrFåInfo
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

96 
aulBBD
, 
tBBDLí
, 
aucHódî
);

98 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

99 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

100 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
 ||

101 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
 ||

102 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

103 
	`vGë6ChrInfo
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

104 
aulBBD
, 
tBBDLí
, 
aucHódî
);

106 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

107 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

108 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

109 
	`vCª©e6F⁄tTabÀ
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

110 
aulBBD
, 
tBBDLí
, 
aucHódî
);

112 
	`vSë6Summ¨yInfo
(
pFûe
, 
pPPS
,

113 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

116 
	`vGë8L°Info
(
pFûe
, 
pPPS
,

117 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

118 
	`vGë8StyÀshìt
(
pFûe
, 
pPPS
,

119 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

120 
	`vGë8D›Info
(
pFûe
, &
pPPS
->
tTabÀ
,

121 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

122 
	`vGë8SïInfo
(
pFûe
, 
pPPS
,

123 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

124 
	`vGë8P≠Info
(
pFûe
, 
pPPS
,

125 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

126 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

127 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

128 
	`vGë8HdrFåInfo
(
pFûe
, &
pPPS
->
tTabÀ
,

129 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

131 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

132 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

133 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
 ||

134 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
 ||

135 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

136 
	`vGë8ChrInfo
(
pFûe
, 
pPPS
,

137 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

139 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_døw
 ||

140 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ps
 ||

141 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_pdf
) {

142 
	`vCª©e8F⁄tTabÀ
(
pFûe
, 
pPPS
,

143 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

145 
	`vSë8Summ¨yInfo
(
pFûe
, 
pPPS
,

146 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

149 
	`DBG_DEC
(
iW‹dVîsi⁄
);

150 
	`DBG_FIXME
();

151 
	`wîr
(0, "Sorry,ÇoÖroperty information");

156 
	`vC‹ª˘F⁄tTabÀ
(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,ÅO±i⁄s.
eEncodög
);

157 
	}
}

164 
row_öfo_íum


165 
	$ePr›Mod2RowInfo
(
USHORT
 
usPr›Mod
, 
iW‹dVîsi⁄
)

167 
row_block_ty≥
 
tRow
;

168 c⁄° 
UCHAR
 *
aucPr›Mod
;

169 
iLí
;

171 
	`TRACE_MSG
("ePropMod2RowInfo");

173 
aucPr›Mod
 = 
	`aucRódPr›ModLi°Iãm
(
usPr›Mod
);

174 i‡(
aucPr›Mod
 =
NULL
) {

175  
found_nŸhög
;

177 
iLí
 = ()
	`usGëW‹d
(0, 
aucPr›Mod
);

179 
iW‹dVîsi⁄
) {

181  
found_nŸhög
;

184  
	`eGë2RowInfo
(0, 
aucPr›Mod
 + 2, 
iLí
, &
tRow
);

187  
found_nŸhög
;

190  
	`eGë6RowInfo
(0, 
aucPr›Mod
 + 2, 
iLí
, &
tRow
);

192  
	`eGë8RowInfo
(0, 
aucPr›Mod
 + 2, 
iLí
, &
tRow
);

194 
	`DBG_DEC
(
iW‹dVîsi⁄
);

195 
	`DBG_FIXME
();

196  
found_nŸhög
;

198 
	}
}

	@propmod.c

9 
	~<°dio.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

13 #i‡
deföed
(
DEBUG
)

14 
	#ELEMENTS_TO_ADD
 3

	)

16 
	#ELEMENTS_TO_ADD
 30

	)

20 
UCHAR
 **
	gµAnch‹
 = 
NULL
;

21 
size_t
 
	gtNextFªe
 = 0;

22 
size_t
 
	gtMaxEÀmíts
 = 0;

29 
	$vDe°royPr›ModLi°
()

31 
size_t
 
tIndex
;

33 
	`DBG_MSG
("vDestroyPropModList");

36 
tIndex
 = 0;ÅIndex < 
tNextFªe
;ÅIndex++) {

37 
µAnch‹
[
tIndex
] = 
	`x‰ì
(ppAnchor[tIndex]);

40 
µAnch‹
 = 
	`x‰ì
(ppAnchor);

42 
tNextFªe
 = 0;

43 
tMaxEÀmíts
 = 0;

44 
	}
}

50 
	$vAdd2Pr›ModLi°
(c⁄° 
UCHAR
 *
aucPr›Mod
)

52 
size_t
 
tSize
, 
tLí
;

54 
	`Áû
(
aucPr›Mod
 =
NULL
);

56 
	`NO_DBG_MSG
("vAdd2PropModList");

58 i‡(
tNextFªe
 >
tMaxEÀmíts
) {

59 
tMaxEÀmíts
 +
ELEMENTS_TO_ADD
;

60 
tSize
 = 
tMaxEÀmíts
 * (
UCHAR
 **);

61 
µAnch‹
 = 
	`xªÆloc
’pAnch‹, 
tSize
);

63 
	`NO_DBG_DEC
(
tNextFªe
);

65 
tLí
 = 2 + (
size_t
)
	`usGëW‹d
(0, 
aucPr›Mod
);

66 
	`NO_DBG_HEX
(
tLí
);

67 
	`NO_DBG_PRINT_BLOCK
(
pucPr›Mod
, 
tLí
);

68 
µAnch‹
[
tNextFªe
] = 
	`xmÆloc
(
tLí
);

69 
	`mem˝y
(
µAnch‹
[
tNextFªe
], 
aucPr›Mod
, 
tLí
);

70 
tNextFªe
++;

71 
	}
}

76 c⁄° 
UCHAR
 *

77 
	$aucRódPr›ModLi°Iãm
(
USHORT
 
usPr›Mod
)

79 
UCHAR
 
aucBuf„r
[4];

80 
size_t
 
tIndex
;

82 i‡(
usPr›Mod
 =
IGNORE_PROPMOD
) {

84  
NULL
;

87 i‡(!
	`odd
(
usPr›Mod
)) {

89 
aucBuf„r
[0] = 2;

90 
aucBuf„r
[1] = 0;

91 
aucBuf„r
[2] = (
UCHAR
)((
usPr›Mod
 & 0x00fe) >> 1);

92 
aucBuf„r
[3] = (
UCHAR
)((
usPr›Mod
 & 0xff00) >> 8);

93  
aucBuf„r
;

96 i‡(
µAnch‹
 =
NULL
) {

98  
NULL
;

102 
tIndex
 = (
size_t
)(
usPr›Mod
 >> 1);

103 i‡(
tIndex
 >
tNextFªe
) {

104 
	`DBG_HEX
(
usPr›Mod
);

105 
	`DBG_DEC
(
tIndex
);

106 
	`DBG_DEC
(
tNextFªe
);

107  
NULL
;

109  
µAnch‹
[
tIndex
];

110 
	}
}

	@rowlist.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

17 
	srow_desc_èg
 {

18 
row_block_ty≥
 
	mtInfo
;

19 
row_desc_èg
 *
	mpNext
;

20 } 
	trow_desc_ty≥
;

23 
row_desc_ty≥
 *
	gpAnch‹
 = 
NULL
;

24 
row_desc_ty≥
 *
	gpRowLa°
 = 
NULL
;

26 
row_desc_ty≥
 *
	gpRowCuºít
 = 
NULL
;

33 
	$vDe°royRowInfoLi°
()

35 
row_desc_ty≥
 *
pCuº
, *
pNext
;

37 
	`DBG_MSG
("vDestroyRowInfoList");

40 
pCuº
 = 
pAnch‹
;

41 
pCuº
 !
NULL
) {

42 
pNext
 = 
pCuº
->pNext;

43 
pCuº
 = 
	`x‰ì
(pCurr);

44 
pCuº
 = 
pNext
;

46 
pAnch‹
 = 
NULL
;

48 
pRowLa°
 = 
NULL
;

49 
pRowCuºít
 = 
NULL
;

50 
	}
}

56 
	$vAdd2RowInfoLi°
(c⁄° 
row_block_ty≥
 *
pRowBlock
)

58 
row_desc_ty≥
 *
pLi°Membî
;

59 *
psTmp
;

60 
iIndex
;

62 
	`Áû
(
pRowBlock
 =
NULL
);

64 i‡(
pRowBlock
->
ulFûeOff£tSèπ
 =
FC_INVALID
 ||

65 
pRowBlock
->
ulFûeOff£tEnd
 =
FC_INVALID
 ||

66 
pRowBlock
->
ulFûeOff£tSèπ
 =pRowBlock->
ulFûeOff£tEnd
) {

67 
	`DBG_HEX_C
(
pRowBlock
->
ulFûeOff£tSèπ
 !
FC_INVALID
,

68 
pRowBlock
->
ulFûeOff£tSèπ
);

69 
	`DBG_HEX_C
(
pRowBlock
->
ulFûeOff£tEnd
 !
FC_INVALID
,

70 
pRowBlock
->
ulFûeOff£tEnd
);

74 
	`NO_DBG_HEX
(
pRowBlock
->
ulFûeOff£tSèπ
);

75 
	`NO_DBG_HEX
(
pRowBlock
->
ulFûeOff£tEnd
);

76 
	`NO_DBG_DEC
(
pRowBlock
->
ucNumbîOfCﬁumns
);

79 
pLi°Membî
 = 
	`xmÆloc
((
row_desc_ty≥
));

81 
pLi°Membî
->
tInfo
 = *
pRowBlock
;

82 
pLi°Membî
->
pNext
 = 
NULL
;

84 
iIndex
 = 0, 
psTmp
 = 
pLi°Membî
->
tInfo
.
asCﬁumnWidth
;

85 
iIndex
 < ()
pLi°Membî
->
tInfo
.
ucNumbîOfCﬁumns
;

86 
iIndex
++, 
psTmp
++) {

87 i‡(*
psTmp
 < 0) {

88 *
psTmp
 = 0;

89 
	`DBG_MSG
("The column width wasÇegative");

93 i‡(
pAnch‹
 =
NULL
) {

94 
pAnch‹
 = 
pLi°Membî
;

95 
pRowCuºít
 = 
pLi°Membî
;

97 
	`Áû
(
pRowLa°
 =
NULL
);

98 
pRowLa°
->
pNext
 = 
pLi°Membî
;

100 
pRowLa°
 = 
pLi°Membî
;

101 
	}
}

106 c⁄° 
row_block_ty≥
 *

107 
	$pGëNextRowInfoLi°Iãm
()

109 c⁄° 
row_block_ty≥
 *
pIãm
;

111 i‡(
pRowCuºít
 =
NULL
) {

112  
NULL
;

114 
pIãm
 = &
pRowCuºít
->
tInfo
;

115 
pRowCuºít
 =ÖRowCuºít->
pNext
;

116  
pIãm
;

117 
	}
}

	@sectlist.c

9 
	~<°ddef.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

18 
	s£˘i⁄_mem_èg
 {

19 
£˘i⁄_block_ty≥
 
	mtInfo
;

20 
ULONG
 
	mulCh¨Pos
;

21 
£˘i⁄_mem_èg
 *
	mpNext
;

22 } 
	t£˘i⁄_mem_ty≥
;

25 
£˘i⁄_mem_ty≥
 *
	gpAnch‹
 = 
NULL
;

26 
£˘i⁄_mem_ty≥
 *
	gpSe˘i⁄La°
 = 
NULL
;

33 
	$vDe°roySe˘i⁄InfoLi°
()

35 
£˘i⁄_mem_ty≥
 *
pCuº
, *
pNext
;

37 
	`DBG_MSG
("vDestroySectionInfoList");

40 
pCuº
 = 
pAnch‹
;

41 
pCuº
 !
NULL
) {

42 
pNext
 = 
pCuº
->pNext;

43 
pCuº
 = 
	`x‰ì
(pCurr);

44 
pCuº
 = 
pNext
;

46 
pAnch‹
 = 
NULL
;

48 
pSe˘i⁄La°
 = 
NULL
;

49 
	}
}

55 
	$vAdd2Se˘i⁄InfoLi°
(c⁄° 
£˘i⁄_block_ty≥
 *
pSe˘i⁄
, 
ULONG
 
ulCh¨Pos
)

57 
£˘i⁄_mem_ty≥
 *
pLi°Membî
;

59 
	`Áû
(
pSe˘i⁄
 =
NULL
);

62 
pLi°Membî
 = 
	`xmÆloc
((
£˘i⁄_mem_ty≥
));

64 
pLi°Membî
->
tInfo
 = *
pSe˘i⁄
;

65 
pLi°Membî
->
ulCh¨Pos
 = ulCharPos;

66 
pLi°Membî
->
pNext
 = 
NULL
;

68 i‡(
pAnch‹
 =
NULL
) {

69 
pAnch‹
 = 
pLi°Membî
;

71 
	`Áû
(
pSe˘i⁄La°
 =
NULL
);

72 
pSe˘i⁄La°
->
pNext
 = 
pLi°Membî
;

74 
pSe˘i⁄La°
 = 
pLi°Membî
;

75 
	}
}

81 
	$vGëDeÁu…Se˘i⁄
(
£˘i⁄_block_ty≥
 *
pSe˘i⁄
)

83 ()
	`mem£t
(
pSe˘i⁄
, 0, (*pSection));

84 
pSe˘i⁄
->
bNewPage
 = 
TRUE
;

85 
	}
}

91 
	$vDeÁu…2Se˘i⁄InfoLi°
(
ULONG
 
ulCh¨Pos
)

93 
£˘i⁄_block_ty≥
 
tSe˘i⁄
;

95 
	`vGëDeÁu…Se˘i⁄
(&
tSe˘i⁄
);

96 
	`vAdd2Se˘i⁄InfoLi°
(&
tSe˘i⁄
, 
ulCh¨Pos
);

97 
	}
}

102 c⁄° 
£˘i⁄_block_ty≥
 *

103 
	$pGëSe˘i⁄Info
(c⁄° 
£˘i⁄_block_ty≥
 *
pOld
, 
ULONG
 
ulCh¨Pos
)

105 c⁄° 
£˘i⁄_mem_ty≥
 *
pCuº
;

107 i‡(
pOld
 =
NULL
 || 
ulCh¨Pos
 == 0) {

108 i‡(
pAnch‹
 =
NULL
) {

110 
	`vDeÁu…2Se˘i⁄InfoLi°
(0);

111 
	`Áû
(
pAnch‹
 =
NULL
);

114 
	`NO_DBG_MSG
("FirstÑecord");

115  &
pAnch‹
->
tInfo
;

118 
	`NO_DBG_HEX
(
ulCh¨Pos
);

119 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

120 
	`NO_DBG_HEX
(
pCuº
->
ulCh¨Pos
);

121 i‡(
ulCh¨Pos
 =
pCuº
->ulCharPos ||

122 
ulCh¨Pos
 + 1 =
pCuº
->ulCharPos) {

123 
	`NO_DBG_HEX
(
pCuº
->
ulCh¨Pos
);

124  &
pCuº
->
tInfo
;

127  
pOld
;

128 
	}
}

133 
size_t


134 
	$tGëNumbîOfSe˘i⁄s
()

136 c⁄° 
£˘i⁄_mem_ty≥
 *
pCuº
;

137 
size_t
 
tCou¡î
;

139 
tCou¡î
 = 0, 
pCuº
 = 
pAnch‹
;

140 
pCuº
 !
NULL
;

141 
tCou¡î
++, 
pCuº
 =ÖCuº->
pNext
)

143  
tCou¡î
;

144 
	}
}

149 
UCHAR


150 
	$ucGëSïHdrFåS≥cifiˇti⁄
(
size_t
 
tSe˘i⁄Numbî
)

152 c⁄° 
£˘i⁄_mem_ty≥
 *
pCuº
;

153 
size_t
 
tIndex
;

155 
tIndex
 = 0, 
pCuº
 = 
pAnch‹
;

156 
tIndex
 < 
tSe˘i⁄Numbî
 && 
pCuº
 !
NULL
;

157 
tIndex
++, 
pCuº
 =ÖCuº->
pNext
)

159 i‡(
pCuº
 =
NULL
) {

160 
	`DBG_DEC
(
tSe˘i⁄Numbî
);

161 
	`DBG_FIXME
();

164  
pCuº
->
tInfo
.
ucHdrFåS≥cifiˇti⁄
;

165 
	}
}

	@startup.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<˘y≥.h
>

12 
	~"DeskLib:Eº‹.h
"

13 
	~"DeskLib:Evít.h
"

14 
	~"DeskLib:SWI.h
"

15 
	~"™tiw‹d.h
"

18 #i‡!
deföed
(
TaskM™agî_Enumî©eTasks
)

19 
	#TaskM™agî_Enumî©eTasks
 0x042681

	)

27 
BOOL


28 
	$bIsM©ch
(c⁄° *
szSå1
, c⁄° *
szSå2
)

30 c⁄° *
pcTmp1
, *
pcTmp2
;

32 
pcTmp1
 = 
szSå1
, 
pcTmp2
 = 
szSå2
;

33 *
pcTmp1
 != '\0';

34 
pcTmp1
++, 
pcTmp2
++) {

35 i‡(
	`touµî
(*
pcTmp1
Ë!touµî(*
pcTmp2
)) {

36  
FALSE
;

39  *
pcTmp2
 == '\0';

40 
	}
}

47 
èsk_h™dÀ


48 
	$tGëTaskH™dÀ
(c⁄° *
szTask«me
)

50 c⁄° *
pcTmp
;

51 
iReg0
, 
iIndex
;

52 
aiBuf„r
[4];

53 
szTmp
[21];

55 
iReg0
 = 0;

58 
	`Eº‹_CheckF©Æ
(
	`SWI
(3, 1, 
TaskM™agî_Enumî©eTasks
 | 
XOS_Bô
,

59 
iReg0
, 
aiBuf„r
, (aiBuffer), &iReg0));

61 
iIndex
 = 0, 
pcTmp
 = (c⁄° *)
aiBuf„r
[1];

62 
iIndex
 < 
	`ñemítsof
(
szTmp
);

63 
iIndex
++, 
pcTmp
++) {

64 i‡(
	`is˙ål
(*
pcTmp
)) {

65 
szTmp
[
iIndex
] = '\0';

68 
szTmp
[
iIndex
] = *
pcTmp
;

70 
szTmp
[
	`ñemítsof
(szTmp) - 1] = '\0';

71 i‡(
	`bIsM©ch
(
szTmp
, 
szTask«me
)) {

73  (
èsk_h™dÀ
)
aiBuf„r
[0];

75 } 
iReg0
 >= 0);

79 
	}
}

82 
	$maö
(
¨gc
, **
¨gv
)

84 
mesßge_block
 
tMsg
;

85 
èsk_h™dÀ
 
tTaskH™dÀ
;

86 
size_t
 
tArgLí
;

87 
aiMesßges
[] = {0};

88 
szComm™d
[512];

90 
	`Evít_Inôüli£3
("SèπUp", 310, 
aiMesßges
);

92 i‡(
¨gc
 > 1) {

93 
tArgLí
 = 
	`°æí
(
¨gv
[1]);

95 
tArgLí
 = 0;

97 i‡(
tArgLí
 >(
tMsg
.
d©a
.
d©Æﬂd
.
fûíame
)) {

98 
	`wîr
(1, "Input filenameÅooÜong");

99  
EXIT_FAILURE
;

102 
tTaskH™dÀ
 = 
	`tGëTaskH™dÀ
("antiword");

104 i‡(
tTaskH™dÀ
 == 0) {

106 
	`°r˝y
(
szComm™d
, "chain:<Antiword$Dir>.!Antiword");

107 i‡(
¨gc
 > 1) {

108 
	`°rˇt
(
szComm™d
, " ");

109 
	`°rˇt
(
szComm™d
, 
¨gv
[1]);

111 #i‡
	`deföed
(
DEBUG
)

112 
	`°rˇt
(
szComm™d
, " ");

113 
	`°rˇt
(
szComm™d
, "2><Antiword$Dir>.Debug");

115 
	`sy°em
(
szComm™d
);

117  
EXIT_FAILURE
;

121 i‡(
¨gc
 > 1) {

126 
	`mem£t
(&
tMsg
, 0, (tMsg));

127 
tMsg
.
hódî
.
size
 = 
	`ROUND4
(
	`off£tof
(
mesßge_block
, 
d©a
) +

128 
	`off£tof
(
mesßge_d©Æﬂd
, 
fûíame
) +

129 1 + 
tArgLí
);

130 
tMsg
.
hódî
.
youºef
 = 0;

131 
tMsg
.
hódî
.
a˘i⁄
 = 
mesßge_DATALOAD
;

132 
tMsg
.
d©a
.
d©Æﬂd
.
wödow
 = 
wödow_ICONBAR
;

133 
tMsg
.
d©a
.
d©Æﬂd
.
ic⁄
 = -1;

134 
tMsg
.
d©a
.
d©Æﬂd
.
size
 = 0;

135 
tMsg
.
d©a
.
d©Æﬂd
.
fûëy≥
 = 
FILETYPE_MSWORD
;

136 
	`°r˝y
(
tMsg
.
d©a
.
d©Æﬂd
.
fûíame
, 
¨gv
[1]);

137 
	`Eº‹_CheckF©Æ
(
	`Wimp_SídMesßge
(
evít_SEND
,

138 &
tMsg
, 
tTaskH™dÀ
, 0));

139  
EXIT_SUCCESS
;

142 
	`wîr
(1, "Antiword isálreadyÑunning");

143  
EXIT_FAILURE
;

145 
	}
}

	@stylelist.c

9 
	~<°dlib.h
>

10 
	~<°ddef.h
>

11 
	~<˘y≥.h
>

12 
	~"™tiw‹d.h
"

19 
	s°yÀ_mem_èg
 {

20 
°yÀ_block_ty≥
 
	mtInfo
;

21 
ULONG
 
	mulSequí˚Numbî
;

22 
°yÀ_mem_èg
 *
	mpNext
;

23 } 
	t°yÀ_mem_ty≥
;

26 
°yÀ_mem_ty≥
 *
	gpAnch‹
 = 
NULL
;

27 
°yÀ_mem_ty≥
 *
	gpStyÀLa°
 = 
NULL
;

29 
c⁄vîsi⁄_ty≥
 
	geC⁄vîsi⁄Ty≥
 = 
c⁄vîsi⁄_unknown
;

31 
ícodög_ty≥
 
	geEncodög
 = 
ícodög_√uåÆ
;

33 c⁄° 
°yÀ_mem_ty≥
 *
	gpMidPå
 = 
NULL
;

34 
BOOL
 
	gbMoveMidPå
 = 
FALSE
;

35 
BOOL
 
	gbInSequí˚
 = 
TRUE
;

42 
	$vDe°royStyÀInfoLi°
()

44 
°yÀ_mem_ty≥
 *
pCuº
, *
pNext
;

46 
	`DBG_MSG
("vDestroyStyleInfoList");

49 
pCuº
 = 
pAnch‹
;

50 
pCuº
 !
NULL
) {

51 
pNext
 = 
pCuº
->pNext;

52 
pCuº
 = 
	`x‰ì
(pCurr);

53 
pCuº
 = 
pNext
;

55 
pAnch‹
 = 
NULL
;

57 
pStyÀLa°
 = 
NULL
;

58 
pMidPå
 = 
NULL
;

59 
bMoveMidPå
 = 
FALSE
;

60 
bInSequí˚
 = 
TRUE
;

61 
	}
}

67 
	$vC⁄vîtLi°Ch¨a˘î
(
UCHAR
 
ucNFC
, 
USHORT
 
usLi°Ch¨
, *
szLi°Ch¨
)

69 
›ti⁄s_ty≥
 
tO±i⁄s
;

70 
size_t
 
tLí
;

72 
	`Áû
(
szLi°Ch¨
 =
NULL
);

73 
	`Áû
(
szLi°Ch¨
[0] != '\0');

75 i‡(
usLi°Ch¨
 < 0x80 && 
	`i•röt
(()usListChar)) {

76 
	`DBG_CHR_C
(
	`iß um
(()
usLi°Ch¨
), usListChar);

77 
szLi°Ch¨
[0] = ()
usLi°Ch¨
;

78 
szLi°Ch¨
[1] = '\0';

82 i‡(
ucNFC
 !
LIST_SPECIAL
 &&

83 
ucNFC
 !
LIST_SPECIAL2
 &&

84 
ucNFC
 !
LIST_BULLETS
) {

85 
szLi°Ch¨
[0] = '.';

86 
szLi°Ch¨
[1] = '\0';

90 i‡(
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_unknown
 ||

91 
eEncodög
 =
ícodög_√uåÆ
) {

92 
	`vGëO±i⁄s
(&
tO±i⁄s
);

93 
eC⁄vîsi⁄Ty≥
 = 
tO±i⁄s
.eConversionType;

94 
eEncodög
 = 
tO±i⁄s
.eEncoding;

97 
usLi°Ch¨
) {

100 
usLi°Ch¨
 = 0x2022;

103 
usLi°Ch¨
 = 0x2013;

106 
usLi°Ch¨
 = 0x2666;

109 
usLi°Ch¨
 = 0x21d2;

112 
usLi°Ch¨
 = 0x25ca;

115 
usLi°Ch¨
 = 0x2329;

118 
usLi°Ch¨
 = 0x0020;

121 
usLi°Ch¨
 = 0x270c;

124 
usLi°Ch¨
 = 0x03d5;

127 
usLi°Ch¨
 = 0x25a0;

130 
usLi°Ch¨
 = 0x25a1;

133 
usLi°Ch¨
 = 0x2751;

136 
usLi°Ch¨
 = 0x25c6;

139 
usLi°Ch¨
 = 0x2756;

142 
usLi°Ch¨
 = 0x25aa;

145 
usLi°Ch¨
 = 0x27a2;

148 
usLi°Ch¨
 = 0x2199;

151 
usLi°Ch¨
 = 0x21e8;

154 
usLi°Ch¨
 = 0x2713;

157 i‡((
usLi°Ch¨
 >= 0xe000 && usListChar < 0xf900) ||

158 (
usLi°Ch¨
 < 0x80 && !
	`i•röt
(()usListChar))) {

164 
	`DBG_HEX
(
usLi°Ch¨
);

165 
	`DBG_FIXME
();

166 i‡(
ucNFC
 =
LIST_SPECIAL
 || ucNFC =
LIST_SPECIAL2
) {

167 
usLi°Ch¨
 = 0x2190;

169 
usLi°Ch¨
 = 0x2022;

175 i‡(
eEncodög
 =
ícodög_utf_8
) {

176 
tLí
 = 
	`tUcs2Utf8
(
usLi°Ch¨
, 
szLi°Ch¨
, 4);

177 
szLi°Ch¨
[
tLí
] = '\0';

179 
usLi°Ch¨
) {

182 
szLi°Ch¨
[0] = 'o';

185 
szLi°Ch¨
[0] = '-';

188 
szLi°Ch¨
[0] = '<';

191 
szLi°Ch¨
[0] = '=';

194 
szLi°Ch¨
[0] = '>';

197 
szLi°Ch¨
[0] = '.';

200 
szLi°Ch¨
[0] = 
OUR_DIAMOND
;

203 
szLi°Ch¨
[0] = 'x';

206 
szLi°Ch¨
[0] = 'V';

209 
szLi°Ch¨
[0] = '*';

213 
	`vGëBuŒëVÆue
(
eC⁄vîsi⁄Ty≥
, 
eEncodög
,

214 
szLi°Ch¨
, 2);

217 
tLí
 = 1;

219 
szLi°Ch¨
[
tLí
] = '\0';

220 
	}
}

227 
Àvñ_ty≥_íum


228 
	$eGëNumTy≥
(
UCHAR
 
ucNumLevñ
)

230 
ucNumLevñ
) {

233  
Àvñ_ty≥_ouéöe
;

235  
Àvñ_ty≥_numbîög
;

237  
Àvñ_ty≥_£quí˚
;

239  
Àvñ_ty≥_∑u£
;

241  
Àvñ_ty≥_n⁄e
;

243 
	}
}

249 
	$vC‹ª˘StyÀVÆues
(
°yÀ_block_ty≥
 *
pStyÀBlock
)

251 i‡(
pStyÀBlock
->
usBef‹eIndít
 > 0x7fff) {

252 
pStyÀBlock
->
usBef‹eIndít
 = 0;

253 } i‡(
pStyÀBlock
->
usBef‹eIndít
 > 2160) {

255 
	`DBG_DEC
(
pStyÀBlock
->
usBef‹eIndít
);

256 
pStyÀBlock
->
usBef‹eIndít
 = 2160;

258 i‡(
pStyÀBlock
->
usI°d
 >= 1 &&

259 
pStyÀBlock
->
usI°d
 <= 9 &&

260 
pStyÀBlock
->
usBef‹eIndít
 < 
HEADING_GAP
) {

261 
	`NO_DBG_DEC
(
pStyÀBlock
->
usBef‹eIndít
);

262 
pStyÀBlock
->
usBef‹eIndít
 = 
HEADING_GAP
;

265 i‡(
pStyÀBlock
->
usA·îIndít
 > 0x7fff) {

266 
pStyÀBlock
->
usA·îIndít
 = 0;

267 } i‡(
pStyÀBlock
->
usA·îIndít
 > 2160) {

269 
	`DBG_DEC
(
pStyÀBlock
->
usA·îIndít
);

270 
pStyÀBlock
->
usA·îIndít
 = 2160;

272 i‡(
pStyÀBlock
->
usI°d
 >= 1 &&

273 
pStyÀBlock
->
usI°d
 <= 9 &&

274 
pStyÀBlock
->
usA·îIndít
 < 
HEADING_GAP
) {

275 
	`NO_DBG_DEC
(
pStyÀBlock
->
usA·îIndít
);

276 
pStyÀBlock
->
usA·îIndít
 = 
HEADING_GAP
;

279 i‡(
pStyÀBlock
->
sLe·Indít
 < 0) {

280 
pStyÀBlock
->
sLe·Indít
 = 0;

282 i‡(
pStyÀBlock
->
sRightIndít
 > 0) {

283 
pStyÀBlock
->
sRightIndít
 = 0;

285 
	`vC⁄vîtLi°Ch¨a˘î
(
pStyÀBlock
->
ucNFC
,

286 
pStyÀBlock
->
usLi°Ch¨
,

287 
pStyÀBlock
->
szLi°Ch¨
);

288 
	}
}

294 
	$vAdd2StyÀInfoLi°
(c⁄° 
°yÀ_block_ty≥
 *
pStyÀBlock
)

296 
°yÀ_mem_ty≥
 *
pLi°Membî
;

298 
	`Áû
(
pStyÀBlock
 =
NULL
);

300 
	`NO_DBG_MSG
("bAdd2StyleInfoList");

302 i‡(
pStyÀBlock
->
ulFûeOff£t
 =
FC_INVALID
) {

303 
	`NO_DBG_DEC
(
pStyÀBlock
->
usI°d
);

307 
	`NO_DBG_HEX
(
pStyÀBlock
->
ulFûeOff£t
);

308 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
sLe·Indít
 != 0,

309 
pStyÀBlock
->
sLe·Indít
);

310 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
sRightIndít
 != 0,

311 
pStyÀBlock
->
sRightIndít
);

312 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
bNumPau£
,ÖStyleBlock->bNumPause);

313 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
usI°d
 != 0,ÖStyleBlock->usIstd);

314 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
usSèπAt
 != 1,ÖStyleBlock->usStartAt);

315 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
usA·îIndít
 != 0,

316 
pStyÀBlock
->
usA·îIndít
);

317 
	`NO_DBG_DEC_C
(
pStyÀBlock
->
ucAlignmít
 != 0,ÖStyleBlock->ucAlignment);

318 
	`NO_DBG_DEC
(
pStyÀBlock
->
ucNFC
);

319 
	`NO_DBG_HEX
(
pStyÀBlock
->
usLi°Ch¨
);

321 i‡(
pStyÀLa°
 !
NULL
 &&

322 
pStyÀLa°
->
tInfo
.
ulFûeOff£t
 =
pStyÀBlock
->ulFileOffset) {

327 
	`Áû
(
pStyÀLa°
->
pNext
 !
NULL
);

328 
pStyÀLa°
->
tInfo
 = *
pStyÀBlock
;

330 
	`vC‹ª˘StyÀVÆues
(&
pStyÀLa°
->
tInfo
);

335 
pLi°Membî
 = 
	`xmÆloc
((
°yÀ_mem_ty≥
));

337 
pLi°Membî
->
tInfo
 = *
pStyÀBlock
;

338 
pLi°Membî
->
pNext
 = 
NULL
;

340 
pLi°Membî
->
ulSequí˚Numbî
 =

341 
	`ulGëSeqNumbî
(
pLi°Membî
->
tInfo
.
ulFûeOff£t
);

343 
	`vC‹ª˘StyÀVÆues
(&
pLi°Membî
->
tInfo
);

345 i‡(
pAnch‹
 =
NULL
) {

346 
pAnch‹
 = 
pLi°Membî
;

348 
pMidPå
 = 
pAnch‹
;

349 
bMoveMidPå
 = 
FALSE
;

350 
bInSequí˚
 = 
TRUE
;

352 
	`Áû
(
pStyÀLa°
 =
NULL
);

353 
pStyÀLa°
->
pNext
 = 
pLi°Membî
;

355 i‡(
bMoveMidPå
) {

356 
pMidPå
 =ÖMidPå->
pNext
;

357 
bMoveMidPå
 = 
FALSE
;

359 
bMoveMidPå
 = 
TRUE
;

361 i‡(
bInSequí˚
) {

362 
bInSequí˚
 = 
pLi°Membî
->
ulSequí˚Numbî
 >

363 
pStyÀLa°
->
ulSequí˚Numbî
;

366 
pStyÀLa°
 = 
pLi°Membî
;

367 
	}
}

372 c⁄° 
°yÀ_block_ty≥
 *

373 
	$pGëNextStyÀInfoLi°Iãm
(c⁄° 
°yÀ_block_ty≥
 *
pCuº
)

375 c⁄° 
°yÀ_mem_ty≥
 *
pRec‹d
;

376 
size_t
 
tOff£t
;

378 i‡(
pCuº
 =
NULL
) {

379 i‡(
pAnch‹
 =
NULL
) {

381  
NULL
;

384  &
pAnch‹
->
tInfo
;

386 
tOff£t
 = 
	`off£tof
(
°yÀ_mem_ty≥
, 
tInfo
);

388 
pRec‹d
 = (
°yÀ_mem_ty≥
 *)(*)((*)
pCuº
 - 
tOff£t
);

389 
	`Áû
(
pCuº
 !&
pRec‹d
->
tInfo
);

390 i‡(
pRec‹d
->
pNext
 =
NULL
) {

392  
NULL
;

394  &
pRec‹d
->
pNext
->
tInfo
;

395 
	}
}

400 c⁄° 
°yÀ_block_ty≥
 *

401 
	$pGëNextTextStyÀ
(c⁄° 
°yÀ_block_ty≥
 *
pCuº
)

403 c⁄° 
°yÀ_block_ty≥
 *
pRec‹d
;

405 
pRec‹d
 = 
pCuº
;

407 
pRec‹d
 = 
	`pGëNextStyÀInfoLi°Iãm
(pRecord);

408 } 
pRec‹d
 !
NULL
 &&

409 (
pRec‹d
->
eLi°ID
 =
hdr·r_li°
 ||

410 
pRec‹d
->
eLi°ID
 =
ma¸o_li°
 ||

411 
pRec‹d
->
eLi°ID
 =
™nŸ©i⁄_li°
));

412  
pRec‹d
;

413 
	}
}

418 
USHORT


419 
	$usGëI°d
(
ULONG
 
ulFûeOff£t
)

421 c⁄° 
°yÀ_mem_ty≥
 *
pCuº
, *
pBe°
, *
pSèπ
;

422 
ULONG
 
ulSeq
, 
ulBe°
;

424 
ulSeq
 = 
	`ulGëSeqNumbî
(
ulFûeOff£t
);

425 i‡(
ulSeq
 =
FC_INVALID
) {

426  
ISTD_NORMAL
;

428 
	`NO_DBG_HEX
(
ulFûeOff£t
);

429 
	`NO_DBG_DEC
(
ulSeq
);

431 i‡(
bInSequí˚
 &&

432 
pMidPå
 !
NULL
 &&

433 
ulSeq
 > 
pMidPå
->
ulSequí˚Numbî
) {

435 
pSèπ
 = 
pMidPå
;

437 
pSèπ
 = 
pAnch‹
;

440 
pBe°
 = 
NULL
;

441 
ulBe°
 = 0;

442 
pCuº
 = 
pSèπ
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

443 i‡(
pCuº
->
ulSequí˚Numbî
 !
FC_INVALID
 &&

444 (
pBe°
 =
NULL
 || 
pCuº
->
ulSequí˚Numbî
 > 
ulBe°
) &&

445 
pCuº
->
ulSequí˚Numbî
 <
ulSeq
) {

446 
pBe°
 = 
pCuº
;

447 
ulBe°
 = 
pCuº
->
ulSequí˚Numbî
;

449 i‡(
bInSequí˚
 && 
pCuº
->
ulSequí˚Numbî
 > 
ulSeq
) {

453 
	`NO_DBG_DEC
(
ulBe°
);

455 i‡(
pBe°
 =
NULL
) {

456  
ISTD_NORMAL
;

459 
	`NO_DBG_DEC
(
pBe°
->
tInfo
.
usI°d
);

460  
pBe°
->
tInfo
.
usI°d
;

461 
	}
}

471 
BOOL


472 
	$bStyÀIm∂õsLi°
(c⁄° 
°yÀ_block_ty≥
 *
pStyÀ
, 
iW‹dVîsi⁄
)

474 
	`Áû
(
pStyÀ
 =
NULL
);

475 
	`Áû
(
iW‹dVîsi⁄
 < 0);

477 i‡(
pStyÀ
->
usI°d
 >= 1 &&ÖStyle->usIstd <= 9) {

479  
FALSE
;

481 i‡(
iW‹dVîsi⁄
 < 8) {

483  
pStyÀ
->
ucNumLevñ
 != 0;

486  
pStyÀ
->
usLi°Index
 != 0;

487 
	}
}

	@stylesheet.c

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

14 
	#SGC_PAP
 1

	)

15 
	#SGC_CHP
 2

	)

18 
°yÀ_block_ty≥
 *
	g©StyÀInfo
 = 
NULL
;

19 
f⁄t_block_ty≥
 *
	g©F⁄tInfo
 = 
NULL
;

20 
BOOL
 *
	gabFûÀd
 = 
NULL
;

21 
size_t
 
	gtStdCou¡
 = 0;

28 
	$vDe°royStyÀshìtLi°
()

30 
	`DBG_MSG
("vDestroyStylesheetList");

32 
tStdCou¡
 = 0;

33 
©StyÀInfo
 = 
	`x‰ì
(atStyleInfo);

34 
©F⁄tInfo
 = 
	`x‰ì
(atFontInfo);

35 
abFûÀd
 = 
	`x‰ì
(abFilled);

36 
	}
}

42 
	$vGëDeÁu…StyÀ
(
°yÀ_block_ty≥
 *
pStyÀ
)

44 ()
	`mem£t
(
pStyÀ
, 0, (*pStyle));

45 
pStyÀ
->
usI°d
 = 
ISTD_INVALID
;

46 
pStyÀ
->
usI°dNext
 = 
ISTD_INVALID
;

47 
pStyÀ
->
usSèπAt
 = 1;

48 
pStyÀ
->
ucLi°Levñ
 = 9;

49 
	}
}

55 
	$vGëDeÁu…F⁄t
(
f⁄t_block_ty≥
 *
pF⁄t
, 
USHORT
 
usDeÁu…F⁄tNumbî
)

57 ()
	`mem£t
(
pF⁄t
, 0, (*pFont));

58 
pF⁄t
->
usF⁄tSize
 = 
DEFAULT_FONT_SIZE
;

59 i‡(
usDeÁu…F⁄tNumbî
 <(
USHORT
)
UCHAR_MAX
) {

60 
pF⁄t
->
ucF⁄tNumbî
 = (
UCHAR
)
usDeÁu…F⁄tNumbî
;

62 
	`DBG_DEC
(
usDeÁu…F⁄tNumbî
);

63 
	`DBG_FIXME
();

64 
pF⁄t
->
ucF⁄tNumbî
 = 0;

66 
	}
}

74 
	$iGëStyÀIndex
(
USHORT
 
usI°d
)

76 
iIndex
;

78 
	`Áû
(
abFûÀd
 =
NULL
);

80 i‡(
usI°d
 =
ISTD_INVALID
 || 
abFûÀd
 =
NULL
) {

84 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

85 i‡(
abFûÀd
[
iIndex
] && 
©StyÀInfo
[iIndex].
usI°d
 == usIstd) {

87  
iIndex
;

91 
	}
}

97 
	$vGëBuûdöStyÀ
(
UCHAR
 
ucStc
, 
°yÀ_block_ty≥
 *
pStyÀ
)

99 
	`Áû
(
pStyÀ
 =
NULL
);

102 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

105 
ucStc
) {

112 
pStyÀ
->
sLe·Indít
 = 720;

116 
pStyÀ
->
sLe·Indít
 = 360;

119 
pStyÀ
->
usBef‹eIndít
 = 120;

122 
pStyÀ
->
usBef‹eIndít
 = 240;

125 i‡(
ucStc
 >= 233 && ucStc <= 239) {

126 
pStyÀ
->
sLe·Indít
 = (239 - ()
ucStc
) * 360;

128 i‡(
ucStc
 >= 225 && ucStc <= 232) {

129 
pStyÀ
->
sLe·Indít
 = (232 - ()
ucStc
) * 720;

130 
pStyÀ
->
sRightIndít
 = 720;

134 
	}
}

140 
	$vGëBuûdöF⁄t
(
UCHAR
 
ucStc
, 
f⁄t_block_ty≥
 *
pF⁄t
)

142 
	`Áû
(
pF⁄t
 =
NULL
);

145 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 0);

148 
ucStc
) {

151 
pF⁄t
->
usF⁄tSize
 = 16;

156 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_ITALIC
;

159 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

162 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

165 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_UNDERLINE
;

166 
pF⁄t
->
usF⁄tSize
 = 24;

169 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

170 
pF⁄t
->
usF⁄tSize
 = 24;

173 
pF⁄t
->
ucF⁄tNumbî
 = 2;

174 
pF⁄t
->
usF⁄tStyÀ
 |
FONT_BOLD
;

175 
pF⁄t
->
usF⁄tSize
 = 24;

178 
pF⁄t
->
ucF⁄tNumbî
 = 2;

179 
pF⁄t
->
usF⁄tStyÀ
 |(
FONT_BOLD
|
FONT_UNDERLINE
);

180 
pF⁄t
->
usF⁄tSize
 = 24;

185 
	}
}

191 
USHORT


192 
	$usStc2i°d
(
UCHAR
 
ucStc
)

195 i‡(
ucStc
 == 222) {

196  
STI_NIL
;

201 i‡((
ucStc
 >= 1 && ucStc <= 9) ||

202 (
ucStc
 >= 246 && ucStc <= 254)) {

203  255 - (
USHORT
)
ucStc
;

205  (
USHORT
)
ucStc
;

206 
	}
}

212 
	$vGë2StyÀshìt
(
FILE
 *
pFûe
, 
iW‹dVîsi⁄
, c⁄° 
UCHAR
 *
aucHódî
)

214 
°yÀ_block_ty≥
 *
pStyÀ
;

215 
f⁄t_block_ty≥
 *
pF⁄t
;

216 
UCHAR
 *
aucBuf„r
;

217 
ULONG
 
ulBegöStshInfo
;

218 
size_t
 
tStshInfoLí
, 
tName
, 
tChpx
, 
tP≠x
, 
tMaxIndex
;

219 
iStIndex
, 
iChpxIndex
, 
iP≠xIndex
, 
iSt
, 
iChpx
, 
iP≠x
;

220 
iStd
, 
iIndex
, 
iBa£StyÀIndex
, 
iCou¡î
;

221 
USHORT
 
usBa£StyÀ
;

222 
UCHAR
 
ucStc
, 
ucStcNext
, 
ucStcBa£
;

224 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

225 
	`Áû
(
iW‹dVîsi⁄
 != 1 && iWordVersion != 2);

227 
ulBegöStshInfo
 = 
	`ulGëL⁄g
(0x5e, 
aucHódî
);

228 
	`NO_DBG_HEX
(
ulBegöStshInfo
);

229 
tStshInfoLí
 = (
size_t
)
	`usGëW‹d
(0x62, 
aucHódî
);

230 
	`NO_DBG_DEC
(
tStshInfoLí
);

232 
aucBuf„r
 = 
	`xmÆloc
(
tStshInfoLí
);

233 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tStshInfoLí
, 
ulBegöStshInfo
, 
pFûe
)) {

234 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

237 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tStshInfoLí
);

239 
	`Áû
(2 > 
tStshInfoLí
);

240 
iStd
 = ()
	`usGëW‹d
(0, 
aucBuf„r
);

242 
	`Áû
(2 + 2 > 
tStshInfoLí
);

243 
tName
 = (
size_t
)
	`usGëW‹d
(2, 
aucBuf„r
);

245 
	`Áû
(2 + 
tName
 + 2 > 
tStshInfoLí
);

246 
tChpx
 = (
size_t
)
	`usGëW‹d
(2 + 
tName
, 
aucBuf„r
);

248 
	`Áû
(2 + 
tName
 + 
tChpx
 + 2 > 
tStshInfoLí
);

249 
tP≠x
 = (
size_t
)
	`usGëW‹d
(2 + 
tName
 + 
tChpx
, 
aucBuf„r
);

251 
	`Áû
(2 + 
tName
 + 
tChpx
 + 
tP≠x
 + 2 > 
tStshInfoLí
);

252 
tStdCou¡
 = (
size_t
)
	`usGëW‹d
(2 + 
tName
 + 
tChpx
 + 
tP≠x
, 
aucBuf„r
);

254 
	`NO_DBG_HEX
(
tStdCou¡
);

256 
©StyÀInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
°yÀ_block_ty≥
));

257 
©F⁄tInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
f⁄t_block_ty≥
));

258 
abFûÀd
 = 
	`xˇŒoc
(
tStdCou¡
, (
BOOL
));

261 
iCou¡î
 = 0;

262 
iStIndex
 = 2 + 2;

263 
iChpxIndex
 = 2 + ()
tName
 + 2;

264 
iP≠xIndex
 = 2 + ()
tName
 + ()
tChpx
 + 2;

265 
tMaxIndex
 = 2 + 
tName
 + 
tChpx
 + 
tP≠x
 + 2;

267 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

268 
pStyÀ
 = &
©StyÀInfo
[
iIndex
];

269 
pF⁄t
 = &
©F⁄tInfo
[
iIndex
];

270 
iSt
 = ()
	`ucGëByã
(
iStIndex
, 
aucBuf„r
);

271 
iChpx
 = ()
	`ucGëByã
(
iChpxIndex
, 
aucBuf„r
);

272 
iP≠x
 = ()
	`ucGëByã
(
iP≠xIndex
, 
aucBuf„r
);

273 
	`NO_DBG_HEX
(
iSt
);

274 
	`NO_DBG_HEX
(
iChpx
);

275 
	`NO_DBG_HEX
(
iP≠x
);

276 i‡(
iSt
 =0xf‡|| 
tMaxIndex
 + 1 >
tStshInfoLí
) {

278 
iStIndex
++;

279 
iChpxIndex
++;

280 
iP≠xIndex
++;

281 
tMaxIndex
 += 2;

282 i‡(!
abFûÀd
[
iIndex
]) {

283 
	`DBG_HEX_C
(
iChpx
 != 0xff, iChpx);

284 
	`DBG_HEX_C
(
iP≠x
 != 0xff, iPapx);

285 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

286 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 0);

287 
abFûÀd
[
iIndex
] = 
TRUE
;

292 
	`NO_DBG_STRN
(
aucBuf„r
 + 
iStIndex
 + 1, 
iSt
);

293 
iStIndex
 +
iSt
 + 1;

295 
ucStcNext
 = 
	`ucGëByã
(
tMaxIndex
, 
aucBuf„r
);

296 
ucStcBa£
 = 
	`ucGëByã
(
tMaxIndex
 + 1, 
aucBuf„r
);

297 
ucStc
 = (
UCHAR
)((
iIndex
 - 
iStd
) & 0xff);

298 
	`NO_DBG_DEC
(
ucStc
);

300 i‡(
iChpx
 =0xf‡|| 
iP≠x
 == 0xff) {

302 
iChpxIndex
++;

303 
iP≠xIndex
++;

304 
tMaxIndex
 += 2;

305 i‡(!
abFûÀd
[
iIndex
]) {

306 
	`DBG_HEX_C
(
iChpx
 != 0xff, iChpx);

307 
	`DBG_HEX_C
(
iP≠x
 != 0xff, iPapx);

308 
	`vGëBuûdöStyÀ
(
ucStc
, 
pStyÀ
);

309 
pStyÀ
->
usI°d
 = 
	`usStc2i°d
(
ucStc
);

310 
pStyÀ
->
usI°dNext
 =

311 
	`usStc2i°d
(
ucStcNext
);

312 
	`vGëBuûdöF⁄t
(
ucStc
, 
pF⁄t
);

313 
abFûÀd
[
iIndex
] = 
TRUE
;

318 i‡(
abFûÀd
[
iIndex
]) {

320 
iChpxIndex
 +
iChpx
 + 1;

321 
iP≠xIndex
 +
iP≠x
 + 1;

322 
tMaxIndex
 += 2;

326 
usBa£StyÀ
 = 
	`usStc2i°d
(
ucStcBa£
);

328 i‡(
usBa£StyÀ
 =
STI_NIL
) {

330 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

331 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 0);

333 
iBa£StyÀIndex
 = 
	`iGëStyÀIndex
(
usBa£StyÀ
);

334 
	`NO_DBG_DEC
(
iBa£StyÀIndex
);

335 i‡(
iBa£StyÀIndex
 < 0) {

337 
iChpxIndex
 +
iChpx
 + 1;

338 
iP≠xIndex
 +
iP≠x
 + 1;

339 
tMaxIndex
 += 2;

342 
	`Áû
(
iBa£StyÀIndex
 >()
tStdCou¡
);

343 
	`Áû
(!
abFûÀd
[
iBa£StyÀIndex
]);

345 *
pStyÀ
 = 
©StyÀInfo
[
iBa£StyÀIndex
];

346 *
pF⁄t
 = 
©F⁄tInfo
[
iBa£StyÀIndex
];

348 
pStyÀ
->
usI°d
 = 
	`usStc2i°d
(
ucStc
);

349 
pStyÀ
->
usI°dNext
 = 
	`usStc2i°d
(
ucStcNext
);

351 
abFûÀd
[
iIndex
] = 
TRUE
;

352 
iCou¡î
++;

355 
iChpx
) {

358 
iChpxIndex
++;

361 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
 + 
iChpxIndex
 + 1,

362 
iChpx
);

363 i‡(
iW‹dVîsi⁄
 == 1) {

364 
	`vGë1F⁄tInfo
(0,

365 
aucBuf„r
 + 
iChpxIndex
 + 1,

366 (
size_t
)
iChpx
, 
pF⁄t
);

368 
	`vGë2F⁄tInfo
(0,

369 
aucBuf„r
 + 
iChpxIndex
 + 1,

370 (
size_t
)
iChpx
, 
pF⁄t
);

372 
iChpxIndex
 +
iChpx
 + 1;

376 
iP≠x
) {

379 
iP≠xIndex
++;

382 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
 + 
iP≠xIndex
 + 8,

383 
iP≠x
 - 7);

384 
	`vGë2StyÀInfo
(0, 
aucBuf„r
 + 
iP≠xIndex
 + 8,

385 
iP≠x
 - 7, 
pStyÀ
);

386 
iP≠xIndex
 +
iP≠x
 + 1;

389 
tMaxIndex
 += 2;

392 
	`NO_DBG_DEC
(
iCou¡î
);

393 } 
iCou¡î
 > 0);

396 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

397 i‡(!
abFûÀd
[
iIndex
]) {

398 
	`NO_DBG_DEC
(
iIndex
);

399 
	`vGëDeÁu…StyÀ
(&
©StyÀInfo
[
iIndex
]);

400 
	`vGëDeÁu…F⁄t
(&
©F⁄tInfo
[
iIndex
], 0);

405 
abFûÀd
 = 
	`x‰ì
(abFilled);

406 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

407 
	}
}

413 
	$vGë6StyÀshìt
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

414 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
, c⁄° 
UCHAR
 *
aucHódî
)

416 
°yÀ_block_ty≥
 *
pStyÀ
;

417 
f⁄t_block_ty≥
 *
pF⁄t
;

418 
UCHAR
 *
aucBuf„r
;

419 
ULONG
 
ulBegöStshInfo
;

420 
size_t
 
tStshInfoLí
, 
tOff£t
, 
tStdLí
, 
tStdBa£InFûe
;

421 
size_t
 
tPos
, 
tNameLí
, 
tUpxLí
;

422 
iIndex
, 
iBa£StyÀIndex
, 
iCou¡î
;

423 
USHORT
 
usTmp
, 
usUpxCou¡
, 
usStyÀTy≥
, 
usBa£StyÀ
;

424 
USHORT
 
usFtcSènd¨dChpStsh
;

426 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

427 
	`Áû
(
ulSèπBlock
 > 
MAX_BLOCKNUMBER
 && ulSèπBlock !
END_OF_CHAIN
);

428 
	`Áû
(
aulBBD
 =
NULL
);

430 
ulBegöStshInfo
 = 
	`ulGëL⁄g
(0x60, 
aucHódî
);

431 
	`NO_DBG_HEX
(
ulBegöStshInfo
);

432 
tStshInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x64, 
aucHódî
);

433 
	`NO_DBG_DEC
(
tStshInfoLí
);

435 
aucBuf„r
 = 
	`xmÆloc
(
tStshInfoLí
);

436 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

437 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

438 
aucBuf„r
, 
ulBegöStshInfo
, 
tStshInfoLí
)) {

439 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

442 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tStshInfoLí
);

444 
tStdCou¡
 = (
size_t
)
	`usGëW‹d
(2, 
aucBuf„r
);

445 
	`NO_DBG_DEC
(
tStdCou¡
);

446 
tStdBa£InFûe
 = (
size_t
)
	`usGëW‹d
(4, 
aucBuf„r
);

447 
usFtcSènd¨dChpStsh
 = 
	`usGëW‹d
(14, 
aucBuf„r
);

448 
	`NO_DBG_DEC
(
usFtcSènd¨dChpStsh
);

450 
©StyÀInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
°yÀ_block_ty≥
));

451 
©F⁄tInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
f⁄t_block_ty≥
));

452 
abFûÀd
 = 
	`xˇŒoc
(
tStdCou¡
, (
BOOL
));

455 
iCou¡î
 = 0;

457 
iIndex
 = 0, 
tOff£t
 = 2 + (
size_t
)
	`usGëW‹d
(0, 
aucBuf„r
);

458 
iIndex
 < ()
tStdCou¡
;

459 
iIndex
++, 
tOff£t
 +2 + 
tStdLí
) {

460 
	`NO_DBG_DEC
(
tOff£t
);

461 
tStdLí
 = (
size_t
)
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

462 
	`NO_DBG_DEC
(
tStdLí
);

463 i‡(
abFûÀd
[
iIndex
]) {

467 
pStyÀ
 = &
©StyÀInfo
[
iIndex
];

468 
pF⁄t
 = &
©F⁄tInfo
[
iIndex
];

469 i‡(
tStdLí
 == 0) {

471 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

472 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 
usFtcSènd¨dChpStsh
);

473 
abFûÀd
[
iIndex
] = 
TRUE
;

476 
usTmp
 = 
	`usGëW‹d
(
tOff£t
 + 4, 
aucBuf„r
);

477 
usStyÀTy≥
 = 
usTmp
 % 16;

478 
usBa£StyÀ
 = 
usTmp
 / 16;

479 
	`NO_DBG_DEC
(
usStyÀTy≥
);

480 
	`NO_DBG_DEC
(
usBa£StyÀ
);

481 i‡(
usBa£StyÀ
 =
STI_NIL
 || usBa£StyÀ =
STI_USER
) {

483 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

484 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 
usFtcSènd¨dChpStsh
);

486 
iBa£StyÀIndex
 = 
	`iGëStyÀIndex
(
usBa£StyÀ
);

487 
	`NO_DBG_DEC
(
iBa£StyÀIndex
);

488 i‡(
iBa£StyÀIndex
 < 0) {

492 
	`Áû
(
iBa£StyÀIndex
 >()
tStdCou¡
);

493 
	`Áû
(!
abFûÀd
[
iBa£StyÀIndex
]);

495 *
pStyÀ
 = 
©StyÀInfo
[
iBa£StyÀIndex
];

496 
pStyÀ
->
usI°d
 = 
ISTD_INVALID
;

497 *
pF⁄t
 = 
©F⁄tInfo
[
iBa£StyÀIndex
];

499 
abFûÀd
[
iIndex
] = 
TRUE
;

500 
iCou¡î
++;

502 
usTmp
 = 
	`usGëW‹d
(
tOff£t
 + 6, 
aucBuf„r
);

503 
usUpxCou¡
 = 
usTmp
 % 16;

504 
pStyÀ
->
usI°dNext
 = 
usTmp
 / 16;;

505 
	`NO_DBG_DEC
(
usUpxCou¡
);

506 
tPos
 = 2 + 
tStdBa£InFûe
;

507 
	`NO_DBG_DEC
(
tPos
);

508 
tNameLí
 = (
size_t
)
	`ucGëByã
(
tOff£t
 + 
tPos
, 
aucBuf„r
);

509 
	`NO_DBG_DEC
(
tNameLí
);

510 
	`NO_DBG_STRN
(
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 1, 
tNameLí
);

511 
tNameLí
++;

512 
tPos
 +1 + 
tNameLí
;

513 i‡(
	`odd
(
tPos
)) {

514 
tPos
++;

516 
	`NO_DBG_DEC
(
tPos
);

517 i‡(
tPos
 >
tStdLí
) {

520 
tUpxLí
 = (
size_t
)
	`usGëW‹d
(
tOff£t
 + 
tPos
, 
aucBuf„r
);

521 
	`NO_DBG_DEC
(
tUpxLí
);

522 i‡(
tPos
 + 
tUpxLí
 > 
tStdLí
) {

524 
	`DBG_DEC_C
(
tPos
 + 
tUpxLí
 > 
tStdLí
,

525 
tPos
 + 
tUpxLí
);

528 i‡(
usStyÀTy≥
 =
SGC_PAP
 && 
usUpxCou¡
 >= 1) {

529 i‡(
tUpxLí
 >= 2) {

530 
	`NO_DBG_PRINT_BLOCK
(

531 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

532 
tUpxLí
);

533 
pStyÀ
->
usI°d
 = 
	`usGëW‹d
(

534 
tOff£t
 + 
tPos
 + 2, 
aucBuf„r
);

535 
	`NO_DBG_DEC
(
pStyÀ
->
usI°d
);

536 
	`NO_DBG_DEC
(
pStyÀ
->
usI°dNext
);

537 
	`vGë6StyÀInfo
(0,

538 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 4,

539 
tUpxLí
 - 2, 
pStyÀ
);

540 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

541 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

542 
	`NO_DBG_HEX
(
pStyÀ
->
ucAlignmít
);

544 
tPos
 +2 + 
tUpxLí
;

545 i‡(
	`odd
(
tPos
)) {

546 
tPos
++;

548 
	`NO_DBG_DEC
(
tPos
);

549 
tUpxLí
 = (
size_t
)
	`usGëW‹d
(

550 
tOff£t
 + 
tPos
, 
aucBuf„r
);

551 
	`NO_DBG_DEC
(
tUpxLí
);

553 i‡(
tUpxLí
 =0 || 
tPos
 +ÅUpxLí > 
tStdLí
) {

555 
	`DBG_DEC_C
(
tPos
 + 
tUpxLí
 > 
tStdLí
,

556 
tPos
 + 
tUpxLí
);

559 i‡((
usStyÀTy≥
 =
SGC_PAP
 && 
usUpxCou¡
 >= 2) ||

560 (
usStyÀTy≥
 =
SGC_CHP
 && 
usUpxCou¡
 >= 1)) {

561 
	`NO_DBG_PRINT_BLOCK
(

562 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

563 
tUpxLí
);

564 
	`vGë6F⁄tInfo
(0, 
ISTD_INVALID
,

565 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

566 ()
tUpxLí
, 
pF⁄t
);

567 
	`NO_DBG_DEC
(
pF⁄t
->
usF⁄tSize
);

568 
	`NO_DBG_DEC
(
pF⁄t
->
ucF⁄tcﬁ‹
);

569 
	`NO_DBG_HEX
(
pF⁄t
->
usF⁄tStyÀ
);

572 
	`NO_DBG_DEC
(
iCou¡î
);

573 } 
iCou¡î
 > 0);

576 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

577 i‡(!
abFûÀd
[
iIndex
]) {

578 
	`NO_DBG_DEC
(
iIndex
);

579 
	`vGëDeÁu…StyÀ
(&
©StyÀInfo
[
iIndex
]);

580 
	`vGëDeÁu…F⁄t
(&
©F⁄tInfo
[
iIndex
],

581 
usFtcSènd¨dChpStsh
);

586 
abFûÀd
 = 
	`x‰ì
(abFilled);

587 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

588 
	}
}

594 
	$vGë8StyÀshìt
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

595 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

596 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

597 c⁄° 
UCHAR
 *
aucHódî
)

599 
°yÀ_block_ty≥
 *
pStyÀ
;

600 
f⁄t_block_ty≥
 *
pF⁄t
;

601 c⁄° 
ULONG
 *
aulBlockDïŸ
;

602 
UCHAR
 *
aucBuf„r
;

603 
ULONG
 
ulBegöStshInfo
;

604 
size_t
 
tStshInfoLí
, 
tBlockDïŸLí
, 
tOff£t
, 
tStdLí
, 
tStdBa£InFûe
;

605 
size_t
 
tBlockSize
, 
tPos
, 
tNameLí
, 
tUpxLí
;

606 
iIndex
, 
iBa£StyÀIndex
, 
iCou¡î
;

607 
USHORT
 
usTmp
, 
usUpxCou¡
, 
usStyÀTy≥
, 
usBa£StyÀ
;

608 
USHORT
 
usFtcSènd¨dChpStsh
;

610 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 =NULL || 
aucHódî
 == NULL);

611 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

613 
ulBegöStshInfo
 = 
	`ulGëL⁄g
(0xa2, 
aucHódî
);

614 
	`NO_DBG_HEX
(
ulBegöStshInfo
);

615 
tStshInfoLí
 = (
size_t
)
	`ulGëL⁄g
(0xa6, 
aucHódî
);

616 
	`NO_DBG_DEC
(
tStshInfoLí
);

618 
	`NO_DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

619 
	`NO_DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

620 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

621 
	`DBG_MSG
("No stylesheet information");

625 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

627 
aulBlockDïŸ
 = 
aulSBD
;

628 
tBlockDïŸLí
 = 
tSBDLí
;

629 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

632 
aulBlockDïŸ
 = 
aulBBD
;

633 
tBlockDïŸLí
 = 
tBBDLí
;

634 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

636 
aucBuf„r
 = 
	`xmÆloc
(
tStshInfoLí
);

637 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

638 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

639 
aucBuf„r
, 
ulBegöStshInfo
, 
tStshInfoLí
)) {

640 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

643 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tStshInfoLí
);

645 
tStdCou¡
 = (
size_t
)
	`usGëW‹d
(2, 
aucBuf„r
);

646 
	`NO_DBG_DEC
(
tStdCou¡
);

647 
tStdBa£InFûe
 = (
size_t
)
	`usGëW‹d
(4, 
aucBuf„r
);

648 
usFtcSènd¨dChpStsh
 = 
	`usGëW‹d
(14, 
aucBuf„r
);

649 
	`NO_DBG_DEC
(
usFtcSènd¨dChpStsh
);

651 
©StyÀInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
°yÀ_block_ty≥
));

652 
©F⁄tInfo
 = 
	`xˇŒoc
(
tStdCou¡
, (
f⁄t_block_ty≥
));

653 
abFûÀd
 = 
	`xˇŒoc
(
tStdCou¡
, (
BOOL
));

656 
iCou¡î
 = 0;

658 
iIndex
 = 0, 
tOff£t
 = 2 + (
size_t
)
	`usGëW‹d
(0, 
aucBuf„r
);

659 
iIndex
 < ()
tStdCou¡
;

660 
iIndex
++, 
tOff£t
 +2 + 
tStdLí
) {

661 
	`NO_DBG_DEC
(
tOff£t
);

662 
tStdLí
 = (
size_t
)
	`usGëW‹d
(
tOff£t
, 
aucBuf„r
);

663 
	`NO_DBG_DEC
(
tStdLí
);

664 i‡(
abFûÀd
[
iIndex
]) {

668 
pStyÀ
 = &
©StyÀInfo
[
iIndex
];

669 
pF⁄t
 = &
©F⁄tInfo
[
iIndex
];

670 i‡(
tStdLí
 == 0) {

672 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

673 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 
usFtcSènd¨dChpStsh
);

674 
abFûÀd
[
iIndex
] = 
TRUE
;

677 
usTmp
 = 
	`usGëW‹d
(
tOff£t
 + 4, 
aucBuf„r
);

678 
usStyÀTy≥
 = 
usTmp
 % 16;

679 
usBa£StyÀ
 = 
usTmp
 / 16;

680 
	`NO_DBG_DEC
(
usStyÀTy≥
);

681 
	`NO_DBG_DEC
(
usBa£StyÀ
);

682 i‡(
usBa£StyÀ
 =
STI_NIL
 || usBa£StyÀ =
STI_USER
) {

684 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

685 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 
usFtcSènd¨dChpStsh
);

687 
iBa£StyÀIndex
 = 
	`iGëStyÀIndex
(
usBa£StyÀ
);

688 
	`NO_DBG_DEC
(
iBa£StyÀIndex
);

689 i‡(
iBa£StyÀIndex
 < 0) {

693 
	`Áû
(
iBa£StyÀIndex
 >()
tStdCou¡
);

694 
	`Áû
(!
abFûÀd
[
iBa£StyÀIndex
]);

696 *
pStyÀ
 = 
©StyÀInfo
[
iBa£StyÀIndex
];

697 
pStyÀ
->
usI°d
 = 
ISTD_INVALID
;

698 *
pF⁄t
 = 
©F⁄tInfo
[
iBa£StyÀIndex
];

700 
abFûÀd
[
iIndex
] = 
TRUE
;

701 
iCou¡î
++;

703 
usTmp
 = 
	`usGëW‹d
(
tOff£t
 + 6, 
aucBuf„r
);

704 
usUpxCou¡
 = 
usTmp
 % 16;

705 
pStyÀ
->
usI°dNext
 = 
usTmp
 / 16;

706 
	`NO_DBG_DEC
(
usUpxCou¡
);

707 
tPos
 = 2 + 
tStdBa£InFûe
;

708 
	`NO_DBG_DEC
(
tPos
);

709 
tNameLí
 = (
size_t
)
	`usGëW‹d
(
tOff£t
 + 
tPos
, 
aucBuf„r
);

710 
	`NO_DBG_DEC
(
tNameLí
);

711 
tNameLí
 *= 2;

712 
	`NO_DBG_UNICODE_N
(
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

713 
tNameLí
);

714 
tNameLí
 += 2;

715 
tPos
 +2 + 
tNameLí
;

716 i‡(
	`odd
(
tPos
)) {

717 
tPos
++;

719 
	`NO_DBG_DEC
(
tPos
);

720 i‡(
tPos
 >
tStdLí
) {

723 
tUpxLí
 = (
size_t
)
	`usGëW‹d
(
tOff£t
 + 
tPos
, 
aucBuf„r
);

724 
	`NO_DBG_DEC
(
tUpxLí
);

725 i‡(
tPos
 + 
tUpxLí
 > 
tStdLí
) {

727 
	`DBG_DEC_C
(
tPos
 + 
tUpxLí
 > 
tStdLí
,

728 
tPos
 + 
tUpxLí
);

731 i‡(
usStyÀTy≥
 =
SGC_PAP
 && 
usUpxCou¡
 >= 1) {

732 i‡(
tUpxLí
 >= 2) {

733 
	`NO_DBG_PRINT_BLOCK
(

734 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

735 
tUpxLí
);

736 
pStyÀ
->
usI°d
 = 
	`usGëW‹d
(

737 
tOff£t
 + 
tPos
 + 2, 
aucBuf„r
);

738 
	`NO_DBG_DEC
(
pStyÀ
->
usI°d
);

739 
	`NO_DBG_DEC
(
pStyÀ
->
usI°dNext
);

740 
	`vGë8StyÀInfo
(0,

741 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 4,

742 
tUpxLí
 - 2, 
pStyÀ
);

743 
	`NO_DBG_DEC
(
pStyÀ
->
sLe·Indít
);

744 
	`NO_DBG_DEC
(
pStyÀ
->
sRightIndít
);

745 
	`NO_DBG_HEX
(
pStyÀ
->
ucAlignmít
);

747 
tPos
 +2 + 
tUpxLí
;

748 i‡(
	`odd
(
tPos
)) {

749 
tPos
++;

751 
	`NO_DBG_DEC
(
tPos
);

752 
tUpxLí
 = (
size_t
)
	`usGëW‹d
(

753 
tOff£t
 + 
tPos
, 
aucBuf„r
);

754 
	`NO_DBG_DEC
(
tUpxLí
);

756 i‡(
tUpxLí
 =0 || 
tPos
 +ÅUpxLí > 
tStdLí
) {

758 
	`DBG_DEC_C
(
tPos
 + 
tUpxLí
 > 
tStdLí
,

759 
tPos
 + 
tUpxLí
);

762 i‡((
usStyÀTy≥
 =
SGC_PAP
 && 
usUpxCou¡
 >= 2) ||

763 (
usStyÀTy≥
 =
SGC_CHP
 && 
usUpxCou¡
 >= 1)) {

764 
	`NO_DBG_PRINT_BLOCK
(

765 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

766 
tUpxLí
);

767 
	`vGë8F⁄tInfo
(0, 
ISTD_INVALID
,

768 
aucBuf„r
 + 
tOff£t
 + 
tPos
 + 2,

769 ()
tUpxLí
, 
pF⁄t
);

770 
	`NO_DBG_DEC
(
pF⁄t
->
usF⁄tSize
);

771 
	`NO_DBG_DEC
(
pF⁄t
->
ucF⁄tcﬁ‹
);

772 
	`NO_DBG_HEX
(
pF⁄t
->
usF⁄tStyÀ
);

775 
	`NO_DBG_DEC
(
iCou¡î
);

776 } 
iCou¡î
 > 0);

779 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

780 i‡(!
abFûÀd
[
iIndex
]) {

781 
	`NO_DBG_DEC
(
iIndex
);

782 
	`vGëDeÁu…StyÀ
(&
©StyÀInfo
[
iIndex
]);

783 
	`vGëDeÁu…F⁄t
(&
©F⁄tInfo
[
iIndex
],

784 
usFtcSènd¨dChpStsh
);

789 
abFûÀd
 = 
	`x‰ì
(abFilled);

790 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

791 
	}
}

797 
	$vFûlStyÀFromStyÀshìt
(
USHORT
 
usI°d
, 
°yÀ_block_ty≥
 *
pStyÀ
)

799 
iIndex
;

801 
	`Áû
(
pStyÀ
 =
NULL
);

803 i‡(
usI°d
 !
ISTD_INVALID
 && usI°d !
STI_NIL
 && usI°d !
STI_USER
) {

804 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

805 i‡(
©StyÀInfo
[
iIndex
].
usI°d
 == usIstd) {

807 *
pStyÀ
 = 
©StyÀInfo
[
iIndex
];

813 
	`vGëDeÁu…StyÀ
(
pStyÀ
);

814 
pStyÀ
->
usI°d
 = usIstd;

815 
	}
}

821 
	$vFûlF⁄tFromStyÀshìt
(
USHORT
 
usI°d
, 
f⁄t_block_ty≥
 *
pF⁄t
)

823 
iIndex
;

825 
	`Áû
(
pF⁄t
 =
NULL
);

827 i‡(
usI°d
 !
ISTD_INVALID
 && usI°d !
STI_NIL
 && usI°d !
STI_USER
) {

828 
iIndex
 = 0; iIndex < ()
tStdCou¡
; iIndex++) {

829 i‡(
©StyÀInfo
[
iIndex
].
usI°d
 == usIstd) {

831 *
pF⁄t
 = 
©F⁄tInfo
[
iIndex
];

837 
	`vGëDeÁu…F⁄t
(
pF⁄t
, 0);

838 
	}
}

	@summary.c

9 
	~<time.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

13 
	#P_HEADER_SZ
 28

	)

14 
	#P_SECTIONLIST_SZ
 20

	)

15 
	#P_LENGTH_SZ
 4

	)

16 
	#P_SECTION_MAX_SZ
 (2 * 
P_SECTIONLIST_SZ
 + 
P_LENGTH_SZ
)

	)

17 
	#P_SECTION_SZ
(
x
Ë((xË* 
P_SECTIONLIST_SZ
 + 
P_LENGTH_SZ
)

	)

19 
	#PID_TITLE
 2

	)

20 
	#PID_SUBJECT
 3

	)

21 
	#PID_AUTHOR
 4

	)

22 
	#PID_CREATE_DTM
 12

	)

23 
	#PID_LASTSAVE_DTM
 13

	)

24 
	#PID_APPNAME
 18

	)

26 
	#PIDD_MANAGER
 14

	)

27 
	#PIDD_COMPANY
 15

	)

29 
	#VT_LPSTR
 30

	)

30 
	#VT_FILETIME
 64

	)

32 
	#TIME_OFFSET_HI
 0x019db1de

	)

33 
	#TIME_OFFSET_LO
 0xd53e8000

	)

35 *
	gszTôÀ
 = 
NULL
;

36 *
	gszSubje˘
 = 
NULL
;

37 *
	gszAuth‹
 = 
NULL
;

38 
time_t
 
	gtCª©eDtm
 = (time_t)-1;

39 
time_t
 
	gtLa°SaveDtm
= (time_t)-1;

40 *
	gszAµName
 = 
NULL
;

41 *
	gszM™agî
 = 
NULL
;

42 *
	gszCom∑ny
 = 
NULL
;

43 
USHORT
 
	gusLid
 = (USHORT)-1;

50 
	$vDe°roySumm¨yInfo
()

52 
	`TRACE_MSG
("vDestroySummaryInfo");

54 
szTôÀ
 = 
	`x‰ì
(szTitle);

55 
szSubje˘
 = 
	`x‰ì
(szSubject);

56 
szAuth‹
 = 
	`x‰ì
(szAuthor);

57 
tCª©eDtm
 = (
time_t
)-1;

58 
tLa°SaveDtm
 = (
time_t
)-1;

59 
szAµName
 = 
	`x‰ì
(szAppName);

60 
szM™agî
 = 
	`x‰ì
(szManager);

61 
szCom∑ny
 = 
	`x‰ì
(szCompany);

62 
usLid
 = (
USHORT
)-1;

63 
	}
}

70 
time_t


71 
	$tC⁄vîtDosD©e
(c⁄° *
szDosD©e
)

73 
tm
 
tTime
;

74 c⁄° *
pcTmp
;

75 
time_t
 
tResu…
;

77 
	`mem£t
(&
tTime
, 0, (tTime));

78 
pcTmp
 = 
szDosD©e
;

80 i‡(!
	`isdigô
(*
pcTmp
)) {

81  (
time_t
)-1;

83 
tTime
.
tm_m⁄
 = ()(*
pcTmp
 - '0');

84 
pcTmp
++;

85 i‡(
	`isdigô
(*
pcTmp
)) {

86 
tTime
.
tm_m⁄
 *= 10;

87 
tTime
.
tm_m⁄
 +()(*
pcTmp
 - '0');

88 
pcTmp
++;

91 i‡(
	`iß um
(*
pcTmp
)) {

92  (
time_t
)-1;

94 
pcTmp
++;

96 i‡(!
	`isdigô
(*
pcTmp
)) {

97  (
time_t
)-1;

99 
tTime
.
tm_mday
 = ()(*
pcTmp
 - '0');

100 
pcTmp
++;

101 i‡(
	`isdigô
(*
pcTmp
)) {

102 
tTime
.
tm_mday
 *= 10;

103 
tTime
.
tm_mday
 +()(*
pcTmp
 - '0');

104 
pcTmp
++;

107 i‡(
	`iß um
(*
pcTmp
)) {

108  (
time_t
)-1;

110 
pcTmp
++;

112 i‡(!
	`isdigô
(*
pcTmp
)) {

113  (
time_t
)-1;

115 
tTime
.
tm_yór
 = ()(*
pcTmp
 - '0');

116 
pcTmp
++;

117 i‡(
	`isdigô
(*
pcTmp
)) {

118 
tTime
.
tm_yór
 *= 10;

119 
tTime
.
tm_yór
 +()(*
pcTmp
 - '0');

120 
pcTmp
++;

123 i‡(
tTime
.
tm_m⁄
 =0 ||ÅTime.
tm_mday
 == 0 ||ÅTime.tm_mday > 31) {

124  (
time_t
)-1;

127 
tTime
.
tm_m⁄
--;

128 i‡(
tTime
.
tm_yór
 < 80) {

129 
tTime
.
tm_yór
 += 100;

131 
tTime
.
tm_isd°
 = -1;

132 
tResu…
 = 
	`mktime
(&
tTime
);

133 
	`NO_DBG_MSG
(
	`˘ime
(&
tResu…
));

134  
tResu…
;

135 
	}
}

141 
	$szLp°r
(
ULONG
 
ulOff£t
, c⁄° 
UCHAR
 *
aucBuf„r
)

143 *
szSèπ
, *
szResu…
, *
szTmp
;

144 
size_t
 
tSize
;

146 
tSize
 = (
size_t
)
	`ulGëL⁄g
(
ulOff£t
 + 4, 
aucBuf„r
);

147 
	`NO_DBG_DEC
(
tSize
);

148 i‡(
tSize
 == 0) {

149  
NULL
;

152 
szSèπ
 = (*)
aucBuf„r
 + 
ulOff£t
 + 8;

153 
	`NO_DBG_MSG
(
szSèπ
);

154 
	`Áû
(
	`°æí
(
szSèπ
Ë>
tSize
);

155 
	`is•a˚
(*
szSèπ
)) {

156 
szSèπ
++;

158 i‡(
szSèπ
[0] == '\0') {

159  
NULL
;

161 
szResu…
 = 
	`x°rdup
(
szSèπ
);

163 
szTmp
 = 
szResu…
 + 
	`°æí
(szResult) - 1;

164 
	`is•a˚
(*
szTmp
)) {

165 *
szTmp
 = '\0';

166 
szTmp
--;

168 
	`NO_DBG_MSG
(
szResu…
);

169  
szResu…
;

170 
	}
}

175 
time_t


176 
	$tFûëime
(
ULONG
 
ulOff£t
, c⁄° 
UCHAR
 *
aucBuf„r
)

178 
dHi
, 
dLo
, 
dTmp
;

179 
ULONG
 
ulHi
, 
ulLo
;

180 
time_t
 
tResu…
;

182 
ulLo
 = 
	`ulGëL⁄g
(
ulOff£t
 + 4, 
aucBuf„r
);

183 
ulHi
 = 
	`ulGëL⁄g
(
ulOff£t
 + 8, 
aucBuf„r
);

184 
	`NO_DBG_HEX
(
ulHi
);

185 
	`NO_DBG_HEX
(
ulLo
);

188 
dHi
 = ()
ulHi
 - ()
TIME_OFFSET_HI
;

189 
dLo
 = ()
ulLo
 - ()
TIME_OFFSET_LO
;

190 
	`NO_DBG_FLT
(
dHi
);

191 
	`NO_DBG_FLT
(
dLo
);

194 
dTmp
 = 
dLo
 / 10000000.0;

195 
dTmp
 +
dHi
 * 429.4967926;

196 
	`NO_DBG_FLT
(
dTmp
);

199 i‡(
dTmp
 - 0.5 < 
TIME_T_MIN
 || dTm∞+ 0.5 > 
TIME_T_MAX
) {

200  (
time_t
)-1;

202 
tResu…
 = 
dTmp
 < 0.0 ? (
time_t
)(dTmp - 0.5) : (time_t)(dTmp + 0.5);

203 
	`NO_DBG_MSG
(
	`˘ime
(&
tResu…
));

204  
tResu…
;

205 
	}
}

211 
	$vA«ly£Summ¨yInfo
(c⁄° 
UCHAR
 *
aucBuf„r
)

213 
ULONG
 
ulOff£t
;

214 
size_t
 
tIndex
, 
tCou¡
, 
tPr›ID
, 
tPr›Ty≥
;

216 
tCou¡
 = (
size_t
)
	`ulGëL⁄g
(4, 
aucBuf„r
);

217 
	`DBG_DEC
(
tCou¡
);

218 
tIndex
 = 0;ÅIndex < 
tCou¡
;ÅIndex++) {

219 
tPr›ID
 = (
size_t
)
	`ulGëL⁄g
(8 + 
tIndex
 * 8, 
aucBuf„r
);

220 
ulOff£t
 = 
	`ulGëL⁄g
(12 + 
tIndex
 * 8, 
aucBuf„r
);

221 
	`NO_DBG_DEC
(
tPr›ID
);

222 
	`NO_DBG_HEX
(
ulOff£t
);

223 
tPr›Ty≥
 = (
size_t
)
	`ulGëL⁄g
(
ulOff£t
, 
aucBuf„r
);

224 
	`NO_DBG_DEC
(
tPr›Ty≥
);

225 
tPr›ID
) {

226 
PID_TITLE
:

227 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szTôÀ
 =
NULL
) {

228 
szTôÀ
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

231 
PID_SUBJECT
:

232 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szSubje˘
 =
NULL
) {

233 
szSubje˘
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

236 
PID_AUTHOR
:

237 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szAuth‹
 =
NULL
) {

238 
szAuth‹
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

241 
PID_CREATE_DTM
:

242 i‡(
tPr›Ty≥
 =
VT_FILETIME
 &&

243 
tCª©eDtm
 =(
time_t
)-1) {

244 
tCª©eDtm
 = 
	`tFûëime
(
ulOff£t
, 
aucBuf„r
);

247 
PID_LASTSAVE_DTM
:

248 i‡(
tPr›Ty≥
 =
VT_FILETIME
 &&

249 
tLa°SaveDtm
 =(
time_t
)-1) {

250 
tLa°SaveDtm
 = 
	`tFûëime
(
ulOff£t
, 
aucBuf„r
);

253 
PID_APPNAME
:

254 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szAµName
 =
NULL
) {

255 
szAµName
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

262 
	}
}

268 
	$vA«ly£DocumítSumm¨yInfo
(c⁄° 
UCHAR
 *
aucBuf„r
)

270 
ULONG
 
ulOff£t
;

271 
size_t
 
tIndex
, 
tCou¡
, 
tPr›ID
, 
tPr›Ty≥
;

273 
tCou¡
 = (
size_t
)
	`ulGëL⁄g
(4, 
aucBuf„r
);

274 
	`DBG_DEC
(
tCou¡
);

275 
tIndex
 = 0;ÅIndex < 
tCou¡
;ÅIndex++) {

276 
tPr›ID
 = (
size_t
)
	`ulGëL⁄g
(8 + 
tIndex
 * 8, 
aucBuf„r
);

277 
ulOff£t
 = 
	`ulGëL⁄g
(12 + 
tIndex
 * 8, 
aucBuf„r
);

278 
	`NO_DBG_DEC
(
tPr›ID
);

279 
	`NO_DBG_HEX
(
ulOff£t
);

280 
tPr›Ty≥
 = (
size_t
)
	`ulGëL⁄g
(
ulOff£t
, 
aucBuf„r
);

281 
	`NO_DBG_DEC
(
tPr›Ty≥
);

282 
tPr›ID
) {

283 
PIDD_MANAGER
:

284 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szM™agî
 =
NULL
) {

285 
szM™agî
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

288 
PIDD_COMPANY
:

289 i‡(
tPr›Ty≥
 =
VT_LPSTR
 && 
szCom∑ny
 =
NULL
) {

290 
szCom∑ny
 = 
	`szLp°r
(
ulOff£t
, 
aucBuf„r
);

297 
	}
}

302 
UCHAR
 *

303 
	$pucA«ly£Summ¨yInfoHódî
(
FILE
 *
pFûe
,

304 
ULONG
 
ulSèπBlock
, ULONG 
ulSize
,

305 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

306 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
)

308 c⁄° 
ULONG
 *
aulBlockDïŸ
;

309 
UCHAR
 *
aucBuf„r
;

310 
size_t
 
tBlockDïŸLí
, 
tBlockSize
, 
tSe˘i⁄Cou¡
, 
tLígth
;

311 
ULONG
 
ulTmp
, 
ulOff£t
;

312 
USHORT
 
usLôéeEndün
, 
usEm±y
, 
usOS
, 
usVîsi⁄
;

313 
UCHAR
 
aucHdr
[
P_HEADER_SZ
], 
aucSecL°
[
P_SECTION_MAX_SZ
];

315 i‡(
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

317 
aulBlockDïŸ
 = 
aulSBD
;

318 
tBlockDïŸLí
 = 
tSBDLí
;

319 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

322 
aulBlockDïŸ
 = 
aulBBD
;

323 
tBlockDïŸLí
 = 
tBBDLí
;

324 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

327 i‡(
tBlockDïŸLí
 == 0) {

328 
	`DBG_MSG
("The Block DepotÜength is zero");

329  
NULL
;

333 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

334 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

335 
aucHdr
, 0, 
P_HEADER_SZ
)) {

336  
NULL
;

338 
	`NO_DBG_PRINT_BLOCK
(
aucHdr
, 
P_HEADER_SZ
);

341 
usLôéeEndün
 = 
	`usGëW‹d
(0, 
aucHdr
);

342 i‡(
usLôéeEndün
 != 0xfffe) {

343 
	`DBG_HEX
(
usLôéeEndün
);

344 
	`DBG_MSG_C
(
usLôéeEndün
 == 0xfeff, "BigÉndian");

345  
NULL
;

347 
usEm±y
 = 
	`usGëW‹d
(2, 
aucHdr
);

348 i‡(
usEm±y
 != 0x0000) {

349 
	`DBG_DEC
(
usEm±y
);

350  
NULL
;

352 
ulTmp
 = 
	`ulGëL⁄g
(4, 
aucHdr
);

353 
	`DBG_HEX
(
ulTmp
);

354 
usOS
 = (
USHORT
)(
ulTmp
 >> 16);

355 
usVîsi⁄
 = (
USHORT
)(
ulTmp
 & 0xffff);

356 
usOS
) {

358 
	`DBG_MSG
("Win16");

359 
	`DBG_HEX
(
usVîsi⁄
);

362 
	`DBG_MSG
("MacOS");

363 
	`DBG_HEX
(
usVîsi⁄
);

366 
	`DBG_MSG
("Win32");

367 
	`DBG_HEX
(
usVîsi⁄
);

370 
	`DBG_DEC
(
usOS
);

371 
	`DBG_HEX
(
usVîsi⁄
);

374 
tSe˘i⁄Cou¡
 = (
size_t
)
	`ulGëL⁄g
(24, 
aucHdr
);

375 
	`DBG_DEC_C
(
tSe˘i⁄Cou¡
 != 1 &&ÅSectionCount != 2,ÅSectionCount);

376 i‡(
tSe˘i⁄Cou¡
 != 1 &&ÅSectionCount != 2) {

377  
NULL
;

381 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

382 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

383 
aucSecL°
, 
P_HEADER_SZ
, 
	`P_SECTION_SZ
(
tSe˘i⁄Cou¡
))) {

384  
NULL
;

386 
	`NO_DBG_PRINT_BLOCK
(
aucSecL°
, 
	`P_SECTION_SZ
(
tSe˘i⁄Cou¡
));

388 
ulTmp
 = 
	`ulGëL⁄g
(0, 
aucSecL°
);

389 
	`DBG_HEX
(
ulTmp
);

390 
ulTmp
 = 
	`ulGëL⁄g
(4, 
aucSecL°
);

391 
	`DBG_HEX
(
ulTmp
);

392 
ulTmp
 = 
	`ulGëL⁄g
(8, 
aucSecL°
);

393 
	`DBG_HEX
(
ulTmp
);

394 
ulTmp
 = 
	`ulGëL⁄g
(12, 
aucSecL°
);

395 
	`DBG_HEX
(
ulTmp
);

396 
ulOff£t
 = 
	`ulGëL⁄g
(16, 
aucSecL°
);

397 
	`DBG_DEC_C
(
ulOff£t
 !
P_HEADER_SZ
 + 
P_SECTIONLIST_SZ
 &&

398 
ulOff£t
 !
P_HEADER_SZ
 + 2 * 
P_SECTIONLIST_SZ
,

399 
ulOff£t
);

400 
	`Áû
(
ulOff£t
 !
P_HEADER_SZ
 + 
P_SECTIONLIST_SZ
 &&

401 
ulOff£t
 !
P_HEADER_SZ
 + 2 * 
P_SECTIONLIST_SZ
);

402 
tLígth
 =

403 (
size_t
)
	`ulGëL⁄g
(
tSe˘i⁄Cou¡
 * 
P_SECTIONLIST_SZ
, 
aucSecL°
);

404 
	`NO_DBG_HEX
(
tLígth
);

405 
	`Áû
(
ulOff£t
 + 
tLígth
 > 
ulSize
);

408 
aucBuf„r
 = 
	`xmÆloc
(
tLígth
);

409 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

410 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

411 
aucBuf„r
, 
ulOff£t
, 
tLígth
)) {

412 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

413  
NULL
;

415 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tLígth
);

416  
aucBuf„r
;

417 
	}
}

423 
	$vSë0Summ¨yInfo
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

425 
UCHAR
 *
aucBuf„r
;

426 
ULONG
 
ulBegöSumdInfo
, 
ulBegöNextBlock
;

427 
size_t
 
tLí
;

428 
USHORT
 
usCodïage
, 
usOff£t
;

430 
	`TRACE_MSG
("vSet0SummaryInfo");

432 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

435 
usCodïage
 = 
	`usGëW‹d
(0x7e, 
aucHódî
);

436 
	`DBG_DEC
(
usCodïage
);

437 
usCodïage
) {

438 850: 
usLid
 = 0x0809; ;

439 862: 
usLid
 = 0x040d; ;

440 866: 
usLid
 = 0x0419; ;

443 : 
usLid
 = 0x0409; ;

447 
ulBegöSumdInfo
 = 128 * (
ULONG
)
	`usGëW‹d
(0x1c, 
aucHódî
);

448 
	`DBG_HEX
(
ulBegöSumdInfo
);

449 
ulBegöNextBlock
 = 128 * (
ULONG
)
	`usGëW‹d
(0x6a, 
aucHódî
);

450 
	`DBG_HEX
(
ulBegöNextBlock
);

452 i‡(
ulBegöSumdInfo
 >
ulBegöNextBlock
 || ulBeginNextBlock == 0) {

456 
tLí
 = (
size_t
)(
ulBegöNextBlock
 - 
ulBegöSumdInfo
);

457 
aucBuf„r
 = 
	`xmÆloc
(
tLí
);

459 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tLí
, 
ulBegöSumdInfo
, 
pFûe
)) {

462 
usOff£t
 = 
	`usGëW‹d
(0, 
aucBuf„r
);

463 i‡(
aucBuf„r
[
usOff£t
] != 0) {

464 
	`NO_DBG_MSG
(
aucBuf„r
 + 
usOff£t
);

465 
szTôÀ
 = 
	`x°rdup
((*)
aucBuf„r
 + 
usOff£t
);

467 
usOff£t
 = 
	`usGëW‹d
(2, 
aucBuf„r
);

468 i‡(
aucBuf„r
[
usOff£t
] != 0) {

469 
	`NO_DBG_MSG
(
aucBuf„r
 + 
usOff£t
);

470 
szAuth‹
 = 
	`x°rdup
((*)
aucBuf„r
 + 
usOff£t
);

472 
usOff£t
 = 
	`usGëW‹d
(12, 
aucBuf„r
);

473 i‡(
aucBuf„r
[
usOff£t
] != 0) {

474 
	`NO_DBG_STRN
(
aucBuf„r
 + 
usOff£t
, 8);

475 
tLa°SaveDtm
 = 
	`tC⁄vîtDosD©e
((*)
aucBuf„r
 + 
usOff£t
);

477 
usOff£t
 = 
	`usGëW‹d
(14, 
aucBuf„r
);

478 i‡(
aucBuf„r
[
usOff£t
] != 0) {

479 
	`NO_DBG_STRN
(
aucBuf„r
 + 
usOff£t
, 8);

480 
tCª©eDtm
 = 
	`tC⁄vîtDosD©e
((*)
aucBuf„r
 + 
usOff£t
);

482 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

483 
	}
}

489 
	$vSë2Summ¨yInfo
(
FILE
 *
pFûe
, 
iW‹dVîsi⁄
, c⁄° 
UCHAR
 *
aucHódî
)

491 
UCHAR
 *
aucBuf„r
;

492 
ULONG
 
ulBegöSumdInfo
, 
ulBegöDo˝Info
, 
ulTmp
;

493 
size_t
 
tSumdInfoLí
, 
tDo˝InfoLí
, 
tLí
, 
tCou¡î
, 
tSèπ
;

495 
	`TRACE_MSG
("vSet2SummaryInfo");

497 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

498 
	`Áû
(
iW‹dVîsi⁄
 != 1 && iWordVersion != 2);

501 
usLid
 = 
	`usGëW‹d
(0x06, 
aucHódî
);

502 
	`DBG_HEX
(
usLid
);

503 i‡(
usLid
 < 999 && 
iW‹dVîsi⁄
 == 1) {

504 
usLid
) {

505 1: 
usLid
 = 0x0409; ;

506 2: 
usLid
 = 0x0c0c; ;

507 31: 
usLid
 = 0x0413; ;

508 33: 
usLid
 = 0x040c; ;

509 34: 
usLid
 = 0x040a; ;

510 36: 
usLid
 = 0x040e; ;

511 39: 
usLid
 = 0x0410; ;

512 44: 
usLid
 = 0x0809; ;

513 45: 
usLid
 = 0x0406; ;

514 46: 
usLid
 = 0x041f; ;

515 47: 
usLid
 = 0x0414; ;

516 48: 
usLid
 = 0x0415; ;

517 49: 
usLid
 = 0x0407; ;

518 351: 
usLid
 = 0x0816; ;

519 358: 
usLid
 = 0x040b; ;

521 
	`DBG_DEC
(
usLid
);

522 
	`DBG_FIXME
();

523 
usLid
 = 0x0409;

528 i‡(
iW‹dVîsi⁄
 != 2) {

534 
ulBegöSumdInfo
 = 
	`ulGëL⁄g
(0x118, 
aucHódî
);

535 
	`DBG_HEX
(
ulBegöSumdInfo
);

536 
tSumdInfoLí
 = (
size_t
)
	`usGëW‹d
(0x11c, 
aucHódî
);

537 
	`DBG_DEC
(
tSumdInfoLí
);

539 i‡(
tSumdInfoLí
 == 0) {

544 
aucBuf„r
 = 
	`xmÆloc
(
tSumdInfoLí
);

545 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tSumdInfoLí
, 
ulBegöSumdInfo
, 
pFûe
)) {

546 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

549 
	`NO_DBG_PRINT_BLOCK
(
aucBuf„r
, 
tSumdInfoLí
);

550 
tLí
 = (
size_t
)
	`ucGëByã
(0, 
aucBuf„r
);

551 
	`DBG_DEC_C
(
tSumdInfoLí
 !
tLí
,ÅSumdInfoLen);

552 
	`DBG_DEC_C
(
tSumdInfoLí
 !
tLí
,ÅLen);

553 
tSèπ
 = 1;

554 
tCou¡î
 = 0;ÅCounter < 17;ÅCounter++) {

555 i‡(
tSèπ
 >
tSumdInfoLí
) {

558 
tLí
 = (
size_t
)
	`ucGëByã
(
tSèπ
, 
aucBuf„r
);

559 i‡(
tLí
 != 0) {

560 
	`NO_DBG_DEC
(
tCou¡î
);

561 
	`NO_DBG_STRN
(
aucBuf„r
 + 
tSèπ
 + 1, 
tLí
);

562 
tCou¡î
) {

564 
szTôÀ
 = 
	`xmÆloc
(
tLí
 + 1);

565 
	`°∫˝y
(
szTôÀ
,

566 (*)
aucBuf„r
 + 
tSèπ
 + 1, 
tLí
);

567 
szTôÀ
[
tLí
] = '\0';

570 
szSubje˘
 = 
	`xmÆloc
(
tLí
 + 1);

571 
	`°∫˝y
(
szSubje˘
,

572 (*)
aucBuf„r
 + 
tSèπ
 + 1, 
tLí
);

573 
szSubje˘
[
tLí
] = '\0';

576 
szAuth‹
 = 
	`xmÆloc
(
tLí
 + 1);

577 
	`°∫˝y
(
szAuth‹
,

578 (*)
aucBuf„r
 + 
tSèπ
 + 1, 
tLí
);

579 
szAuth‹
[
tLí
] = '\0';

585 
tSèπ
 +
tLí
 + 1;

587 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

590 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x112, 
aucHódî
);

591 
	`DBG_HEX
(
ulBegöDo˝Info
);

592 
tDo˝InfoLí
 = (
size_t
)
	`usGëW‹d
(0x116, 
aucHódî
);

593 
	`DBG_DEC
(
tDo˝InfoLí
);

594 i‡(
tDo˝InfoLí
 < 12) {

598 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

599 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tDo˝InfoLí
, 
ulBegöDo˝Info
, 
pFûe
)) {

600 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

603 
ulTmp
 = 
	`ulGëL⁄g
(0x14, 
aucBuf„r
);

604 
tCª©eDtm
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

605 
ulTmp
 = 
	`ulGëL⁄g
(0x18, 
aucBuf„r
);

606 
tLa°SaveDtm
 = 
	`tC⁄vîtDTTM
(
ulTmp
);

607 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

608 
	}
}

614 
	$vSëSumm¨yInfoOLE
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

615 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

616 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
)

618 
UCHAR
 *
pucBuf„r
;

620 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 == NULL);

621 
	`Áû
(
aulBBD
 =
NULL
 || 
aulSBD
 == NULL);

624 
pucBuf„r
 = 
	`pucA«ly£Summ¨yInfoHódî
(
pFûe
,

625 
pPPS
->
tSumm¨yInfo
.
ulSB
,ÖPPS->tSumm¨yInfo.
ulSize
,

626 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
);

627 i‡(
pucBuf„r
 !
NULL
) {

628 
	`vA«ly£Summ¨yInfo
(
pucBuf„r
);

629 
pucBuf„r
 = 
	`x‰ì
(pucBuffer);

633 
pucBuf„r
 = 
	`pucA«ly£Summ¨yInfoHódî
(
pFûe
,

634 
pPPS
->
tDocSumm¨yInfo
.
ulSB
,ÖPPS->tDocSumm¨yInfo.
ulSize
,

635 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
);

636 i‡(
pucBuf„r
 !
NULL
) {

637 
	`vA«ly£DocumítSumm¨yInfo
(
pucBuf„r
);

638 
pucBuf„r
 = 
	`x‰ì
(pucBuffer);

640 
	}
}

646 
	$vSë6Summ¨yInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

647 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

648 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

649 c⁄° 
UCHAR
 *
aucHódî
)

651 
	`TRACE_MSG
("vSet6SummaryInfo");

654 
usLid
 = 
	`usGëW‹d
(0x06, 
aucHódî
);

655 
	`DBG_HEX
(
usLid
);

658 
	`vSëSumm¨yInfoOLE
(
pFûe
, 
pPPS
, 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
);

659 
	}
}

665 
	$vSë8Summ¨yInfo
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

666 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

667 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

668 c⁄° 
UCHAR
 *
aucHódî
)

670 
USHORT
 
usTmp
;

672 
	`TRACE_MSG
("vSet8SummaryInfo");

675 
usTmp
 = 
	`usGëW‹d
(0x0a, 
aucHódî
);

676 i‡(
usTmp
 & 
	`BIT
(14)) {

678 
usLid
 = 
	`usGëW‹d
(0x3c, 
aucHódî
);

681 
usLid
 = 
	`usGëW‹d
(0x06, 
aucHódî
);

683 
	`DBG_HEX
(
usLid
);

686 
	`vSëSumm¨yInfoOLE
(
pFûe
, 
pPPS
, 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
);

687 
	}
}

693 
	$szGëTôÀ
()

695  
szTôÀ
;

696 
	}
}

702 
	$szGëSubje˘
()

704  
szSubje˘
;

705 
	}
}

711 
	$szGëAuth‹
()

713  
szAuth‹
;

714 
	}
}

720 
	$szGëLa°SaveDtm
()

722 
szTime
[12];

723 
tm
 *
pTime
;

725 i‡(
tLa°SaveDtm
 =(
time_t
)-1) {

726  
NULL
;

728 
pTime
 = 
	`loˇ…ime
(&
tLa°SaveDtm
);

729 i‡(
pTime
 =
NULL
) {

730  
NULL
;

732 
	`•rötf
(
szTime
, "%04d-%02d-%02d",

733 
pTime
->
tm_yór
 + 1900,ÖTime->
tm_m⁄
 + 1,ÖTime->
tm_mday
);

734  
szTime
;

735 
	}
}

741 
	$szGëModD©e
()

743 
szTime
[20];

744 
tm
 *
pTime
;

746 i‡(
tLa°SaveDtm
 =(
time_t
)-1) {

747  
NULL
;

749 
pTime
 = 
	`loˇ…ime
(&
tLa°SaveDtm
);

750 i‡(
pTime
 =
NULL
) {

751  
NULL
;

753 
	`•rötf
(
szTime
, "D:%04d%02d%02d%02d%02d",

754 
pTime
->
tm_yór
 + 1900,ÖTime->
tm_m⁄
 + 1,ÖTime->
tm_mday
,

755 
pTime
->
tm_hour
,ÖTime->
tm_mö
);

756  
szTime
;

757 
	}
}

763 
	$szGëCª©i⁄D©e
()

765 
szTime
[20];

766 
tm
 *
pTime
;

768 i‡(
tCª©eDtm
 =(
time_t
)-1) {

769  
NULL
;

771 
pTime
 = 
	`loˇ…ime
(&
tCª©eDtm
);

772 i‡(
pTime
 =
NULL
) {

773  
NULL
;

775 
	`•rötf
(
szTime
, "D:%04d%02d%02d%02d%02d",

776 
pTime
->
tm_yór
 + 1900,ÖTime->
tm_m⁄
 + 1,ÖTime->
tm_mday
,

777 
pTime
->
tm_hour
,ÖTime->
tm_mö
);

778  
szTime
;

779 
	}
}

785 
	$szGëCom∑ny
()

787  
szCom∑ny
;

788 
	}
}

794 
	$szGëL™guage
()

796 i‡(
usLid
 =(
USHORT
)-1) {

798  
NULL
;

800 i‡(
usLid
 < 999) {

802 
	`DBG_DEC
(
usLid
);

803  
NULL
;

807 
usLid
) {

831 
usLid
 & 0x00ff) {

884 
	`DBG_HEX
(
usLid
);

885 
	`DBG_FIXME
();

886  
NULL
;

888 
	}
}

	@tabstop.c

9 
	~<°dio.h
>

10 
	~"™tiw‹d.h
"

12 
	#HALF_INCH
 36000L

	)

14 
	glDeÁu…TabWidth
 = 
HALF_INCH
;

21 
	$vSë0DeÁu…TabWidth
(c⁄° 
UCHAR
 *
aucHódî
)

23 
USHORT
 
usTmp
;

25 
	`Áû
(
aucHódî
 =
NULL
);

27 
usTmp
 = 
	`usGëW‹d
(0x70, 
aucHódî
);

28 
	`DBG_DEC
(
usTmp
);

29 
lDeÁu…TabWidth
 = 
usTmp
 =0 ? 
HALF_INCH
 : 
	`lTwùs2MûliPoöts
(usTmp);

30 
	`DBG_DEC
(
lDeÁu…TabWidth
);

31 
	}
}

37 
	$vSë2DeÁu…TabWidth
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

39 
UCHAR
 *
aucBuf„r
;

40 
ULONG
 
ulBegöDo˝Info
;

41 
size_t
 
tDo˝InfoLí
;

42 
USHORT
 
usTmp
;

44 
	`Áû
(
pFûe
 =
NULL
 || 
aucHódî
 == NULL);

46 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x112, 
aucHódî
);

47 
	`DBG_HEX
(
ulBegöDo˝Info
);

48 
tDo˝InfoLí
 = (
size_t
)
	`usGëW‹d
(0x116, 
aucHódî
);

49 
	`DBG_DEC
(
tDo˝InfoLí
);

50 i‡(
tDo˝InfoLí
 < 12) {

51 
	`DBG_MSG
("No TAB information");

55 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

56 i‡(!
	`bRódByãs
(
aucBuf„r
, 
tDo˝InfoLí
, 
ulBegöDo˝Info
, 
pFûe
)) {

57 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

60 
usTmp
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

61 
lDeÁu…TabWidth
 = 
usTmp
 =0 ? 
HALF_INCH
 : 
	`lTwùs2MûliPoöts
(usTmp);

62 
	`DBG_DEC
(
lDeÁu…TabWidth
);

63 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

64 
	}
}

70 
	$vSë6DeÁu…TabWidth
(
FILE
 *
pFûe
, 
ULONG
 
ulSèπBlock
,

71 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
, c⁄° 
UCHAR
 *
aucHódî
)

73 
UCHAR
 *
aucBuf„r
;

74 
ULONG
 
ulBegöDo˝Info
;

75 
size_t
 
tDo˝InfoLí
;

76 
USHORT
 
usTmp
;

78 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x150, 
aucHódî
);

79 
	`DBG_HEX
(
ulBegöDo˝Info
);

80 
tDo˝InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x154, 
aucHódî
);

81 
	`DBG_DEC
(
tDo˝InfoLí
);

82 i‡(
tDo˝InfoLí
 < 12) {

83 
	`DBG_MSG
("No TAB information");

87 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

88 i‡(!
	`bRódBuf„r
(
pFûe
, 
ulSèπBlock
,

89 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

90 
aucBuf„r
, 
ulBegöDo˝Info
, 
tDo˝InfoLí
)) {

91 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

94 
usTmp
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

95 
lDeÁu…TabWidth
 = 
usTmp
 =0 ? 
HALF_INCH
 : 
	`lTwùs2MûliPoöts
(usTmp);

96 
	`DBG_DEC
(
lDeÁu…TabWidth
);

97 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

98 
	}
}

104 
	$vSë8DeÁu…TabWidth
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

105 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

106 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

107 c⁄° 
UCHAR
 *
aucHódî
)

109 c⁄° 
ULONG
 *
aulBlockDïŸ
;

110 
UCHAR
 *
aucBuf„r
;

111 
ULONG
 
ulBegöDo˝Info
;

112 
size_t
 
tDo˝InfoLí
, 
tBlockDïŸLí
, 
tBlockSize
;

113 
USHORT
 
usTmp
;

115 
ulBegöDo˝Info
 = 
	`ulGëL⁄g
(0x192, 
aucHódî
);

116 
	`DBG_HEX
(
ulBegöDo˝Info
);

117 
tDo˝InfoLí
 = (
size_t
)
	`ulGëL⁄g
(0x196, 
aucHódî
);

118 
	`DBG_DEC
(
tDo˝InfoLí
);

119 i‡(
tDo˝InfoLí
 < 12) {

120 
	`DBG_MSG
("No TAB information");

124 
	`DBG_DEC
(
pPPS
->
tTabÀ
.
ulSB
);

125 
	`DBG_HEX
(
pPPS
->
tTabÀ
.
ulSize
);

126 i‡(
pPPS
->
tTabÀ
.
ulSize
 == 0) {

127 
	`DBG_MSG
("No TAB information");

131 i‡(
pPPS
->
tTabÀ
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

133 
aulBlockDïŸ
 = 
aulSBD
;

134 
tBlockDïŸLí
 = 
tSBDLí
;

135 
tBlockSize
 = 
SMALL_BLOCK_SIZE
;

138 
aulBlockDïŸ
 = 
aulBBD
;

139 
tBlockDïŸLí
 = 
tBBDLí
;

140 
tBlockSize
 = 
BIG_BLOCK_SIZE
;

142 
aucBuf„r
 = 
	`xmÆloc
(
tDo˝InfoLí
);

143 i‡(!
	`bRódBuf„r
(
pFûe
, 
pPPS
->
tTabÀ
.
ulSB
,

144 
aulBlockDïŸ
, 
tBlockDïŸLí
, 
tBlockSize
,

145 
aucBuf„r
, 
ulBegöDo˝Info
, 
tDo˝InfoLí
)) {

146 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

149 
usTmp
 = 
	`usGëW‹d
(0x0a, 
aucBuf„r
);

150 
lDeÁu…TabWidth
 = 
usTmp
 =0 ? 
HALF_INCH
 : 
	`lTwùs2MûliPoöts
(usTmp);

151 
	`DBG_DEC
(
lDeÁu…TabWidth
);

152 
aucBuf„r
 = 
	`x‰ì
(aucBuffer);

153 
	}
}

159 
	$vSëDeÁu…TabWidth
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

160 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

161 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

162 c⁄° 
UCHAR
 *
aucHódî
, 
iW‹dVîsi⁄
)

164 
	`Áû
(
pFûe
 =
NULL
 && 
iW‹dVîsi⁄
 >= 1);

165 
	`Áû
(
pPPS
 =
NULL
 && 
iW‹dVîsi⁄
 >= 6);

166 
	`Áû
(
aulBBD
 =
NULL
 && 
tBBDLí
 != 0);

167 
	`Áû
(
aulSBD
 =
NULL
 && 
tSBDLí
 != 0);

168 
	`Áû
(
aucHódî
 =
NULL
);

171 
lDeÁu…TabWidth
 = 
HALF_INCH
;

173 
iW‹dVîsi⁄
) {

175 
	`vSë0DeÁu…TabWidth
(
aucHódî
);

179 
	`vSë2DeÁu…TabWidth
(
pFûe
, 
aucHódî
);

186 
	`vSë6DeÁu…TabWidth
(
pFûe
, 
pPPS
->
tW‹dDocumít
.
ulSB
,

187 
aulBBD
, 
tBBDLí
, 
aucHódî
);

190 
	`vSë8DeÁu…TabWidth
(
pFûe
, 
pPPS
,

191 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
, 
aucHódî
);

194 
	`wîr
(0, "Sorry,Ço TAB information");

197 
	}
}

204 
	$lGëDeÁu…TabWidth
()

206 i‡(
lDeÁu…TabWidth
 <= 0) {

207 
	`DBG_DEC
(
lDeÁu…TabWidth
);

208  
	`lTwùs2MûliPoöts
(1);

210  
lDeÁu…TabWidth
;

211 
	}
}

	@text.c

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

14 
ícodög_ty≥
 
	geEncodög
 = 
ícodög_√uåÆ
;

16 
	glYt›Cuº
 = 0;

18 
UCHAR
 
	gucNb•
 = 0;

25 
	$vPrﬁogueTXT
(
dügøm_ty≥
 *
pDüg
, c⁄° 
›ti⁄s_ty≥
 *
pO±i⁄s
)

27 
	`Áû
(
pDüg
 =
NULL
);

28 
	`Áû
(
pO±i⁄s
 =
NULL
);

30 
eEncodög
 = 
pO±i⁄s
->eEncoding;

31 
pDüg
->
lXÀ·
 = 0;

32 
pDüg
->
lYt›
 = 0;

33 
lYt›Cuº
 = 0;

34 
	}
}

40 
	$vEpûogueTXT
(
FILE
 *
pOutFûe
)

42 
	`Áû
(
pOutFûe
 =
NULL
);

44 
	`Ârötf
(
pOutFûe
, "\n");

45 
	}
}

51 
	$vPrötTXT
(
FILE
 *
pFûe
, c⁄° *
szSåög
, 
size_t
 
tSåögLígth
)

53 c⁄° 
UCHAR
 *
ucByãs
;

54 
size_t
 
tCou¡
;

56 
	`Áû
(
szSåög
 =
NULL
);

58 i‡(
szSåög
 =
NULL
 || szSåög[0] ='\0' || 
tSåögLígth
 == 0) {

62 i‡(
eEncodög
 =
ícodög_utf_8
) {

63 
	`Ârötf
(
pFûe
, "%.*s", ()
tSåögLígth
, 
szSåög
);

67 i‡(
ucNb•
 == 0) {

68 
ucNb•
 = 
	`ucGëNb•Ch¨a˘î
();

69 
	`DBG_HEX_C
(
ucNb•
 != 0xa0, ucNbsp);

72 
ucByãs
 = (
UCHAR
 *)
szSåög
;

73 
tCou¡
 = 0;ÅCou¡ < 
tSåögLígth
 ;ÅCount++) {

74 i‡(
ucByãs
[
tCou¡
] =
ucNb•
) {

75 ()
	`putc
(' ', 
pFûe
);

77 ()
	`putc
(
szSåög
[
tCou¡
], 
pFûe
);

80 
	}
}

89 
	$vMoveTo
(
dügøm_ty≥
 *
pDüg
)

91 
iCou¡
, 
iNbr
;

93 
	`Áû
(
pDüg
 =
NULL
);

94 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

96 i‡(
pDüg
->
lYt›
 !
lYt›Cuº
) {

97 
iNbr
 = 
	`iDøwUnôs2Ch¨
(
pDüg
->
lXÀ·
);

98 
iCou¡
 = 0; iCou¡ < 
iNbr
; iCount++) {

99 ()
	`putc
(
FILLER_CHAR
, 
pDüg
->
pOutFûe
);

101 
lYt›Cuº
 = 
pDüg
->
lYt›
;

103 
	}
}

109 
	$vMove2NextLöeTXT
(
dügøm_ty≥
 *
pDüg
)

111 
	`Áû
(
pDüg
 =
NULL
);

112 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

114 
pDüg
->
lYt›
++;

115 ()
	`Ârötf
(
pDüg
->
pOutFûe
, "\n");

116 
	}
}

122 
	$vSub°rögTXT
(
dügøm_ty≥
 *
pDüg
,

123 c⁄° *
szSåög
, 
size_t
 
tSåögLígth
, 
lSåögWidth
)

125 
	`Áû
(
pDüg
 =
NULL
 || 
szSåög
 == NULL);

126 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

127 
	`Áû
(
pDüg
->
lXÀ·
 < 0);

128 
	`Áû
(
tSåögLígth
 !
	`°æí
(
szSåög
));

130 i‡(
szSåög
[0] ='\0' || 
tSåögLígth
 == 0) {

134 
	`vMoveTo
(
pDüg
);

135 
	`vPrötTXT
(
pDüg
->
pOutFûe
, 
szSåög
, 
tSåögLígth
);

136 
pDüg
->
lXÀ·
 +
lSåögWidth
;

137 
	}
}

143 
	$vSèπOfP¨agøphTXT
(
dügøm_ty≥
 *
pDüg
, 
lBef‹eIndíèti⁄
)

145 
	`Áû
(
pDüg
 =
NULL
);

146 
	`Áû
(
lBef‹eIndíèti⁄
 < 0);

148 i‡(
lBef‹eIndíèti⁄
 >
	`lTwùs2MûliPoöts
(
HEADING_GAP
)) {

150 
	`vMove2NextLöeTXT
(
pDüg
);

152 
	}
}

158 
	$vEndOfP¨agøphTXT
(
dügøm_ty≥
 *
pDüg
, 
lA·îIndíèti⁄
)

160 
	`Áû
(
pDüg
 =
NULL
);

161 
	`Áû
(
pDüg
->
pOutFûe
 =
NULL
);

162 
	`Áû
(
lA·îIndíèti⁄
 < 0);

164 i‡(
pDüg
->
lXÀ·
 > 0) {

166 
	`vMove2NextLöeTXT
(
pDüg
);

169 i‡(
lA·îIndíèti⁄
 >
	`lTwùs2MûliPoöts
(
HEADING_GAP
)) {

171 
	`vMove2NextLöeTXT
(
pDüg
);

173 
	}
}

179 
	$vEndOfPageTXT
(
dügøm_ty≥
 *
pDüg
, 
lA·îIndíèti⁄
)

181 
	`vEndOfP¨agøphTXT
(
pDüg
, 
lA·îIndíèti⁄
);

182 
	}
}

	@unix.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°d¨g.h
>

12 
	~"™tiw‹d.h
"

19 
	$wîr
(
iF©Æ
, c⁄° *
szF‹m©
, ...)

21 
va_li°
 
tArg
;

23 
	`va_°¨t
(
tArg
, 
szF‹m©
);

24 ()
	`vÂrötf
(
°dîr
, 
szF‹m©
, 
tArg
);

25 
	`va_íd
(
tArg
);

26 
	`Ârötf
(
°dîr
, "\n");

27 
iF©Æ
) {

31 
	`exô
(
EXIT_FAILURE
);

33 
	`exô
(
iF©Æ
);

35 
	}
}

	@utf8.c

15 
	~<°dlib.h
>

16 
	~<°rög.h
>

17 
	~"™tiw‹d.h
"

19 
	söãrvÆ
 {

20 
USHORT
 
	mfú°
;

21 
USHORT
 
	mœ°
;

24 c⁄° 
öãrvÆ
 
	gcomböög
[] = {

62 
BOOL


63 
	$bIsZîoWidthCh¨
(
ULONG
 
ucs
)

65 
low
 = 0;

66 
high
 = 
	`ñemítsof
(
comböög
) - 1;

67 
mid
;

69 i‡(
ucs
 < (
ULONG
)
comböög
[
low
].
fú°
 ||

70 
ucs
 > (
ULONG
)
comböög
[
high
].
œ°
) {

71  
FALSE
;

74 
high
 >
low
) {

75 
mid
 = (
low
 + 
high
) / 2;

76 i‡(
ucs
 > (
ULONG
)
comböög
[
mid
].
œ°
) {

77 
low
 = 
mid
 + 1;

78 } i‡(
ucs
 < (
ULONG
)
comböög
[
mid
].
fú°
) {

79 
high
 = 
mid
 - 1;

81  
TRUE
;

84  
FALSE
;

85 
	}
}

119 
	$iWcWidth
(
ULONG
 
ucs
)

122 i‡(
ucs
 == 0) {

125 i‡(
ucs
 < 0x20 || (ucs >= 0x7f && ucs < 0xa0)) {

126 
	`NO_DBG_HEX
(
ucs
);

131 i‡(
	`bIsZîoWidthCh¨
(
ucs
)) {

138 (
ucs
 >= 0x1100 &&

139 (
ucs
 <= 0x115f ||

140 (
ucs
 >= 0x2e80 && ucs <= 0xa4cf && (ucs & ~0x0011) != 0x300a &&

141 
ucs
 != 0x303f) ||

142 (
ucs
 >= 0xac00 && ucs <= 0xd7a3) ||

143 (
ucs
 >= 0xf900 && ucs <= 0xfaff) ||

144 (
ucs
 >= 0xfe30 && ucs <= 0xfe6f) ||

145 (
ucs
 >= 0xff00 && ucs <= 0xff5f) ||

146 (
ucs
 >= 0xffe0 && ucs <= 0xffe6) ||

147 (
ucs
 >= 0x20000 && ucs <= 0x2ffff)));

148 
	}
}

156 
ULONG


157 
	$utf8_to_ucs
(c⁄° *
p
, 
iSåLí
, *
piUtfLí
)

159 
ULONG
 
ulUcs
;

160 
iIndex
, 
iCh¨Lí
;

162 
	`Áû
(
p
 =
NULL
 || 
piUtfLí
 == NULL);

163 
	`Áû
(
iSåLí
 < 1);

165 
ulUcs
 = (
ULONG
)(
UCHAR
)
p
[0];

167 i‡(
ulUcs
 < 0x80) {

168 *
piUtfLí
 = 1;

169  
ulUcs
;

172 i‡(
ulUcs
 < 0xe0){

173 
iCh¨Lí
 = 2;

174 
ulUcs
 &= 0x1f;

175 } i‡(
ulUcs
 < 0xf0){

176 
iCh¨Lí
 = 3;

177 
ulUcs
 &= 0x0f;

178 } i‡(
ulUcs
 < 0xf8){

179 
iCh¨Lí
 = 4;

180 
ulUcs
 &= 0x07;

181 } i‡(
ulUcs
 < 0xfc){

182 
iCh¨Lí
 = 5;

183 
ulUcs
 &= 0x03;

185 
iCh¨Lí
 = 6;

186 
ulUcs
 &= 0x01;

188 
iIndex
 = 1; iIndex < 
iCh¨Lí
; iIndex++) {

189 
ulUcs
 <<= 6;

190 i‡(
iIndex
 < 
iSåLí
) {

191 
ulUcs
 |(
ULONG
)(
UCHAR
)
p
[
iIndex
] & 0x3f;

194 *
piUtfLí
 = 
iCh¨Lí
;

195  
ulUcs
;

196 
	}
}

204 
	$utf8_°rwidth
(c⁄° *
pcSåög
, 
size_t
 
tNumch¨s
)

206 
ULONG
 
ulUcs
;

207 
lTŸÆ
;

208 
iToGo
, 
iWidth
, 
iUtÊí
;

210 
	`Áû
(
pcSåög
 =
NULL
 || 
tNumch¨s
 > (
size_t
)
INT_MAX
);

212 
lTŸÆ
 = 0;

213 
iToGo
 = ()
tNumch¨s
;

215 
iToGo
 > 0 && *
pcSåög
 != '\0') {

216 
ulUcs
 = 
	`utf8_to_ucs
(
pcSåög
, 
iToGo
, &
iUtÊí
);

217 
iWidth
 = 
	`iWcWidth
(
ulUcs
);

218 i‡(
iWidth
 > 0) {

219 
lTŸÆ
 +
iWidth
;

221 
pcSåög
 +
iUtÊí
;

222 
iToGo
 -
iUtÊí
;

224 
	`NO_DBG_DEC
(
lTŸÆ
);

225  
lTŸÆ
;

226 
	}
}

234 
	$utf8_chæígth
(c⁄° *
p
)

236 
iUtÊí
;

238 
	`Áû
(
p
 =
NULL
);

240 
iUtÊí
 = -1;

241 ()
	`utf8_to_ucs
(
p
, 
INT_MAX
, &
iUtÊí
);

242 
	`NO_DBG_DEC
(
iUtÊí
);

243  
iUtÊí
;

244 
	}
}

249 
BOOL


250 
	$is_loˇÀ_utf8
()

252 
szCode£t
[20];

254 
szCode£t
[0] = '\0';

255 i‡(!
	`bGëN‹mÆizedCode£t
(
szCode£t
, (szCode£t), 
NULL
)) {

256  
FALSE
;

258 
	`DBG_MSG
(
szCode£t
);

259  
	`STREQ
(
szCode£t
, "utf8");

260 
	}
}

	@version.h

9 #i‡!
deföed
(
__vîsi⁄_h
)

10 
	#__vîsi⁄_h
 1

	)

13 
	#PURPOSESTRING
 "Di•œy MS-W‹d fûes"

	)

15 #i‡
deföed
(
__riscos
)

16 
	#AUTHORSTRING
 "© 1998-2005 Adròv™ Os"

	)

18 
	#AUTHORSTRING
 "(CË1998-2005 Adròv™ Os"

	)

21 
	#VERSIONSTRING
 "0.37 (21 O˘ 2005)"

	)

23 #i‡
deföed
(
__dos
)

24 #i‡
deföed
(
__DJGPP__
)

25 
	#VERSIONSTRING2
 " # 32-bô PrŸe˘ed Mode"

	)

27 
	#VERSIONSTRING2
 " # 16-bô Ró»Mode"

	)

31 #i‡
deföed
(
DEBUG
)

32 
	#STATUSSTRING
 "DEBUG vîsi⁄"

	)

34 
	#STATUSSTRING
 "GNU GíîÆ Publi¯Li˚n£"

	)

	@word2text.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<˘y≥.h
>

13 
	~"™tiw‹d.h
"

16 
	#INITIAL_SIZE
 40

	)

17 
	#EXTENTION_SIZE
 20

	)

21 
	#OUTPUT_LINE
() \

23 
	`vAlign2Wödow
(
pDüg
, 
pAnch‹
, 
lWidthMax
, 
ucAlignmít
);\

24 
	`TRACE_MSG
("after vAlign2Window");\

25 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);\

26 
pOuçut
 = 
pAnch‹
;\

27 } 0)

	)

29 
	#RESET_LINE
() \

31 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);\

32 
pOuçut
 = 
pAnch‹
;\

33 } 0)

	)

35 #i‡
deföed
(
__riscos
)

37 
ULONG
 
	gulDocumítLígth
;

39 
ULONG
 
	gulCh¨Cou¡î
;

40 
	giCuºP˘
, 
	giPªvP˘
;

43 
	giW‹dVîsi⁄
 = -1;

45 
BOOL
 
	gbOldMacFûe
 = 
FALSE
;

47 c⁄° 
£˘i⁄_block_ty≥
 *
	gpSe˘i⁄
 = 
NULL
;

48 c⁄° 
£˘i⁄_block_ty≥
 *
	gpSe˘i⁄Next
 = 
NULL
;

50 
›ti⁄s_ty≥
 
	gtO±i⁄s
;

52 c⁄° 
row_block_ty≥
 *
	gpRowInfo
 = 
NULL
;

53 
BOOL
 
	gbSèπRow
 = 
FALSE
;

54 
BOOL
 
	gbEndRowN‹m
 = 
FALSE
;

55 
BOOL
 
	gbEndRowFa°
 = 
FALSE
;

56 
BOOL
 
	gbIsTabÀRow
 = 
FALSE
;

58 
USHORT
 
	gusI°dNext
 = 
ISTD_NORMAL
;

60 c⁄° 
°yÀ_block_ty≥
 *
	gpStyÀInfo
 = 
NULL
;

61 
°yÀ_block_ty≥
 
	gtStyÀNext
;

62 
BOOL
 
	gbSèπStyÀ
 = 
FALSE
;

63 
BOOL
 
	gbSèπStyÀNext
 = 
FALSE
;

65 c⁄° 
f⁄t_block_ty≥
 *
	gpF⁄tInfo
 = 
NULL
;

66 
f⁄t_block_ty≥
 
	gtF⁄tNext
;

67 
BOOL
 
	gbSèπF⁄t
 = 
FALSE
;

68 
BOOL
 
	gbSèπF⁄tNext
 = 
FALSE
;

75 
BOOL


76 
	$bOuçutC⁄èösText
(c⁄° 
ouçut_ty≥
 *
pAnch‹
)

78 c⁄° 
ouçut_ty≥
 *
pCuº
;

79 
size_t
 
tIndex
;

81 
	`Áû
(
pAnch‹
 =
NULL
);

83 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

84 
	`Áû
(
pCuº
->
lSåögWidth
 < 0);

85 
tIndex
 = 0;ÅIndex < 
pCuº
->
tNextFªe
;ÅIndex++) {

86 i‡(
	`is•a˚
(()(
UCHAR
)
pCuº
->
szSt‹age
[
tIndex
])) {

89 #i‡
	`deföed
(
DEBUG
)

90 i‡(
pCuº
->
szSt‹age
[
tIndex
] =
FILLER_CHAR
) {

94  
TRUE
;

97  
FALSE
;

98 
	}
}

104 
	$lTŸÆSåögWidth
(c⁄° 
ouçut_ty≥
 *
pAnch‹
)

106 c⁄° 
ouçut_ty≥
 *
pCuº
;

107 
lTŸÆ
;

109 
lTŸÆ
 = 0;

110 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

111 
	`DBG_DEC_C
(
pCuº
->
lSåögWidth
 < 0,ÖCurr->lStringWidth);

112 
	`Áû
(
pCuº
->
lSåögWidth
 < 0);

113 
lTŸÆ
 +
pCuº
->
lSåögWidth
;

115  
lTŸÆ
;

116 
	}
}

122 
	$vSt‹eByã
(
UCHAR
 
ucCh¨
, 
ouçut_ty≥
 *
pOuçut
)

124 
	`Áû
(
pOuçut
 =
NULL
);

126 i‡(
ucCh¨
 == 0) {

127 
pOuçut
->
szSt‹age
[pOuçut->
tNextFªe
] = '\0';

131 
pOuçut
->
tNextFªe
 + 2 >ÖOuçut->
tSt‹ageSize
) {

132 
pOuçut
->
tSt‹ageSize
 +
EXTENTION_SIZE
;

133 
pOuçut
->
szSt‹age
 = 
	`xªÆloc
(pOutput->szStorage,

134 
pOuçut
->
tSt‹ageSize
);

136 
pOuçut
->
szSt‹age
[pOuçut->
tNextFªe
] = ()
ucCh¨
;

137 
pOuçut
->
szSt‹age
[pOuçut->
tNextFªe
 + 1] = '\0';

138 
pOuçut
->
tNextFªe
++;

139 
	}
}

145 
	$vSt‹eCh¨
(
ULONG
 
ulCh¨
, 
BOOL
 
bCh™geAŒowed
, 
ouçut_ty≥
 *
pOuçut
)

147 
szResu…
[4];

148 
size_t
 
tIndex
, 
tLí
;

150 
	`Áû
(
pOuçut
 =
NULL
);

152 i‡(
tO±i⁄s
.
eEncodög
 =
ícodög_utf_8
 && 
bCh™geAŒowed
) {

153 
	`DBG_HEX_C
(
ulCh¨
 > 0xffff, ulChar);

154 
	`Áû
(
ulCh¨
 > 0xffff);

155 
tLí
 = 
	`tUcs2Utf8
(
ulCh¨
, 
szResu…
, (szResult));

156 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

157 
	`vSt‹eByã
((
UCHAR
)
szResu…
[
tIndex
], 
pOuçut
);

160 
	`DBG_HEX_C
(
ulCh¨
 > 0xff, ulChar);

161 
	`Áû
(
ulCh¨
 > 0xff);

162 
	`vSt‹eByã
((
UCHAR
)
ulCh¨
, 
pOuçut
);

163 
tLí
 = 1;

165 
pOuçut
->
lSåögWidth
 +
	`lCompuãSåögWidth
(

166 
pOuçut
->
szSt‹age
 +ÖOuçut->
tNextFªe
 - 
tLí
,

167 
tLí
,

168 
pOuçut
->
tF⁄tRef
,

169 
pOuçut
->
usF⁄tSize
);

170 
	}
}

176 
	$vSt‹eCh¨a˘î
(
ULONG
 
ulCh¨
, 
ouçut_ty≥
 *
pOuçut
)

178 
	`vSt‹eCh¨
(
ulCh¨
, 
TRUE
, 
pOuçut
);

179 
	}
}

185 
	$vSt‹eSåög
(c⁄° *
szSåög
, 
size_t
 
tSåögLígth
, 
ouçut_ty≥
 *
pOuçut
)

187 
size_t
 
tIndex
;

189 
	`Áû
(
szSåög
 =
NULL
 || 
pOuçut
 == NULL);

191 
tIndex
 = 0;ÅIndex < 
tSåögLígth
;ÅIndex++) {

192 
	`vSt‹eCh¨a˘î
((
ULONG
)(
UCHAR
)
szSåög
[
tIndex
], 
pOuçut
);

194 
	}
}

200 
	$vSt‹eNumbîAsDecimÆ
(
UINT
 
uiNumbî
, 
ouçut_ty≥
 *
pOuçut
)

202 
size_t
 
tLí
;

203 
szSåög
[3 * (
UINT
) + 1];

205 
	`Áû
(
uiNumbî
 == 0);

206 
	`Áû
(
pOuçut
 =
NULL
);

208 
tLí
 = (
size_t
)
	`•rötf
(
szSåög
, "%u", 
uiNumbî
);

209 
	`vSt‹eSåög
(
szSåög
, 
tLí
, 
pOuçut
);

210 
	}
}

216 
	$vSt‹eNumbîAsRom™
(
UINT
 
uiNumbî
, 
ouçut_ty≥
 *
pOuçut
)

218 
size_t
 
tLí
;

219 
szSåög
[15];

221 
	`Áû
(
uiNumbî
 == 0);

222 
	`Áû
(
pOuçut
 =
NULL
);

224 
tLí
 = 
	`tNumbî2Rom™
(
uiNumbî
, 
FALSE
, 
szSåög
);

225 
	`vSt‹eSåög
(
szSåög
, 
tLí
, 
pOuçut
);

226 
	}
}

232 
	$vSt‹eStyÀ
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pOuçut
,

233 c⁄° 
°yÀ_block_ty≥
 *
pStyÀ
)

235 
size_t
 
tLí
;

236 
szSåög
[120];

238 
	`Áû
(
pDüg
 =
NULL
);

239 
	`Áû
(
pOuçut
 =
NULL
);

240 
	`Áû
(
pStyÀ
 =
NULL
);

242 
tLí
 = 
	`tStyÀ2Wödow
(
szSåög
, (szString),

243 
pStyÀ
, 
pSe˘i⁄
);

244 
	`vSt‹eSåög
(
szSåög
, 
tLí
, 
pOuçut
);

245 
	}
}

251 
	$vPutIndíèti⁄
(
dügøm_ty≥
 *
pDüg
, 
ouçut_ty≥
 *
pOuçut
,

252 
BOOL
 
bNoM¨ks
, BOOL 
bFú°Löe
,

253 
UINT
 
uiLi°Numbî
, 
UCHAR
 
ucNFC
, c⁄° *
szLi°Ch¨
,

254 
lLe·Indíèti⁄
, 
lLe·Indíèti⁄1
)

256 
lWidth
;

257 
size_t
 
tIndex
, 
tNextFªe
;

258 
szLöe
[30];

260 
	`Áû
(
pDüg
 =
NULL
);

261 
	`Áû
(
pOuçut
 =
NULL
);

262 
	`Áû
(
szLi°Ch¨
 =
NULL
);

263 
	`Áû
(
lLe·Indíèti⁄
 < 0);

265 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
) {

270 i‡(
bNoM¨ks
) {

271 i‡(
bFú°Löe
) {

272 
lLe·Indíèti⁄
 +
lLe·Indíèti⁄1
;

274 i‡(
lLe·Indíèti⁄
 < 0) {

275 
lLe·Indíèti⁄
 = 0;

277 
	`vSëLe·Indíèti⁄
(
pDüg
, 
lLe·Indíèti⁄
);

280 i‡(
lLe·Indíèti⁄
 <= 0) {

281 
	`DBG_HEX_C
(
ucNFC
 != 0x00, ucNFC);

282 
	`vSëLe·Indíèti⁄
(
pDüg
, 0);

286 #i‡
	`deföed
(
DEBUG
)

287 i‡(
tO±i⁄s
.
eEncodög
 =
ícodög_utf_8
) {

288 
	`Áû
(
	`°æí
(
szLi°Ch¨
) > 3);

290 
	`DBG_HEX_C
(
	`is˙ål
(()
szLi°Ch¨
[0]), szListChar[0]);

291 
	`Áû
(
	`is˙ål
(()
szLi°Ch¨
[0]));

292 
	`Áû
(
szLi°Ch¨
[1] != '\0');

296 
ucNFC
) {

297 
LIST_ARABIC_NUM
:

298 
LIST_NUMBER_TXT
:

299 
tNextFªe
 = (
size_t
)
	`•rötf
(
szLöe
, "%u", 
uiLi°Numbî
);

301 
LIST_UPPER_ROMAN
:

302 
LIST_LOWER_ROMAN
:

303 
tNextFªe
 = 
	`tNumbî2Rom™
(
uiLi°Numbî
,

304 
ucNFC
 =
LIST_UPPER_ROMAN
, 
szLöe
);

306 
LIST_UPPER_ALPHA
:

307 
LIST_LOWER_ALPHA
:

308 
tNextFªe
 = 
	`tNumbî2AÕha
(
uiLi°Numbî
,

309 
ucNFC
 =
LIST_UPPER_ALPHA
, 
szLöe
);

311 
LIST_ORDINAL_NUM
:

312 
LIST_ORDINAL_TXT
:

313 i‡(
uiLi°Numbî
 % 10 == 1 && uiListNumber != 11) {

314 
tNextFªe
 =

315 (
size_t
)
	`•rötf
(
szLöe
, "%u°", 
uiLi°Numbî
);

316 } i‡(
uiLi°Numbî
 % 10 == 2 && uiListNumber != 12) {

317 
tNextFªe
 =

318 (
size_t
)
	`•rötf
(
szLöe
, "%und", 
uiLi°Numbî
);

319 } i‡(
uiLi°Numbî
 % 10 == 3 && uiListNumber != 13) {

320 
tNextFªe
 =

321 (
size_t
)
	`•rötf
(
szLöe
, "%urd", 
uiLi°Numbî
);

323 
tNextFªe
 =

324 (
size_t
)
	`•rötf
(
szLöe
, "%uth", 
uiLi°Numbî
);

327 
LIST_OUTLINE_NUM
:

328 
tNextFªe
 = (
size_t
)
	`•rötf
(
szLöe
, "%02u", 
uiLi°Numbî
);

330 
LIST_SPECIAL
:

331 
LIST_SPECIAL2
:

332 
LIST_BULLETS
:

333 
tNextFªe
 = 0;

336 
	`DBG_HEX
(
ucNFC
);

337 
	`DBG_FIXME
();

338 
tNextFªe
 = (
size_t
)
	`•rötf
(
szLöe
, "%u", 
uiLi°Numbî
);

341 
tNextFªe
 +(
size_t
)
	`•rötf
(
szLöe
 +ÅNextFªe, "%.3s", 
szLi°Ch¨
);

342 
szLöe
[
tNextFªe
++] = ' ';

343 
szLöe
[
tNextFªe
] = '\0';

344 
lWidth
 = 
	`lCompuãSåögWidth
(
szLöe
, 
tNextFªe
,

345 
pOuçut
->
tF⁄tRef
,ÖOuçut->
usF⁄tSize
);

346 
lLe·Indíèti⁄
 -
lWidth
;

347 i‡(
lLe·Indíèti⁄
 < 0) {

348 
lLe·Indíèti⁄
 = 0;

350 
	`vSëLe·Indíèti⁄
(
pDüg
, 
lLe·Indíèti⁄
);

351 
tIndex
 = 0;ÅIndex < 
tNextFªe
;ÅIndex++) {

352 
	`vSt‹eCh¨
((
ULONG
)(
UCHAR
)
szLöe
[
tIndex
], 
FALSE
, 
pOuçut
);

354 
	}
}

363 
	$vPutSï¨©‹Löe
(
ouçut_ty≥
 *
pOuçut
)

365 
lCh¨Width
;

366 
iCou¡î
, 
iCh¨s
;

367 
szO√
[2];

369 
	`Áû
(
pOuçut
 =
NULL
);

371 
szO√
[0] = 
OUR_EM_DASH
;

372 
szO√
[1] = '\0';

373 
lCh¨Width
 = 
	`lCompuãSåögWidth
(
szO√
, 1,

374 
pOuçut
->
tF⁄tRef
,ÖOuçut->
usF⁄tSize
);

375 
	`NO_DBG_DEC
(
lCh¨Width
);

376 
iCh¨s
 = ()((144000 + 
lCh¨Width
 / 2) /ÜCharWidth);

377 
	`NO_DBG_DEC
(
iCh¨s
);

378 
iCou¡î
 = 0; iCou¡î < 
iCh¨s
; iCounter++) {

379 
	`vSt‹eCh¨a˘î
((
ULONG
)(
UCHAR
)
OUR_EM_DASH
, 
pOuçut
);

381 
	}
}

388 
ouçut_ty≥
 *

389 
	$pSèπNextOuçut
(
ouçut_ty≥
 *
pCuºít
)

391 
ouçut_ty≥
 *
pNew
;

393 
	`TRACE_MSG
("pStartNextOutput");

395 i‡(
pCuºít
->
tNextFªe
 == 0) {

397 
	`Áû
(
pCuºít
->
szSt‹age
[0] != '\0');

398 
	`Áû
(
pCuºít
->
lSåögWidth
 != 0);

399  
pCuºít
;

402 
pNew
 = 
	`xmÆloc
((*pNew));

403 
pCuºít
->
pNext
 = 
pNew
;

404 
pNew
->
tSt‹ageSize
 = 
INITIAL_SIZE
;

405 
pNew
->
szSt‹age
 = 
	`xmÆloc
’New->
tSt‹ageSize
);

406 
pNew
->
szSt‹age
[0] = '\0';

407 
pNew
->
tNextFªe
 = 0;

408 
pNew
->
lSåögWidth
 = 0;

409 
pNew
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_DEFAULT
;

410 
pNew
->
usF⁄tStyÀ
 = 
FONT_REGULAR
;

411 
pNew
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

412 
pNew
->
usF⁄tSize
 = 
DEFAULT_FONT_SIZE
;

413 
pNew
->
pPªv
 = 
pCuºít
;

414 
pNew
->
pNext
 = 
NULL
;

415  
pNew
;

416 
	}
}

421 
ouçut_ty≥
 *

422 
	$pSèπNewOuçut
(
ouçut_ty≥
 *
pAnch‹
, ouçut_ty≥ *
pLe·Ovî
)

424 
ouçut_ty≥
 *
pCuº
, *
pNext
;

425 
USHORT
 
usF⁄tStyÀ
, 
usF⁄tSize
;

426 
døwfûe_f⁄åef
 
tF⁄tRef
;

427 
UCHAR
 
ucF⁄tCﬁ‹
;

429 
	`TRACE_MSG
("pStartNewOutput");

431 
ucF⁄tCﬁ‹
 = 
FONT_COLOR_DEFAULT
;

432 
usF⁄tStyÀ
 = 
FONT_REGULAR
;

433 
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

434 
usF⁄tSize
 = 
DEFAULT_FONT_SIZE
;

436 
pCuº
 = 
pAnch‹
;

437 
pCuº
 !
NULL
) {

438 
	`TRACE_MSG
("FreeÅhe old output space");

439 
pNext
 = 
pCuº
->pNext;

440 
pCuº
->
szSt‹age
 = 
	`x‰ì
(pCurr->szStorage);

441 i‡(
pCuº
->
pNext
 =
NULL
) {

442 
ucF⁄tCﬁ‹
 = 
pCuº
->ucFontColor;

443 
usF⁄tStyÀ
 = 
pCuº
->usFontStyle;

444 
tF⁄tRef
 = 
pCuº
->tFontRef;

445 
usF⁄tSize
 = 
pCuº
->usFontSize;

447 
pCuº
 = 
	`x‰ì
(pCurr);

448 
pCuº
 = 
pNext
;

450 i‡(
pLe·Ovî
 =
NULL
) {

452 
	`TRACE_MSG
("CreateÇew output space");

453 
pLe·Ovî
 = 
	`xmÆloc
((*pLeftOver));

454 
pLe·Ovî
->
tSt‹ageSize
 = 
INITIAL_SIZE
;

455 
	`NO_DBG_DEC
(
pLe·Ovî
->
tSt‹ageSize
);

456 
	`TRACE_MSG
("before 2nd xmalloc");

457 
pLe·Ovî
->
szSt‹age
 = 
	`xmÆloc
’Le·Ovî->
tSt‹ageSize
);

458 
	`TRACE_MSG
("after 2nd xmalloc");

459 
pLe·Ovî
->
szSt‹age
[0] = '\0';

460 
pLe·Ovî
->
tNextFªe
 = 0;

461 
pLe·Ovî
->
lSåögWidth
 = 0;

462 
pLe·Ovî
->
ucF⁄tCﬁ‹
 = ucFontColor;

463 
pLe·Ovî
->
usF⁄tStyÀ
 = usFontStyle;

464 
pLe·Ovî
->
tF⁄tRef
 =ÅFontRef;

465 
pLe·Ovî
->
usF⁄tSize
 = usFontSize;

466 
pLe·Ovî
->
pPªv
 = 
NULL
;

467 
pLe·Ovî
->
pNext
 = 
NULL
;

469 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pLe·Ovî
));

470  
pLe·Ovî
;

471 
	}
}

478 
ULONG


479 
	$ulGëCh¨
(
FILE
 *
pFûe
, 
li°_id_íum
 
eLi°ID
)

481 c⁄° 
f⁄t_block_ty≥
 *
pCuº
;

482 
ULONG
 
ulCh¨
, 
ulFûeOff£t
, 
ulCh¨Pos
;

483 
row_öfo_íum
 
eRowInfo
;

484 
USHORT
 
usCh¨
, 
usPr›Mod
;

485 
BOOL
 
bSkù
;

487 
	`Áû
(
pFûe
 =
NULL
);

489 
pCuº
 = 
pF⁄tInfo
;

490 
bSkù
 = 
FALSE
;

492 
usCh¨
 = 
	`usNextCh¨
(
pFûe
, 
eLi°ID
,

493 &
ulFûeOff£t
, &
ulCh¨Pos
, &
usPr›Mod
);

494 i‡(
usCh¨
 =(
USHORT
)
EOF
) {

495  (
ULONG
)
EOF
;

498 
eRowInfo
 = 
	`ePr›Mod2RowInfo
(
usPr›Mod
, 
iW‹dVîsi⁄
);

499 i‡(!
bSèπRow
) {

501 
bSèπRow
 = 
eRowInfo
 =
found_a_˚Œ
 ||

502 (
pRowInfo
 !
NULL
 &&

503 
ulFûeOff£t
 =
pRowInfo
->
ulFûeOff£tSèπ
 &&

504 
eRowInfo
 !
found_nŸ_a_˚Œ
);

506 
bSèπRow
 = 
pRowInfo
 !
NULL
 &&

507 
ulFûeOff£t
 =
pRowInfo
->
ulFûeOff£tSèπ
;

509 
	`NO_DBG_HEX_C
(
bSèπRow
, 
pRowInfo
->
ulFûeOff£tSèπ
);

511 i‡(!
bEndRowN‹m
) {

513 
bEndRow
 = 
eRowInfo
 =
found_íd_of_row
 ||

514 (
pRowInfo
 !
NULL
 &&

515 
ulFûeOff£t
 =
pRowInfo
->
ulFûeOff£tEnd
 &&

516 
eRowInfo
 !
found_nŸ_íd_of_row
);

518 
bEndRowN‹m
 = 
pRowInfo
 !
NULL
 &&

519 
ulFûeOff£t
 =
pRowInfo
->
ulFûeOff£tEnd
;

521 
	`NO_DBG_HEX_C
(
bEndRowN‹m
, 
pRowInfo
->
ulFûeOff£tEnd
);

523 i‡(!
bEndRowFa°
) {

524 
bEndRowFa°
 = 
eRowInfo
 =
found_íd_of_row
;

525 
	`NO_DBG_HEX_C
(
bEndRowFa°
, 
pRowInfo
->
ulFûeOff£tEnd
);

528 i‡(!
bSèπStyÀ
) {

529 
bSèπStyÀ
 = 
pStyÀInfo
 !
NULL
 &&

530 
ulFûeOff£t
 =
pStyÀInfo
->ulFileOffset;

531 
	`NO_DBG_HEX_C
(
bSèπStyÀ
, 
ulFûeOff£t
);

533 i‡(
pCuº
 !
NULL
 && 
ulFûeOff£t
 ==ÖCurr->ulFileOffset) {

534 
bSèπF⁄t
 = 
TRUE
;

535 
	`NO_DBG_HEX
(
ulFûeOff£t
);

536 
pF⁄tInfo
 = 
pCuº
;

537 
pCuº
 = 
	`pGëNextF⁄tInfoLi°Iãm
(pCurr);

541 i‡(
usCh¨
 =
START_EMBEDDED
) {

542 
bSkù
 = 
TRUE
;

545 i‡(
usCh¨
 =
END_IGNORE
 || usCh¨ =
END_EMBEDDED
) {

546 
bSkù
 = 
FALSE
;

549 i‡(
bSkù
) {

552 
ulCh¨
 = 
	`ulTøn¶©eCh¨a˘îs
(
usCh¨
,

553 
ulFûeOff£t
,

554 
iW‹dVîsi⁄
,

555 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,

556 
tO±i⁄s
.
eEncodög
,

557 
bOldMacFûe
);

558 i‡(
ulCh¨
 =
IGNORE_CHARACTER
) {

561 i‡(
ulCh¨
 =
PAR_END
) {

563 
	`vFûlStyÀFromStyÀshìt
(
usI°dNext
, &
tStyÀNext
);

564 
	`vC‹ª˘StyÀVÆues
(&
tStyÀNext
);

565 
bSèπStyÀNext
 = 
TRUE
;

566 
	`vFûlF⁄tFromStyÀshìt
(
usI°dNext
, &
tF⁄tNext
);

567 
	`vC‹ª˘F⁄tVÆues
(&
tF⁄tNext
);

568 
bSèπF⁄tNext
 = 
TRUE
;

570 i‡(
ulCh¨
 =
PAGE_BREAK
) {

572 
pSe˘i⁄Next
 = 
	`pGëSe˘i⁄Info
(
pSe˘i⁄
, 
ulCh¨Pos
);

574  
ulCh¨
;

576 
	}
}

584 
	$lGëWidthMax
(
iP¨agøphBªak
)

586 
	`Áû
(
iP¨agøphBªak
 < 0);

588 i‡(
iP¨agøphBªak
 == 0) {

589  
LONG_MAX
;

591 i‡(
iP¨agøphBªak
 < 
MIN_SCREEN_WIDTH
) {

592  
	`lCh¨2MûliPoöts
(
MIN_SCREEN_WIDTH
);

594 i‡(
iP¨agøphBªak
 > 
MAX_SCREEN_WIDTH
) {

595  
	`lCh¨2MûliPoöts
(
MAX_SCREEN_WIDTH
);

597  
	`lCh¨2MûliPoöts
(
iP¨agøphBªak
);

598 
	}
}

605 
BOOL


606 
	$bW‹dDe¸y±‹
(
FILE
 *
pFûe
, 
lFûesize
, 
dügøm_ty≥
 *
pDüg
)

608 
imaged©a_ty≥
 
tImage
;

609 c⁄° 
°yÀ_block_ty≥
 *
pStyÀTmp
;

610 c⁄° 
f⁄t_block_ty≥
 *
pF⁄tTmp
;

611 c⁄° *
szLi°Ch¨
;

612 
ouçut_ty≥
 *
pAnch‹
, *
pOuçut
, *
pLe·Ovî
;

613 
ULONG
 
ulCh¨
;

614 
lBef‹eIndíèti⁄
, 
lA·îIndíèti⁄
;

615 
lLe·Indíèti⁄
, 
lLe·Indíèti⁄1
, 
lRightIndíèti⁄
;

616 
lWidthCuº
, 
lWidthMax
, 
lDeÁu…TabWidth
, 
lTmp
, 
lHÆfS∑˚Width
;

617 
li°_id_íum
 
eLi°ID
;

618 
image_öfo_íum
 
eRes
;

619 
UINT
 
uiFoŸnŸeNumbî
, 
uiEndnŸeNumbî
, 
uiTmp
;

620 
iLi°SeqNumbî
;

621 
BOOL
 
bWasTabÀRow
, 
bTabÀF⁄tClo£d
, 
bWasEndOfP¨agøph
;

622 
BOOL
 
bInLi°
, 
bNoM¨ks
, 
bFú°Löe
;

623 
BOOL
 
bAŒC≠ôÆs
, 
bHiddíText
, 
bM¨kDñText
, 
bSuc˚ss
;

624 
USHORT
 
usLi°Numbî
;

625 
USHORT
 
usF⁄tStyÀ
, 
usF⁄tStyÀMöimÆ
, 
usF⁄tSize
, 
usTmp
;

626 
UCHAR
 
ucF⁄tNumbî
, 
ucF⁄tCﬁ‹
;

627 
UCHAR
 
ucNFC
, 
ucAlignmít
;

629 
	`Áû
(
pFûe
 =
NULL
 || 
lFûesize
 <0 || 
pDüg
 == NULL);

631 
	`TRACE_MSG
("bWordDecryptor");

633 
iW‹dVîsi⁄
 = 
	`iInôDocumít
(
pFûe
, 
lFûesize
);

634 i‡(
iW‹dVîsi⁄
 < 0) {

635 
	`DBG_DEC
(
iW‹dVîsi⁄
);

636  
FALSE
;

639 
	`vGëO±i⁄s
(&
tO±i⁄s
);

640 
bOldMacFûe
 = 
	`bIsOldMacFûe
();

641 
	`vPª∑ªHdrFåText
(
pFûe
);

642 
	`vPª∑ªFoŸnŸeText
(
pFûe
);

644 
	`vPrﬁogue2
(
pDüg
, 
iW‹dVîsi⁄
);

647 
pSe˘i⁄
 = 
	`pGëSe˘i⁄Info
(
NULL
, 0);

648 
pSe˘i⁄Next
 = 
pSe˘i⁄
;

649 
lDeÁu…TabWidth
 = 
	`lGëDeÁu…TabWidth
();

650 
	`DBG_DEC_C
(
lDeÁu…TabWidth
 != 36000,ÜDefaultTabWidth);

651 
pRowInfo
 = 
	`pGëNextRowInfoLi°Iãm
();

652 
	`DBG_HEX_C
(
pRowInfo
 !
NULL
,ÖRowInfo->
ulFûeOff£tSèπ
);

653 
	`DBG_HEX_C
(
pRowInfo
 !
NULL
,ÖRowInfo->
ulFûeOff£tEnd
);

654 
	`DBG_MSG_C
(
pRowInfo
 =
NULL
, "NoÑowsátáll");

655 
bSèπRow
 = 
FALSE
;

656 
bEndRowN‹m
 = 
FALSE
;

657 
bEndRowFa°
 = 
FALSE
;

658 
bIsTabÀRow
 = 
FALSE
;

659 
bWasTabÀRow
 = 
FALSE
;

660 
	`vRe£tStyÀs
();

661 
pStyÀInfo
 = 
	`pGëNextTextStyÀ
(
NULL
);

662 
bSèπStyÀ
 = 
FALSE
;

663 
bInLi°
 = 
FALSE
;

664 
iLi°SeqNumbî
 = 0;

665 
usI°dNext
 = 
ISTD_NORMAL
;

666 
pAnch‹
 = 
NULL
;

667 
pF⁄tInfo
 = 
	`pGëNextF⁄tInfoLi°Iãm
(
NULL
);

668 
	`DBG_HEX_C
(
pF⁄tInfo
 !
NULL
,ÖF⁄tInfo->
ulFûeOff£t
);

669 
	`DBG_MSG_C
(
pF⁄tInfo
 =
NULL
, "No fontsátáll");

670 
bSèπF⁄t
 = 
FALSE
;

671 
ucF⁄tNumbî
 = 0;

672 
usF⁄tStyÀMöimÆ
 = 
FONT_REGULAR
;

673 
usF⁄tStyÀ
 = 
FONT_REGULAR
;

674 
usF⁄tSize
 = 
DEFAULT_FONT_SIZE
;

675 
ucF⁄tCﬁ‹
 = 
FONT_COLOR_DEFAULT
;

676 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);

677 
pOuçut
 = 
pAnch‹
;

678 
pOuçut
->
ucF⁄tCﬁ‹
 = ucFontColor;

679 
pOuçut
->
usF⁄tStyÀ
 = usFontStyle;

680 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

681 
pOuçut
->
usF⁄tSize
 = usFontSize;

682 
bTabÀF⁄tClo£d
 = 
TRUE
;

683 
lBef‹eIndíèti⁄
 = 0;

684 
lA·îIndíèti⁄
 = 0;

685 
lLe·Indíèti⁄
 = 0;

686 
lLe·Indíèti⁄1
 = 0;

687 
lRightIndíèti⁄
 = 0;

688 
bWasEndOfP¨agøph
 = 
TRUE
;

689 
bNoM¨ks
 = 
TRUE
;

690 
bFú°Löe
 = 
TRUE
;

691 
ucNFC
 = 
LIST_BULLETS
;

692 i‡(
pStyÀInfo
 !
NULL
) {

693 
szLi°Ch¨
 = 
pStyÀInfo
->szListChar;

694 
pStyÀTmp
 = 
pStyÀInfo
;

696 i‡(
tStyÀNext
.
szLi°Ch¨
[0] == '\0') {

697 
	`vGëBuŒëVÆue
(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,

698 
tO±i⁄s
.
eEncodög
, 
tStyÀNext
.
szLi°Ch¨
, 4);

700 
szLi°Ch¨
 = 
tStyÀNext
.szListChar;

701 
pStyÀTmp
 = &
tStyÀNext
;

703 
usLi°Numbî
 = 0;

704 
ucAlignmít
 = 
ALIGNMENT_LEFT
;

705 
bAŒC≠ôÆs
 = 
FALSE
;

706 
bHiddíText
 = 
FALSE
;

707 
bM¨kDñText
 = 
FALSE
;

708 
lWidthMax
 = 
	`lGëWidthMax
(
tO±i⁄s
.
iP¨agøphBªak
);

709 
	`NO_DBG_DEC
(
lWidthMax
);

711 
uiFoŸnŸeNumbî
 = 0;

712 
uiEndnŸeNumbî
 = 0;

713 
eLi°ID
 = 
ãxt_li°
;

715 
ulCh¨
 = 
	`ulGëCh¨
(
pFûe
, 
eLi°ID
);

716 i‡(
ulCh¨
 =(
ULONG
)
EOF
) {

717 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

718 
	`OUTPUT_LINE
();

720 
	`RESET_LINE
();

722 
eLi°ID
) {

723 
ãxt_li°
:

724 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 !=

725 
c⁄vîsi⁄_xml
) {

726 
eLi°ID
 = 
foŸnŸe_li°
;

727 i‡(
uiFoŸnŸeNumbî
 != 0) {

728 
	`vPutSï¨©‹Löe
(
pAnch‹
);

729 
	`OUTPUT_LINE
();

730 
uiFoŸnŸeNumbî
 = 0;

735 
foŸnŸe_li°
:

736 
eLi°ID
 = 
ídnŸe_li°
;

737 i‡(
uiEndnŸeNumbî
 != 0) {

738 
	`vPutSï¨©‹Löe
(
pAnch‹
);

739 
	`OUTPUT_LINE
();

740 
uiEndnŸeNumbî
 = 0;

743 
ídnŸe_li°
:

744 
eLi°ID
 = 
ãxtbox_li°
;

745 i‡(
	`bExi°sTextBox
()) {

746 
	`vPutSï¨©‹Löe
(
pAnch‹
);

747 
	`OUTPUT_LINE
();

750 
ãxtbox_li°
:

751 
eLi°ID
 = 
hdπextbox_li°
;

752 i‡(
	`bExi°sHdrTextBox
()) {

753 
	`vPutSï¨©‹Löe
(
pAnch‹
);

754 
	`OUTPUT_LINE
();

757 
hdπextbox_li°
:

759 
eLi°ID
 = 
íd_of_li°s
;

762 i‡(
eLi°ID
 =
íd_of_li°s
) {

768 i‡(
ulCh¨
 =
UNKNOWN_NOTE_CHAR
) {

769 
eLi°ID
) {

770 
foŸnŸe_li°
:

771 
ulCh¨
 = 
FOOTNOTE_CHAR
;

773 
ídnŸe_li°
:

774 
ulCh¨
 = 
ENDNOTE_CHAR
;

781 i‡(
bSèπRow
) {

783 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

784 
	`OUTPUT_LINE
();

786 
	`RESET_LINE
();

788 
	`Áû
(
pAnch‹
 !
pOuçut
);

789 i‡(
bTabÀF⁄tClo£d
) {

791 
	`vClo£F⁄t
();

797 
uiTmp
 = ((
UINT
)
usF⁄tSize
 * 5 + 3) / 6;

798 i‡(
uiTmp
 < 
MIN_TABLEFONT_SIZE
) {

799 
uiTmp
 = 
MIN_TABLEFONT_SIZE
;

800 } i‡(
uiTmp
 > 
MAX_TABLEFONT_SIZE
) {

801 
uiTmp
 = 
MAX_TABLEFONT_SIZE
;

803 
pOuçut
->
usF⁄tSize
 = (
USHORT
)
uiTmp
;

804 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

805 
pOuçut
->
usF⁄tStyÀ
 = 
FONT_REGULAR
;

806 
pOuçut
->
ucF⁄tCﬁ‹
 = 
FONT_COLOR_BLACK
;

807 
bTabÀF⁄tClo£d
 = 
FALSE
;

809 
bIsTabÀRow
 = 
TRUE
;

810 
bSèπRow
 = 
FALSE
;

813 i‡(
bWasTabÀRow
 &&

814 !
bIsTabÀRow
 &&

815 
ulCh¨
 !
PAR_END
 &&

816 
ulCh¨
 !
HARD_RETURN
 &&

817 
ulCh¨
 !
PAGE_BREAK
 &&

818 
ulCh¨
 !
COLUMN_FEED
) {

823 
	`OUTPUT_LINE
();

824 
	`vEndOfP¨agøph
(
pDüg
,

825 
pOuçut
->
tF⁄tRef
,

826 
pOuçut
->
usF⁄tSize
,

827 ()
pOuçut
->
usF⁄tSize
 * 600);

830 
ulCh¨
) {

831 
PAGE_BREAK
:

832 
COLUMN_FEED
:

833 i‡(
bIsTabÀRow
) {

837 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

838 
	`OUTPUT_LINE
();

840 
	`RESET_LINE
();

842 i‡(
ulCh¨
 =
PAGE_BREAK
) {

843 
	`vEndOfPage
(
pDüg
, 
lA·îIndíèti⁄
,

844 
pSe˘i⁄
 !
pSe˘i⁄Next
);

846 
	`vEndOfP¨agøph
(
pDüg
,

847 
pOuçut
->
tF⁄tRef
,

848 
pOuçut
->
usF⁄tSize
,

849 
lA·îIndíèti⁄
);

856 i‡(
bSèπF⁄t
 || (
bSèπF⁄tNext
 && 
ulCh¨
 !
PAR_END
)) {

858 i‡(
bSèπF⁄t
) {

860 
	`Áû
(
pF⁄tInfo
 =
NULL
);

861 
pF⁄tTmp
 = 
pF⁄tInfo
;

863 
pF⁄tTmp
 = &
tF⁄tNext
;

865 
bAŒC≠ôÆs
 = 
	`bIsC≠ôÆs
(
pF⁄tTmp
->
usF⁄tStyÀ
);

866 
bHiddíText
 = 
	`bIsHiddí
(
pF⁄tTmp
->
usF⁄tStyÀ
);

867 
bM¨kDñText
 = 
	`bIsM¨kDñ
(
pF⁄tTmp
->
usF⁄tStyÀ
);

868 
usTmp
 = 
pF⁄tTmp
->
usF⁄tStyÀ
 &

869 (
FONT_BOLD
|
FONT_ITALIC
|
FONT_UNDERLINE
|

870 
FONT_STRIKE
|
FONT_MARKDEL
|

871 
FONT_SUPERSCRIPT
|
FONT_SUBSCRIPT
);

872 i‡(!
bIsTabÀRow
 &&

873 (
usF⁄tSize
 !
pF⁄tTmp
->usFontSize ||

874 
ucF⁄tNumbî
 !
pF⁄tTmp
->ucFontNumber ||

875 
usF⁄tStyÀMöimÆ
 !
usTmp
 ||

876 
ucF⁄tCﬁ‹
 !
pF⁄tTmp
->ucFontColor)) {

877 
pOuçut
 = 
	`pSèπNextOuçut
(pOutput);

878 
	`vClo£F⁄t
();

879 
pOuçut
->
ucF⁄tCﬁ‹
 = 
pF⁄tTmp
->ucFontColor;

880 
pOuçut
->
usF⁄tStyÀ
 = 
pF⁄tTmp
->usFontStyle;

881 
pOuçut
->
usF⁄tSize
 = 
pF⁄tTmp
->usFontSize;

882 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

883 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pAnch‹
));

885 
ucF⁄tNumbî
 = 
pF⁄tTmp
->ucFontNumber;

886 
usF⁄tSize
 = 
pF⁄tTmp
->usFontSize;

887 
ucF⁄tCﬁ‹
 = 
pF⁄tTmp
->ucFontColor;

888 
usF⁄tStyÀ
 = 
pF⁄tTmp
->usFontStyle;

889 
usF⁄tStyÀMöimÆ
 = 
usTmp
;

890 i‡(
bSèπF⁄t
) {

892 
pF⁄tInfo
 = 
	`pGëNextF⁄tInfoLi°Iãm
(pFontInfo);

893 
	`NO_DBG_HEX_C
(
pF⁄tInfo
 !
NULL
,

894 
pF⁄tInfo
->
ulFûeOff£t
);

895 
	`DBG_MSG_C
(
pF⁄tInfo
 =
NULL
, "No more fonts");

897 
bSèπF⁄t
 = 
FALSE
;

898 
bSèπF⁄tNext
 = 
FALSE
;

901 i‡(
bSèπStyÀ
 || (
bSèπStyÀNext
 && 
ulCh¨
 !
PAR_END
)) {

902 
bFú°Löe
 = 
TRUE
;

904 i‡(
bSèπStyÀ
) {

906 
	`Áû
(
pStyÀInfo
 =
NULL
);

907 
pStyÀTmp
 = 
pStyÀInfo
;

909 
pStyÀTmp
 = &
tStyÀNext
;

911 i‡(!
bIsTabÀRow
) {

912 
	`vSt‹eStyÀ
(
pDüg
, 
pOuçut
, 
pStyÀTmp
);

914 
usI°dNext
 = 
pStyÀTmp
->usIstdNext;

915 
lBef‹eIndíèti⁄
 =

916 
	`lTwùs2MûliPoöts
(
pStyÀTmp
->
usBef‹eIndít
);

917 
lA·îIndíèti⁄
 =

918 
	`lTwùs2MûliPoöts
(
pStyÀTmp
->
usA·îIndít
);

919 
lLe·Indíèti⁄
 =

920 
	`lTwùs2MûliPoöts
(
pStyÀTmp
->
sLe·Indít
);

921 
lLe·Indíèti⁄1
 =

922 
	`lTwùs2MûliPoöts
(
pStyÀTmp
->
sLe·Indít1
);

923 
lRightIndíèti⁄
 =

924 
	`lTwùs2MûliPoöts
(
pStyÀTmp
->
sRightIndít
);

925 
bInLi°
 = 
	`bStyÀIm∂õsLi°
(
pStyÀTmp
, 
iW‹dVîsi⁄
);

926 
bNoM¨ks
 = !
bInLi°
 || 
pStyÀTmp
->
bNumPau£
;

927 
ucNFC
 = 
pStyÀTmp
->ucNFC;

928 
szLi°Ch¨
 = 
pStyÀTmp
->szListChar;

929 
ucAlignmít
 = 
pStyÀTmp
->ucAlignment;

930 i‡(
bSèπStyÀ
) {

931 
pStyÀInfo
 = 
	`pGëNextTextStyÀ
(pStyleInfo);

932 
	`NO_DBG_HEX_C
(
pStyÀInfo
 !
NULL
,

933 
pStyÀInfo
->
ulFûeOff£t
);

934 
	`DBG_MSG_C
(
pStyÀInfo
 =
NULL
,

937 
bSèπStyÀ
 = 
FALSE
;

938 
bSèπStyÀNext
 = 
FALSE
;

941 i‡(
bWasEndOfP¨agøph
) {

942 
	`vSèπOfP¨agøphTXT
(
pDüg
, 
lBef‹eIndíèti⁄
);

945 i‡(!
bIsTabÀRow
 &&

946 
	`lTŸÆSåögWidth
(
pAnch‹
) == 0) {

947 i‡(!
bNoM¨ks
) {

948 
usLi°Numbî
 = 
	`usGëLi°VÆue
(
iLi°SeqNumbî
,

949 
iW‹dVîsi⁄
,

950 
pStyÀTmp
);

952 
	`vPutIndíèti⁄
(
pDüg
, 
pAnch‹
, 
bNoM¨ks
, 
bFú°Löe
,

953 
usLi°Numbî
, 
ucNFC
, 
szLi°Ch¨
,

954 
lLe·Indíèti⁄
, 
lLe·Indíèti⁄1
);

955 
bFú°Löe
 = 
FALSE
;

957 
bNoM¨ks
 = 
TRUE
;

960 i‡(
bWasEndOfP¨agøph
) {

961 
bWasEndOfP¨agøph
 = 
FALSE
;

964 
ulCh¨
) {

965 
PICTURE
:

966 
	`vSt‹eSåög
("[pic]", 5, 
pOuçut
);

968 
FOOTNOTE_CHAR
:

969 
uiFoŸnŸeNumbî
++;

970 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
) {

971 
	`vSt‹eCh¨a˘î
((
ULONG
)
FOOTNOTE_OR_ENDNOTE
,

972 
pOuçut
);

975 
	`vSt‹eCh¨a˘î
((
ULONG
)'[', 
pOuçut
);

976 
	`vSt‹eNumbîAsDecimÆ
(
uiFoŸnŸeNumbî
, 
pOuçut
);

977 
	`vSt‹eCh¨a˘î
((
ULONG
)']', 
pOuçut
);

979 
ENDNOTE_CHAR
:

980 
uiEndnŸeNumbî
++;

981 
	`vSt‹eCh¨a˘î
((
ULONG
)'[', 
pOuçut
);

982 
	`vSt‹eNumbîAsRom™
(
uiEndnŸeNumbî
, 
pOuçut
);

983 
	`vSt‹eCh¨a˘î
((
ULONG
)']', 
pOuçut
);

985 
UNKNOWN_NOTE_CHAR
:

986 
	`vSt‹eSåög
("[?]", 3, 
pOuçut
);

988 
PAR_END
:

989 i‡(
bIsTabÀRow
) {

990 
	`vSt‹eCh¨a˘î
((
ULONG
)'\n', 
pOuçut
);

993 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

994 
	`OUTPUT_LINE
();

996 
	`vMove2NextLöeTXT
(
pDüg
);

997 
	`RESET_LINE
();

999 
	`vEndOfP¨agøph
(
pDüg
,

1000 
pOuçut
->
tF⁄tRef
,

1001 
pOuçut
->
usF⁄tSize
,

1002 
lA·îIndíèti⁄
);

1003 
bWasEndOfP¨agøph
 = 
TRUE
;

1005 
HARD_RETURN
:

1006 i‡(
bIsTabÀRow
) {

1007 
	`vSt‹eCh¨a˘î
((
ULONG
)'\n', 
pOuçut
);

1010 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

1011 
	`OUTPUT_LINE
();

1013 
	`vMove2NextLöeTXT
(
pDüg
);

1014 
	`RESET_LINE
();

1017 
PAGE_BREAK
:

1018 
COLUMN_FEED
:

1019 
pSe˘i⁄
 = 
pSe˘i⁄Next
;

1021 
TABLE_SEPARATOR
:

1022 i‡(
bIsTabÀRow
) {

1023 
	`vSt‹eCh¨a˘î
(
ulCh¨
, 
pOuçut
);

1026 
	`vSt‹eCh¨a˘î
((
ULONG
)' ', 
pOuçut
);

1027 
	`vSt‹eCh¨a˘î
((
ULONG
)
TABLE_SEPARATOR_CHAR
, 
pOuçut
);

1029 
TAB
:

1030 i‡(
bIsTabÀRow
 ||

1031 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_xml
) {

1032 
	`vSt‹eCh¨a˘î
((
ULONG
)' ', 
pOuçut
);

1035 i‡(
tO±i⁄s
.
iP¨agøphBªak
 == 0 &&

1036 (
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_ãxt
 ||

1037 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_fmt_ãxt
)) {

1039 
	`vSt‹eCh¨a˘î
(
TAB
, 
pOuçut
);

1042 
lHÆfS∑˚Width
 = (
	`lCompuãS∑˚Width
(

1043 
pOuçut
->
tF⁄tRef
,

1044 
pOuçut
->
usF⁄tSize
) + 1) / 2;

1045 
lTmp
 = 
	`lTŸÆSåögWidth
(
pAnch‹
);

1046 
lTmp
 +
	`lDøwUnôs2MûliPoöts
(
pDüg
->
lXÀ·
);

1047 
lTmp
 /
lDeÁu…TabWidth
;

1049 
	`vSt‹eCh¨a˘î
((
ULONG
)
FILLER_CHAR
, 
pOuçut
);

1050 
lWidthCuº
 = 
	`lTŸÆSåögWidth
(
pAnch‹
);

1051 
lWidthCuº
 +=

1052 
	`lDøwUnôs2MûliPoöts
(
pDüg
->
lXÀ·
);

1053 } 
lTmp
 =
lWidthCuº
 / 
lDeÁu…TabWidth
 &&

1054 
lWidthCuº
 < 
lWidthMax
 + 
lRightIndíèti⁄
);

1057 i‡(
bHiddíText
 && 
tO±i⁄s
.
bHideHiddíText
) {

1060 i‡(
bM¨kDñText
 && 
tO±i⁄s
.
bRemoveRemovedText
) {

1063 i‡(
ulCh¨
 =
UNICODE_ELLIPSIS
 &&

1064 
tO±i⁄s
.
eEncodög
 !
ícodög_utf_8
) {

1065 
	`vSt‹eSåög
("...", 3, 
pOuçut
);

1067 i‡(
bAŒC≠ôÆs
) {

1068 
ulCh¨
 = 
	`ulToUµî
(ulChar);

1070 
	`vSt‹eCh¨a˘î
(
ulCh¨
, 
pOuçut
);

1075 i‡(
bWasTabÀRow
 && !
bIsTabÀRow
) {

1077 
	`NO_DBG_MSG
("End ofÅable font");

1078 
	`vClo£F⁄t
();

1079 
bTabÀF⁄tClo£d
 = 
TRUE
;

1080 
pOuçut
->
ucF⁄tCﬁ‹
 = ucFontColor;

1081 
pOuçut
->
usF⁄tStyÀ
 = usFontStyle;

1082 
pOuçut
->
usF⁄tSize
 = usFontSize;

1083 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

1085 
bWasTabÀRow
 = 
bIsTabÀRow
;

1087 i‡(
bIsTabÀRow
) {

1088 
	`Áû
(
pAnch‹
 !
pOuçut
);

1089 i‡(!
bEndRowN‹m
 && !
bEndRowFa°
) {

1093 i‡(
bEndRowN‹m
) {

1094 
	`Áû
(
pRowInfo
 =
NULL
);

1095 
	`vTabÀRow2Wödow
(
pDüg
, 
pAnch‹
, 
pRowInfo
,

1096 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,

1097 
tO±i⁄s
.
iP¨agøphBªak
);

1099 
	`Áû
(!
bEndRowFa°
);

1102 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);

1103 
pOuçut
 = 
pAnch‹
;

1104 i‡(
bEndRowN‹m
) {

1105 
pRowInfo
 = 
	`pGëNextRowInfoLi°Iãm
();

1107 
bIsTabÀRow
 = 
FALSE
;

1108 
bEndRowN‹m
 = 
FALSE
;

1109 
bEndRowFa°
 = 
FALSE
;

1110 
	`NO_DBG_HEX_C
(
pRowInfo
 !
NULL
,

1111 
pRowInfo
->
ulFûeOff£tSèπ
);

1112 
	`NO_DBG_HEX_C
(
pRowInfo
 !
NULL
,

1113 
pRowInfo
->
ulFûeOff£tEnd
);

1116 
lWidthCuº
 = 
	`lTŸÆSåögWidth
(
pAnch‹
);

1117 
lWidthCuº
 +
	`lDøwUnôs2MûliPoöts
(
pDüg
->
lXÀ·
);

1118 i‡(
lWidthCuº
 < 
lWidthMax
 + 
lRightIndíèti⁄
) {

1121 
pLe·Ovî
 = 
	`pS∂ôLi°
(
pAnch‹
);

1122 
	`vJu°ify2Wödow
(
pDüg
, 
pAnch‹
,

1123 
lWidthMax
, 
lRightIndíèti⁄
, 
ucAlignmít
);

1124 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
pLe·Ovî
);

1125 
pOuçut
 = 
pAnch‹
;

1126 
pOuçut
->
pNext
 !
NULL
;

1127 
pOuçut
 =ÖOuçut->
pNext
)

1129 
	`Áû
(
pOuçut
 =
NULL
);

1130 i‡(
	`lTŸÆSåögWidth
(
pAnch‹
) > 0) {

1131 
	`vSëLe·Indíèti⁄
(
pDüg
, 
lLe·Indíèti⁄
);

1135 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);

1136 
pAnch‹
->
szSt‹age
 = 
	`x‰ì
(pAnchor->szStorage);

1137 
pAnch‹
 = 
	`x‰ì
(pAnchor);

1138 
	`vClo£F⁄t
();

1139 
	`vFªeDocumít
();

1140  
TRUE
;

1141 
	}
}

1147 
	$lLa°SåögWidth
(c⁄° 
ouçut_ty≥
 *
pAnch‹
)

1149 c⁄° 
ouçut_ty≥
 *
pCuº
, *
pSèπ
;

1151 
pSèπ
 = 
NULL
;

1152 
pCuº
 = 
pAnch‹
;ÖCuº !
NULL
;ÖCuº =ÖCuº->
pNext
) {

1153 i‡(
pCuº
->
tNextFªe
 == 1 &&

1154 (
pCuº
->
szSt‹age
[0] =
PAR_END
 ||

1155 
pCuº
->
szSt‹age
[0] =
HARD_RETURN
)) {

1157 
pSèπ
 = 
pCuº
->
pNext
;

1160 i‡(
pSèπ
 =
NULL
) {

1162 
pSèπ
 = 
pAnch‹
;

1164  
	`lTŸÆSåögWidth
(
pSèπ
);

1165 
	}
}

1170 
ouçut_ty≥
 *

1171 
	$pHdrFåDe¸y±‹
(
FILE
 *
pFûe
, 
ULONG
 
ulCh¨PosSèπ
, ULONG 
ulCh¨PosNext
)

1173 
ouçut_ty≥
 *
pAnch‹
, *
pOuçut
, *
pLe·Ovî
;

1174 
ULONG
 
ulCh¨
, 
ulFûeOff£t
, 
ulCh¨Pos
;

1175 
lWidthCuº
, 
lWidthMax
;

1176 
lRightIndíèti⁄
;

1177 
USHORT
 
usCh¨
;

1178 
BOOL
 
bSkù
;

1179 
UCHAR
 
ucAlignmít
;

1181 
	`Áû
(
iW‹dVîsi⁄
 < 0);

1182 
	`Áû
(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_unknown
);

1183 
	`Áû
(
tO±i⁄s
.
eEncodög
 == 0);

1185 i‡(
ulCh¨PosSèπ
 =
ulCh¨PosNext
) {

1187  
NULL
;

1190 
lRightIndíèti⁄
 = 0;

1191 
ucAlignmít
 = 
ALIGNMENT_LEFT
;

1192 
bSkù
 = 
FALSE
;

1193 
lWidthMax
 = 
	`lGëWidthMax
(
tO±i⁄s
.
iP¨agøphBªak
);

1194 
pAnch‹
 = 
	`pSèπNewOuçut
(
NULL
, NULL);

1195 
pOuçut
 = 
pAnch‹
;

1196 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

1197 
usCh¨
 = 
	`usToHdrFåPosôi⁄
(
pFûe
, 
ulCh¨PosSèπ
);

1198 
ulCh¨Pos
 = 
ulCh¨PosSèπ
;

1199 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
);

1200 
usCh¨
 !(
USHORT
)
EOF
 && 
ulCh¨Pos
 !
ulCh¨PosNext
) {

1202 i‡(
usCh¨
 =
START_EMBEDDED
) {

1203 
bSkù
 = 
TRUE
;

1204 } i‡(
usCh¨
 =
END_IGNORE
 || usCh¨ =
END_EMBEDDED
) {

1205 
bSkù
 = 
FALSE
;

1208 i‡(
bSkù
 || 
usCh¨
 =
END_IGNORE
 || usCh¨ =
END_EMBEDDED
) {

1209 
ulCh¨
 = 
IGNORE_CHARACTER
;

1211 
ulCh¨
 = 
	`ulTøn¶©eCh¨a˘îs
(
usCh¨
,

1212 
ulFûeOff£t
,

1213 
iW‹dVîsi⁄
,

1214 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,

1215 
tO±i⁄s
.
eEncodög
,

1216 
bOldMacFûe
);

1219 i‡(
ulCh¨
 !
IGNORE_CHARACTER
) {

1220 
ulCh¨
) {

1221 
PICTURE
:

1222 
	`vSt‹eSåög
("[pic]", 5, 
pOuçut
);

1224 
PAR_END
:

1225 
HARD_RETURN
:

1226 
PAGE_BREAK
:

1227 
COLUMN_FEED
:

1229 
pOuçut
 = 
	`pSèπNextOuçut
(pOutput);

1230 
	`vClo£F⁄t
();

1231 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

1233 i‡(
ulCh¨
 =
HARD_RETURN
) {

1234 
	`vSt‹eCh¨a˘î
(
HARD_RETURN
, 
pOuçut
);

1236 
	`vSt‹eCh¨a˘î
(
PAR_END
, 
pOuçut
);

1239 
pOuçut
 = 
	`pSèπNextOuçut
(pOutput);

1240 
	`vClo£F⁄t
();

1241 
pOuçut
->
tF⁄tRef
 = (
døwfûe_f⁄åef
)0;

1242 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pAnch‹
));

1244 
TABLE_SEPARATOR
:

1245 
	`vSt‹eCh¨a˘î
((
ULONG
)' ', 
pOuçut
);

1246 
	`vSt‹eCh¨a˘î
((
ULONG
)
TABLE_SEPARATOR_CHAR
,

1247 
pOuçut
);

1249 
TAB
:

1250 
	`vSt‹eCh¨a˘î
((
ULONG
)
FILLER_CHAR
, 
pOuçut
);

1253 
	`vSt‹eCh¨a˘î
(
ulCh¨
, 
pOuçut
);

1257 
lWidthCuº
 = 
	`lLa°SåögWidth
(
pAnch‹
);

1258 i‡(
lWidthCuº
 >
lWidthMax
 + 
lRightIndíèti⁄
) {

1259 
pLe·Ovî
 = 
	`pS∂ôLi°
(
pAnch‹
);

1260 
pOuçut
 = 
pAnch‹
;

1261 
pOuçut
->
pNext
 !
NULL
;

1262 
pOuçut
 =ÖOuçut->
pNext
)

1264 
	`Áû
(
pOuçut
 =
NULL
);

1266 
pOuçut
 = 
	`pSèπNextOuçut
(pOutput);

1268 
	`vSt‹eCh¨a˘î
(
HARD_RETURN
, 
pOuçut
);

1270 
pOuçut
->
pNext
 = 
pLe·Ovî
;

1271 i‡(
pLe·Ovî
 !
NULL
) {

1272 
pLe·Ovî
->
pPªv
 = 
pOuçut
;

1274 
	`Áû
(!
	`bCheckDoubÀLökedLi°
(
pAnch‹
));

1275 
pOuçut
 = 
pAnch‹
;

1276 
pOuçut
->
pNext
 !
NULL
;

1277 
pOuçut
 =ÖOuçut->
pNext
)

1279 
	`Áû
(
pOuçut
 =
NULL
);

1281 
usCh¨
 = 
	`usNextCh¨
(
pFûe
, 
hdr·r_li°
,

1282 &
ulFûeOff£t
, &
ulCh¨Pos
, 
NULL
);

1284 
	`vClo£F⁄t
();

1285 i‡(
	`bOuçutC⁄èösText
(
pAnch‹
)) {

1286  
pAnch‹
;

1288 
pAnch‹
 = 
	`pSèπNewOuçut
’Anch‹, 
NULL
);

1289 
pAnch‹
->
szSt‹age
 = 
	`x‰ì
(pAnchor->szStorage);

1290 
pAnch‹
 = 
	`x‰ì
(pAnchor);

1291  
NULL
;

1292 
	}
}

1298 
	$szFoŸnŸeDe¸y±‹
(
FILE
 *
pFûe
, 
ULONG
 
ulCh¨PosSèπ
, ULONG 
ulCh¨PosNext
)

1300 *
szText
;

1301 
ULONG
 
ulCh¨
, 
ulFûeOff£t
, 
ulCh¨Pos
;

1302 
USHORT
 
usCh¨
;

1303 
size_t
 
tLí
, 
tIndex
, 
tNextFªe
, 
tSt‹ageSize
;

1304 
szResu…
[6];

1305 
BOOL
 
bSkù
;

1307 
	`Áû
(
iW‹dVîsi⁄
 < 0);

1308 
	`Áû
(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 =
c⁄vîsi⁄_unknown
);

1309 
	`Áû
(
tO±i⁄s
.
eEncodög
 == 0);

1311 i‡(
ulCh¨PosSèπ
 =
ulCh¨PosNext
) {

1313  
NULL
;

1316 i‡(
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
 !
c⁄vîsi⁄_xml
) {

1318  
NULL
;

1321 
bSkù
 = 
FALSE
;

1324 
tSt‹ageSize
 = 
INITIAL_SIZE
;

1325 
szText
 = 
	`xmÆloc
(
tSt‹ageSize
);

1326 
tNextFªe
 = 0;

1327 
szText
[
tNextFªe
] = '\0';

1330 
usCh¨
 = 
	`usToFoŸnŸePosôi⁄
(
pFûe
, 
ulCh¨PosSèπ
);

1331 
ulCh¨Pos
 = 
ulCh¨PosSèπ
;

1332 
ulFûeOff£t
 = 
	`ulCh¨Pos2FûeOff£t
(
ulCh¨Pos
);

1334 
usCh¨
 !(
USHORT
)
EOF
 && 
ulCh¨Pos
 !
ulCh¨PosNext
 &&

1335 (
usCh¨
 =
FOOTNOTE_OR_ENDNOTE
 ||

1336 
usCh¨
 =
PAR_END
 ||

1337 
usCh¨
 =
TAB
 ||

1338 
usCh¨
 =(
USHORT
)' ')) {

1339 
usCh¨
 = 
	`usNextCh¨
(
pFûe
, 
foŸnŸe_li°
,

1340 &
ulFûeOff£t
, &
ulCh¨Pos
, 
NULL
);

1343 
usCh¨
 !(
USHORT
)
EOF
 && 
ulCh¨Pos
 !
ulCh¨PosNext
) {

1345 i‡(
usCh¨
 =
START_EMBEDDED
) {

1346 
bSkù
 = 
TRUE
;

1347 } i‡(
usCh¨
 =
END_IGNORE
 || usCh¨ =
END_EMBEDDED
) {

1348 
bSkù
 = 
FALSE
;

1351 i‡(
bSkù
 ||

1352 
usCh¨
 =
END_IGNORE
 ||

1353 
usCh¨
 =
END_EMBEDDED
 ||

1354 
usCh¨
 =
FOOTNOTE_OR_ENDNOTE
) {

1355 
ulCh¨
 = 
IGNORE_CHARACTER
;

1357 
ulCh¨
 = 
	`ulTøn¶©eCh¨a˘îs
(
usCh¨
,

1358 
ulFûeOff£t
,

1359 
iW‹dVîsi⁄
,

1360 
tO±i⁄s
.
eC⁄vîsi⁄Ty≥
,

1361 
tO±i⁄s
.
eEncodög
,

1362 
bOldMacFûe
);

1365 i‡(
ulCh¨
 =
PICTURE
) {

1366 
tLí
 = 5;

1367 
	`°r˝y
(
szResu…
, "[pic]");

1368 } i‡(
ulCh¨
 =
IGNORE_CHARACTER
) {

1369 
tLí
 = 0;

1370 
szResu…
[0] = '\0';

1372 
ulCh¨
) {

1373 
PAR_END
:

1374 
HARD_RETURN
:

1375 
PAGE_BREAK
:

1376 
COLUMN_FEED
:

1377 
ulCh¨
 = (
ULONG
)
PAR_END
;

1379 
TAB
:

1380 
ulCh¨
 = (
ULONG
)' ';

1385 
tLí
 = 
	`tUcs2Utf8
(
ulCh¨
, 
szResu…
, (szResult));

1388 i‡(
tNextFªe
 + 
tLí
 + 1 > 
tSt‹ageSize
) {

1389 
tSt‹ageSize
 +
EXTENTION_SIZE
;

1390 
szText
 = 
	`xªÆloc
(szText, 
tSt‹ageSize
);

1392 
tIndex
 = 0;ÅIndex < 
tLí
;ÅIndex++) {

1393 
szText
[
tNextFªe
++] = 
szResu…
[
tIndex
];

1395 
szText
[
tNextFªe
] = '\0';

1397 
usCh¨
 = 
	`usNextCh¨
(
pFûe
, 
foŸnŸe_li°
,

1398 &
ulFûeOff£t
, &
ulCh¨Pos
, 
NULL
);

1401 
tNextFªe
 !0 && 
szText
[tNextFree - 1] == ' ') {

1402 
szText
[
tNextFªe
 - 1] = '\0';

1403 
tNextFªe
--;

1405 i‡(
tNextFªe
 == 0) {

1407 
szText
 = 
	`x‰ì
(szText);

1408  
NULL
;

1410  
szText
;

1411 
	}
}

	@wordconst.h

9 #i‡!
deföed
(
__w‹dc⁄°_h
)

10 
	#__w‹dc⁄°_h
 1

	)

16 #i‡!
deföed
(
BOOL
)

17 
	#BOOL
 

	)

18 
	#TRUE
 1

	)

19 
	#FALSE
 0

	)

23 
	#HEADER_SIZE
 768

	)

24 
	#BIG_BLOCK_SIZE
 512

	)

25 
	#PROPERTY_SET_STORAGE_SIZE
 128

	)

26 
	#SMALL_BLOCK_SIZE
 64

	)

28 
	#MIN_SIZE_FOR_BBD_USE
 0x1000

	)

30 
	#TABLE_COLUMN_MAX
 31

	)

32 
	#NUMBER_OF_TABS_MAX
 64

	)

34 
	#MIN_FONT_SIZE
 8

	)

35 
	#DEFAULT_FONT_SIZE
 20

	)

36 
	#MAX_FONT_SIZE
 240

	)

37 
	#MIN_TABLEFONT_SIZE
 16

	)

38 
	#MAX_TABLEFONT_SIZE
 20

	)

40 
	#FONT_REGULAR
 0x0000

	)

41 
	#FONT_BOLD
 0x0001

	)

42 
	#FONT_ITALIC
 0x0002

	)

43 
	#FONT_UNDERLINE
 0x0004

	)

44 
	#FONT_CAPITALS
 0x0008

	)

45 
	#FONT_SMALL_CAPITALS
 0x0010

	)

46 
	#FONT_STRIKE
 0x0020

	)

47 
	#FONT_HIDDEN
 0x0040

	)

48 
	#FONT_MARKDEL
 0x0080

	)

49 
	#FONT_SUPERSCRIPT
 0x0100

	)

50 
	#FONT_SUBSCRIPT
 0x0200

	)

52 
	#FONT_COLOR_DEFAULT
 0

	)

53 
	#FONT_COLOR_BLACK
 1

	)

54 
	#FONT_COLOR_BLUE
 2

	)

55 
	#FONT_COLOR_CYAN
 3

	)

56 
	#FONT_COLOR_GREEN
 4

	)

57 
	#FONT_COLOR_MAGENTA
 5

	)

58 
	#FONT_COLOR_RED
 6

	)

59 
	#FONT_COLOR_YELLOW
 7

	)

60 
	#FONT_COLOR_WHITE
 8

	)

62 
	#END_OF_CHAIN
 0xffffff„UL

	)

63 
	#UNUSED_BLOCK
 0xffffffffUL

	)

65 
	#MAX_BLOCKNUMBER
 0x007fffffUL

	)

67 
	#CP_INVALID
 0xffffffffUL

	)

69 
	#FC_INVALID
 0xffffffffUL

	)

71 
	#ISTD_INVALID
 
USHRT_MAX


	)

72 
	#ISTD_NORMAL
 0

	)

74 
	#IGNORE_PROPMOD
 0

	)

76 
	#LIST_ARABIC_NUM
 0x00

	)

77 
	#LIST_UPPER_ROMAN
 0x01

	)

78 
	#LIST_LOWER_ROMAN
 0x02

	)

79 
	#LIST_UPPER_ALPHA
 0x03

	)

80 
	#LIST_LOWER_ALPHA
 0x04

	)

81 
	#LIST_ORDINAL_NUM
 0x05

	)

82 
	#LIST_NUMBER_TXT
 0x06

	)

83 
	#LIST_ORDINAL_TXT
 0x07

	)

84 
	#LIST_OUTLINE_NUM
 0x16

	)

85 
	#LIST_SPECIAL
 0x17

	)

86 
	#LIST_SPECIAL2
 0x19

	)

87 
	#LIST_BULLETS
 0xff

	)

89 
	#ALIGNMENT_LEFT
 0x00

	)

90 
	#ALIGNMENT_CENTER
 0x01

	)

91 
	#ALIGNMENT_RIGHT
 0x02

	)

92 
	#ALIGNMENT_JUSTIFY
 0x03

	)

94 
	#HEADING_GAP
 120

	)

96 
	#STI_USER
 0xf„

	)

97 
	#STI_NIL
 0xfff

	)

99 
	#TABLE_BORDER_TOP
 0x01

	)

100 
	#TABLE_BORDER_LEFT
 0x02

	)

101 
	#TABLE_BORDER_BOTTOM
 0x04

	)

102 
	#TABLE_BORDER_RIGHT
 0x08

	)

106 
	#ucGëByã
(
i
,
a
Ë(()◊[i]))

	)

107 
	#usGëW‹d
(
i
,
a
) (()\

108 (()(
a
[(
i
)+1])<<8|\

109 ()(
a
[
i
])))

	)

110 
	#ulGëL⁄g
(
i
,
a
) (()(a[i])|\

111 ()(
a
[(
i
)+1])<<8|\

112 ()(
a
[(
i
)+2])<<16|\

113 ()(
a
[(
i
)+3])<<24)

	)

114 
	#usGëW‹dBE
(
i
,
a
) (()\

115 (()(
a
[
i
])<<8|\

116 ()(
a
[(
i
)+1])))

	)

117 
	#ulGëL⁄gBE
(
i
,
a
) (()(a[(i)+3])|\

118 ()(
a
[(
i
)+2])<<8|\

119 ()(
a
[(
i
)+1])<<16|\

120 ()(
a
[
i
])<<24)

	)

122 
	#bIsBﬁd
(
x
Ë(((xË& 
FONT_BOLD
Ë=FONT_BOLD)

	)

123 
	#bIsIèlic
(
x
Ë(((xË& 
FONT_ITALIC
Ë=FONT_ITALIC)

	)

124 
	#bIsUndîlöe
(
x
Ë(((xË& 
FONT_UNDERLINE
Ë=FONT_UNDERLINE)

	)

125 
	#bIsC≠ôÆs
(
x
Ë(((xË& 
FONT_CAPITALS
Ë=FONT_CAPITALS)

	)

126 
	#bIsSmÆlC≠ôÆs
(
x
Ë(((xË& 
FONT_SMALL_CAPITALS
Ë=FONT_SMALL_CAPITALS)

	)

127 
	#bIsSåike
(
x
Ë(((xË& 
FONT_STRIKE
Ë=FONT_STRIKE)

	)

128 
	#bIsHiddí
(
x
Ë(((xË& 
FONT_HIDDEN
Ë=FONT_HIDDEN)

	)

129 
	#bIsM¨kDñ
(
x
Ë(((xË& 
FONT_MARKDEL
Ë=FONT_MARKDEL)

	)

130 
	#bIsSu≥rs¸ùt
(
x
Ë(((xË& 
FONT_SUPERSCRIPT
Ë=FONT_SUPERSCRIPT)

	)

131 
	#bIsSubs¸ùt
(
x
Ë(((xË& 
FONT_SUBSCRIPT
Ë=FONT_SUBSCRIPT)

	)

133 
	#bIsTabÀB‹dîT›
(
x
Ë(((xË& 
TABLE_BORDER_TOP
Ë=TABLE_BORDER_TOP)

	)

134 
	#bIsTabÀB‹dîLe·
(
x
Ë(((xË& 
TABLE_BORDER_LEFT
Ë=TABLE_BORDER_LEFT)

	)

135 
	#bIsTabÀB‹dîBŸtom
(
x
Ë(((xË& 
TABLE_BORDER_BOTTOM
Ë=TABLE_BORDER_BOTTOM)

	)

136 
	#bIsTabÀB‹dîRight
(
x
Ë(((xË& 
TABLE_BORDER_RIGHT
Ë=TABLE_BORDER_RIGHT)

	)

138 #i‡
deföed
(
__riscos
)

140 
	#lW‹d2DøwUnôs00
(
x
Ë(()(xË* 320)

	)

141 
	#lW‹d2DøwUnôs20
(
x
Ë(()(xË* 384)

	)

142 
	#lToBa£Löe
(
x
Ë(()(xË* 45)

	)

145 
	#lTwùs2MûliPoöts
(
x
Ë(()(xË* 50)

	)

147 
	#dTwùs2Poöts
(
x
Ë(()(xË/ 20.0)

	)

149 
	#lCh¨2MûliPoöts
(
x
Ë(()(xË* 6400)

	)

150 
	#iMûliPoöts2Ch¨
(
x
Ë()((()(xË+ 3200Ë/ 6400)

	)

151 
	#iDøwUnôs2Ch¨
(
x
Ë()((()(xË+ 2048Ë/ 4096)

	)

153 
	#lDøwUnôs2MûliPoöts
(
x
Ë((()(xË* 25 + 8Ë/ 16)

	)

154 
	#lMûliPoöts2DøwUnôs
(
x
Ë((()(xË* 16 + 12Ë/ 25)

	)

155 
	#lPoöts2DøwUnôs
(
x
Ë(()(xË* 640)

	)

156 
	#dDøwUnôs2Poöts
(
x
Ë(()(xË/ 640.0)

	)

159 
	#IGNORE_CHARACTER
 0x00

	)

160 
	#PICTURE
 0x01

	)

161 
	#FOOTNOTE_OR_ENDNOTE
 0x02

	)

162 
	#FOOTNOTE_SEPARATOR
 0x03

	)

163 
	#FOOTNOTE_CONTINUATION
 0x04

	)

164 
	#ANNOTATION
 0x05

	)

165 
	#TABLE_SEPARATOR
 0x07

	)

166 
	#FRAME
 0x08

	)

167 
	#TAB
 0x09

	)

169 
	#LINE_FEED
 0x0®

	)

170 
	#HARD_RETURN
 0x0b

	)

171 
	#PAGE_BREAK
 0x0¯

	)

172 
	#PAR_END
 0x0d

	)

173 
	#COLUMN_FEED
 0x0ê

	)

175 
	#START_EMBEDDED
 0x13

	)

176 
	#END_IGNORE
 0x14

	)

177 
	#END_EMBEDDED
 0x15

	)

179 #i‡
deföed
(
DEBUG
)

180 
	#FILLER_CHAR
 '~'

	)

182 
	#FILLER_CHAR
 ' '

	)

184 
	#TABLE_SEPARATOR_CHAR
 '|'

	)

186 
	#FOOTNOTE_CHAR
 (()0xfff‡+ 1)

	)

187 
	#ENDNOTE_CHAR
 (()0xfff‡+ 2)

	)

188 
	#UNKNOWN_NOTE_CHAR
 (()0xfff‡+ 3)

	)

191 
	#WORD_UNBREAKABLE_JOIN
 0x1e

	)

192 
	#WORD_SOFT_HYPHEN
 0x1f

	)

195 
	#UNICODE_DOUBLE_LEFT_ANGLE_QMARK
 0x00ab

	)

196 
	#UNICODE_MIDDLE_DOT
 0x00b7

	)

197 
	#UNICODE_DOUBLE_RIGHT_ANGLE_QMARK
 0x00bb

	)

198 
	#UNICODE_CAPITAL_D_WITH_STROKE
 0x0110

	)

199 
	#UNICODE_SMALL_D_WITH_STROKE
 0x0111

	)

200 
	#UNICODE_CAPITAL_LIGATURE_OE
 0x0152

	)

201 
	#UNICODE_SMALL_LIGATURE_OE
 0x0153

	)

202 
	#UNICODE_SMALL_F_HOOK
 0x0192

	)

203 
	#UNICODE_GREEK_CAPITAL_CHI
 0x03a7

	)

204 
	#UNICODE_GREEK_SMALL_UPSILON
 0x03c5

	)

205 
	#UNICODE_MODIFIER_CIRCUMFLEX
 0x02c6

	)

206 
	#UNICODE_SMALL_TILDE
 0x02dc

	)

207 
	#UNICODE_SMALL_LETTER_OMEGA
 0x03c9

	)

208 
	#UNICODE_EN_QUAD
 0x2000

	)

209 
	#UNICODE_EM_QUAD
 0x2001

	)

210 
	#UNICODE_EN_SPACE
 0x2002

	)

211 
	#UNICODE_EM_SPACE
 0x2003

	)

212 
	#UNICODE_THREE_PER_EM_SPACE
 0x2004

	)

213 
	#UNICODE_FOUR_PER_EM_SPACE
 0x2005

	)

214 
	#UNICODE_SIX_PER_EM_SPACE
 0x2006

	)

215 
	#UNICODE_FIGURE_SPACE
 0x2007

	)

216 
	#UNICODE_PUNCTUATION_SPACE
 0x2008

	)

217 
	#UNICODE_THIN_SPACE
 0x2009

	)

218 
	#UNICODE_HAIR_SPACE
 0x200a

	)

219 
	#UNICODE_ZERO_WIDTH_SPACE
 0x200b

	)

220 
	#UNICODE_ZERO_WIDTH_NON_JOINER
 0x200c

	)

221 
	#UNICODE_ZERO_WIDTH_JOINER
 0x200d

	)

222 
	#UNICODE_LEFT_TO_RIGHT_MARK
 0x200e

	)

223 
	#UNICODE_RIGHT_TO_LEFT_MARK
 0x200f

	)

224 
	#UNICODE_HYPHEN
 0x2010

	)

225 
	#UNICODE_NON_BREAKING_HYPHEN
 0x2011

	)

226 
	#UNICODE_FIGURE_DASH
 0x2012

	)

227 
	#UNICODE_EN_DASH
 0x2013

	)

228 
	#UNICODE_EM_DASH
 0x2014

	)

229 
	#UNICODE_HORIZONTAL_BAR
 0x2015

	)

230 
	#UNICODE_DOUBLE_VERTICAL_LINE
 0x2016

	)

231 
	#UNICODE_DOUBLE_LOW_LINE
 0x2017

	)

232 
	#UNICODE_LEFT_SINGLE_QMARK
 0x2018

	)

233 
	#UNICODE_RIGHT_SINGLE_QMARK
 0x2019

	)

234 
	#UNICODE_SINGLE_LOW_9_QMARK
 0x201a

	)

235 
	#UNICODE_SINGLE_HIGH_REV_9_QMARK
 0x201b

	)

236 
	#UNICODE_LEFT_DOUBLE_QMARK
 0x201c

	)

237 
	#UNICODE_RIGHT_DOUBLE_QMARK
 0x201d

	)

238 
	#UNICODE_DOUBLE_LOW_9_QMARK
 0x201e

	)

239 
	#UNICODE_DOUBLE_HIGH_REV_9_QMARK
 0x201f

	)

240 
	#UNICODE_DAGGER
 0x2020

	)

241 
	#UNICODE_DOUBLE_DAGGER
 0x2021

	)

242 
	#UNICODE_BULLET
 0x2022

	)

243 
	#UNICODE_TRIANGULAR_BULLET
 0x2023

	)

244 
	#UNICODE_ONE_DOT_LEADER
 0x2024

	)

245 
	#UNICODE_TWO_DOT_LEADER
 0x2025

	)

246 
	#UNICODE_ELLIPSIS
 0x2026

	)

247 
	#UNICODE_HYPHENATION_POINT
 0x2027

	)

248 
	#UNICODE_LEFT_TO_RIGHT_EMBEDDING
 0x202a

	)

249 
	#UNICODE_RIGHT_TO_LEFT_EMBEDDING
 0x202b

	)

250 
	#UNICODE_POP_DIRECTIONAL_FORMATTING
 0x202c

	)

251 
	#UNICODE_LEFT_TO_RIGHT_OVERRIDE
 0x202d

	)

252 
	#UNICODE_RIGHT_TO_LEFT_OVERRIDE
 0x202e

	)

253 
	#UNICODE_NARROW_NO_BREAK_SPACE
 0x202f

	)

254 
	#UNICODE_PER_MILLE_SIGN
 0x2030

	)

255 
	#UNICODE_PRIME
 0x2032

	)

256 
	#UNICODE_DOUBLE_PRIME
 0x2033

	)

257 
	#UNICODE_SINGLE_LEFT_ANGLE_QMARK
 0x2039

	)

258 
	#UNICODE_SINGLE_RIGHT_ANGLE_QMARK
 0x203a

	)

259 
	#UNICODE_UNDERTIE
 0x203f

	)

260 
	#UNICODE_FRACTION_SLASH
 0x2044

	)

261 
	#UNICODE_EURO_SIGN
 0x20ac

	)

262 
	#UNICODE_CIRCLE
 0x20dd

	)

263 
	#UNICODE_SQUARE
 0x20de

	)

264 
	#UNICODE_DIAMOND
 0x20df

	)

265 
	#UNICODE_NUMERO_SIGN
 0x2116

	)

266 
	#UNICODE_TRADEMARK_SIGN
 0x2122

	)

267 
	#UNICODE_KELVIN_SIGN
 0x212a

	)

268 
	#UNICODE_LEFTWARDS_ARROW
 0x2190

	)

269 
	#UNICODE_UPWARDS_ARROW
 0x2191

	)

270 
	#UNICODE_RIGHTWARDS_ARROW
 0x2192

	)

271 
	#UNICODE_DOWNWARDS_ARROW
 0x2193

	)

272 
	#UNICODE_N_ARY_SUMMATION
 0x2211

	)

273 
	#UNICODE_MINUS_SIGN
 0x2212

	)

274 
	#UNICODE_DIVISION_SLASH
 0x2215

	)

275 
	#UNICODE_ASTERISK_OPERATOR
 0x2217

	)

276 
	#UNICODE_BULLET_OPERATOR
 0x2219

	)

277 
	#UNICODE_RATIO
 0x2236

	)

278 
	#UNICODE_TILDE_OPERATOR
 0x223c

	)

279 
	#UNICODE_BD_LIGHT_HORIZONTAL
 0x2500

	)

280 
	#UNICODE_BD_LIGHT_VERTICAL
 0x2502

	)

281 
	#UNICODE_BD_LIGHT_DOWN_RIGHT
 0x250c

	)

282 
	#UNICODE_BD_LIGHT_DOWN_AND_LEFT
 0x2510

	)

283 
	#UNICODE_BD_LIGHT_UP_AND_RIGHT
 0x2514

	)

284 
	#UNICODE_BD_LIGHT_UP_AND_LEFT
 0x2518

	)

285 
	#UNICODE_BD_LIGHT_VERTICAL_AND_RIGHT
 0x251c

	)

286 
	#UNICODE_BD_LIGHT_VERTICAL_AND_LEFT
 0x2524

	)

287 
	#UNICODE_BD_LIGHT_DOWN_AND_HORIZONTAL
 0x252c

	)

288 
	#UNICODE_BD_LIGHT_UP_AND_HORIZONTAL
 0x2534

	)

289 
	#UNICODE_BD_LIGHT_VERTICAL_AND_HORIZONTAL
 0x253c

	)

290 
	#UNICODE_BD_DOUBLE_HORIZONTAL
 0x2550

	)

291 
	#UNICODE_BD_DOUBLE_VERTICAL
 0x2551

	)

292 
	#UNICODE_BD_DOUBLE_DOWN_AND_RIGHT
 0x2554

	)

293 
	#UNICODE_BD_DOUBLE_DOWN_AND_LEFT
 0x2557

	)

294 
	#UNICODE_BD_DOUBLE_UP_AND_RIGHT
 0x255a

	)

295 
	#UNICODE_BD_DOUBLE_UP_AND_LEFT
 0x255d

	)

296 
	#UNICODE_BD_DOUBLE_VERTICAL_AND_RIGHT
 0x2560

	)

297 
	#UNICODE_BD_DOUBLE_VERTICAL_AND_LEFT
 0x2563

	)

298 
	#UNICODE_BD_DOUBLE_DOWN_AND_HORIZONTAL
 0x2566

	)

299 
	#UNICODE_BD_DOUBLE_UP_AND_HORIZONTAL
 0x2569

	)

300 
	#UNICODE_BD_DOUBLE_VERTICAL_AND_HORIZONTAL
 0x256c

	)

301 
	#UNICODE_LIGHT_SHADE
 0x2591

	)

302 
	#UNICODE_MEDIUM_SHADE
 0x2592

	)

303 
	#UNICODE_DARK_SHADE
 0x2593

	)

304 
	#UNICODE_BLACK_SQUARE
 0x25a0

	)

305 
	#UNICODE_BLACK_CLUB_SUIT
 0x2663

	)

306 
	#UNICODE_SMALL_LIGATURE_FI
 0xfb01

	)

307 
	#UNICODE_SMALL_LIGATURE_FL
 0xfb02

	)

308 
	#UNICODE_ZERO_WIDTH_NO_BREAK_SPACE
 0x„ff

	)

310 #i‡
deföed
(
__riscos
)

311 
	#OUR_ELLIPSIS
 0x8c

	)

312 
	#OUR_EM_DASH
 0x98

	)

313 
	#OUR_UNBREAKABLE_JOIN
 0x99

	)

315 
	#OUR_ELLIPSIS
 '.'

	)

316 
	#OUR_EM_DASH
 '-'

	)

317 
	#OUR_UNBREAKABLE_JOIN
 '-'

	)

319 
	#OUR_DIAMOND
 '-'

	)

	@worddos.c

9 
	~"™tiw‹d.h
"

17 
BOOL


18 
	$bGëDocumítText
(
FILE
 *
pFûe
, 
lFûesize
, c⁄° 
UCHAR
 *
aucHódî
)

20 
ãxt_block_ty≥
 
tTextBlock
;

21 
ULONG
 
ulTextLí
;

22 
BOOL
 
bFa°Saved
;

23 
UCHAR
 
ucDocSètus
, 
ucVîsi⁄
;

25 
	`Áû
(
pFûe
 =
NULL
);

26 
	`Áû
(
lFûesize
 < 128);

27 
	`Áû
(
aucHódî
 =
NULL
);

30 
ucDocSètus
 = 
	`ucGëByã
(0x75, 
aucHódî
);

31 
	`DBG_HEX
(
ucDocSètus
);

32 
bFa°Saved
 = (
ucDocSètus
 & 
	`BIT
(1)) != 0;

33 
	`DBG_MSG_C
(
bFa°Saved
, "This document is Fast Saved");

34 
ucVîsi⁄
 = 
	`ucGëByã
(0x74, 
aucHódî
);

35 
	`DBG_DEC
(
ucVîsi⁄
);

36 
	`DBG_MSG_C
(
ucVîsi⁄
 == 0, "Written by Word 4.0 orÉarlier");

37 
	`DBG_MSG_C
(
ucVîsi⁄
 == 3, "Word 5.0 format, butÇot written by Word");

38 
	`DBG_MSG_C
(
ucVîsi⁄
 == 4, "Written by Word 5.x");

39 i‡(
bFa°Saved
) {

40 
	`wîr
(0, "Word for DOS:áutosave documentsáreÇot supported");

41  
FALSE
;

45 
ulTextLí
 = 
	`ulGëL⁄g
(0x0e, 
aucHódî
);

46 
	`DBG_HEX
(
ulTextLí
);

47 
ulTextLí
 -= 128;

48 
	`DBG_DEC
(
ulTextLí
);

49 
tTextBlock
.
ulFûeOff£t
 = 128;

50 
tTextBlock
.
ulCh¨Pos
 = 128;

51 
tTextBlock
.
ulLígth
 = 
ulTextLí
;

52 
tTextBlock
.
bU£sUnicode
 = 
FALSE
;

53 
tTextBlock
.
usPr›Mod
 = 
IGNORE_PROPMOD
;

54 i‡(!
	`bAdd2TextBlockLi°
(&
tTextBlock
)) {

55 
	`DBG_HEX
(
tTextBlock
.
ulFûeOff£t
);

56 
	`DBG_HEX
(
tTextBlock
.
ulCh¨Pos
);

57 
	`DBG_DEC
(
tTextBlock
.
ulLígth
);

58 
	`DBG_DEC
(
tTextBlock
.
bU£sUnicode
);

59 
	`DBG_DEC
(
tTextBlock
.
usPr›Mod
);

60  
FALSE
;

62  
TRUE
;

63 
	}
}

71 
	$iInôDocumítDOS
(
FILE
 *
pFûe
, 
lFûesize
)

73 
iW‹dVîsi⁄
;

74 
BOOL
 
bSuc˚ss
;

75 
USHORT
 
usIdít
;

76 
UCHAR
 
aucHódî
[128];

78 
	`Áû
(
pFûe
 =
NULL
);

80 i‡(
lFûesize
 < 128) {

85 i‡(!
	`bRódByãs
(
aucHódî
, 128, 0x00, 
pFûe
)) {

89 
usIdít
 = 
	`usGëW‹d
(0x00, 
aucHódî
);

90 
	`DBG_HEX
(
usIdít
);

91 
	`Áû
(
usIdít
 != 0xbe31);

92 
iW‹dVîsi⁄
 = 
	`iGëVîsi⁄Numbî
(
aucHódî
);

93 i‡(
iW‹dVîsi⁄
 != 0) {

94 
	`wîr
(0, "This file isÇot from 'Word for DOS'.");

97 
bSuc˚ss
 = 
	`bGëDocumítText
(
pFûe
, 
lFûesize
, 
aucHódî
);

98 i‡(
bSuc˚ss
) {

99 
	`vGëPr›îtyInfo
(
pFûe
, 
NULL
,

100 
NULL
, 0, NULL, 0,

101 
aucHódî
, 
iW‹dVîsi⁄
);

102 
	`vSëDeÁu…TabWidth
(
pFûe
, 
NULL
,

103 
NULL
, 0, NULL, 0,

104 
aucHódî
, 
iW‹dVîsi⁄
);

105 
	`vGëNŸesInfo
(
pFûe
, 
NULL
,

106 
NULL
, 0, NULL, 0,

107 
aucHódî
, 
iW‹dVîsi⁄
);

109  
bSuc˚ss
 ? 
iW‹dVîsi⁄
 : -1;

110 
	}
}

	@wordlib.c

9 
	~"™tiw‹d.h
"

11 
BOOL
 
	gbOldMacFûe
 = 
FALSE
;

17 
BOOL


18 
	$bCheckByãs
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucByãs
, 
size_t
 
tByãs
)

20 
iIndex
, 
iCh¨
;

22 
	`Áû
(
pFûe
 =
NULL
 || 
aucByãs
 =NULL || 
tByãs
 == 0);

24 
	`ªwöd
(
pFûe
);

26 
iIndex
 = 0; iIndex < ()
tByãs
; iIndex++) {

27 
iCh¨
 = 
	`gëc
(
pFûe
);

28 i‡(
iCh¨
 =
EOF
 || iCh¨ !()
aucByãs
[
iIndex
]) {

29 
	`NO_DBG_HEX
(
iCh¨
);

30 
	`NO_DBG_HEX
(
aucByãs
[
iIndex
]);

31  
FALSE
;

34  
TRUE
;

35 
	}
}

41 
BOOL


42 
	$bIsW‹dF‹DosFûe
(
FILE
 *
pFûe
, 
lFûesize
)

44 
UCHAR
 
aucByãs
[] =

47 
	`DBG_MSG
("bIsWordForDosFile");

49 i‡(
pFûe
 =
NULL
 || 
lFûesize
 < 0) {

50 
	`DBG_MSG
("NoÖroper file given");

51  
FALSE
;

53 i‡(
lFûesize
 < 128) {

54 
	`DBG_MSG
("FileÅoo smallÅo beá Word document");

55  
FALSE
;

57  
	`bCheckByãs
(
pFûe
, 
aucByãs
, 
	`ñemítsof
(aucBytes));

58 
	}
}

64 
BOOL


65 
	$bIsW‹dFûeWôhOLE
(
FILE
 *
pFûe
, 
lFûesize
)

67 
UCHAR
 
aucByãs
[] =

69 
iTaûLí
;

71 i‡(
pFûe
 =
NULL
 || 
lFûesize
 < 0) {

72 
	`DBG_MSG
("NoÖroper file given");

73  
FALSE
;

75 i‡(
lFûesize
 < ()
BIG_BLOCK_SIZE
 * 3) {

76 
	`DBG_MSG
("This file isÅoo smallÅo beá Word document");

77  
FALSE
;

80 
iTaûLí
 = ()(
lFûesize
 % 
BIG_BLOCK_SIZE
);

81 
iTaûLí
) {

86 i‡(()(
lFûesize
 % 3Ë=
iTaûLí
) {

87 
	`DBG_DEC
(
lFûesize
);

88  
FALSE
;

95 
	`DBG_MSG
("Document withÉxtra bytes");

98 
	`DBG_DEC
(
lFûesize
);

99 
	`DBG_DEC
(
iTaûLí
);

100  
FALSE
;

102  
	`bCheckByãs
(
pFûe
, 
aucByãs
, 
	`ñemítsof
(aucBytes));

103 
	}
}

108 
BOOL


109 
	$bIsRtfFûe
(
FILE
 *
pFûe
)

111 
UCHAR
 
aucByãs
[] =

114 
	`DBG_MSG
("bIsRtfFile");

116  
	`bCheckByãs
(
pFûe
, 
aucByãs
, 
	`ñemítsof
(aucBytes));

117 
	}
}

122 
BOOL


123 
	$bIsW‹dPî„˘Fûe
(
FILE
 *
pFûe
)

125 
UCHAR
 
aucByãs
[] =

128 
	`DBG_MSG
("bIsWordPerfectFile");

130  
	`bCheckByãs
(
pFûe
, 
aucByãs
, 
	`ñemítsof
(aucBytes));

131 
	}
}

137 
BOOL


138 
	$bIsWöW‹d12Fûe
(
FILE
 *
pFûe
, 
lFûesize
)

140 
UCHAR
 
aucByãs
[2][4] = {

144 
iIndex
;

146 
	`DBG_MSG
("bIsWinWord12File");

148 i‡(
pFûe
 =
NULL
 || 
lFûesize
 < 0) {

149 
	`DBG_MSG
("NoÖroper file given");

150  
FALSE
;

152 i‡(
lFûesize
 < 384) {

153 
	`DBG_MSG
("This file isÅoo smallÅo beá Word document");

154  
FALSE
;

157 
iIndex
 = 0; iIndex < ()
	`ñemítsof
(
aucByãs
); iIndex++) {

158 i‡(
	`bCheckByãs
(
pFûe
,

159 
aucByãs
[
iIndex
],

160 
	`ñemítsof
(
aucByãs
[
iIndex
]))) {

161  
TRUE
;

164  
FALSE
;

165 
	}
}

171 
BOOL


172 
	$bIsMacW‹d45Fûe
(
FILE
 *
pFûe
)

174 
UCHAR
 
aucByãs
[2][6] = {

178 
iIndex
;

180 
	`DBG_MSG
("bIsMacWord45File");

182 
iIndex
 = 0; iIndex < ()
	`ñemítsof
(
aucByãs
); iIndex++) {

183 i‡(
	`bCheckByãs
(
pFûe
,

184 
aucByãs
[
iIndex
],

185 
	`ñemítsof
(
aucByãs
[
iIndex
]))) {

186  
TRUE
;

189  
FALSE
;

190 
	}
}

198 
	$iGuessVîsi⁄Numbî
(
FILE
 *
pFûe
, 
lFûesize
)

200 if(
	`bIsW‹dF‹DosFûe
(
pFûe
, 
lFûesize
)) {

203 i‡(
	`bIsWöW‹d12Fûe
(
pFûe
, 
lFûesize
)) {

206 i‡(
	`bIsMacW‹d45Fûe
(
pFûe
)) {

209 i‡(
	`bIsW‹dFûeWôhOLE
(
pFûe
, 
lFûesize
)) {

213 
	}
}

221 
	$iGëVîsi⁄Numbî
(c⁄° 
UCHAR
 *
aucHódî
)

223 
USHORT
 
usFib
, 
usCh£
;

225 
usFib
 = 
	`usGëW‹d
(0x02, 
aucHódî
);

226 i‡(
usFib
 >= 0x1000) {

228 
	`DBG_HEX
(
usFib
);

229 
usFib
 = 
	`usGëW‹dBE
(0x02, 
aucHódî
);

231 
	`DBG_DEC
(
usFib
);

232 
bOldMacFûe
 = 
FALSE
;

233 
usFib
) {

235 
	`DBG_MSG
("Word for DOS");

238 
	`DBG_MSG
("Word 4 for Macintosh");

239 
bOldMacFûe
 = 
TRUE
;

242 
	`DBG_MSG
("Word 1.x for Windows");

245 
	`DBG_MSG
("Word 5 for Macintosh");

246 
bOldMacFûe
 = 
TRUE
;

249 
	`DBG_MSG
("Word 2 for Windows");

253 
	`DBG_MSG
("Word 6 for Windows");

257 
usCh£
 = 
	`usGëW‹d
(0x14, 
aucHódî
);

258 
	`DBG_DEC
(
usCh£
);

259 
usCh£
) {

261 
	`DBG_MSG
("Word 7 for Win95");

264 
	`DBG_MSG
("Word 6 for Macintosh");

265 
bOldMacFûe
 = 
TRUE
;

268 
	`DBG_FIXME
();

269 i‡(()
	`ucGëByã
(0x05, 
aucHódî
) == 0xe0) {

270 
	`DBG_MSG
("Word 7 for Win95");

273 
	`DBG_MSG
("Word 6 for Macintosh");

274 
bOldMacFûe
 = 
TRUE
;

278 
usCh£
 = 
	`usGëW‹d
(0x14, 
aucHódî
);

279 
	`DBG_DEC
(
usCh£
);

280 i‡(
usFib
 < 192) {

282 
	`DBG_DEC
(
usFib
);

285 
	`DBG_MSG_C
(
usCh£
 != 256, "Word97 for Win95/98/NT");

286 
	`DBG_MSG_C
(
usCh£
 == 256, "Word98 for Macintosh");

289 
	}
}

297 
BOOL


298 
	$bIsOldMacFûe
()

300  
bOldMacFûe
;

301 
	}
}

309 
	$iInôDocumít
(
FILE
 *
pFûe
, 
lFûesize
)

311 
iGuess
, 
iW‹dVîsi⁄
;

313 
iGuess
 = 
	`iGuessVîsi⁄Numbî
(
pFûe
, 
lFûesize
);

314 
iGuess
) {

316 
iW‹dVîsi⁄
 = 
	`iInôDocumítDOS
(
pFûe
, 
lFûesize
);

319 
iW‹dVîsi⁄
 = 
	`iInôDocumítWIN
(
pFûe
, 
lFûesize
);

322 
iW‹dVîsi⁄
 = 
	`iInôDocumítMAC
(
pFûe
, 
lFûesize
);

325 
iW‹dVîsi⁄
 = 
	`iInôDocumítOLE
(
pFûe
, 
lFûesize
);

328 
	`DBG_DEC
(
iGuess
);

329 
iW‹dVîsi⁄
 = -1;

332  
iW‹dVîsi⁄
;

333 
	}
}

339 
	$vFªeDocumít
()

341 
	`DBG_MSG
("vFreeDocument");

344 
	`vDe°royTextBlockLi°
();

345 
	`vDe°royD©aBlockLi°
();

346 
	`vDe°royLi°InfoLi°
();

347 
	`vDe°royRowInfoLi°
();

348 
	`vDe°royStyÀInfoLi°
();

349 
	`vDe°royF⁄tInfoLi°
();

350 
	`vDe°royStyÀshìtLi°
();

351 
	`vDe°royPi˘InfoLi°
();

352 
	`vDe°royDocumítInfoLi°
();

353 
	`vDe°roySe˘i⁄InfoLi°
();

354 
	`vDe°royHdrFåInfoLi°
();

355 
	`vDe°royPr›ModLi°
();

356 
	`vDe°royNŸesInfoLi°s
();

357 
	`vDe°royF⁄tTabÀ
();

358 
	`vDe°roySumm¨yInfo
();

359 
	}
}

	@wordmac.c

9 
	~"™tiw‹d.h
"

17 
BOOL


18 
	$bGëDocumítText
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

20 
ãxt_block_ty≥
 
tTextBlock
;

21 
ULONG
 
ulBegöOfText
, 
ulEndOfText
;

22 
ULONG
 
ulTextLí
;

23 
UCHAR
 
ucDocSètus
;

24 
BOOL
 
bFa°Saved
;

26 
	`Áû
(
pFûe
 =
NULL
);

27 
	`Áû
(
aucHódî
 =
NULL
);

29 
	`DBG_MSG
("bGetDocumentText");

31 
	`NO_DBG_PRINT_BLOCK
(
aucHódî
, 0x20);

34 
ucDocSètus
 = 
	`ucGëByã
(0x0a, 
aucHódî
);

35 
	`DBG_HEX
(
ucDocSètus
);

36 
bFa°Saved
 = (
ucDocSètus
 & 
	`BIT
(5)) != 0;

37 
	`DBG_MSG_C
(
bFa°Saved
, "This document is Fast Saved");

38 i‡(
bFa°Saved
) {

39 
	`wîr
(0, "MacWord: fast saved documentsáreÇot supported yet");

40  
FALSE
;

44 
ulBegöOfText
 = 
	`ulGëL⁄gBE
(0x14, 
aucHódî
);

45 
	`DBG_HEX
(
ulBegöOfText
);

46 
ulEndOfText
 = 
	`ulGëL⁄gBE
(0x18, 
aucHódî
);

47 
	`DBG_HEX
(
ulEndOfText
);

48 
ulTextLí
 = 
ulEndOfText
 - 
ulBegöOfText
;

49 
	`DBG_DEC
(
ulTextLí
);

50 
tTextBlock
.
ulFûeOff£t
 = 
ulBegöOfText
;

51 
tTextBlock
.
ulCh¨Pos
 = 
ulBegöOfText
;

52 
tTextBlock
.
ulLígth
 = 
ulTextLí
;

53 
tTextBlock
.
bU£sUnicode
 = 
FALSE
;

54 
tTextBlock
.
usPr›Mod
 = 
IGNORE_PROPMOD
;

55 i‡(!
	`bAdd2TextBlockLi°
(&
tTextBlock
)) {

56 
	`DBG_HEX
(
tTextBlock
.
ulFûeOff£t
);

57 
	`DBG_HEX
(
tTextBlock
.
ulCh¨Pos
);

58 
	`DBG_DEC
(
tTextBlock
.
ulLígth
);

59 
	`DBG_DEC
(
tTextBlock
.
bU£sUnicode
);

60 
	`DBG_DEC
(
tTextBlock
.
usPr›Mod
);

61  
FALSE
;

63  
TRUE
;

64 
	}
}

72 
	$iInôDocumítMAC
(
FILE
 *
pFûe
, 
lFûesize
)

74 
iW‹dVîsi⁄
;

75 
BOOL
 
bSuc˚ss
;

76 
USHORT
 
usIdít
;

77 
UCHAR
 
aucHódî
[256];

79 
	`Áû
(
pFûe
 =
NULL
);

81 i‡(
lFûesize
 < 256) {

86 i‡(!
	`bRódByãs
(
aucHódî
, 256, 0x00, 
pFûe
)) {

90 
usIdít
 = 
	`usGëW‹d
(0x00, 
aucHódî
);

91 
	`DBG_HEX
(
usIdít
);

92 
	`Áû
(
usIdít
 != 0x37fe);

93 
iW‹dVîsi⁄
 = 
	`iGëVîsi⁄Numbî
(
aucHódî
);

94 i‡(
iW‹dVîsi⁄
 != 4 && iWordVersion != 5) {

95 
	`wîr
(0, "This file isÇot from ''Mac Word 4 or 5'.");

98 
bSuc˚ss
 = 
	`bGëDocumítText
(
pFûe
, 
aucHódî
);

99 i‡(
bSuc˚ss
) {

100 
	`vGëPr›îtyInfo
(
pFûe
, 
NULL
,

101 
NULL
, 0, NULL, 0,

102 
aucHódî
, 
iW‹dVîsi⁄
);

103 
	`vSëDeÁu…TabWidth
(
pFûe
, 
NULL
,

104 
NULL
, 0, NULL, 0,

105 
aucHódî
, 
iW‹dVîsi⁄
);

107  
bSuc˚ss
 ? 
iW‹dVîsi⁄
 : -1;

108 
	}
}

	@wordole.c

9 
	~<°rög.h
>

10 
	~"™tiw‹d.h
"

13 
	sµs_íåy_èg
 {

14 
ULONG
 
	mulNext
;

15 
ULONG
 
	mulPªvious
;

16 
ULONG
 
	mulDú
;

17 
ULONG
 
	mulSB
;

18 
ULONG
 
	mulSize
;

19 
	miLevñ
;

20 
	mszName
[32];

21 
UCHAR
 
	mucTy≥
;

22 } 
	tµs_íåy_ty≥
;

25 
	#PPS_NUMBER_INVALID
 0xffffffffUL

	)

29 
	#FREE_ALL
() \

31 
	`vDe°roySmÆlBlockLi°
();\

32 
aulRoŸLi°
 = 
	`x‰ì
(aulRootList);\

33 
aulSbdLi°
 = 
	`x‰ì
(aulSbdList);\

34 
aulBbdLi°
 = 
	`x‰ì
(aulBbdList);\

35 
aulSBD
 = 
	`x‰ì
(aulSBD);\

36 
aulBBD
 = 
	`x‰ì
(aulBBD);\

37 } 0)

	)

43 
ULONG


44 
	$ulRódL⁄g
(
FILE
 *
pFûe
, 
ULONG
 
ulOff£t
)

46 
UCHAR
 
aucByãs
[4];

48 
	`Áû
(
pFûe
 =
NULL
);

50 i‡(!
	`bRódByãs
(
aucByãs
, 4, 
ulOff£t
, 
pFûe
)) {

51 
	`wîr
(1, "RódÜ⁄g 0x%lxÇŸÖossibÀ", 
ulOff£t
);

53  
	`ulGëL⁄g
(0, 
aucByãs
);

54 
	}
}

60 
	$vName2Såög
(*
szName
, c⁄° 
UCHAR
 *
aucByãs
, 
size_t
 
tNameSize
)

62 *
pcCh¨
;

63 
size_t
 
tIndex
;

65 
	`Áû
(
aucByãs
 =
NULL
 || 
szName
 == NULL);

67 i‡(
tNameSize
 < 2) {

68 
szName
[0] = '\0';

71 
tIndex
 = 0, 
pcCh¨
 = 
szName
;

72 
tIndex
 < 2 * 
tNameSize
;

73 
tIndex
 +2, 
pcCh¨
++) {

74 *
pcCh¨
 = ()
aucByãs
[
tIndex
];

76 
szName
[
tNameSize
 - 1] = '\0';

77 
	}
}

84 
size_t


85 
	$tRódBlockIndi˚s
(
FILE
 *
pFûe
, 
ULONG
 *
aulBlockDïŸ
,

86 
size_t
 
tMaxRec
, 
ULONG
 
ulOff£t
)

88 
size_t
 
tD⁄e
;

89 
iIndex
;

90 
UCHAR
 
aucByãs
[
BIG_BLOCK_SIZE
];

92 
	`Áû
(
pFûe
 =
NULL
 || 
aulBlockDïŸ
 == NULL);

93 
	`Áû
(
tMaxRec
 == 0);

96 i‡(!
	`bRódByãs
(
aucByãs
, 
BIG_BLOCK_SIZE
, 
ulOff£t
, 
pFûe
)) {

97 
	`wîr
(0, "Reading big block from 0x%lx isÇotÖossible",

98 
ulOff£t
);

102 
tD⁄e
 = 
	`mö
(
tMaxRec
, (
size_t
)
BIG_BLOCK_SIZE
 / 4);

103 
iIndex
 = 0; iIndex < ()
tD⁄e
; iIndex++) {

104 
aulBlockDïŸ
[
iIndex
] = 
	`ulGëL⁄g
(4 * iIndex, 
aucByãs
);

105 
	`NO_DBG_DEC
(
aulBlockDïŸ
[
iIndex
]);

107  
tD⁄e
;

108 
	}
}

113 
BOOL


114 
	$bGëBBD
(
FILE
 *
pFûe
, c⁄° 
ULONG
 *
aulDïŸ
, 
size_t
 
tDïŸLí
,

115 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
)

117 
ULONG
 
ulBegö
;

118 
size_t
 
tToGo
, 
tD⁄e
;

119 
iIndex
;

121 
	`Áû
(
pFûe
 =
NULL
 || 
aulDïŸ
 =NULL || 
aulBBD
 == NULL);

123 
	`DBG_MSG
("bGetBBD");

125 
tToGo
 = 
tBBDLí
;

126 
iIndex
 = 0; iIndex < ()
tDïŸLí
 && 
tToGo
 != 0; iIndex++) {

127 
ulBegö
 = (
aulDïŸ
[
iIndex
] + 1Ë* 
BIG_BLOCK_SIZE
;

128 
	`NO_DBG_HEX
(
ulBegö
);

129 
tD⁄e
 = 
	`tRódBlockIndi˚s
(
pFûe
, 
aulBBD
, 
tToGo
, 
ulBegö
);

130 
	`Áû
(
tD⁄e
 > 
tToGo
);

131 i‡(
tD⁄e
 == 0) {

132  
FALSE
;

134 
aulBBD
 +
tD⁄e
;

135 
tToGo
 -
tD⁄e
;

137  
tToGo
 == 0;

138 
	}
}

143 
BOOL


144 
	$bGëSBD
(
FILE
 *
pFûe
, c⁄° 
ULONG
 *
aulDïŸ
, 
size_t
 
tDïŸLí
,

145 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
)

147 
ULONG
 
ulBegö
;

148 
size_t
 
tToGo
, 
tD⁄e
;

149 
iIndex
;

151 
	`Áû
(
pFûe
 =
NULL
 || 
aulDïŸ
 =NULL || 
aulSBD
 == NULL);

153 
	`DBG_MSG
("bGetSBD");

155 
tToGo
 = 
tSBDLí
;

156 
iIndex
 = 0; iIndex < ()
tDïŸLí
 && 
tToGo
 != 0; iIndex++) {

157 
	`Áû
(
aulDïŸ
[
iIndex
] >
ULONG_MAX
 / 
BIG_BLOCK_SIZE
);

158 
ulBegö
 = (
aulDïŸ
[
iIndex
] + 1Ë* 
BIG_BLOCK_SIZE
;

159 
	`NO_DBG_HEX
(
ulBegö
);

160 
tD⁄e
 = 
	`tRódBlockIndi˚s
(
pFûe
, 
aulSBD
, 
tToGo
, 
ulBegö
);

161 
	`Áû
(
tD⁄e
 > 
tToGo
);

162 i‡(
tD⁄e
 == 0) {

163  
FALSE
;

165 
aulSBD
 +
tD⁄e
;

166 
tToGo
 -
tD⁄e
;

168  
tToGo
 == 0;

169 
	}
}

175 
	$vCompuãPPSÀvñs
(
µs_íåy_ty≥
 *
©PPSli°
,Öps_íåy_ty≥ *
pNode
,

176 
iLevñ
, 
iRecursi⁄Levñ
)

178 
	`Áû
(
©PPSli°
 =
NULL
 || 
pNode
 == NULL);

179 
	`Áû
(
iLevñ
 < 0 || 
iRecursi⁄Levñ
 < 0);

181 i‡(
iRecursi⁄Levñ
 > 25) {

183 
	`DBG_DEC
(
iRecursi⁄Levñ
);

186 i‡(
pNode
->
iLevñ
 <= iLevel) {

188 
	`DBG_DEC
(
iLevñ
);

189 
	`DBG_DEC
(
pNode
->
iLevñ
);

193 
pNode
->
iLevñ
 = iLevel;

195 i‡(
pNode
->
ulDú
 !
PPS_NUMBER_INVALID
) {

196 
	`vCompuãPPSÀvñs
(
©PPSli°
,

197 &
©PPSli°
[
pNode
->
ulDú
],

198 
iLevñ
 + 1,

199 
iRecursi⁄Levñ
 + 1);

201 i‡(
pNode
->
ulNext
 !
PPS_NUMBER_INVALID
) {

202 
	`vCompuãPPSÀvñs
(
©PPSli°
,

203 &
©PPSli°
[
pNode
->
ulNext
],

204 
iLevñ
,

205 
iRecursi⁄Levñ
 + 1);

207 i‡(
pNode
->
ulPªvious
 !
PPS_NUMBER_INVALID
) {

208 
	`vCompuãPPSÀvñs
(
©PPSli°
,

209 &
©PPSli°
[
pNode
->
ulPªvious
],

210 
iLevñ
,

211 
iRecursi⁄Levñ
 + 1);

213 
	}
}

220 
BOOL


221 
	$bGëPPS
(
FILE
 *
pFûe
,

222 c⁄° 
ULONG
 *
aulRoŸLi°
, 
size_t
 
tRoŸLi°Lí
, 
µs_öfo_ty≥
 *
pPPS
)

224 
µs_íåy_ty≥
 *
©PPSli°
;

225 
ULONG
 
ulBegö
, 
ulOff£t
, 
ulTmp
;

226 
size_t
 
tNbrOfPPS
, 
tNameSize
;

227 
iIndex
, 
iSèπBlock
, 
iRoŸIndex
;

228 
BOOL
 
bW‹d
, 
bEx˚l
;

229 
UCHAR
 
aucByãs
[
PROPERTY_SET_STORAGE_SIZE
];

231 
	`Áû
(
pFûe
 =
NULL
 || 
aulRoŸLi°
 =NULL || 
pPPS
 == NULL);

233 
	`DBG_MSG
("bGetPPS");

235 
	`NO_DBG_DEC
(
tRoŸLi°Lí
);

237 
bW‹d
 = 
FALSE
;

238 
bEx˚l
 = 
FALSE
;

239 ()
	`mem£t
(
pPPS
, 0, (*pPPS));

243 
tNbrOfPPS
 = 
tRoŸLi°Lí
 * 
BIG_BLOCK_SIZE
 / 
PROPERTY_SET_STORAGE_SIZE
;

244 
©PPSli°
 = 
	`xˇŒoc
(
tNbrOfPPS
, (
µs_íåy_ty≥
));

245 
iRoŸIndex
 = 0;

247 
iIndex
 = 0; iIndex < ()
tNbrOfPPS
; iIndex++) {

248 
ulTmp
 = (
ULONG
)
iIndex
 * 
PROPERTY_SET_STORAGE_SIZE
;

249 
iSèπBlock
 = ()(
ulTmp
 / 
BIG_BLOCK_SIZE
);

250 
ulOff£t
 = 
ulTmp
 % 
BIG_BLOCK_SIZE
;

251 
ulBegö
 = (
aulRoŸLi°
[
iSèπBlock
] + 1Ë* 
BIG_BLOCK_SIZE
 +

252 
ulOff£t
;

253 
	`NO_DBG_HEX
(
ulBegö
);

254 i‡(!
	`bRódByãs
(
aucByãs
, 
PROPERTY_SET_STORAGE_SIZE
,

255 
ulBegö
, 
pFûe
)) {

256 
	`wîr
(0, "Ródög PPS %d i†nŸÖossibÀ", 
iIndex
);

257 
©PPSli°
 = 
	`x‰ì
(atPPSlist);

258  
FALSE
;

260 
tNameSize
 = (
size_t
)
	`usGëW‹d
(0x40, 
aucByãs
);

261 
tNameSize
 = (tNameSize + 1) / 2;

262 
	`vName2Såög
(
©PPSli°
[
iIndex
].
szName
, 
aucByãs
, 
tNameSize
);

263 
©PPSli°
[
iIndex
].
ucTy≥
 = 
	`ucGëByã
(0x42, 
aucByãs
);

264 i‡(
©PPSli°
[
iIndex
].
ucTy≥
 == 5) {

265 
iRoŸIndex
 = 
iIndex
;

267 
©PPSli°
[
iIndex
].
ulPªvious
 = 
	`ulGëL⁄g
(0x44, 
aucByãs
);

268 
©PPSli°
[
iIndex
].
ulNext
 = 
	`ulGëL⁄g
(0x48, 
aucByãs
);

269 
©PPSli°
[
iIndex
].
ulDú
 = 
	`ulGëL⁄g
(0x4c, 
aucByãs
);

270 
©PPSli°
[
iIndex
].
ulSB
 = 
	`ulGëL⁄g
(0x74, 
aucByãs
);

271 
©PPSli°
[
iIndex
].
ulSize
 = 
	`ulGëL⁄g
(0x78, 
aucByãs
);

272 
©PPSli°
[
iIndex
].
iLevñ
 = 
INT_MAX
;

273 i‡((
©PPSli°
[
iIndex
].
ulPªvious
 >(
ULONG
)
tNbrOfPPS
 &&

274 
©PPSli°
[
iIndex
].
ulPªvious
 !
PPS_NUMBER_INVALID
) ||

275 (
©PPSli°
[
iIndex
].
ulNext
 >(
ULONG
)
tNbrOfPPS
 &&

276 
©PPSli°
[
iIndex
].
ulNext
 !
PPS_NUMBER_INVALID
) ||

277 (
©PPSli°
[
iIndex
].
ulDú
 >(
ULONG
)
tNbrOfPPS
 &&

278 
©PPSli°
[
iIndex
].
ulDú
 !
PPS_NUMBER_INVALID
)) {

279 
	`DBG_DEC
(
iIndex
);

280 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
ulPªvious
);

281 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
ulNext
);

282 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
ulDú
);

283 
	`DBG_DEC
(
tNbrOfPPS
);

284 
	`wîr
(0, "The Property Set Storage is damaged");

285 
©PPSli°
 = 
	`x‰ì
(atPPSlist);

286  
FALSE
;

291 
	`DBG_MSG
("Before");

292 
iIndex
 = 0; iIndex < ()
tNbrOfPPS
; iIndex++) {

293 
	`DBG_MSG
(
©PPSli°
[
iIndex
].
szName
);

294 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulDú
);

295 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulPªvious
);

296 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulNext
);

297 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
ulSB
);

298 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulSize
);

299 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
iLevñ
);

304 
	`vCompuãPPSÀvñs
(
©PPSli°
, &©PPSli°[
iRoŸIndex
], 0, 0);

307 
	`NO_DBG_MSG
("After");

308 
iIndex
 = 0; iIndex < ()
tNbrOfPPS
; iIndex++) {

310 
	`DBG_MSG
(
©PPSli°
[
iIndex
].
szName
);

311 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulDú
);

312 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulPªvious
);

313 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulNext
);

314 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
ulSB
);

315 
	`DBG_HEX
(
©PPSli°
[
iIndex
].
ulSize
);

316 
	`DBG_DEC
(
©PPSli°
[
iIndex
].
iLevñ
);

318 i‡(
©PPSli°
[
iIndex
].
iLevñ
 != 1 ||

319 
©PPSli°
[
iIndex
].
ucTy≥
 != 2 ||

320 
©PPSli°
[
iIndex
].
szName
[0] == '\0' ||

321 
©PPSli°
[
iIndex
].
ulSize
 == 0) {

325 i‡(
pPPS
->
tW‹dDocumít
.
ulSize
 == 0 &&

326 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "WordDocument")) {

327 
pPPS
->
tW‹dDocumít
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

328 
pPPS
->
tW‹dDocumít
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

329 
bW‹d
 = 
TRUE
;

330 } i‡(
pPPS
->
tD©a
.
ulSize
 == 0 &&

331 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "Data")) {

332 
pPPS
->
tD©a
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

333 
pPPS
->
tD©a
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

334 } i‡(
pPPS
->
t0TabÀ
.
ulSize
 == 0 &&

335 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "0Table")) {

336 
pPPS
->
t0TabÀ
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

337 
pPPS
->
t0TabÀ
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

338 } i‡(
pPPS
->
t1TabÀ
.
ulSize
 == 0 &&

339 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "1Table")) {

340 
pPPS
->
t1TabÀ
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

341 
pPPS
->
t1TabÀ
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

342 } i‡(
pPPS
->
tSumm¨yInfo
.
ulSize
 == 0 &&

343 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
,

345 
pPPS
->
tSumm¨yInfo
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

346 
pPPS
->
tSumm¨yInfo
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

347 } i‡(
pPPS
->
tDocSumm¨yInfo
.
ulSize
 == 0 &&

348 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
,

350 
pPPS
->
tDocSumm¨yInfo
.
ulSB
 = 
©PPSli°
[
iIndex
].ulSB;

351 
pPPS
->
tDocSumm¨yInfo
.
ulSize
 = 
©PPSli°
[
iIndex
].ulSize;

352 } i‡(
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "Book") ||

353 
	`STREQ
(
©PPSli°
[
iIndex
].
szName
, "Workbook")) {

354 
bEx˚l
 = 
TRUE
;

359 
©PPSli°
 = 
	`x‰ì
(atPPSlist);

362 i‡(
bW‹d
) {

363  
TRUE
;

366 i‡(
bEx˚l
) {

367 
	`wîr
(0, "Sorry, butÅhis isán Excel spreadsheet");

369 
	`wîr
(0, "This OLE file doesÇot containá Word document");

371  
FALSE
;

372 
	}
}

378 
	$vGëBbdLi°
(
FILE
 *
pFûe
, 
iNbr
, 
ULONG
 *
aulBbdLi°
, ULONG 
ulOff£t
)

380 
iIndex
;

382 
	`Áû
(
pFûe
 =
NULL
);

383 
	`Áû
(
iNbr
 > 127);

384 
	`Áû
(
aulBbdLi°
 =
NULL
);

386 
	`NO_DBG_DEC
(
iNbr
);

387 
iIndex
 = 0; iIndex < 
iNbr
; iIndex++) {

388 
aulBbdLi°
[
iIndex
] =

389 
	`ulRódL⁄g
(
pFûe
, 
ulOff£t
 + 4 * (
ULONG
)
iIndex
);

390 
	`NO_DBG_DEC
(
iIndex
);

391 
	`NO_DBG_HEX
(
aulBbdLi°
[
iIndex
]);

393 
	}
}

400 
BOOL


401 
	$bGëDocumítText
(
FILE
 *
pFûe
, c⁄° 
µs_öfo_ty≥
 *
pPPS
,

402 c⁄° 
ULONG
 *
aulBBD
, 
size_t
 
tBBDLí
,

403 c⁄° 
ULONG
 *
aulSBD
, 
size_t
 
tSBDLí
,

404 c⁄° 
UCHAR
 *
aucHódî
, 
iW‹dVîsi⁄
)

406 
ULONG
 
ulBegöOfText
;

407 
ULONG
 
ulTextLí
, 
ulFoŸnŸeLí
, 
ulEndnŸeLí
;

408 
ULONG
 
ulHdrFåLí
, 
ulMa¸oLí
, 
ulA¬Ÿ©i⁄Lí
;

409 
ULONG
 
ulTextBoxLí
, 
ulHdrTextBoxLí
;

410 
UINT
 
uiQuickSaves
;

411 
BOOL
 
bF¨Ea°W‹d
, 
bTem∂©e
, 
bFa°Saved
, 
bEn¸y±ed
, 
bSuc˚ss
;

412 
USHORT
 
usIdít
, 
usDocSètus
;

414 
	`Áû
(
pFûe
 =
NULL
 || 
pPPS
 == NULL);

415 
	`Áû
(
aulBBD
 =
NULL
);

416 
	`Áû
(
aulSBD
 =
NULL
);

418 
	`DBG_MSG
("bGetDocumentText");

421 
usIdít
 = 
	`usGëW‹d
(0x00, 
aucHódî
);

422 
	`DBG_HEX
(
usIdít
);

423 
bF¨Ea°W‹d
 = 
usIdít
 == 0x8098 || usIdent == 0x8099 ||

424 
usIdít
 == 0xa697 || usIdent == 0xa699;

426 
usDocSètus
 = 
	`usGëW‹d
(0x0a, 
aucHódî
);

427 
	`DBG_HEX
(
usDocSètus
);

428 
bTem∂©e
 = (
usDocSètus
 & 
	`BIT
(0)) != 0;

429 
	`DBG_MSG_C
(
bTem∂©e
, "This document isá Template");

430 
bFa°Saved
 = (
usDocSètus
 & 
	`BIT
(2)) != 0;

431 
uiQuickSaves
 = (
UINT
)(
usDocSètus
 & 0x00f0) >> 4;

432 
	`DBG_MSG_C
(
bFa°Saved
, "This document is Fast Saved");

433 
	`DBG_DEC_C
(
bFa°Saved
, 
uiQuickSaves
);

434 
bEn¸y±ed
 = (
usDocSètus
 & 
	`BIT
(8)) != 0;

435 i‡(
bEn¸y±ed
) {

436 
	`wîr
(0, "Encrypted documentsáreÇot supported");

437  
FALSE
;

441 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

442 
	`DBG_HEX
(
ulBegöOfText
);

443 
iW‹dVîsi⁄
) {

446 
ulTextLí
 = 
	`ulGëL⁄g
(0x34, 
aucHódî
);

447 
ulFoŸnŸeLí
 = 
	`ulGëL⁄g
(0x38, 
aucHódî
);

448 
ulHdrFåLí
 = 
	`ulGëL⁄g
(0x3c, 
aucHódî
);

449 
ulMa¸oLí
 = 
	`ulGëL⁄g
(0x40, 
aucHódî
);

450 
ulA¬Ÿ©i⁄Lí
 = 
	`ulGëL⁄g
(0x44, 
aucHódî
);

451 
ulEndnŸeLí
 = 
	`ulGëL⁄g
(0x48, 
aucHódî
);

452 
ulTextBoxLí
 = 
	`ulGëL⁄g
(0x4c, 
aucHódî
);

453 
ulHdrTextBoxLí
 = 
	`ulGëL⁄g
(0x50, 
aucHódî
);

456 
ulTextLí
 = 
	`ulGëL⁄g
(0x4c, 
aucHódî
);

457 
ulFoŸnŸeLí
 = 
	`ulGëL⁄g
(0x50, 
aucHódî
);

458 
ulHdrFåLí
 = 
	`ulGëL⁄g
(0x54, 
aucHódî
);

459 
ulMa¸oLí
 = 
	`ulGëL⁄g
(0x58, 
aucHódî
);

460 
ulA¬Ÿ©i⁄Lí
 = 
	`ulGëL⁄g
(0x5c, 
aucHódî
);

461 
ulEndnŸeLí
 = 
	`ulGëL⁄g
(0x60, 
aucHódî
);

462 
ulTextBoxLí
 = 
	`ulGëL⁄g
(0x64, 
aucHódî
);

463 
ulHdrTextBoxLí
 = 
	`ulGëL⁄g
(0x68, 
aucHódî
);

466 
	`wîr
(0, "This version of Word isÇot supported");

467  
FALSE
;

469 
	`DBG_DEC
(
ulTextLí
);

470 
	`DBG_DEC
(
ulFoŸnŸeLí
);

471 
	`DBG_DEC
(
ulHdrFåLí
);

472 
	`DBG_DEC
(
ulMa¸oLí
);

473 
	`DBG_DEC
(
ulA¬Ÿ©i⁄Lí
);

474 
	`DBG_DEC
(
ulEndnŸeLí
);

475 
	`DBG_DEC
(
ulTextBoxLí
);

476 
	`DBG_DEC
(
ulHdrTextBoxLí
);

479 
iW‹dVîsi⁄
) {

482 i‡(
bFa°Saved
) {

483 
bSuc˚ss
 = 
	`bGë6DocumítText
(
pFûe
,

484 
bF¨Ea°W‹d
,

485 
pPPS
->
tW‹dDocumít
.
ulSB
,

486 
aulBBD
, 
tBBDLí
,

487 
aucHódî
);

489 
bSuc˚ss
 = 
	`bAddTextBlocks
(
ulBegöOfText
,

490 
ulTextLí
 +

491 
ulFoŸnŸeLí
 +

492 
ulHdrFåLí
 +

493 
ulMa¸oLí
 + 
ulA¬Ÿ©i⁄Lí
 +

494 
ulEndnŸeLí
 +

495 
ulTextBoxLí
 + 
ulHdrTextBoxLí
,

496 
bF¨Ea°W‹d
,

497 
IGNORE_PROPMOD
,

498 
pPPS
->
tW‹dDocumít
.
ulSB
,

499 
aulBBD
, 
tBBDLí
);

503 
bSuc˚ss
 = 
	`bGë8DocumítText
(
pFûe
,

504 
pPPS
,

505 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

506 
aucHódî
);

509 
	`wîr
(0, "This version of Word isÇot supported");

510 
bSuc˚ss
 = 
FALSE
;

514 i‡(
bSuc˚ss
) {

515 
	`vS∂ôBlockLi°
(
pFûe
,

516 
ulTextLí
,

517 
ulFoŸnŸeLí
,

518 
ulHdrFåLí
,

519 
ulMa¸oLí
,

520 
ulA¬Ÿ©i⁄Lí
,

521 
ulEndnŸeLí
,

522 
ulTextBoxLí
,

523 
ulHdrTextBoxLí
,

524 !
bFa°Saved
 && 
iW‹dVîsi⁄
 == 8);

526 
	`vDe°royTextBlockLi°
();

527 
	`wîr
(0, "I can't findÅheÅext ofÅhis document");

529  
bSuc˚ss
;

530 
	}
}

538 
	$iInôDocumítOLE
(
FILE
 *
pFûe
, 
lFûesize
)

540 
µs_öfo_ty≥
 
PPS_öfo
;

541 
ULONG
 *
aulBBD
, *
aulSBD
;

542 
ULONG
 *
aulRoŸLi°
, *
aulBbdLi°
, *
aulSbdLi°
;

543 
ULONG
 
ulBdbLi°Sèπ
, 
ulAddôi⁄ÆBBDli°
;

544 
ULONG
 
ulRoŸSèπblock
, 
ulSbdSèπblock
, 
ulSBL°¨tblock
;

545 
ULONG
 
ulSèπ
, 
ulTmp
;

546 
lMaxBlock
;

547 
size_t
 
tBBDLí
, 
tSBDLí
, 
tNumBbdBlocks
, 
tRoŸLi°Lí
;

548 
iW‹dVîsi⁄
, 
iIndex
, 
iToGo
;

549 
BOOL
 
bSuc˚ss
;

550 
USHORT
 
usIdít
, 
usDocSètus
;

551 
UCHAR
 
aucHódî
[
HEADER_SIZE
];

553 
	`Áû
(
pFûe
 =
NULL
);

555 
lMaxBlock
 = 
lFûesize
 / 
BIG_BLOCK_SIZE
 - 2;

556 
	`DBG_DEC
(
lMaxBlock
);

557 i‡(
lMaxBlock
 < 1) {

560 
tBBDLí
 = (
size_t
)(
lMaxBlock
 + 1);

561 
tNumBbdBlocks
 = (
size_t
)
	`ulRódL⁄g
(
pFûe
, 0x2c);

562 
	`DBG_DEC
(
tNumBbdBlocks
);

563 
ulRoŸSèπblock
 = 
	`ulRódL⁄g
(
pFûe
, 0x30);

564 
	`DBG_DEC
(
ulRoŸSèπblock
);

565 
ulSbdSèπblock
 = 
	`ulRódL⁄g
(
pFûe
, 0x3c);

566 
	`DBG_DEC
(
ulSbdSèπblock
);

567 
ulAddôi⁄ÆBBDli°
 = 
	`ulRódL⁄g
(
pFûe
, 0x44);

568 
	`DBG_HEX
(
ulAddôi⁄ÆBBDli°
);

569 
ulSBL°¨tblock
 = 
	`ulRódL⁄g
(
pFûe
,

570 (
ulRoŸSèπblock
 + 1Ë* 
BIG_BLOCK_SIZE
 + 0x74);

571 
	`DBG_DEC
(
ulSBL°¨tblock
);

572 
tSBDLí
 = (
size_t
)(
	`ulRódL⁄g
(
pFûe
,

573 (
ulRoŸSèπblock
 + 1Ë* 
BIG_BLOCK_SIZE
 + 0x78) /

574 
SMALL_BLOCK_SIZE
);

576 
aulRoŸLi°
 = 
NULL
;

577 
aulSbdLi°
 = 
NULL
;

578 
aulBbdLi°
 = 
NULL
;

579 
aulSBD
 = 
NULL
;

580 
aulBBD
 = 
NULL
;

582 
aulBbdLi°
 = 
	`xˇŒoc
(
tNumBbdBlocks
, (
ULONG
));

583 
aulBBD
 = 
	`xˇŒoc
(
tBBDLí
, (
ULONG
));

584 
iToGo
 = ()
tNumBbdBlocks
;

585 
	`vGëBbdLi°
(
pFûe
, 
	`mö
(
iToGo
, 109), 
aulBbdLi°
, 0x4c);

586 
ulSèπ
 = 109;

587 
iToGo
 -= 109;

588 
ulAddôi⁄ÆBBDli°
 !
END_OF_CHAIN
 && 
iToGo
 > 0) {

589 
ulBdbLi°Sèπ
 = (
ulAddôi⁄ÆBBDli°
 + 1Ë* 
BIG_BLOCK_SIZE
;

590 
	`vGëBbdLi°
(
pFûe
, 
	`mö
(
iToGo
, 127),

591 
aulBbdLi°
 + 
ulSèπ
, 
ulBdbLi°Sèπ
);

592 
ulAddôi⁄ÆBBDli°
 = 
	`ulRódL⁄g
(
pFûe
,

593 
ulBdbLi°Sèπ
 + 4 * 127);

594 
	`DBG_DEC
(
ulAddôi⁄ÆBBDli°
);

595 
	`DBG_HEX
(
ulAddôi⁄ÆBBDli°
);

596 
ulSèπ
 += 127;

597 
iToGo
 -= 127;

599 i‡(!
	`bGëBBD
(
pFûe
, 
aulBbdLi°
, 
tNumBbdBlocks
, 
aulBBD
, 
tBBDLí
)) {

600 
	`FREE_ALL
();

603 
aulBbdLi°
 = 
	`x‰ì
(aulBbdList);

605 
aulSbdLi°
 = 
	`xˇŒoc
(
tBBDLí
, (
ULONG
));

606 
aulSBD
 = 
	`xˇŒoc
(
tSBDLí
, (
ULONG
));

607 
iIndex
 = 0, 
ulTmp
 = 
ulSbdSèπblock
;

608 
iIndex
 < ()
tBBDLí
 && 
ulTmp
 !
END_OF_CHAIN
;

609 
iIndex
++, 
ulTmp
 = 
aulBBD
[ulTmp]) {

610 i‡(
ulTmp
 >(
ULONG
)
tBBDLí
) {

611 
	`DBG_DEC
(
ulTmp
);

612 
	`DBG_DEC
(
tBBDLí
);

613 
	`wîr
(1, "The Big Block Depot is damaged");

615 
aulSbdLi°
[
iIndex
] = 
ulTmp
;

616 
	`NO_DBG_HEX
(
aulSbdLi°
[
iIndex
]);

618 i‡(!
	`bGëSBD
(
pFûe
, 
aulSbdLi°
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
)) {

619 
	`FREE_ALL
();

622 
aulSbdLi°
 = 
	`x‰ì
(aulSbdList);

624 
tRoŸLi°Lí
 = 0, 
ulTmp
 = 
ulRoŸSèπblock
;

625 
tRoŸLi°Lí
 < 
tBBDLí
 && 
ulTmp
 !
END_OF_CHAIN
;

626 
tRoŸLi°Lí
++, 
ulTmp
 = 
aulBBD
[ulTmp]) {

627 i‡(
ulTmp
 >(
ULONG
)
tBBDLí
) {

628 
	`DBG_DEC
(
ulTmp
);

629 
	`DBG_DEC
(
tBBDLí
);

630 
	`wîr
(1, "The Big Block Depot is damaged");

633 i‡(
tRoŸLi°Lí
 == 0) {

634 
	`wîr
(0, "No Rootlist found");

635 
	`FREE_ALL
();

638 
aulRoŸLi°
 = 
	`xˇŒoc
(
tRoŸLi°Lí
, (
ULONG
));

639 
iIndex
 = 0, 
ulTmp
 = 
ulRoŸSèπblock
;

640 
iIndex
 < ()
tBBDLí
 && 
ulTmp
 !
END_OF_CHAIN
;

641 
iIndex
++, 
ulTmp
 = 
aulBBD
[ulTmp]) {

642 i‡(
ulTmp
 >(
ULONG
)
tBBDLí
) {

643 
	`DBG_DEC
(
ulTmp
);

644 
	`DBG_DEC
(
tBBDLí
);

645 
	`wîr
(1, "The Big Block Depot is damaged");

647 
aulRoŸLi°
[
iIndex
] = 
ulTmp
;

648 
	`NO_DBG_DEC
(
aulRoŸLi°
[
iIndex
]);

650 
	`Áû
(
tRoŸLi°Lí
 !(
size_t
)
iIndex
);

651 
bSuc˚ss
 = 
	`bGëPPS
(
pFûe
, 
aulRoŸLi°
, 
tRoŸLi°Lí
, &
PPS_öfo
);

652 
aulRoŸLi°
 = 
	`x‰ì
(aulRootList);

653 i‡(!
bSuc˚ss
) {

654 
	`FREE_ALL
();

658 i‡(!
	`bCª©eSmÆlBlockLi°
(
ulSBL°¨tblock
, 
aulBBD
, 
tBBDLí
)) {

659 
	`FREE_ALL
();

663 i‡(
PPS_öfo
.
tW‹dDocumít
.
ulSize
 < 
MIN_SIZE_FOR_BBD_USE
) {

664 
	`DBG_DEC
(
PPS_öfo
.
tW‹dDocumít
.
ulSize
);

665 
	`FREE_ALL
();

666 
	`wîr
(0, "I'máfraidÅheÅext stream ofÅhis file "

671 i‡(!
	`bRódBuf„r
(
pFûe
, 
PPS_öfo
.
tW‹dDocumít
.
ulSB
,

672 
aulBBD
, 
tBBDLí
, 
BIG_BLOCK_SIZE
,

673 
aucHódî
, 0, 
HEADER_SIZE
)) {

674 
	`FREE_ALL
();

677 
usIdít
 = 
	`usGëW‹d
(0x00, 
aucHódî
);

678 
	`DBG_HEX
(
usIdít
);

679 
	`Áû
(
usIdít
 != 0x8098 &&

680 
usIdít
 != 0x8099 &&

681 
usIdít
 != 0xa5dc &&

682 
usIdít
 != 0xa5ec &&

683 
usIdít
 != 0xa697 &&

684 
usIdít
 != 0xa699);

685 
iW‹dVîsi⁄
 = 
	`iGëVîsi⁄Numbî
(
aucHódî
);

686 i‡(
iW‹dVîsi⁄
 < 6) {

687 
	`FREE_ALL
();

688 
	`wîr
(0, "This file is fromá version of Word before Word 6.");

693 
usDocSètus
 = 
	`usGëW‹d
(0x0a, 
aucHódî
);

694 i‡(
usDocSètus
 & 
	`BIT
(9)) {

695 
PPS_öfo
.
tTabÀ
 = PPS_öfo.
t1TabÀ
;

697 
PPS_öfo
.
tTabÀ
 = PPS_öfo.
t0TabÀ
;

700 
	`mem£t
(&
PPS_öfo
.
t0TabÀ
, 0, (PPS_info.t0Table));

701 
	`mem£t
(&
PPS_öfo
.
t1TabÀ
, 0, (PPS_info.t1Table));

703 
bSuc˚ss
 = 
	`bGëDocumítText
(
pFûe
, &
PPS_öfo
,

704 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

705 
aucHódî
, 
iW‹dVîsi⁄
);

706 i‡(
bSuc˚ss
) {

707 
	`vGëPr›îtyInfo
(
pFûe
, &
PPS_öfo
,

708 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

709 
aucHódî
, 
iW‹dVîsi⁄
);

710 
	`vSëDeÁu…TabWidth
(
pFûe
, &
PPS_öfo
,

711 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

712 
aucHódî
, 
iW‹dVîsi⁄
);

713 
	`vGëNŸesInfo
(
pFûe
, &
PPS_öfo
,

714 
aulBBD
, 
tBBDLí
, 
aulSBD
, 
tSBDLí
,

715 
aucHódî
, 
iW‹dVîsi⁄
);

717 
	`FREE_ALL
();

718  
bSuc˚ss
 ? 
iW‹dVîsi⁄
 : -1;

719 
	}
}

	@wordtypes.h

9 #i‡!
deföed
(
__w‹dty≥s_h
)

10 
	#__w‹dty≥s_h
 1

	)

12 
	~<time.h
>

13 #i‡
deföed
(
__riscos
)

14 
	~"DeskLib:F⁄t.h
"

15 
	~"DeskLib:Wimp.h
"

18 
	tUCHAR
;

19 
	tUSHORT
;

20 
	tUINT
;

21 
	tULONG
;

23 #i‡
deföed
(
__riscos
)

24 
	sdügøm_èg
 {

25 
døwfûe_öfo
 
	mtInfo
;

26 
wödow_h™dÀ
 
	mtMaöWödow
;

27 
wödow_h™dÀ
 
	mtSˇÀWödow
;

28 
míu_±r
 
	mpSaveMíu
;

29 
	mlXÀ·
;

30 
	mlYt›
;

31 
size_t
 
	mtMem‹ySize
;

32 
	miSˇÀFa˘‹Cuº
;

33 
	miSˇÀFa˘‹Temp
;

34 
	mszFûíame
[19+1];

35 } 
	tdügøm_ty≥
;

37 
	sdügøm_èg
 {

38 
FILE
 *
	mpOutFûe
;

39 
	mlXÀ·
;

40 
	mlYt›
;

41 } 
	tdügøm_ty≥
;

42 
UCHAR
 
	tdøwfûe_f⁄åef
;

45 
	souçut_èg
 {

46 *
	mszSt‹age
;

47 
	mlSåögWidth
;

48 
size_t
 
	mtSt‹ageSize
;

49 
size_t
 
	mtNextFªe
;

50 
USHORT
 
	musF⁄tStyÀ
;

51 
USHORT
 
	musF⁄tSize
;

52 
UCHAR
 
	mucF⁄tCﬁ‹
;

53 
døwfûe_f⁄åef
 
	mtF⁄tRef
;

54 
ouçut_èg
 *
	mpPªv
;

55 
ouçut_èg
 *
	mpNext
;

56 } 
	touçut_ty≥
;

59 
	ec⁄vîsi⁄_èg
 {

60 
	mc⁄vîsi⁄_unknown
 = 0,

61 
	mc⁄vîsi⁄_ãxt
,

62 
	mc⁄vîsi⁄_døw
,

63 
	mc⁄vîsi⁄_ps
,

64 
	mc⁄vîsi⁄_xml
,

65 
	mc⁄vîsi⁄_pdf
,

66 
	mc⁄vîsi⁄_fmt_ãxt


67 } 
	tc⁄vîsi⁄_ty≥
;

70 
	eícodög_èg
 {

71 
	mícodög_√uåÆ
 = 100,

72 
	mícodög_œtö_1
 = 801,

73 
	mícodög_œtö_2
 = 802,

74 
	mícodög_cyrûlic
 = 805,

75 
	mícodög_utf_8
 = 1601

76 } 
	tícodög_ty≥
;

79 
	sf⁄t_èbÀ_èg
 {

80 
USHORT
 
	musF⁄tStyÀ
;

81 
UCHAR
 
	mucW‹dF⁄tNumbî
;

82 
UCHAR
 
	mucFFN
;

83 
UCHAR
 
	mucEmphasis
;

84 
UCHAR
 
	mucInU£
;

85 
	mszW‹dF⁄äame
[65];

86 
	mszOurF⁄äame
[33];

87 } 
	tf⁄t_èbÀ_ty≥
;

91 
	s›ti⁄s_èg
 {

92 
	miP¨agøphBªak
;

93 
c⁄vîsi⁄_ty≥
 
	meC⁄vîsi⁄Ty≥
;

94 
BOOL
 
	mbHideHiddíText
;

95 
BOOL
 
	mbRemoveRemovedText
;

96 
BOOL
 
	mbU£L™dsˇ≥
;

97 
ícodög_ty≥
 
	meEncodög
;

98 
	miPageHeight
;

99 
	miPageWidth
;

100 } 
	t›ti⁄s_ty≥
;

103 
	sµs_èg
 {

104 
ULONG
 
	mulSB
;

105 
ULONG
 
	mulSize
;

106 } 
	tµs_ty≥
;

107 
	sµs_öfo_èg
 {

108 
µs_ty≥
 
	mtW‹dDocumít
;

109 
µs_ty≥
 
	mtD©a
;

110 
µs_ty≥
 
	mtTabÀ
;

111 
µs_ty≥
 
	mtSumm¨yInfo
;

112 
µs_ty≥
 
	mtDocSumm¨yInfo
;

113 
µs_ty≥
 
	mt0TabÀ
;

114 
µs_ty≥
 
	mt1TabÀ
;

115 } 
	tµs_öfo_ty≥
;

118 
	sd©a_block_èg
 {

119 
ULONG
 
	mulFûeOff£t
;

120 
ULONG
 
	mulD©aPos
;

121 
ULONG
 
	mulLígth
;

122 } 
	td©a_block_ty≥
;

125 
	sãxt_block_èg
 {

126 
ULONG
 
	mulFûeOff£t
;

127 
ULONG
 
	mulCh¨Pos
;

128 
ULONG
 
	mulLígth
;

129 
BOOL
 
	mbU£sUnicode
;

130 
USHORT
 
	musPr›Mod
;

131 } 
	tãxt_block_ty≥
;

134 
	sdocumít_block_èg
 {

135 
time_t
 
	mtCª©eD©e
;

136 
time_t
 
	mtRevi£dD©e
;

137 
USHORT
 
	musDeÁu…TabWidth
;

138 
UCHAR
 
	mucHdrFåS≥cifiˇti⁄
;

139 } 
	tdocumít_block_ty≥
;

142 
	srow_block_èg
 {

143 
ULONG
 
	mulFûeOff£tSèπ
;

144 
ULONG
 
	mulFûeOff£tEnd
;

145 
ULONG
 
	mulCh¨PosSèπ
;

146 
ULONG
 
	mulCh¨PosEnd
;

147 
	masCﬁumnWidth
[
TABLE_COLUMN_MAX
+1];

148 
UCHAR
 
	mucNumbîOfCﬁumns
;

149 
UCHAR
 
	mucB‹dîInfo
;

150 } 
	trow_block_ty≥
;

153 
	eÀvñ_ty≥_èg
 {

154 
	mÀvñ_ty≥_n⁄e
 = 0,

155 
	mÀvñ_ty≥_ouéöe
,

156 
	mÀvñ_ty≥_numbîög
,

157 
	mÀvñ_ty≥_£quí˚
,

158 
	mÀvñ_ty≥_∑u£


159 } 
	tÀvñ_ty≥_íum
;

161 
	eli°_id_èg
 {

162 
	mno_li°
 = 0,

163 
	mãxt_li°
,

164 
	mfoŸnŸe_li°
,

165 
	mhdr·r_li°
,

166 
	mma¸o_li°
,

167 
	m™nŸ©i⁄_li°
,

168 
	mídnŸe_li°
,

169 
	mãxtbox_li°
,

170 
	mhdπextbox_li°
,

171 
	míd_of_li°s


172 } 
	tli°_id_íum
;

175 
	s°yÀ_block_èg
 {

176 
ULONG
 
	mulFûeOff£t
;

177 
li°_id_íum
 
	meLi°ID
;

178 
BOOL
 
	mbNumPau£
;

179 
BOOL
 
	mbNoRe°¨t
;

180 
USHORT
 
	musI°d
;

181 
USHORT
 
	musI°dNext
;

182 
USHORT
 
	musSèπAt
;

183 
USHORT
 
	musBef‹eIndít
;

184 
USHORT
 
	musA·îIndít
;

185 
USHORT
 
	musLi°Index
;

186 
USHORT
 
	musLi°Ch¨
;

187 
	msLe·Indít
;

188 
	msLe·Indít1
;

189 
	msRightIndít
;

190 
UCHAR
 
	mucAlignmít
;

191 
UCHAR
 
	mucNFC
;

192 
UCHAR
 
	mucNumLevñ
;

193 
UCHAR
 
	mucLi°Levñ
;

194 
	mszLi°Ch¨
[4];

195 } 
	t°yÀ_block_ty≥
;

198 
	sf⁄t_block_èg
 {

199 
ULONG
 
	mulFûeOff£t
;

200 
USHORT
 
	musF⁄tStyÀ
;

201 
USHORT
 
	musF⁄tSize
;

202 
UCHAR
 
	mucF⁄tNumbî
;

203 
UCHAR
 
	mucF⁄tCﬁ‹
;

204 } 
	tf⁄t_block_ty≥
;

207 
	spi˘uª_block_èg
 {

208 
ULONG
 
	mulFûeOff£t
;

209 
ULONG
 
	mulFûeOff£tPi˘uª
;

210 
ULONG
 
	mulPi˘uªOff£t
;

211 } 
	tpi˘uª_block_ty≥
;

214 
	s£˘i⁄_block_èg
 {

215 
BOOL
 
	mbNewPage
;

216 
USHORT
 
	musNìdPªvLvl
;

217 
USHORT
 
	musH™gögIndít
;

218 
UCHAR
 
	maucNFC
[9];

219 
UCHAR
 
	mucHdrFåS≥cifiˇti⁄
;

220 } 
	t£˘i⁄_block_ty≥
;

223 
	shdr·r_block_èg
 {

224 
ouçut_ty≥
 *
	mpText
;

225 
	mlHeight
;

226 } 
	thdr·r_block_ty≥
;

229 
	sfoŸnŸe_block_èg
 {

230 *
	mszText
;

231 } 
	tfoŸnŸe_block_ty≥
;

234 
	sli°_block_èg
 {

235 
ULONG
 
	mulSèπAt
;

236 
BOOL
 
	mbNoRe°¨t
;

237 
USHORT
 
	musLi°Ch¨
;

238 
	msLe·Indít
;

239 
UCHAR
 
	mucNFC
;

240 } 
	tli°_block_ty≥
;

243 
	eimagëy≥_èg
 {

244 
	mimagëy≥_is_unknown
 = 0,

245 
	mimagëy≥_is_exã∫Æ
,

246 
	mimagëy≥_is_emf
,

247 
	mimagëy≥_is_wmf
,

248 
	mimagëy≥_is_pi˘
,

249 
	mimagëy≥_is_j≥g
,

250 
	mimagëy≥_is_≤g
,

251 
	mimagëy≥_is_dib


252 } 
	timagëy≥_íum
;

255 
	ecom¥essi⁄_èg
 {

256 
	mcom¥essi⁄_unknown
 = 0,

257 
	mcom¥essi⁄_n⁄e
,

258 
	mcom¥essi⁄_æe4
,

259 
	mcom¥essi⁄_æe8
,

260 
	mcom¥essi⁄_j≥g
,

261 
	mcom¥essi⁄_zlib


262 } 
	tcom¥essi⁄_íum
;

265 
	simaged©a_èg
 {

267 
imagëy≥_íum
 
	meImageTy≥
;

269 
size_t
 
	mtPosôi⁄
;

270 
size_t
 
	mtLígth
;

271 
	miH‹SizeSˇÀd
;

272 
	miVîSizeSˇÀd
;

274 
	miWidth
;

275 
	miHeight
;

276 
	miComp⁄íts
;

277 
UINT
 
	muiBôsPîComp⁄ít
;

278 
BOOL
 
	mbAdobe
;

279 
com¥essi⁄_íum
 
	meCom¥essi⁄
;

280 
BOOL
 
	mbCﬁ‹Image
;

281 
	miCﬁ‹sU£d
;

282 
UCHAR
 
	maucPÆëã
[256][3];

283 } 
	timaged©a_ty≥
;

285 
	erow_öfo_èg
 {

286 
	mfound_nŸhög
,

287 
	mfound_a_˚Œ
,

288 
	mfound_nŸ_a_˚Œ
,

289 
	mfound_íd_of_row
,

290 
	mfound_nŸ_íd_of_row


291 } 
	trow_öfo_íum
;

293 
	enŸëy≥_èg
 {

294 
	mnŸëy≥_is_foŸnŸe
,

295 
	mnŸëy≥_is_ídnŸe
,

296 
	mnŸëy≥_is_unknown


297 } 
	tnŸëy≥_íum
;

299 
	eimage_öfo_èg
 {

300 
	mimage_no_öf‹m©i⁄
,

301 
	mimage_möimÆ_öf‹m©i⁄
,

302 
	mimage_fuŒ_öf‹m©i⁄


303 } 
	timage_öfo_íum
;

	@wordwin.c

9 
	~"™tiw‹d.h
"

17 
BOOL


18 
	$bGëDocumítText
(
FILE
 *
pFûe
, c⁄° 
UCHAR
 *
aucHódî
)

20 
ãxt_block_ty≥
 
tTextBlock
;

21 
ULONG
 
ulBegöOfText
;

22 
ULONG
 
ulTextLí
, 
ulFoŸnŸeLí
;

23 
ULONG
 
ulHdrFåLí
, 
ulMa¸oLí
, 
ulA¬Ÿ©i⁄Lí
;

24 
UINT
 
uiQuickSaves
;

25 
USHORT
 
usDocSètus
;

26 
BOOL
 
bTem∂©e
, 
bFa°Saved
, 
bEn¸y±ed
, 
bSuc˚ss
;

28 
	`Áû
(
pFûe
 =
NULL
);

29 
	`Áû
(
aucHódî
 =
NULL
);

31 
	`DBG_MSG
("bGetDocumentText");

34 
usDocSètus
 = 
	`usGëW‹d
(0x0a, 
aucHódî
);

35 
	`DBG_HEX
(
usDocSètus
);

36 
bTem∂©e
 = (
usDocSètus
 & 
	`BIT
(0)) != 0;

37 
	`DBG_MSG_C
(
bTem∂©e
, "This document isá Template");

38 
bFa°Saved
 = (
usDocSètus
 & 
	`BIT
(2)) != 0;

39 
uiQuickSaves
 = (
UINT
)(
usDocSètus
 & 0x00f0) >> 4;

40 
	`DBG_MSG_C
(
bFa°Saved
, "This document is Fast Saved");

41 
	`DBG_DEC_C
(
bFa°Saved
, 
uiQuickSaves
);

42 i‡(
bFa°Saved
) {

43 
	`wîr
(0, "Word2: fast saved documentsáreÇot supported yet");

44  
FALSE
;

46 
bEn¸y±ed
 = (
usDocSètus
 & 
	`BIT
(8)) != 0;

47 i‡(
bEn¸y±ed
) {

48 
	`wîr
(0, "Encrypted documentsáreÇot supported");

49  
FALSE
;

53 
ulBegöOfText
 = 
	`ulGëL⁄g
(0x18, 
aucHódî
);

54 
	`DBG_HEX
(
ulBegöOfText
);

55 
ulTextLí
 = 
	`ulGëL⁄g
(0x34, 
aucHódî
);

56 
ulFoŸnŸeLí
 = 
	`ulGëL⁄g
(0x38, 
aucHódî
);

57 
ulHdrFåLí
 = 
	`ulGëL⁄g
(0x3c, 
aucHódî
);

58 
ulMa¸oLí
 = 
	`ulGëL⁄g
(0x40, 
aucHódî
);

59 
ulA¬Ÿ©i⁄Lí
 = 
	`ulGëL⁄g
(0x44, 
aucHódî
);

60 
	`DBG_DEC
(
ulTextLí
);

61 
	`DBG_DEC
(
ulFoŸnŸeLí
);

62 
	`DBG_DEC
(
ulHdrFåLí
);

63 
	`DBG_DEC
(
ulMa¸oLí
);

64 
	`DBG_DEC
(
ulA¬Ÿ©i⁄Lí
);

65 i‡(
bFa°Saved
) {

66 
bSuc˚ss
 = 
FALSE
;

68 
tTextBlock
.
ulFûeOff£t
 = 
ulBegöOfText
;

69 
tTextBlock
.
ulCh¨Pos
 = 
ulBegöOfText
;

70 
tTextBlock
.
ulLígth
 = 
ulTextLí
 +

71 
ulFoŸnŸeLí
 +

72 
ulHdrFåLí
 + 
ulMa¸oLí
 + 
ulA¬Ÿ©i⁄Lí
;

73 
tTextBlock
.
bU£sUnicode
 = 
FALSE
;

74 
tTextBlock
.
usPr›Mod
 = 
IGNORE_PROPMOD
;

75 
bSuc˚ss
 = 
	`bAdd2TextBlockLi°
(&
tTextBlock
);

76 
	`DBG_HEX_C
(!
bSuc˚ss
, 
tTextBlock
.
ulFûeOff£t
);

77 
	`DBG_HEX_C
(!
bSuc˚ss
, 
tTextBlock
.
ulCh¨Pos
);

78 
	`DBG_DEC_C
(!
bSuc˚ss
, 
tTextBlock
.
ulLígth
);

79 
	`DBG_DEC_C
(!
bSuc˚ss
, 
tTextBlock
.
bU£sUnicode
);

80 
	`DBG_DEC_C
(!
bSuc˚ss
, 
tTextBlock
.
usPr›Mod
);

83 i‡(
bSuc˚ss
) {

84 
	`vS∂ôBlockLi°
(
pFûe
,

85 
ulTextLí
,

86 
ulFoŸnŸeLí
,

87 
ulHdrFåLí
,

88 
ulMa¸oLí
,

89 
ulA¬Ÿ©i⁄Lí
,

93 
FALSE
);

95 
	`vDe°royTextBlockLi°
();

96 
	`wîr
(0, "I can't findÅheÅext ofÅhis document");

98  
bSuc˚ss
;

99 
	}
}

107 
	$iInôDocumítWIN
(
FILE
 *
pFûe
, 
lFûesize
)

109 
iW‹dVîsi⁄
;

110 
BOOL
 
bSuc˚ss
;

111 
USHORT
 
usIdít
;

112 
UCHAR
 
aucHódî
[384];

114 
	`Áû
(
pFûe
 =
NULL
);

116 i‡(
lFûesize
 < 384) {

121 i‡(!
	`bRódByãs
(
aucHódî
, 384, 0x00, 
pFûe
)) {

125 
usIdít
 = 
	`usGëW‹d
(0x00, 
aucHódî
);

126 
	`DBG_HEX
(
usIdít
);

127 
	`Áû
(
usIdít
 != 0xa59b &&

128 
usIdít
 != 0xa5db);

129 
iW‹dVîsi⁄
 = 
	`iGëVîsi⁄Numbî
(
aucHódî
);

130 i‡(
iW‹dVîsi⁄
 != 1 && iWordVersion != 2) {

131 
	`wîr
(0, "This file isÇot from ''Win Word 1 or 2'.");

134 
bSuc˚ss
 = 
	`bGëDocumítText
(
pFûe
, 
aucHódî
);

135 i‡(
bSuc˚ss
) {

136 
	`vGëPr›îtyInfo
(
pFûe
, 
NULL
,

137 
NULL
, 0, NULL, 0,

138 
aucHódî
, 
iW‹dVîsi⁄
);

139 
	`vSëDeÁu…TabWidth
(
pFûe
, 
NULL
,

140 
NULL
, 0, NULL, 0,

141 
aucHódî
, 
iW‹dVîsi⁄
);

142 
	`vGëNŸesInfo
(
pFûe
, 
NULL
,

143 
NULL
, 0, NULL, 0,

144 
aucHódî
, 
iW‹dVîsi⁄
);

146  
bSuc˚ss
 ? 
iW‹dVîsi⁄
 : -1;

147 
	}
}

	@xmalloc.c

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"™tiw‹d.h
"

13 *
	gszMesßge
 =

15 #i‡
deföed
(
__dos
Ë&& !deföed(
__DJGPP__
)

16 *
	gszDosMesßge
 =

28 
	$xmÆloc
(
size_t
 
tSize
)

30 *
pvTmp
;

32 
	`TRACE_MSG
("xmalloc");

34 i‡(
tSize
 == 0) {

35 
tSize
 = 1;

37 
pvTmp
 = 
	`mÆloc
(
tSize
);

38 i‡(
pvTmp
 =
NULL
) {

39 
	`DBG_MSG
("xmallocÑeturned NULL");

40 
	`DBG_DEC
(
tSize
);

41 
	`wîr
(1, 
szMesßge
);

43  
pvTmp
;

44 
	}
}

52 
	$xˇŒoc
(
size_t
 
tNmemb
, size_à
tSize
)

54 *
pvTmp
;

56 
	`TRACE_MSG
("xcalloc");

58 #i‡
	`deföed
(
__dos
Ë&& !deföed(
__DJGPP__
)

59 i‡((
ULONG
)
tNmemb
 * (ULONG)
tSize
 > 0xffffUL) {

60 
	`DBG_DEC
((
ULONG
)
tNmemb
 * (ULONG)
tSize
);

61 
	`wîr
(1, 
szDosMesßge
);

65 i‡(
tNmemb
 =0 || 
tSize
 == 0) {

66 
tNmemb
 = 1;

67 
tSize
 = 1;

69 
pvTmp
 = 
	`ˇŒoc
(
tNmemb
, 
tSize
);

70 i‡(
pvTmp
 =
NULL
) {

71 
	`DBG_MSG
("xcallocÑeturned NULL");

72 
	`wîr
(1, 
szMesßge
);

74  
pvTmp
;

75 
	}
}

84 
	$xªÆloc
(*
pvArg
, 
size_t
 
tSize
)

86 *
pvTmp
;

88 
	`TRACE_MSG
("xrealloc");

90 
pvTmp
 = 
	`ªÆloc
(
pvArg
, 
tSize
);

91 i‡(
pvTmp
 =
NULL
) {

92 
	`DBG_MSG
("reallocÑeturned NULL");

93 
	`wîr
(1, 
szMesßge
);

95  
pvTmp
;

96 
	}
}

108 
	$x°rdup
(c⁄° *
szArg
)

110 *
szTmp
;

112 
	`TRACE_MSG
("xstrdup");

114 
szTmp
 = 
	`xmÆloc
(
	`°æí
(
szArg
) + 1);

115 
	`°r˝y
(
szTmp
, 
szArg
);

116  
szTmp
;

117 
	}
}

128 
	$x‰ì
(*
pvArg
)

130 
	`TRACE_MSG
("xfree");

132 i‡(
pvArg
 !
NULL
) {

133 
	`‰ì
(
pvArg
);

135  
NULL
;

136 
	}
}

	@/usr/include/ctype.h

23 #i‚def 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 
	g__BEGIN_DECLS


31 #i‚de‡
_ISbô


40 
	~<ídün.h
>

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

44 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

49 
	m_ISuµî
 = 
_ISbô
 (0),

50 
	m_ISlowî
 = 
_ISbô
 (1),

51 
	m_ISÆpha
 = 
_ISbô
 (2),

52 
	m_ISdigô
 = 
_ISbô
 (3),

53 
	m_ISxdigô
 = 
_ISbô
 (4),

54 
	m_IS•a˚
 = 
_ISbô
 (5),

55 
	m_IS¥öt
 = 
_ISbô
 (6),

56 
	m_ISgøph
 = 
_ISbô
 (7),

57 
	m_ISbœnk
 = 
_ISbô
 (8),

58 
	m_IS˙ål
 = 
_ISbô
 (9),

59 
	m_ISpun˘
 = 
_ISbô
 (10),

60 
	m_ISÆnum
 = 
_ISbô
 (11)

80 c⁄° **
	$__˘y≥_b_loc
 ()

81 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

82 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

83 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

84 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

85 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

88 #i‚de‡
__˝lu•lus


89 
	#__is˘y≥
(
c
, 
ty≥
) \

90 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

91 #ñi‡
deföed
 
__USE_EXTERN_INLINES


92 
	#__is˘y≥_f
(
ty≥
) \

93 
__exã∫_ölöe
 \

94 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

96  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

97 
	}

	)
}

100 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

101 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

103 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__ex˘y≥
 (
iß um
);

112 
__ex˘y≥
 (
ißÕha
);

113 
__ex˘y≥
 (
is˙ål
);

114 
__ex˘y≥
 (
isdigô
);

115 
__ex˘y≥
 (
i¶owî
);

116 
__ex˘y≥
 (
isgøph
);

117 
__ex˘y≥
 (
i•röt
);

118 
__ex˘y≥
 (
i•un˘
);

119 
__ex˘y≥
 (
is•a˚
);

120 
__ex˘y≥
 (
isuµî
);

121 
__ex˘y≥
 (
isxdigô
);

125 
	$tﬁowî
 (
__c
Ë
__THROW
;

128 
	$touµî
 (
__c
Ë
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__ex˘y≥
 (
isbœnk
);

139 
__END_NAMESPACE_C99


142 #ifde‡
__USE_GNU


144 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

147 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	$ißscii
 (
__c
Ë
__THROW
;

155 
	$tﬂscii
 (
__c
Ë
__THROW
;

159 
	`__ex˘y≥
 (
_touµî
);

160 
	`__ex˘y≥
 (
_tﬁowî
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

165 (
__exãnsi⁄__
 \

166 ({ 
__ªs
; \

167 i‡( (
c
) > 1) \

169 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

175 
__ªs
 = 
f
 
¨gs
; \

178 
__ªs
 = (
a
)[(Ë(
c
)]; \

179 
__ªs
; 
	}
}))

	)

181 #i‡!
deföed
 
__NO_CTYPE


182 #ifde‡
__is˘y≥_f


183 
	$__is˘y≥_f
 (
Ænum
)

184 
	$__is˘y≥_f
 (
Æpha
)

185 
	$__is˘y≥_f
 (
˙ål
)

186 
	$__is˘y≥_f
 (
digô
)

187 
	$__is˘y≥_f
 (
lowî
)

188 
	$__is˘y≥_f
 (
gøph
)

189 
	$__is˘y≥_f
 (
¥öt
)

190 
	$__is˘y≥_f
 (
pun˘
)

191 
	$__is˘y≥_f
 (
•a˚
)

192 
	$__is˘y≥_f
 (
uµî
)

193 
	$__is˘y≥_f
 (
xdigô
)

194 #ifde‡
__USE_ISOC99


195 
	$__is˘y≥_f
 (
bœnk
)

197 #ñi‡
deföed
 
__is˘y≥


198 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

199 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

200 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

201 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

202 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

203 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

204 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

205 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

206 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

207 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

208 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

209 #ifde‡
__USE_ISOC99


210 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

214 #ifde‡
__USE_EXTERN_INLINES


215 
__exã∫_ölöe
 

216 
	`__NTH
 (
	$tﬁowî
 (
__c
))

218  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

219 
	}
}

221 
__exã∫_ölöe
 

222 
__NTH
 (
	$touµî
 (
__c
))

224  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

225 
	}
}

228 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


229 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

230 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

233 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


234 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

235 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

237 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

238 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

244 #ifde‡
__USE_XOPEN2K8


258 
	~<xloˇÀ.h
>

262 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

263 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

265 
	#__ex˘y≥_l
(
«me
) \

266 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

272 
__ex˘y≥_l
 (
iß um_l
);

273 
__ex˘y≥_l
 (
ißÕha_l
);

274 
__ex˘y≥_l
 (
is˙ål_l
);

275 
__ex˘y≥_l
 (
isdigô_l
);

276 
__ex˘y≥_l
 (
i¶owî_l
);

277 
__ex˘y≥_l
 (
isgøph_l
);

278 
__ex˘y≥_l
 (
i•röt_l
);

279 
__ex˘y≥_l
 (
i•un˘_l
);

280 
__ex˘y≥_l
 (
is•a˚_l
);

281 
__ex˘y≥_l
 (
isuµî_l
);

282 
__ex˘y≥_l
 (
isxdigô_l
);

284 
__ex˘y≥_l
 (
isbœnk_l
);

288 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

289 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

293 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

295 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


296 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

297 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

298 
	#__touµî_l
(
c
, 
loˇÀ
) \

299 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

300 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

301 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

305 #i‚de‡
__NO_CTYPE


306 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

307 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

308 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

309 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

310 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

311 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

312 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

313 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

314 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

315 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

316 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

318 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

320 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


321 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

322 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

325 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

326 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

327 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

328 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

329 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

330 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

331 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

332 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

333 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

334 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

335 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

337 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

339 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


340 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

341 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/limits.h

23 #i‚de‡
_LIBC_LIMITS_H_


24 
	#_LIBC_LIMITS_H_
 1

	)

26 
	~<„©uªs.h
>

32 
	#MB_LEN_MAX
 16

	)

37 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

42 #i‚de‡
_LIMITS_H


43 
	#_LIMITS_H
 1

	)

45 
	~<bôs/w‹dsize.h
>

54 
	#CHAR_BIT
 8

	)

57 
	#SCHAR_MIN
 (-128)

	)

58 
	#SCHAR_MAX
 127

	)

61 
	#UCHAR_MAX
 255

	)

64 #ifde‡
__CHAR_UNSIGNED__


65 
	#CHAR_MIN
 0

	)

66 
	#CHAR_MAX
 
UCHAR_MAX


	)

68 
	#CHAR_MIN
 
SCHAR_MIN


	)

69 
	#CHAR_MAX
 
SCHAR_MAX


	)

73 
	#SHRT_MIN
 (-32768)

	)

74 
	#SHRT_MAX
 32767

	)

77 
	#USHRT_MAX
 65535

	)

80 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

81 
	#INT_MAX
 2147483647

	)

84 
	#UINT_MAX
 4294967295U

	)

87 #i‡
__WORDSIZE
 == 64

88 
	#LONG_MAX
 9223372036854775807L

	)

90 
	#LONG_MAX
 2147483647L

	)

92 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

95 #i‡
__WORDSIZE
 == 64

96 
	#ULONG_MAX
 18446744073709551615UL

	)

98 
	#ULONG_MAX
 4294967295UL

	)

101 #ifde‡
__USE_ISOC99


104 
	#LLONG_MAX
 9223372036854775807LL

	)

105 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

108 
	#ULLONG_MAX
 18446744073709551615ULL

	)

122 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


124 #ö˛ude_√xà<
limôs
.
h
>

130 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


131 #i‚de‡
LLONG_MIN


132 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

134 #i‚de‡
LLONG_MAX


135 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

137 #i‚de‡
ULLONG_MAX


138 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

142 #ifdef 
__USE_POSIX


144 
	~<bôs/posix1_lim.h
>

147 #ifdef 
__USE_POSIX2


148 
	~<bôs/posix2_lim.h
>

151 #ifdef 
__USE_XOPEN


152 
	~<bôs/x›í_lim.h
>

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

868 
deföed
 
__USE_MISC
)

873 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

879 
	`p˛o£
 (
FILE
 *
__°ªam
);

883 #ifdef 
__USE_POSIX


885 *
	$˘îmid
 (*
__s
Ë
__THROW
;

889 #ifde‡
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob°ack
;

899 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

900 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

901 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

902 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

903 c⁄° *
__ª°ri˘
 
__f‹m©
,

904 
_G_va_li°
 
__¨gs
)

905 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

909 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


913 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

917 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

920 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

923 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


927 
	#__√ed_gë›t


	)

928 
	~<gë›t.h
>

933 #ifde‡
__USE_EXTERN_INLINES


934 
	~<bôs/°dio.h
>

936 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


937 
	~<bôs/°dio2.h
>

939 #ifde‡
__LDBL_COMPAT


940 
	~<bôs/°dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_BSD


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__a
;

422 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

423 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

424 
	$î™d48_r
 (
__xsubi
[3],

425 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

426 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

429 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

430 *
__ª°ri˘
 
__ªsu…
)

431 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

432 
	$ƒ™d48_r
 (
__xsubi
[3],

433 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

434 *
__ª°ri˘
 
__ªsu…
)

435 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

438 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

439 *
__ª°ri˘
 
__ªsu…
)

440 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

441 
	$jønd48_r
 (
__xsubi
[3],

442 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

443 *
__ª°ri˘
 
__ªsu…
)

444 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

447 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

453 
	$lc⁄g48_r
 (
__∑øm
[7],

454 
dønd48_d©a
 *
__buf„r
)

455 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

461 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


462 
	#__mÆloc_™d_ˇŒoc_deföed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

467 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

468 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

482 
	$‰ì
 (*
__±r
Ë
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$c‰ì
 (*
__±r
Ë
__THROW
;

490 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


491 
	~<Æloˇ.h
>

494 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

495 || 
deföed
 
__USE_BSD


497 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

500 #ifde‡
__USE_XOPEN2K


502 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

503 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

506 #ifde‡
__USE_ISOC11


508 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

509 
__THROW
 
__wur
 
	`__©åibuã__
 ((
__mÆloc__
, 
	`__Æloc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

518 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

520 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


522 #ifde‡
__˝lu•lus


523 "C++" 
	`©_quick_exô
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

526 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

535 
__THROW
 
	`__n⁄nuŒ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

544 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


548 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

550 
__END_NAMESPACE_STD


552 #ifde‡
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

564 
__END_NAMESPACE_STD


566 #ifde‡
__USE_GNU


569 *
	$£cuª_gëív
 (c⁄° *
__«me
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

573 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


577 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

580 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


583 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

584 
__THROW
 
	`__n⁄nuŒ
 ((2));

587 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$˛óªnv
 (Ë
__THROW
;

598 #i‡
deföed
 
__USE_MISC
 \

599 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

605 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

609 || 
deföed
 
__USE_XOPEN2K8


618 #i‚de‡
__USE_FILE_OFFSET64


619 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

621 #ifde‡
__REDIRECT


622 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

623 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

625 
	#mk°emp
 
mk°emp64


	)

628 #ifde‡
__USE_LARGEFILE64


629 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

633 #ifde‡
__USE_MISC


640 #i‚de‡
__USE_FILE_OFFSET64


641 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

643 #ifde‡
__REDIRECT


644 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

645 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

647 
	#mk°emps
 
mk°emps64


	)

650 #ifde‡
__USE_LARGEFILE64


651 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

652 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

656 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


662 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

665 #ifde‡
__USE_GNU


672 #i‚de‡
__USE_FILE_OFFSET64


673 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

675 #ifde‡
__REDIRECT


676 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

677 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

679 
	#mko°emp
 
mko°emp64


	)

682 #ifde‡
__USE_LARGEFILE64


683 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

692 #i‚de‡
__USE_FILE_OFFSET64


693 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

694 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

696 #ifde‡
__REDIRECT


697 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

698 
__Êags
), 
mko°emps64
)

699 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

701 
	#mko°emps
 
mko°emps64


	)

704 #ifde‡
__USE_LARGEFILE64


705 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

706 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

724 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

727 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


733 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

734 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

739 #i‚de‡
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com∑r_‚_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

747 #ifde‡
__USE_GNU


748 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

755 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

756 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

760 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

761 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

762 #ifde‡
__USE_GNU


763 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

764 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

765 
	`__n⁄nuŒ
 ((1, 4));

770 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

771 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

772 
__END_NAMESPACE_STD


774 #ifde‡
__USE_ISOC99


775 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

776 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__numî
, 
__díom
)

785 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

787 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

788 
__END_NAMESPACE_STD


790 #ifde‡
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

793 
__díom
)

794 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

795 
__END_NAMESPACE_C99


799 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

800 || 
deföed
 
__USE_SVID


807 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

808 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

813 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

814 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

819 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

820 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

823 #ifde‡
__USE_MISC


825 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

826 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

827 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

828 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

829 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

830 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

831 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

832 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

837 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

838 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

839 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

841 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

842 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

845 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

846 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

847 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

849 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

850 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

851 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

863 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

866 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

870 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

871 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

873 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

874 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifde‡
__USE_SVID


884 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

888 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


895 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

896 *c⁄° *
__ª°ri˘
 
__tokís
,

897 **
__ª°ri˘
 
__vÆuï
)

898 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

902 #ifde‡
__USE_XOPEN


904 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

910 #ifde‡
__USE_XOPEN2KXSI


912 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

915 #ifde‡
__USE_XOPEN


920 
	$gø¡±
 (
__fd
Ë
__THROW
;

924 
	$u∆ock±
 (
__fd
Ë
__THROW
;

929 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

932 #ifde‡
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

937 
__THROW
 
	`__n⁄nuŒ
 ((2));

940 
	`gë±
 ();

943 #ifde‡
__USE_BSD


947 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

948 
__THROW
 
	`__n⁄nuŒ
 ((1));

951 
	~<bôs/°dlib-Êﬂt.h
>

954 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


955 
	~<bôs/°dlib.h
>

957 #ifde‡
__LDBL_COMPAT


958 
	~<bôs/°dlib-ldbl.h
>

962 #unde‡
__√ed_mÆloc_™d_ˇŒoc


964 
__END_DECLS


	@/usr/include/string.h

22 #i‚def 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


30 
	#__√ed_size_t


	)

31 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

35 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

43 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

46 *
	$memmove
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
)

47 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


54 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

65 
	$memcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

69 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

74 c⁄° *
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 #ifde‡
__OPTIMIZE__


78 
__exã∫_Æways_ölöe
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


81  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

84 
__exã∫_Æways_ölöe
 const *

85 
	`memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


87  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifde‡
__USE_GNU


100 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

103 "C++" c⁄° *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 *
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

111 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 "C++" c⁄° *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 *
	$memrchr
 (c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

126 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

128 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

129 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

130 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

133 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

134 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
,

137 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

140 
	$°rcmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

141 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°∫cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

147 
	$°rcﬁl
 (c⁄° *
__s1
, c⁄° *
__s2
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

151 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
 
	`__n⁄nuŒ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifde‡
__USE_XOPEN2K8


159 
	~<xloˇÀ.h
>

162 
	$°rcﬁl_l
 (c⁄° *
__s1
, c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

163 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

165 
size_t
 
	$°rx‰m_l
 (*
__de°
, c⁄° *
__§c
, 
size_t
 
__n
,

166 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

169 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

170 || 
deföed
 
__USE_XOPEN2K8


172 *
	$°rdup
 (c⁄° *
__s
)

173 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

179 #i‡
deföed
 
__USE_XOPEN2K8


180 *
	$°∫dup
 (c⁄° *
__°rög
, 
size_t
 
__n
)

181 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

184 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


186 
	#°rdu∑
(
s
) \

187 (
__exãnsi⁄__
 \

189 c⁄° *
__ﬁd
 = (
s
); \

190 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

191 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

192 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

193 
	}
}))

	)

196 
	#°∫du∑
(
s
, 
n
) \

197 (
__exãnsi⁄__
 \

199 c⁄° *
__ﬁd
 = (
s
); \

200 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

201 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

202 
__√w
[
__Àn
] = '\0'; \

203 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
°rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

214 c⁄° *
°rchr
 (c⁄° *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

217 #ifde‡
__OPTIMIZE__


218 
__exã∫_Æways_ölöe
 *

219 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


221  
__buûtö_°rchr
 (
__s
, 
__c
);

224 
__exã∫_Æways_ölöe
 const *

225 
°rchr
 (c⁄° *
__s
, 
__c
Ë
	g__THROW


227  
__buûtö_°rchr
 (
__s
, 
__c
);

232 *
	$°rchr
 (c⁄° *
__s
, 
__c
)

233 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

236 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`°ºchr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

241 c⁄° *
	`°ºchr
 (c⁄° *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 #ifde‡
__OPTIMIZE__


245 
__exã∫_Æways_ölöe
 *

246 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


248  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

251 
__exã∫_Æways_ölöe
 const *

252 
	`°ºchr
 (c⁄° *
__s
, 
__c
Ë
__THROW


254  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$°ºchr
 (c⁄° *
__s
, 
__c
)

260 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifde‡
__USE_GNU


267 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

270 "C++" c⁄° *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

273 *
	$°rch∫ul
 (c⁄° *
__s
, 
__c
)

274 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$°rc•n
 (c⁄° *
__s
, c⁄° *
__ªje˘
)

282 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

285 
size_t
 
	$°r•n
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

286 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
)

292 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

293 c⁄° *
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

294 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

296 #ifde‡
__OPTIMIZE__


297 
__exã∫_Æways_ölöe
 *

298 
	`°Ωbrk
 (*
__s
, c⁄° *
__ac˚±
Ë
__THROW


300  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

303 
__exã∫_Æways_ölöe
 const *

304 
	`°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
Ë
__THROW


306  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

309 
	}
}

311 *
	$°Ωbrk
 (c⁄° *
__s
, c⁄° *
__ac˚±
)

312 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

315 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

319 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

320 c⁄° *
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

321 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 #ifde‡
__OPTIMIZE__


324 
__exã∫_Æways_ölöe
 *

325 
	`°r°r
 (*
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


327  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

330 
__exã∫_Æways_ölöe
 const *

331 
	`°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
Ë
__THROW


333  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

336 
	}
}

338 *
	$°r°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

339 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

344 *
	$°πok
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
)

345 
__THROW
 
	`__n⁄nuŒ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

351 c⁄° *
__ª°ri˘
 
__dñim
,

352 **
__ª°ri˘
 
__ßve_±r
)

353 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

354 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


355 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

360 #ifde‡
__USE_GNU


362 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, c⁄° *
__√edÀ
)

364 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

365 "C++" c⁄° *
	$°rˇ£°r
 (c⁄° *
__hay°ack
,

366 c⁄° *
__√edÀ
)

367 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 *
	$°rˇ£°r
 (c⁄° *
__hay°ack
, c⁄° *
__√edÀ
)

370 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

374 #ifde‡
__USE_GNU


378 *
	$memmem
 (c⁄° *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

379 c⁄° *
__√edÀ
, 
size_t
 
__√edÀÀn
)

380 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

384 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

385 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

386 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

387 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

388 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

389 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$°æí
 (c⁄° *
__s
)

396 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$°∫Àn
 (c⁄° *
__°rög
, 
size_t
 
__maxÀn
)

403 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

410 
__END_NAMESPACE_STD


411 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


419 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


422 #ifde‡
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

424 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

425 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

427 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

428 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

434 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

435 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

439 #ifde‡
__USE_XOPEN2K8


441 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

447 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

449 #ifde‡
__USE_BSD


451 
	$bc›y
 (c⁄° *
__§c
, *
__de°
, 
size_t
 
__n
)

452 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

455 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

458 
	$bcmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

462 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`ödex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

467 c⁄° *
	`ödex
 (c⁄° *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

470 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__exã∫_Æways_ölöe
 *

472 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


474  
	`__buûtö_ödex
 (
__s
, 
__c
);

477 
__exã∫_Æways_ölöe
 const *

478 
	`ödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


480  
	`__buûtö_ödex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$ödex
 (c⁄° *
__s
, 
__c
)

486 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

490 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`rödex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

495 c⁄° *
	`rödex
 (c⁄° *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

498 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__exã∫_Æways_ölöe
 *

500 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


502  
	`__buûtö_rödex
 (
__s
, 
__c
);

505 
__exã∫_Æways_ölöe
 const *

506 
	`rödex
 (c⁄° *
__s
, 
__c
Ë
__THROW


508  
	`__buûtö_rödex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$rödex
 (c⁄° *
__s
, 
__c
)

514 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

519 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

523 #ifdef 
__USE_GNU


524 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

525 #ifde‡
__GNUC__


526 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

527 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

532 
	$°rˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

533 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

536 
	$°∫ˇ£cmp
 (c⁄° *
__s1
, c⁄° *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$°rˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

544 
__loˇÀ_t
 
__loc
)

545 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

547 
	$°∫ˇ£cmp_l
 (c⁄° *
__s1
, c⁄° *
__s2
,

548 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

549 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

556 c⁄° *
__ª°ri˘
 
__dñim
)

557 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

565 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

566 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

567 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, c⁄° *__ª°ri˘ 
__§c
)

568 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

572 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

573 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

575 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

576 c⁄° *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

577 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$°rvîscmp
 (c⁄° *
__s1
, c⁄° *
__s2
)

583 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

586 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

589 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #i‚de‡
ba£«me


596 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£«me
 (*
__fûíame
)

598 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

599 "C++" c⁄° *
	$ba£«me
 (c⁄° *
__fûíame
)

600 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

602 *
	$ba£«me
 (c⁄° *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

608 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

609 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

610 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


630 
	~<bôs/°rög.h
>

633 
	~<bôs/°rög2.h
>

636 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


638 
	~<bôs/°rög3.h
>

642 
__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_SVID


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #i‚def 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


32 #ifde‡
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #ñi‡
deföed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #ñi‡
deföed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #ñi‡
deföed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifde‡
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #ñi‡
deföed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #ñi‡
deföed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifde‡
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #ñi‡
deföed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #ñi‡
deföed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<bôs/posix_›t.h
>

205 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


206 
	~<bôs/ívú⁄míts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<bôs/ty≥s.h
>

219 #i‚def 
__ssize_t_deföed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_deföed


	)

224 
	#__√ed_size_t


	)

225 
	#__√ed_NULL


	)

226 
	~<°ddef.h
>

228 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


231 #i‚de‡
__gid_t_deföed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_deföed


	)

236 #i‚de‡
__uid_t_deföed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_deföed


	)

241 #i‚de‡
__off_t_deföed


242 #i‚de‡
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_deföed


	)

249 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_deföed


	)

254 #i‚de‡
__u£c⁄ds_t_deföed


255 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

256 
	#__u£c⁄ds_t_deföed


	)

259 #i‚de‡
__pid_t_deföed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_deföed


	)

265 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


266 #i‚de‡
__öçå_t_deföed


267 
__öçå_t
 
	töçå_t
;

268 
	#__öçå_t_deföed


	)

272 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


273 #i‚de‡
__sockÀn_t_deföed


274 
__sockÀn_t
 
	tsockÀn_t
;

275 
	#__sockÀn_t_deföed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$ac˚ss
 (c⁄° *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

289 #ifde‡
__USE_GNU


292 
	$euidac˚ss
 (c⁄° *
__«me
, 
__ty≥
)

293 
__THROW
 
	`__n⁄nuŒ
 ((1));

296 
	$óc˚ss
 (c⁄° *
__«me
, 
__ty≥
)

297 
__THROW
 
	`__n⁄nuŒ
 ((1));

300 #ifde‡
__USE_ATFILE


304 
	$Ác˚sßt
 (
__fd
, c⁄° *
__fûe
, 
__ty≥
, 
__Êag
)

305 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

310 #i‚def 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifde‡
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #i‚de‡
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

336 #ifde‡
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifde‡
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

346 
__THROW
;

353 
	`˛o£
 (
__fd
);

360 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

366 
ssize_t
 
	$wrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
Ë
__wur
;

368 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


369 #i‚de‡
__USE_FILE_OFFSET64


376 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

377 
__off_t
 
__off£t
Ë
__wur
;

384 
ssize_t
 
	$pwrôe
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
Ë
__wur
;

387 #ifde‡
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

389 
__off64_t
 
__off£t
),

390 
¥ód64
Ë
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, c⁄° *
__buf
,

392 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

393 
pwrôe64
Ë
__wur
;

395 
	#¥ód
 
¥ód64


	)

396 
	#pwrôe
 
pwrôe64


	)

400 #ifde‡
__USE_LARGEFILE64


404 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

405 
__off64_t
 
__off£t
Ë
__wur
;

408 
ssize_t
 
	$pwrôe64
 (
__fd
, c⁄° *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
Ë
__wur
;

417 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

419 #ifde‡
__USE_GNU


422 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

432 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

444 
	`¶ìp
 (
__£c⁄ds
);

446 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

447 || 
deföed
 
__USE_BSD


452 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

453 
__THROW
;

460 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

469 
	`∑u£
 ();

473 
	$chown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

476 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

483 
	$lchown
 (c⁄° *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

488 #ifde‡
__USE_ATFILE


491 
	$fchow«t
 (
__fd
, c⁄° *
__fûe
, 
__uid_t
 
__ow√r
,

492 
__gid_t
 
__group
, 
__Êag
)

493 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

497 
	$chdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

499 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


501 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

511 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

520 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

521 || 
deföed
 
__USE_BSD


525 *
	$gëwd
 (*
__buf
)

526 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

531 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

536 #ifde‡
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

543 **
__ívú⁄
;

544 #ifde‡
__USE_GNU


545 **
ívú⁄
;

551 
	$execve
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[],

552 *c⁄° 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

554 #ifde‡
__USE_XOPEN2K8


557 
	$„xecve
 (
__fd
, *c⁄° 
__¨gv
[], *c⁄° 
__ívp
[])

558 
__THROW
 
	`__n⁄nuŒ
 ((2));

563 
	$execv
 (c⁄° *
__∑th
, *c⁄° 
__¨gv
[])

564 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

568 
	$exe˛e
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

569 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

573 
	$exe˛
 (c⁄° *
__∑th
, c⁄° *
__¨g
, ...)

574 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

578 
	$execvp
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[])

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 
	$exe˛p
 (c⁄° *
__fûe
, c⁄° *
__¨g
, ...)

585 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

587 #ifde‡
__USE_GNU


590 
	$execv≥
 (c⁄° *
__fûe
, *c⁄° 
__¨gv
[],

591 *c⁄° 
__ívp
[])

592 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

596 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


598 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

603 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

609 
	~<bôs/c⁄‚ame.h
>

612 
	$∑thc⁄f
 (c⁄° *
__∑th
, 
__«me
)

613 
__THROW
 
	`__n⁄nuŒ
 ((1));

616 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

619 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

628 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

631 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

635 #i‚de‡
__FAVOR_BSD


636 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

638 #ifde‡
__REDIRECT_NTH


639 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

641 
	#gëpgΩ
 
__gëpgid


	)

646 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

647 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


648 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

655 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

657 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


668 #i‚de‡
__FAVOR_BSD


672 
	$£çgΩ
 (Ë
__THROW
;

677 #ifde‡
__REDIRECT_NTH


678 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

680 
	#£çgΩ
 
£çgid


	)

689 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

691 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


693 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

697 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

700 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

703 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

706 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

711 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

713 #ifdef 
__USE_GNU


715 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

724 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


727 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
 
__wur
;

730 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


732 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

741 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


744 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
 
__wur
;

747 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


749 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
 
__wur
;

752 #ifde‡
__USE_GNU


755 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

756 
__THROW
;

760 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

761 
__THROW
;

765 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

766 
__THROW
 
__wur
;

770 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

780 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

781 || 
deföed
 
__USE_BSD


786 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

792 *
	$ây«me
 (
__fd
Ë
__THROW
;

796 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

797 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

801 
	$ißây
 (
__fd
Ë
__THROW
;

803 #i‡
deföed
 
__USE_BSD
 \

804 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

807 
	$ây¶Ÿ
 (Ë
__THROW
;

812 
	$lök
 (c⁄° *
__‰om
, c⁄° *
__to
)

813 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

815 #ifde‡
__USE_ATFILE


818 
	$lök©
 (
__‰omfd
, c⁄° *
__‰om
, 
__tofd
,

819 c⁄° *
__to
, 
__Êags
)

820 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

823 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


825 
	$symlök
 (c⁄° *
__‰om
, c⁄° *
__to
)

826 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

831 
ssize_t
 
	$ªadlök
 (c⁄° *
__ª°ri˘
 
__∑th
,

832 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

833 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

836 #ifde‡
__USE_ATFILE


838 
	$symlök©
 (c⁄° *
__‰om
, 
__tofd
,

839 c⁄° *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

842 
ssize_t
 
	$ªadlök©
 (
__fd
, c⁄° *
__ª°ri˘
 
__∑th
,

843 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

844 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

848 
	$u∆ök
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

850 #ifde‡
__USE_ATFILE


852 
	$u∆ök©
 (
__fd
, c⁄° *
__«me
, 
__Êag
)

853 
__THROW
 
	`__n⁄nuŒ
 ((2));

857 
	$rmdú
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

861 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

864 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

871 *
	`gëlogö
 ();

872 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


879 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

882 #ifdef 
__USE_BSD


884 
	$£éogö
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

888 #ifdef 
__USE_POSIX2


892 
	#__√ed_gë›t


	)

893 
	~<gë›t.h
>

897 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


901 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

905 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

908 
	$£tho°«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

909 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

913 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

919 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

920 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

921 
	$£tdomaö«me
 (c⁄° *
__«me
, 
size_t
 
__Àn
)

922 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

928 
	$vh™gup
 (Ë
__THROW
;

931 
	$ªvoke
 (c⁄° *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

939 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

940 
size_t
 
__off£t
, 
__sˇÀ
)

941 
__THROW
 
	`__n⁄nuŒ
 ((1));

947 
	$ac˘
 (c⁄° *
__«me
Ë
__THROW
;

951 *
	$gëu£rshñl
 (Ë
__THROW
;

952 
	$ídu£rshñl
 (Ë
__THROW
;

953 
	$£tu£rshñl
 (Ë
__THROW
;

959 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

963 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

966 
	$chroŸ
 (c⁄° *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

970 *
	$gë∑ss
 (c⁄° *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

978 
	`fsync
 (
__fd
);

981 #ifde‡
__USE_GNU


984 
	$syncfs
 (
__fd
Ë
__THROW
;

988 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


991 
	`gëho°id
 ();

994 
	$sync
 (Ë
__THROW
;

997 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


1000 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

1005 
	$gëdèbÀsize
 (Ë
__THROW
;

1011 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


1014 #i‚de‡
__USE_FILE_OFFSET64


1015 
	$åunˇã
 (c⁄° *
__fûe
, 
__off_t
 
__Àngth
)

1016 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1018 #ifde‡
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
åunˇã
,

1020 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
),

1021 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1023 
	#åunˇã
 
åunˇã64


	)

1026 #ifde‡
__USE_LARGEFILE64


1027 
	$åunˇã64
 (c⁄° *
__fûe
, 
__off64_t
 
__Àngth
)

1028 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1033 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_POSIX199309
 \

1034 || 
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1037 #i‚de‡
__USE_FILE_OFFSET64


1038 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1040 #ifde‡
__REDIRECT_NTH


1041 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1042 
·runˇã64
Ë
__wur
;

1044 
	#·runˇã
 
·runˇã64


	)

1047 #ifde‡
__USE_LARGEFILE64


1048 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1054 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1055 || 
deföed
 
__USE_MISC


1059 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1065 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1069 #ifde‡
__USE_MISC


1080 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1085 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1097 
	#F_ULOCK
 0

	)

1098 
	#F_LOCK
 1

	)

1099 
	#F_TLOCK
 2

	)

1100 
	#F_TEST
 3

	)

1102 #i‚de‡
__USE_FILE_OFFSET64


1103 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1105 #ifde‡
__REDIRECT


1106 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1107 
lockf64
Ë
__wur
;

1109 
	#lockf
 
lockf64


	)

1112 #ifde‡
__USE_LARGEFILE64


1113 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1118 #ifde‡
__USE_GNU


1123 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1124 (
__exãnsi⁄__
 \

1125 ({ 
__ªsu…
; \

1126 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1127 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1128 
__ªsu…
; 
	}
}))

	)

1131 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1134 
fd©async
 (
__fûdes
);

1140 #ifdef 
__USE_XOPEN


1142 *
	$¸y±
 (c⁄° *
__key
, c⁄° *
__ß…
)

1143 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1147 
	$í¸y±
 (*
__libc_block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1154 
	$swab
 (c⁄° *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1155 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1161 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K


1163 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1168 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


1169 
	~<bôs/uni°d.h
>

1172 
__END_DECLS


	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_BSD
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 #i‡
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

75 
	#htﬁe64
(
x
Ë(x)

	)

76 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

77 
	#À64toh
(
x
Ë(x)

	)

81 
	#htobe16
(
x
Ë(x)

	)

82 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

83 
	#be16toh
(
x
Ë(x)

	)

84 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

86 
	#htobe32
(
x
Ë(x)

	)

87 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

88 
	#be32toh
(
x
Ë(x)

	)

89 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

91 #i‡
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
Ë(x)

	)

93 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

94 
	#be64toh
(
x
Ë(x)

	)

95 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #unde‡
__USE_ISOC11


99 #unde‡
__USE_ISOC99


100 #unde‡
__USE_ISOC95


101 #unde‡
__USE_ISOCXX11


102 #unde‡
__USE_POSIX


103 #unde‡
__USE_POSIX2


104 #unde‡
__USE_POSIX199309


105 #unde‡
__USE_POSIX199506


106 #unde‡
__USE_XOPEN


107 #unde‡
__USE_XOPEN_EXTENDED


108 #unde‡
__USE_UNIX98


109 #unde‡
__USE_XOPEN2K


110 #unde‡
__USE_XOPEN2KXSI


111 #unde‡
__USE_XOPEN2K8


112 #unde‡
__USE_XOPEN2K8XSI


113 #unde‡
__USE_LARGEFILE


114 #unde‡
__USE_LARGEFILE64


115 #unde‡
__USE_FILE_OFFSET64


116 #unde‡
__USE_BSD


117 #unde‡
__USE_SVID


118 #unde‡
__USE_MISC


119 #unde‡
__USE_ATFILE


120 #unde‡
__USE_GNU


121 #unde‡
__USE_REENTRANT


122 #unde‡
__USE_FORTIFY_LEVEL


123 #unde‡
__FAVOR_BSD


124 #unde‡
__KERNEL_STRICT_NAMES


128 #i‚de‡
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

144 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

151 #i‡
deföed
 
_BSD_SOURCE
 && \

152 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

153 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifde‡
_GNU_SOURCE


159 #unde‡
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #unde‡
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #unde‡
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #unde‡
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #unde‡
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #unde‡
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #unde‡
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #unde‡
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #unde‡
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #unde‡
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #unde‡
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

186 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

187 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #i‡(
deföed
 
_ISOC11_SOURCE
 \

194 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

200 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

206 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

215 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #unde‡
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #unde‡
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #unde‡
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #unde‡
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

274 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #unde‡
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #unde‡
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifde‡
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifde‡
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifde‡
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

329 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

330 #i‡
_FORTIFY_SOURCE
 > 1

331 
	#__USE_FORTIFY_LEVEL
 2

	)

333 
	#__USE_FORTIFY_LEVEL
 1

	)

336 
	#__USE_FORTIFY_LEVEL
 0

	)

341 
	~<°dc-¥edef.h
>

349 #unde‡
__GNU_LIBRARY__


350 
	#__GNU_LIBRARY__
 6

	)

354 
	#__GLIBC__
 2

	)

355 
	#__GLIBC_MINOR__
 17

	)

357 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

358 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

361 #i‡
deföed
 
__GNUC__
 \

362 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

363 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

364 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

365 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

369 #i‚de‡
__ASSEMBLER__


370 #i‚de‡
_SYS_CDEFS_H


371 
	~<sys/cdefs.h
>

376 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


377 
	#__USE_LARGEFILE
 1

	)

378 
	#__USE_LARGEFILE64
 1

	)

384 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

385 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

386 && 
deföed
 
	g__exã∫_ölöe


387 
	#__USE_EXTERN_INLINES
 1

	)

395 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

20 #i‚de‡
_GETOPT_H


22 #i‚de‡
__√ed_gë›t


23 
	#_GETOPT_H
 1

	)

33 #i‡!
deföed
 
__GNU_LIBRARY__


34 
	~<˘y≥.h
>

37 #i‚de‡
__THROW


38 #i‚de‡
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

41 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__˝lu•lus


58 *
›èrg
;

72 
›töd
;

77 
›ãº
;

81 
›t›t
;

83 #i‚de‡
__√ed_gë›t


105 
	s›ti⁄


107 c⁄° *
	g«me
;

110 
	ghas_¨g
;

111 *
	gÊag
;

112 
	gvÆ
;

117 
	#no_¨gumít
 0

	)

118 
	#ªquúed_¨gumít
 1

	)

119 
	#›ti⁄Æ_¨gumít
 2

	)

147 #ifde‡
__GNU_LIBRARY__


151 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

152 
__THROW
;

154 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

155 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


159 #ifde‡
__REDIRECT


160 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

161 c⁄° *
__sh‹t›ts
),

162 
__posix_gë›t
);

164 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

165 c⁄° *
__sh‹t›ts
Ë
__THROW
;

166 
	#gë›t
 
__posix_gë›t


	)

170 
gë›t
 ();

173 #i‚de‡
__√ed_gë›t


174 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

175 c⁄° *
__sh‹t›ts
,

176 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

177 
__THROW
;

178 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

179 c⁄° *
__sh‹t›ts
,

180 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

181 
__THROW
;

185 #ifdef 
__˝lu•lus


190 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

29 #i‚de‡
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_c⁄fig.h
>

34 
	#_IO_Âos_t
 
_G_Âos_t


	)

35 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

36 
	#_IO_size_t
 
size_t


	)

37 
	#_IO_ssize_t
 
__ssize_t


	)

38 
	#_IO_off_t
 
__off_t


	)

39 
	#_IO_off64_t
 
__off64_t


	)

40 
	#_IO_pid_t
 
__pid_t


	)

41 
	#_IO_uid_t
 
__uid_t


	)

42 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

43 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

44 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

45 
	#_IO_va_li°
 
_G_va_li°


	)

46 
	#_IO_wöt_t
 
wöt_t


	)

49 
	#__√ed___va_li°


	)

50 
	~<°d¨g.h
>

51 #ifde‡
__GNUC_VA_LIST


52 #unde‡
_IO_va_li°


53 
	#_IO_va_li°
 
__gnuc_va_li°


	)

56 #i‚de‡
__P


57 
	~<sys/cdefs.h
>

60 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

62 #i‚de‡
EOF


63 
	#EOF
 (-1)

	)

65 #i‚de‡
NULL


66 #i‡
deföed
 
__GNUG__
 && \

67 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

68 
	#NULL
 (
__nuŒ
)

	)

70 #i‡!
deföed
(
__˝lu•lus
)

71 
	#NULL
 ((*)0)

	)

73 
	#NULL
 (0)

	)

78 
	#_IOS_INPUT
 1

	)

79 
	#_IOS_OUTPUT
 2

	)

80 
	#_IOS_ATEND
 4

	)

81 
	#_IOS_APPEND
 8

	)

82 
	#_IOS_TRUNC
 16

	)

83 
	#_IOS_NOCREATE
 32

	)

84 
	#_IOS_NOREPLACE
 64

	)

85 
	#_IOS_BIN
 128

	)

93 
	#_IO_MAGIC
 0xFBAD0000

	)

94 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

95 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

96 
	#_IO_USER_BUF
 1

	)

97 
	#_IO_UNBUFFERED
 2

	)

98 
	#_IO_NO_READS
 4

	)

99 
	#_IO_NO_WRITES
 8

	)

100 
	#_IO_EOF_SEEN
 0x10

	)

101 
	#_IO_ERR_SEEN
 0x20

	)

102 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

103 
	#_IO_LINKED
 0x80

	)

104 
	#_IO_IN_BACKUP
 0x100

	)

105 
	#_IO_LINE_BUF
 0x200

	)

106 
	#_IO_TIED_PUT_GET
 0x400

	)

107 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

108 
	#_IO_IS_APPENDING
 0x1000

	)

109 
	#_IO_IS_FILEBUF
 0x2000

	)

110 
	#_IO_BAD_SEEN
 0x4000

	)

111 
	#_IO_USER_LOCK
 0x8000

	)

113 
	#_IO_FLAGS2_MMAP
 1

	)

114 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

115 #ifde‡
_LIBC


116 
	#_IO_FLAGS2_FORTIFY
 4

	)

118 
	#_IO_FLAGS2_USER_WBUF
 8

	)

119 #ifde‡
_LIBC


120 
	#_IO_FLAGS2_SCANF_STD
 16

	)

121 
	#_IO_FLAGS2_NOCLOSE
 32

	)

122 
	#_IO_FLAGS2_CLOEXEC
 64

	)

126 
	#_IO_SKIPWS
 01

	)

127 
	#_IO_LEFT
 02

	)

128 
	#_IO_RIGHT
 04

	)

129 
	#_IO_INTERNAL
 010

	)

130 
	#_IO_DEC
 020

	)

131 
	#_IO_OCT
 040

	)

132 
	#_IO_HEX
 0100

	)

133 
	#_IO_SHOWBASE
 0200

	)

134 
	#_IO_SHOWPOINT
 0400

	)

135 
	#_IO_UPPERCASE
 01000

	)

136 
	#_IO_SHOWPOS
 02000

	)

137 
	#_IO_SCIENTIFIC
 04000

	)

138 
	#_IO_FIXED
 010000

	)

139 
	#_IO_UNITBUF
 020000

	)

140 
	#_IO_STDIO
 040000

	)

141 
	#_IO_DONT_CLOSE
 0100000

	)

142 
	#_IO_BOOLALPHA
 0200000

	)

145 
_IO_jump_t
; 
	g_IO_FILE
;

148 #ifde‡
_IO_MTSAFE_IO


149 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

150 
	~<bôs/°dio-lock.h
>

155 
	t_IO_lock_t
;

161 
	s_IO_m¨kî
 {

162 
_IO_m¨kî
 *
	m_√xt
;

163 
_IO_FILE
 *
	m_sbuf
;

167 
	m_pos
;

169 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

170 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

171 
	mpublic
:

172 
°ªamm¨kî
(
°ªambuf
 *
sb
);

173 ~
°ªamm¨kî
();

174 
ßvög
(Ë{  
	m_•os
 == -2; }

175 
dñè
(
°ªamm¨kî
&);

176 
dñè
();

181 
	e__codecvt_ªsu…


183 
	m__codecvt_ok
,

184 
	m__codecvt_∑πül
,

185 
	m__codecvt_îr‹
,

186 
	m__codecvt_noc⁄v


189 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


192 
	s_IO_codecvt


194 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

195 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

196 
	m__mb°©e_t
 *,

197 c⁄° 
	mwch¨_t
 *,

198 c⁄° 
	mwch¨_t
 *,

199 c⁄° 
	mwch¨_t
 **, *,

201 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

202 
	m__mb°©e_t
 *, *,

204 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

205 
	m__mb°©e_t
 *,

207 c⁄° **, 
	mwch¨_t
 *,

208 
	mwch¨_t
 *, wchar_t **);

209 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

211 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

212 c⁄° *, c⁄° *, 
	m_IO_size_t
);

213 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

215 
_IO_ic⁄v_t
 
	m__cd_ö
;

216 
_IO_ic⁄v_t
 
	m__cd_out
;

220 
	s_IO_wide_d©a


222 
wch¨_t
 *
	m_IO_ªad_±r
;

223 
wch¨_t
 *
	m_IO_ªad_íd
;

224 
wch¨_t
 *
	m_IO_ªad_ba£
;

225 
wch¨_t
 *
	m_IO_wrôe_ba£
;

226 
wch¨_t
 *
	m_IO_wrôe_±r
;

227 
wch¨_t
 *
	m_IO_wrôe_íd
;

228 
wch¨_t
 *
	m_IO_buf_ba£
;

229 
wch¨_t
 *
	m_IO_buf_íd
;

231 
wch¨_t
 *
	m_IO_ßve_ba£
;

232 
wch¨_t
 *
	m_IO_backup_ba£
;

234 
wch¨_t
 *
	m_IO_ßve_íd
;

236 
__mb°©e_t
 
	m_IO_°©e
;

237 
__mb°©e_t
 
	m_IO_œ°_°©e
;

238 
_IO_codecvt
 
	m_codecvt
;

240 
wch¨_t
 
	m_sh‹tbuf
[1];

242 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

246 
	s_IO_FILE
 {

247 
	m_Êags
;

248 
	#_IO_fûe_Êags
 
_Êags


	)

252 * 
	m_IO_ªad_±r
;

253 * 
	m_IO_ªad_íd
;

254 * 
	m_IO_ªad_ba£
;

255 * 
	m_IO_wrôe_ba£
;

256 * 
	m_IO_wrôe_±r
;

257 * 
	m_IO_wrôe_íd
;

258 * 
	m_IO_buf_ba£
;

259 * 
	m_IO_buf_íd
;

261 *
	m_IO_ßve_ba£
;

262 *
	m_IO_backup_ba£
;

263 *
	m_IO_ßve_íd
;

265 
_IO_m¨kî
 *
	m_m¨kîs
;

267 
_IO_FILE
 *
	m_chaö
;

269 
	m_fûío
;

271 
	m_blksize
;

273 
	m_Êags2
;

275 
_IO_off_t
 
	m_ﬁd_off£t
;

277 
	#__HAVE_COLUMN


	)

279 
	m_cur_cﬁumn
;

280 sig√d 
	m_vèbÀ_off£t
;

281 
	m_sh‹tbuf
[1];

285 
_IO_lock_t
 *
	m_lock
;

286 #ifde‡
_IO_USE_OLD_IO_FILE


289 
	s_IO_FILE_com∂ëe


291 
_IO_FILE
 
	m_fûe
;

293 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

294 
_IO_off64_t
 
	m_off£t
;

295 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


297 
_IO_codecvt
 *
	m_codecvt
;

298 
_IO_wide_d©a
 *
	m_wide_d©a
;

299 
_IO_FILE
 *
	m_‰ìªs_li°
;

300 *
	m_‰ìªs_buf
;

301 
size_t
 
	m_‰ìªs_size
;

303 *
	m__∑d1
;

304 *
	m__∑d2
;

305 *
	m__∑d3
;

306 *
	m__∑d4
;

307 
size_t
 
	m__∑d5
;

309 
	m_mode
;

311 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

315 #i‚de‡
__˝lu•lus


316 
_IO_FILE
 
	t_IO_FILE
;

319 
	g_IO_FILE_∂us
;

321 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

322 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

323 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

324 #i‚de‡
_LIBC


325 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

326 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

327 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

329 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

330 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

331 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

339 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

347 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

348 
	tsize_t
 
	t__n
);

356 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

359 
	t__io_˛o£_‚
 (*
	t__cookõ
);

362 #ifde‡
_GNU_SOURCE


364 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

365 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

366 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

367 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

372 
__io_ªad_‚
 *
	mªad
;

373 
__io_wrôe_‚
 *
	mwrôe
;

374 
__io_£ek_‚
 *
	m£ek
;

375 
__io_˛o£_‚
 *
	m˛o£
;

376 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

377 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

379 
	g_IO_cookõ_fûe
;

382 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

383 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

387 #ifde‡
__˝lu•lus


391 
__undîÊow
 (
_IO_FILE
 *);

392 
__uÊow
 (
_IO_FILE
 *);

393 
__ovîÊow
 (
_IO_FILE
 *, );

394 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


395 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

396 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

397 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

400 #i‡ 
__GNUC__
 >= 3

401 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

403 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

406 
	#_IO_gëc_u∆ocked
(
_Â
) \

407 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

408 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

409 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

410 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

411 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

412 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

413 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

415 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

416 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

418 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


419 
	#_IO_gëwc_u∆ocked
(
_Â
) \

420 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

421 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

422 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

423 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

424 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

425 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

426 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

427 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

428 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

429 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

432 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

433 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

435 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

436 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

437 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

438 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

440 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

443 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

444 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

446 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

447 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

448 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

450 #ifde‡
_IO_MTSAFE_IO


451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
) \

453 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

454 
	#_IO_fu∆ockfûe
(
_Â
) \

455 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

457 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

458 
	#_IO_Êockfûe
(
_Â
Ë

	)

459 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

460 
	#_IO_·rylockfûe
(
_Â
Ë

	)

461 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

462 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

465 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

466 
_IO_va_li°
, *
__ª°ri˘
);

467 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

468 
_IO_va_li°
);

469 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

470 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

472 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

473 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

475 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

477 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


478 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

479 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

480 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

481 #i‡
__GNUC__
 >= 2

484 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


485 
	~<shlib-com∑t.h
>

486 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

487 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

488 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

489 c⁄° 
_IO_°dö_u£d
;

490 
wók_exã∫
 (
_IO_°dö_u£d
);

493 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


494 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

498 
	#_IO_fwide
(
__Â
, 
__mode
) \

499 ({ 
__ªsu…
 = (
__mode
); \

500 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

502 i‡((
__Â
)->
_mode
 == 0) \

504 (
__Â
)->
_mode
 = -1; \

505 
__ªsu…
 = (
__Â
)->
_mode
; \

507 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

508 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

510 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

511 
__ªsu…
; })

	)

514 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

515 
_IO_va_li°
, *
__ª°ri˘
);

516 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

517 
_IO_va_li°
);

518 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

519 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

522 #ifde‡
__LDBL_COMPAT


523 
	~<bôs/libio-ldbl.h
>

526 #ifde‡
__˝lu•lus


	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

150 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

151 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

158 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

159 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

164 
__THROW
 
__©åibuã_puª__
;

166 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©åibuã_puª__
;

168 
__END_NAMESPACE_STD


170 #ifde‡
__USE_XOPEN2K8


172 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

175 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

176 
size_t
 
__n
Ë
__THROW
;

180 
	~<xloˇÀ.h
>

182 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

183 
__loˇÀ_t
 
__loc
Ë
__THROW
;

185 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

196 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

197 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifde‡
__USE_XOPEN2K8


206 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

207 
__loˇÀ_t
 
__loc
Ë
__THROW
;

212 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

213 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

216 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
__©åibuã_puª__
;

231 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

233 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
__©åibuã_puª__
;

240 
__END_NAMESPACE_STD


242 #ifde‡
__USE_GNU


245 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

246 
__THROW
 
__©åibuã_puª__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

253 
__THROW
 
__©åibuã_puª__
;

256 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

257 
__THROW
 
__©åibuã_puª__
;

259 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

262 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

263 c⁄° 
wch¨_t
 *
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

266 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

267 
__THROW
 
__©åibuã_puª__
;

270 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

273 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

274 c⁄° 
wch¨_t
 *
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

277 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

278 
__THROW
 
__©åibuã_puª__
;

282 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

283 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

284 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

287 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

288 
__END_NAMESPACE_STD


290 #ifde‡
__USE_XOPEN


292 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

295 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

296 c⁄° 
wch¨_t
 *
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

299 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

300 
__THROW
 
__©åibuã_puª__
;

304 #ifde‡
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

307 
__THROW
 
__©åibuã_puª__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

316 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

320 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©åibuã_puª__
;

325 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©åibuã_puª__
;

329 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

330 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

334 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifde‡
__USE_GNU


344 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

345 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

357 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

361 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

365 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

366 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

367 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

370 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

371 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

374 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

376 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

377 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifde‡
__USE_EXTERN_INLINES


386 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

387 
__exã∫_ölöe
 
wöt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

392 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

393 
__exã∫_ölöe
 

394 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

395 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

396 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

398 
__exã∫_ölöe
 
size_t


399 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

400 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

401 {  (
__ps
 !
NULL


402 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

409 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

410 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

414 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

415 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

416 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

424 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

425 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

429 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

430 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

431 
size_t
 
__nwc
, size_à
__Àn
,

432 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

437 #ifde‡
__USE_XOPEN


439 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

443 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

451 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifde‡
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

458 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

459 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

460 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

469 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

473 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

474 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GNUC__
 && deföed 
__USE_GNU
)

479 
__BEGIN_NAMESPACE_C99


482 
__exãnsi⁄__


483 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

484 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

485 
__THROW
;

489 
__exãnsi⁄__


490 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

491 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

492 
__ba£
Ë
__THROW
;

493 
__END_NAMESPACE_C99


496 #i‡
deföed
 
__GNUC__
 && deföed 
__USE_GNU


499 
__exãnsi⁄__


500 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

501 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

502 
__THROW
;

506 
__exãnsi⁄__


507 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

508 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

509 
__ba£
Ë
__THROW
;

512 #ifde‡
__USE_GNU


526 
	~<xloˇÀ.h
>

530 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

531 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

532 
__loˇÀ_t
 
__loc
Ë
__THROW
;

534 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

535 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

536 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

538 
__exãnsi⁄__


539 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

540 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

541 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

543 
__exãnsi⁄__


544 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

545 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

546 
__ba£
, 
__loˇÀ_t
 
__loc
)

547 
__THROW
;

549 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

550 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

551 
__THROW
;

553 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

554 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

555 
__THROW
;

557 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

558 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

559 
__loˇÀ_t
 
__loc
Ë
__THROW
;

563 #ifde‡
__USE_XOPEN2K8


566 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

567 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

571 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

572 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

583 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

594 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

595 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

601 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

605 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

606 
__THROW
 ;

612 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

613 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

614 
__gnuc_va_li°
 
__¨g
)

620 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

621 
__gnuc_va_li°
 
__¨g
)

625 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

626 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

627 
__gnuc_va_li°
 
__¨g
)

628 
__THROW
 ;

635 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

636 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

642 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

646 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

647 
__THROW
 ;

649 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

650 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

651 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

652 #ifde‡
__REDIRECT


656 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

657 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

658 
__isoc99_fwsˇnf
)

660 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_wsˇnf
)

663 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

664 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

665 ...), 
__isoc99_swsˇnf
)

668 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

669 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

670 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

671 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

673 
__THROW
;

674 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

675 
	#wsˇnf
 
__isoc99_wsˇnf


	)

676 
	#swsˇnf
 
__isoc99_swsˇnf


	)

680 
__END_NAMESPACE_STD


683 #ifde‡
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

690 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

691 
__gnuc_va_li°
 
__¨g
)

697 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

698 
__gnuc_va_li°
 
__¨g
)

701 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

702 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

703 
__gnuc_va_li°
 
__¨g
)

704 
__THROW
 ;

706 #i‡!
deföed
 
__USE_GNU
 \

707 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

708 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

709 #ifde‡
__REDIRECT


710 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

711 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

712 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

714 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

717 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

718 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

719 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

722 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

723 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

724 
__gnuc_va_li°
 
__¨g
);

725 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

726 
__gnuc_va_li°
 
__¨g
);

727 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

728 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

730 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

731 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

732 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

746 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

752 
wöt_t
 
	`gëwch¨
 ();

759 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

760 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

766 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

774 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

775 
__FILE
 *
__ª°ri˘
 
__°ªam
);

781 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

782 
__FILE
 *
__ª°ri˘
 
__°ªam
);

789 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

790 
__END_NAMESPACE_STD


793 #ifde‡
__USE_GNU


801 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

802 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

810 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

818 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

827 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

828 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

837 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

838 
__FILE
 *
__ª°ri˘
 
__°ªam
);

846 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

847 
__FILE
 *
__ª°ri˘
 
__°ªam
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

856 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

857 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifde‡
__USE_GNU


861 
	~<xloˇÀ.h
>

865 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

866 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

867 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

868 
__loˇÀ_t
 
__loc
Ë
__THROW
;

877 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


878 
	#__√ed_iswxxx


	)

879 
	~<w˘y≥.h
>

883 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


884 
	~<bôs/wch¨2.h
>

887 #ifde‡
__LDBL_COMPAT


888 
	~<bôs/wch¨-ldbl.h
>

891 
__END_DECLS


899 #unde‡
__√ed_mb°©e_t


900 #unde‡
__√ed_wöt_t


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	~<bôs/¥edefs.h
>

34 
	#__STDC_ISO_10646__
 201103L

	)

37 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gc⁄v_°ï
;

65 
	g__gc⁄v_°ï_d©a
;

66 
	g__gc⁄v_lﬂded_obje˘
;

67 
	g__gc⁄v_å™s_d©a
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

85 
	t__gc⁄v_°ï_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
) (*, const *,

97 (*
	t__gc⁄v_å™s_quîy_f˘
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

102 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

104 
	s__gc⁄v_å™s_d©a


107 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

108 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

109 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

110 *
__d©a
;

111 
__gc⁄v_å™s_d©a
 *
__√xt
;

116 
	s__gc⁄v_°ï


118 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

119 c⁄° *
__mod«me
;

121 
__cou¡î
;

123 *
__‰om_«me
;

124 *
__to_«me
;

126 
__gc⁄v_f˘
 
__f˘
;

127 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

128 
__gc⁄v_öô_f˘
 
__öô_f˘
;

129 
__gc⁄v_íd_f˘
 
__íd_f˘
;

133 
__mö_√eded_‰om
;

134 
__max_√eded_‰om
;

135 
__mö_√eded_to
;

136 
__max_√eded_to
;

139 
__°©eful
;

141 *
__d©a
;

146 
	s__gc⁄v_°ï_d©a


148 *
__outbuf
;

149 *
__outbu„nd
;

153 
__Êags
;

157 
__övoˇti⁄_cou¡î
;

161 
__öã∫Æ_u£
;

163 
__mb°©e_t
 *
__°©ï
;

164 
__mb°©e_t
 
__°©e
;

168 
__gc⁄v_å™s_d©a
 *
__å™s
;

173 
	s__gc⁄v_öfo


175 
size_t
 
__n°ïs
;

176 
__gc⁄v_°ï
 *
__°ïs
;

177 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

178 } *
	t__gc⁄v_t
;

	@
1
.
1
/usr/include
71
940
antiword.h
asc85enc.c
blocklist.c
chartrans.c
datalist.c
debug.h
depot.c
doclist.c
fail.c
fail.h
finddata.c
findtext.c
fmt_text.c
fontinfo.h
fontlist.c
fonts.c
fonts_u.c
hdrftrlist.c
listlist.c
main_u.c
misc.c
notes.c
options.c
out2window.c
output.c
pictlist.c
prop0.c
prop2.c
prop6.c
prop8.c
properties.c
propmod.c
rowlist.c
sectlist.c
startup.c
stylelist.c
stylesheet.c
summary.c
tabstop.c
text.c
unix.c
utf8.c
version.h
word2text.c
wordconst.h
worddos.c
wordlib.c
wordmac.c
wordole.c
wordtypes.h
wordwin.c
xmalloc.c
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/limits.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/wctype.h
/usr/include/alloca.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/wchar.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
